{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./sources/utils/utils.js","webpack://[name]/./sources/core/ui/utils/dom_helpers.js","webpack://[name]/./sources/utils/helpers.js","webpack://[name]/./sources/utils/extends.js","webpack://[name]/./sources/utils/eventable.js","webpack://[name]/./sources/core/ui/render/viewport/get_visible_bars_range.js","webpack://[name]/./sources/core/ui/lightbox/controls/base_control.js","webpack://[name]/./sources/core/ui/grid/editors/editors/base.js","webpack://[name]/./sources/utils/is_headless.js","webpack://[name]/./sources/utils/env.js","webpack://[name]/./sources/core/ui/layout/cell.js","webpack://[name]/./sources/core/ui/lightbox/controls/select_control.js","webpack://[name]/./sources/core/ui/render/is_legacy_smart_render.js","webpack://[name]/./node_modules/webpack/buildin/global.js","webpack://[name]/./sources/utils/global.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","webpack://[name]/./sources/core/ui/render/viewport/is_column_visible.js","webpack://[name]/./sources/core/ui/render/viewport/get_visible_cells_range.js","webpack://[name]/./sources/core/ui/render/viewport/get_bg_row_rectangle.js","webpack://[name]/./sources/core/ui/render/task_bar_render.js","webpack://[name]/./sources/core/ui/render/viewport/is_bar_in_viewport.js","webpack://[name]/./sources/core/ui/timeline/timeline.js","webpack://[name]/./sources/core/ui/render/viewport/get_grid_row_rectangle.js","webpack://[name]/./sources/core/ui/mouse_event_container.js","webpack://[name]/./sources/core/ui/grid/grid.js","webpack://[name]/./sources/core/ui/timeline/scales.js","webpack://[name]/./sources/core/ui/utils/html_helpers.js","webpack://[name]/./sources/core/resource_timetable_builder.js","webpack://[name]/./sources/core/ui/layout/layout.js","webpack://[name]/./sources/core/worktime/strategy/work_unit_cache/index.ts","webpack://[name]/./sources/core/worktime/calendar_arguments_helper.js","webpack://[name]/./sources/core/ui/row_position_mixin.js","webpack://[name]/./sources/core/common/duration_formatter_numeric.ts","webpack://[name]/./sources/utils/task_tree_helpers.js","webpack://[name]/./sources/core/gantt_data_range.js","webpack://[name]/./sources/core/datastore/treedatastore.js","webpack://[name]/./sources/core/datastore/power_array.js","webpack://[name]/./sources/core/datastore/datastore.js","webpack://[name]/./node_modules/process/browser.js","webpack://[name]/./sources/utils/timeout.js","webpack://[name]/./sources/core/ui/utils/dom_event_scope.js","webpack://[name]/./sources/core/ui/wai_aria.js","webpack://[name]/./sources/core/ui/lightbox/lightbox_optional_time.js","webpack://[name]/./sources/core/ui/lightbox/controls/typeselect_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/constraint_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/parent_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/duration_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/radio_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/checkbox_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/time_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/textarea_control.js","webpack://[name]/./sources/core/ui/lightbox/controls/template_control.js","webpack://[name]/./sources/core/ui/lightbox/index.js","webpack://[name]/./sources/core/ui/touch.js","webpack://[name]/./sources/core/ui/plugins/timeline_zoom.ts","webpack://[name]/./sources/core/ui/plugins/dhtmlx_hooks.js","webpack://[name]/./sources/core/ui/plugins/jquery_hooks.js","webpack://[name]/./sources/core/ui/plugins/autoscroll.js","webpack://[name]/./sources/core/ui/plugins/index.js","webpack://[name]/./sources/css/skins/contrast_white.js","webpack://[name]/./sources/css/skins/contrast_black.js","webpack://[name]/./sources/css/skins/material.js","webpack://[name]/./sources/css/skins/broadway.js","webpack://[name]/./sources/css/skins/terrace.js","webpack://[name]/./sources/css/skins/meadow.js","webpack://[name]/./sources/css/skins/skyblue.js","webpack://[name]/./sources/core/ui/skin.js","webpack://[name]/./sources/core/facades/layout.js","webpack://[name]/./sources/core/data_task_layers.gpl.js","webpack://[name]/./sources/core/ui/main_layout_initializer.js","webpack://[name]/./sources/core/ui/timeline/links_dnd.js","webpack://[name]/./sources/core/ui/timeline/tasks_dnd.js","webpack://[name]/./sources/core/ui/timeline/main_timeline_initializer.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd_marker.js","webpack://[name]/./sources/core/ui/grid/tasks_grid_dnd.js","webpack://[name]/./sources/core/ui/grid/main_grid_initializer.js","webpack://[name]/./sources/core/ui/render/task_grid_row_resize_render.js","webpack://[name]/./sources/core/ui/render/resource_histogram_render.js","webpack://[name]/./sources/core/ui/render/resource_matrix_render.js","webpack://[name]/./sources/core/ui/render/task_grid_line_render.js","webpack://[name]/./sources/core/ui/render/viewport/is_link_in_viewport.js","webpack://[name]/./sources/core/ui/render/link_render.js","webpack://[name]/./sources/core/ui/render/task_bg_render.js","webpack://[name]/./sources/core/ui/render/task_rollup_render.js","webpack://[name]/./sources/core/ui/render/viewport/is_split_task_in_viewport.js","webpack://[name]/./sources/core/ui/render/task_split_render.js","webpack://[name]/./sources/core/ui/render/task_bar_smart_render.js","webpack://[name]/./sources/core/ui/grid/editors/linked_properties.js","webpack://[name]/./sources/core/ui/grid/editors/editors/duration.js","webpack://[name]/./sources/core/ui/grid/editors/editors/predecessor.js","webpack://[name]/./sources/core/ui/grid/editors/editors/date.js","webpack://[name]/./sources/core/ui/grid/editors/editors/select.js","webpack://[name]/./sources/core/ui/grid/editors/editors/number.js","webpack://[name]/./sources/core/ui/grid/editors/editors/text.js","webpack://[name]/./sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","webpack://[name]/./sources/core/ui/grid/editors/keyboard_mappings/default.js","webpack://[name]/./sources/core/ui/grid/editors/keyboard_mappings.js","webpack://[name]/./sources/core/ui/grid/editors/controller.js","webpack://[name]/./sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack://[name]/./sources/core/ui/layout/scrollbar_cell.js","webpack://[name]/./sources/core/ui/layout/resizer_cell.gpl.js","webpack://[name]/./sources/core/ui/layout/view_cell.js","webpack://[name]/./sources/core/ui/layout/view_layout.js","webpack://[name]/./sources/core/ui/render/viewport/is_in_viewport.js","webpack://[name]/./sources/core/ui/render/render_factory.js","webpack://[name]/./sources/core/ui/render/layer_engine.js","webpack://[name]/./sources/core/ui/gantt_layers.js","webpack://[name]/./sources/core/ui/mouse.js","webpack://[name]/./sources/core/ui/configurable.js","webpack://[name]/./sources/core/ui/ui_factory.js","webpack://[name]/./sources/core/ui/index.js","webpack://[name]/./sources/core/ui/message.js","webpack://[name]/./sources/core/ui_core.js","webpack://[name]/./sources/locale/locale_ua.ts","webpack://[name]/./sources/locale/locale_tr.ts","webpack://[name]/./sources/locale/locale_sv.ts","webpack://[name]/./sources/locale/locale_sk.ts","webpack://[name]/./sources/locale/locale_si.ts","webpack://[name]/./sources/locale/locale_ru.ts","webpack://[name]/./sources/locale/locale_ro.ts","webpack://[name]/./sources/locale/locale_pt.ts","webpack://[name]/./sources/locale/locale_pl.ts","webpack://[name]/./sources/locale/locale_no.ts","webpack://[name]/./sources/locale/locale_nl.ts","webpack://[name]/./sources/locale/locale_nb.ts","webpack://[name]/./sources/locale/locale_manager.ts","webpack://[name]/./sources/locale/locale_kr.ts","webpack://[name]/./sources/locale/locale_jp.ts","webpack://[name]/./sources/locale/locale_it.ts","webpack://[name]/./sources/locale/locale_id.ts","webpack://[name]/./sources/locale/locale_hu.ts","webpack://[name]/./sources/locale/locale_hr.ts","webpack://[name]/./sources/locale/locale_he.ts","webpack://[name]/./sources/locale/locale_fr.ts","webpack://[name]/./sources/locale/locale_fi.ts","webpack://[name]/./sources/locale/locale_fa.ts","webpack://[name]/./sources/locale/locale_es.ts","webpack://[name]/./sources/locale/locale_en.ts","webpack://[name]/./sources/locale/locale_el.ts","webpack://[name]/./sources/locale/locale_de.ts","webpack://[name]/./sources/locale/locale_da.ts","webpack://[name]/./sources/locale/locale_cs.ts","webpack://[name]/./sources/locale/locale_cn.ts","webpack://[name]/./sources/locale/locale_ca.ts","webpack://[name]/./sources/locale/locale_be.ts","webpack://[name]/./sources/locale/locale_ar.ts","webpack://[name]/./sources/locale/index.ts","webpack://[name]/./sources/publish_helpers/void_script_third.ts","webpack://[name]/./sources/core/destructor.js","webpack://[name]/./sources/core/common/assert.js","webpack://[name]/./sources/core/ui/resize_listener.js","webpack://[name]/./sources/core/gantt_core.js","webpack://[name]/./sources/core/cached_functions.js","webpack://[name]/./sources/core/data_task_types.js","webpack://[name]/./sources/publish_helpers/void_script_second.ts","webpack://[name]/./sources/core/data.js","webpack://[name]/./sources/core/facades/worktime_calendars.js","webpack://[name]/./sources/core/worktime/strategy/no_work_time.js","webpack://[name]/./sources/core/worktime/time_calculator.js","webpack://[name]/./sources/core/worktime/dynamic_resource_calendars.js","webpack://[name]/./sources/core/worktime/legacy_resource_config.js","webpack://[name]/./sources/core/worktime/strategy/work_unit_cache/larger_units_helper.ts","webpack://[name]/./sources/core/worktime/strategy/work_unit_cache/workunit_object_cache.ts","webpack://[name]/./sources/core/worktime/strategy/work_unit_cache/workunit_map_cache.ts","webpack://[name]/./sources/core/worktime/strategy/calendar_strategy.js","webpack://[name]/./sources/core/worktime/strategy/work_calendar_merger.js","webpack://[name]/./sources/core/worktime/calendar_manager.js","webpack://[name]/./sources/core/worktime/work_time.js","webpack://[name]/./sources/core/load.js","webpack://[name]/./sources/core/tasks.js","webpack://[name]/./sources/core/grid_column_api.gpl.js","webpack://[name]/./sources/core/ui/plugins/column_grid_dnd/scrollable_grid.ts","webpack://[name]/./sources/core/ui/plugins/column_grid_dnd/column_grid_dnd.ts","webpack://[name]/./sources/core/ui/plugins/column_grid_dnd/index.ts","webpack://[name]/./sources/core/ui/grid/task_grid_row_resize.js","webpack://[name]/./sources/core/ui/row_position_fixed_height.js","webpack://[name]/./sources/core/ui/grid/grid_resize.gpl.js","webpack://[name]/./sources/core/grid_column_api.js","webpack://[name]/./sources/core/dynamic_loading.js","webpack://[name]/./sources/core/common/link_formatter_simple.ts","webpack://[name]/./sources/core/plugins/formatters.js","webpack://[name]/./sources/core/plugins/auto_task_types.js","webpack://[name]/./sources/core/plugins/new_task_placeholder.js","webpack://[name]/./sources/core/plugins/resource_assignments.js","webpack://[name]/./sources/core/plugins/resources.js","webpack://[name]/./sources/core/plugins/wbs.js","webpack://[name]/./sources/core/plugins/batch_update.js","webpack://[name]/./sources/core/plugins/index.js","webpack://[name]/./sources/core/dataprocessor/simple_storage.ts","webpack://[name]/./sources/core/dataprocessor/extend_gantt.ts","webpack://[name]/./sources/core/dataprocessor/data_processor_events.ts","webpack://[name]/./sources/core/dataprocessor/data_processor.ts","webpack://[name]/./sources/core/dataprocessor/index.js","webpack://[name]/./sources/core/datastore/datastore_render.js","webpack://[name]/./sources/core/datastore/select.js","webpack://[name]/./sources/core/facades/datastore_links.js","webpack://[name]/./sources/core/facades/datastore_tasks.js","webpack://[name]/./sources/core/facades/datastore.js","webpack://[name]/./sources/core/datastore/datastore_hooks.js","webpack://[name]/./node_modules/setimmediate/setImmediate.js","webpack://[name]/./node_modules/timers-browserify/main.js","webpack://[name]/./node_modules/bluebird/js/browser/bluebird.js","webpack://[name]/./sources/utils/promise.js","webpack://[name]/./sources/core/common/state.js","webpack://[name]/./sources/core/common/templates.js","webpack://[name]/./sources/core/common/dnd.js","webpack://[name]/./sources/core/common/date_parsers/csp_compliant_version.ts","webpack://[name]/./sources/core/common/date_parsers/fast_version.ts","webpack://[name]/./sources/core/common/date.js","webpack://[name]/./sources/core/common/serialize.ts","webpack://[name]/./sources/core/common/ajax.js","webpack://[name]/./sources/core/common/config.ts","webpack://[name]/./sources/core/common/services.js","webpack://[name]/./sources/ext/extension_manager.ts","webpack://[name]/./sources/constants/index.js","webpack://[name]/./sources/factory/make_instance_common.js","webpack://[name]/./sources/factory/make_instance_web.js","webpack://[name]/./sources/ext/undo/undo.ts","webpack://[name]/./sources/ext/undo/monitor.ts","webpack://[name]/./sources/ext/undo/index.ts","webpack://[name]/./sources/ext/tooltip/tooltip.ts","webpack://[name]/./sources/ext/tooltip/tooltipManager.ts","webpack://[name]/./sources/ext/tooltip/index.ts","webpack://[name]/./sources/ext/quick_info/quickInfo.ts","webpack://[name]/./sources/ext/quick_info/index.ts","webpack://[name]/./sources/ext/multiselect.js","webpack://[name]/./sources/ext/marker.js","webpack://[name]/./sources/ext/keyboard_navigation/core.js","webpack://[name]/./sources/ext/keyboard_navigation/modals.js","webpack://[name]/./sources/ext/keyboard_navigation/elements/task_cell.js","webpack://[name]/./sources/ext/keyboard_navigation/elements/task_row.js","webpack://[name]/./sources/ext/keyboard_navigation/elements/header_cell.js","webpack://[name]/./sources/ext/keyboard_navigation/elements/nav_node.js","webpack://[name]/./sources/ext/keyboard_navigation/elements/gantt_node.js","webpack://[name]/./sources/ext/keyboard_navigation/common/trap_modal_focus.js","webpack://[name]/./sources/ext/keyboard_navigation/common/eventhandler.js","webpack://[name]/./sources/ext/keyboard_navigation/common/keyboard_shortcuts.js","webpack://[name]/./sources/ext/keyboard_navigation.js","webpack://[name]/./sources/ext/fullscreen/index.ts","webpack://[name]/./sources/ext/drag_timeline/eventsManager.ts","webpack://[name]/./sources/ext/drag_timeline/index.ts","webpack://[name]/./sources/ext/click_drag/selectedRegion.ts","webpack://[name]/./sources/ext/click_drag/eventsManager.ts","webpack://[name]/./sources/ext/click_drag/index.ts","webpack://[name]/./sources/ext/extensions_gpl.ts","webpack://[name]/./sources/dhtmlxgantt.gpl.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","seed","helpers","copy","result","isDate","Date","isArray","Array","length","isStringObject","String","isNumberObject","Number","isBooleanObject","Boolean","constructor","toString","isCustomType","apply","defined","obj","mixin","target","source","force","f","undefined","uid","valueOf","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getClassName","className","baseVal","indexOf","_trimString","_slave","getTargetNode","e","tagName","srcElement","str","trim","this","replace","getNodePosition","getFocusableNodes","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","createElement","cssText","appendChild","clientWidth","removeChild","addClassName","removeClassName","split","regEx","RegExp","insertNode","newone","innerHTML","child","firstChild","removeNode","getChildNodes","css","ch","childNodes","len","out","push","toNode","getElementById","querySelector","locateClassName","classname","strict","trg","ind","charAt","locateAttribute","attribute","getRelativeEventPosition","ev","clientX","clientY","isChildOf","parent","hasClass","element","classList","contains","test","closest","selector","matches","msMatchesSelector","webkitMatchesSelector","parentElement","nodeType","console","error","units","second","minute","hour","day","week","month","quarter","year","getFullYear","getMonth","getDate","arrayFilter","arr","callback","filter","checkZeroId","id","getSecondsInUnit","unit","forEach","workArray","arrayMap","map","resArray","arrayIncludes","item","includes","arrayFind","find","arrayDifference","arraySome","hashToArray","hash","sortArrayOfHash","field","desc","compare","b","sort","throttle","timeout","wait","setTimeout","pop","isValidDate","getTime","Function","delay","timer","$cancelTimeout","$pending","args","clearTimeout","$execute","objectKeys","keys","isEventable","replaceValidZeroId","rootId","findBinary","array","prev","low","high","floor","__","EventHost","_silent_mode","listeners","_silentStart","_silentEnd","createEventStorage","handlers","index","eventStorage","combinedResult","handlerResult","addEvent","settings","handlerId","once","originalHandler","removeEvent","clear","eventHost","eventName","thisObject","attachAll","callEvent","eventArguments","handlerName","concat","checkEvent","list","eventId","detachAllEvents","gantt","view","config","datastore","viewport","start","getItemIndexByTopPosition","end","y_end","count","max","min","dummy","log","BaseControl","render","set_value","get_value","focus","BaseEditor","show","column","placeholder","hide","get_input","is_changed","currentValue","is_valid","save","utils","isNode","$root","isWindowAwailable","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","eventable","domHelpers","Cell","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","html","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","cellIndex","moveView","hidden","$toHTML","content","header","raw","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","cssHash","xLayout","transform","__extends","htmlHelpers","_super","SelectControl","sns","getHtmlSelect","options","_dhx_onchange","onchange","_focus","smart_rendering","_smart_render","g","eval","globalScope","global","createDropTargetObject","res","targetParent","targetIndex","targetId","nextSibling","prevSibling","nextSiblingTarget","dndTaskId","targetTaskId","store","getParent","getBranchIndex","prevSiblingTarget","firstChildTarget","lastChildTarget","children","getChildren","isLegacyRender","columnIndex","scale","viewPort","cellLeftCoord","cellRightCoord","x_end","firstCellIndex","lastCellIndex","getItemTop","getItemHeight","Infinity","_task_default_render","task","_isAllowedUnscheduledTask","_isTaskInTimelineLimits","pos","getItemPosition","cfg","templates","$getTemplates","taskType","getTaskType","type","getBarHeight","types","milestone","controlsMargin","padd","item_attribute","setAttribute","show_progress","done","progress","pr","progressColor","backgroundColor","opacity","progress_text","start_date","end_date","rtl","position","wrapper","drag_progress","isReadonly","drag","markerPos","_render_task_progress","task_text","_render_task_content","textColor","color","basic","template","itemId","$getConfig","state","getState","getTask","project","isSummaryTask","isSplitTask","open_split_tasks","$open","select_task","isSelectedTask","drag_id","drag_mode","touch_drag","link_source_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","from_start","link_from_start","to_start","link_to_start","allowDrag","isLinkAllowed","dragClass","_combine_item_class","task_class","styles","side","margin","_get_link_crossing_css","marginStyle","_render_side_content","leftside_text","_render_leftside_content","rightside_text","_render_rightside_content","_waiAria","setTaskBarAttr","drag_resize","_render_pair","drag_links","show_links","outer","inner","showLinkPoints","touch","cssClass","text","abs","cond","leftside","$source","links","start_to_start","$target","finish_to_start","finish_to_finish","_get_conditions","ln","link","getLink","tp","min_date","marginLeft","max_date","marginRight","renderer","type_renderers","defaultRenderer","startCoord","posFromDate","endCoord","ScaleHelper","topPositionMixin","canvasRender","Timeline","$scaleHelper","_posFromDateCache","_timelineDragScroll","container","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","attr","linksAttr","bindLinks","link_attribute","layers","_createLayerConfig","tasks","linkLayers","_attachLayers","ext","dragTimeline","attach","dataHeight","scale_height","refresh","backgroundImage","rowStore","getTotalHeight","data_els","contentHeight","contentWidth","scrollHeight","scrollWidth","scrolled","_refreshScales","smart_scales","getViewPort","scales","_scales","_getScaleChunkHtml","taskFilter","expose","$ui","taskBar","hide_bar","taskSplitBar","append","taskRollupBar","taskBg","_taskLayers","_linkLayers","_bindStore","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","update","bar_layer","addLayer","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","getDatastore","linkRenderer","linkLayer","_linkRenderer","staticRender","_staticBgHandler","static_background","staticBgContainer","$task_bg_static","insertBefore","getScale","destroy","_clearLayers","removeLayer","_render_tasks_scales","scales_html","outer_width","_getScales","availWidth","autosize","autosize_min_width","cfgs","prepareConfigs","min_column_width","fromPos","toPos","scale_row_class","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","cells","date","format","date_to_str","startIndex","endIndex","inherit_scale_class","scale_cell_class","cssclass","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","dateValue","columnIndexByDate","assert","wholeCells","partCell","roundPos","_getNextVisibleColumn","columns","ignores","visibleDateIndex","_getPrevVisibleColumn","_getClosestVisibleColumn","days","trace_x_ascending","ignore_x","dateIndex","visibleIndex","visibleDate","transition","trace_index_transition","xLeft","xRight","rowHeight","taskId","isMilestoneRender","getItem","task_height","bar_height","task_height_offset","sqrt","primaryScale","getSubScales","sortScales","add","step","_timelineCacheAttached","_resetTopPositionHeight","_unbindStore","_resetHeight","events","mouseEvents","h","gridResize","rowResize","ColumnDnd","default","Grid","$state","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","_ganttConfig","reorderColumns","reorder_grid_columns","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","_columnDND","_validateColumnWidth","numericWidth","outerWidth","getGridColumns","innerWidth","elasticColumns","grid_elastic_columns","scrollable","_setColumnsWidth","col","min_width","min_grid_column_width","columnsWidth","grid_width","_getGridWidth","_gridCacheAttached","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getColumnIndex","excludeHidden","hiddenIndexShift","getColumn","gridLine","gridTaskRowResizer","resize_rows","_refreshPlaceholderOnStoreUpdate","scrollY","scroll","getView","getScrollState","scrollSize","$rowsPlaceholder","close","open","_getColumnWidth","new_width","max_width","_checkGridColumnMinWidthLimits","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","locale","reverse","labels","lineHeigth","last","colWidth","_sort","direction","grid_header_class","label","gridScaleCellAttrString","lineHeight","dateHelper","services","getSum","sizes","from","to","setSumWidth","sum_width","parts","adjustSize","splitSize","full","cellSize","_isLegacyMode","scaleConfig","scale_unit","date_scale","subscales","_prepareScaleObject","legacyMode","initTemplate","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","display_count","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","lastDate","outDate","shared","attributes","_this","entry","_attributes","getHtmlOption","_getHtmlContainer","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","_getHtmlAttributes","tag","resourceTaskCache","$data","tasksStore","resource","resourceProperty","timeline","cacheKey","items","assignmentsPassed","timegrid","process_resource_assignments","resource_property","$role","getResourceAssignments","$resource_id","$task_id","getTaskBy","assignments","scaleUnit","scaleStep","precalculatedTimes","task_id","firstColumn","currDate","calendar","work_time","getTaskCalendar","cachedTimes","timestamp","calculateResourceLoadFromAssignments","timetable","resource_render_empty_cells","calculateResourceLoad","Layout","_parseConfig","$cells","_resizeScrollbars","scrollbars","scrollbar","scrollChanged","visibleScrollbars","hiddenSrollbars","showScrollbar","hideScrollbar","shouldHide","shouldShow","visibleGroups","group","j","$scrollbarRepaint","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","code","isChild","cellId","sub","alert","rows","cols","views","initUI","getCells","_cleanElSize","_getBoxStyles","computed","properties","boxSizing","clientHeight","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","workunit_map_cache_1","workunit_object_cache_1","larger_units_helper_1","LargerUnitsCache","createCacheObject","Map","WorkUnitsMapCache","WorkUnitsObjectCache","IsWorkTimeArgument","ClosestWorkTimeArgument","dir","CalculateEndDateArgument","duration","GetDurationArgument","getWorkHoursArguments","Error","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","quickPositionHelperFactory","getItemTopCache","getRowTopCache","getItemHeightCache","totalHeightCache","getItemHeightCacheState","quickPosition","resetCache","newState","getCacheStateTotalHeight","shouldClearHeightCache","getRowTop","canUseSimpleCalculation","all","getIndexRange","itemIndex","getIndexById","exists","parentId","_fillHeightCache","defaultHeight","row_height","eachItem","globalHeight","itemHeightCache","sumHeight","oldState","newValue","getHeight","totalHeight","getVisibleItems","countVisible","current","next","getIdByIndex","DurationFormatterNumeric","canParse","parse","copyLinkIdsArray","linkIds","targetHash","isLinkExists","copyLinkIds","getSubtreeLinks","isTaskExists","eachTask","getSubtreeTasks","PrimaryScaleHelper","_init_tasks_range","scale_offset_minimal","helper","_scale_range_unit","range","start_interval","resolveConfigRange","getSubtaskDates","calculateEndDate","_min_date","_max_date","fit_tasks","old_min","old_max","_adjust_scales","powerArray","DataStore","TreeDataStore","_branches","pull","$initItem","loadedItem","initItem","existingItem","move","$index","root_id","$parentProperty","parentProperty","$getRootId","val","$openInitially","openInitially","visibleOrder","$create","fullOrder","_searchVisibleOrder","_indexRangeCache","_eachItemMainRangeCache","_getItemsCache","_skip_refresh","getConfig","splitParents","splitItems","taskOpenState","taskVisibility","haveSplitItems","_attachDataChange","_isSplitItem","canOpenSplitTasks","$split_subtask","$expanded_branch","_buildTree","data","setParent","_add_branch","$level","calculateItemLevel","$local_index","_updateOrder","hasChild","loaded","_parseInner","_addItemInner","_move_branch","$rendered_parent","_changeIdInner","oldId","newId","_replace_branch_child","_traverseBranches","branch","_removeItemInner","sid","tindex","source_pid","tbranch","tid","_moveInner","childId","pid","getSiblings","siblings","previousSibling","clearAll","level","eachParent","_setParentInner","new_pid","silent","_eachItemCached","cache","_eachItemIterate","startId","itemsStack","useCache","buildCache","startItem","parentsHash","added_already","old_parent","new_parent","old_id","new_id","newbranch","criteria","original_criteria","els","temp","rule","$powerArray","$removeAt","$remove","$find","$insertAt","$each","master","$map","$filter","_filterRule","copyOnParse","updateItem","removeItem","order","data_size","addItem","changeId","sindex","$destroyed","unselect","arraysEqual","arr1","arr2","quick","skipFilter","_quick_refresh","_mark_recompute","oldOrder","serialize","filteredOrder","ret","getItems","_getNullIfUndefined","getFirst","getLast","getNext","getPrev","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","host","updPerSecond","_on_timeout","ceil","createScope","eventScope","staticArray","extend","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","dateString","aria-label","_taskCommonAttr","tooltip_text","$dataprocessor_class","drag_move","taskRowAttr","order_branch","linkAttr","linkTypes","toStart","fromStart","start_to_finish","drag_link","gridSeparatorAttr","lightboxHiddenAttr","lightboxVisibleAttr","lightboxAttr","lightboxButtonAttrString","buttonName","role","tabindex","lightboxHeader","headerText","lightboxSelectAttrString","time_option","years","months","hours","minutes","lightboxDurationInputAttrString","section","column_duration","aria-valuemin","multiselect","attrs","new_task","gridCellAttrString","textValue","editor","gridAddButtonAttrString","messageButtonAttrString","buttonLabel","messageInfoAttr","messageModalAttr","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","payload","wai_aria_attributes","_extend_to_optional","lightbox_block","optional_time","mapping","_resolve_default_mapping","disable","enable","disabled","update_block","_lightbox_id","button_text","resizeLightbox","button_click","_get_typed_lightbox_config","form_blocks","duration_optional","time_optional","time","TypeselectControl","typeKey","typeValue","oldOnChange","changeLightboxType","_lightbox_new_type","ConstraintControl","isNonTimedConstraint","constraint_types","ASAP","ALAP","toggleTimeSelect","timeSelects","isNonTimed","getTimePicker","typeSelect","_time_format_order","_eventsInitialized","constraintDate","constraint_date","_fill_lightbox_select","constraintType","constraint_type","getConstraintType","getTimePickerValue","ParentControl","_display","item_id","getTaskByTime","allow_root","root_label","_filter","map_to","tmpDom","newOptions","onselect","replaceChild","DurationControl","getFormatter","formatter","_getStartDate","getElementsByTagName","_getDuration","singleDate","single_date","readonly","ariaAttr","durationInputClass","duration_val","inps","btns","endspan","_calc_date","task_end_date","task_date","_change_duration","onclick","onkeydown","charCode","keyCode","which","constants","KEY_CODES","DOWN","UP","calculateDuration","startDate","endDate","RadioControl","radio","default_value","checked","CheckboxControl","single_value","checkboxes","TimeControl","auto_end_date","_update_lightbox_select","selects","autofix_end","_get_timepicker_step","_getEndDate","TextareaControl","_get_input","TemplateControl","ResourcesControl","getHtmlButtons","buttons","floatRight","_migrate_buttons","getHtmlTimePickerOptions","offset","start_year","end_year","tdate","timeFormat","year_range","month_full","first","_time_values","time_picker","setTime","getHours","getMinutes","_lightbox_methods","_lightbox_template","registerProvider","lightbox","showLightbox","getLightbox","_center_lightbox","showCover","_fill_lightbox","round_dnd_dates","_is_chart_visible","time_step","getLabel","sections","updateCollection","list_name","collection","serverList","resetLightbox","getLightboxType","_lightbox_type","lightboxDiv","fullWidth","ds","classNames","_lightbox","_is_lightbox_timepicker","wide_form","buttons_left","buttons_right","drag_lightbox","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_render_sections","backup_overflow","overflow","labelBlock","inputBlock","inputId","bindLabelsToInputs","_init_lightbox_events","block","con","lightbox_additional_height","scroll_top","scroll_left","view_height","_cover","lightbox_events","gantt_save_btn","_save_lightbox","gantt_delete_btn","$click","hideLightbox","gantt_cancel_btn","_cancel_lightbox","src","sec","buttonTarget","SPACE","shiftKey","click","edit_save","edit_cancel","getLightboxValues","$new","_update_flags","refreshData","addTask","getTaskIndex","refreshTask","updateTask","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","task_time","substr","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","now","pageX","pageY","_lb_start","ariaAttrs","date_part","time_format","getTimeFormat","limit_time_select","first_hour","last_hour","setHours","needSetTime","mapOffset","checkbox","resources","constraint","typeselect","_dhtmlx_confirm","message","ok","opts","confirm","type_value","_silent_redraw_lightbox","oldType","formData","updTask","scrollX","scrollState","visible","getTaskDND","tasksDnD","_tasks_dnd","touch_feedback","touch_feedback_duration","_prevent_touch_scroll","_touch_feedback","vibrate","platform","maxTouchPoints","touchEventsSupported","createEvent","_touch_events","touches","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","touchHandlers","names","accessor","ignore","dblclicktime","actionMode","scrollMode","actionStart","longTapTimer","currentDndId","dndNodes","targetView","start_drag","on_mouse_move","preventDefault","cancelBubble","newScrollState","scrollView","block_action","allViews","$layout","findTargetView","_locate_css","locate","on_mouse_down","renders","_getTaskLayers","isTaskVisible","task_attribute","cloneNode","cloneTaskRendered","_start_dnd","_touch_drag","remove","on_mouse_up","onDoubleClick","isHeadless","USE_KEY","_defaultScales","TimelineZoom","zoomIn","getCurrentLevel","setLevel","zoomOut","_levels","_activeLevelIndex","getLevels","zoomLevel","_getZoomIndexByName","_setLevel","levelName","_getVisibleDate","scrollPos","_visibleDate","cursorOffset","nextConfig","chartConfig","cursorDate","newPosition","middleDate","_attachWheelEvent","_domEvents","_useKey","_handler","_defaultHandler","timelineOffset","wheelUp","deltaY","wheelDelta","stopPropagation","_setScaleSettings","_setScaleDates","_initialStartDate","_initialEndDate","activeLevelIndex","_mapScales","levels","_minColumnWidth","minColumnWidth","_maxColumnWidth","maxColumnWidth","_widthStep","widthStep","useKey","_initialized","trigger","_stepUp","_stepDown","nextLevel","newColumnWidth","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","that","vs","av","grid","border","gridId","gridObj","dhtmlXCellObject","jQuery","$","methods","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","scrollRange","scrollStep","scrollDelay","scrollSpeed","interval","isMove","delayTimeout","startPos","started","eventPos","isDisplayed","isScrollState","dragMarker","isResize","isLink","isClickDrag","autoscroll","defineDelayTimeout","speed","autoscroll_speed","setInterval","tick","autoscroll_delay","defineScrollInterval","clearInterval","autoscrollInterval","isScroll","targetTouches","posX","posY","need_scroll","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","boxSize","zoom","skins","link_line_width","link_arrow_size","_second_column_width","_third_column_width","material","_redefine_lightbox_buttons","getTaskNode","indx","broadway","_config_buttons_left","_config_buttons_right","terrace","meadow","skyblue","_get_skin","skin","href","match","skinset","_configure","resetSkin","getTimeline","getGrid","getVerticalScrollbar","getHorizontalScrollbar","DEFAULT_VALUE","tryCall","method","fallback","getTaskTop","getTaskPosition","getTaskBarHeight","getTaskHeight","roundTaskDates","domAttr","getLinkNode","oldH","oldV","scrollHorizontal","scrollVertical","verticalViews","_getLinkedViews","horizontalViews","commonViews","viewId","$skipSmartRenderOnScroll","newV","newH","showDate","date_x","scroll_to","task_scroll_offset","showTask","leftPos","_scroll_state","x_pos","y_pos","scroll_size","x_inner","y_inner","scrollVer","scrollHor","horState","verState","addTaskLayer","addLinkLayer","initializer","_legacyGridResizerClass","layout","resizers","gridResizer","onCreated","mainTimeline","show_chart","showGrid","show_grid","colsWidth","grid_limits","original_grid_width","skinSettings","_initScrollStateEvents","_getVerticalScrollbar","_getHorizontalScrollbar","oldPos","newPos","$scroll_ver","$scroll_hor","_findGridResizer","gridFirst","_getSiblings","_behind","_front","onInitialized","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","oldSize","onDestroyed","initLinksDND","_link_landing","_link_target_task","_link_target_task_start","_link_source_task","_link_source_task_start","markerDefaultOffset","scrollDefaultSize","getDndState","DnD","dnd","sensitivity","updates_per_second","mousemoveContainer","getLinePos","shift","isStart","taskPos","xEnd","yEnd","milestoneWidth","origWidth","getVisibleMilestoneWidth","getMilestonePosition","isMilestone","getPosition","markerSize","getMarkerSize","viewportSize","getVieportSize","offsetX","tooltip_offset_x","offsetY","tooltip_offset_y","updateMarkedHtml","drag_link_class","resetDndState","showDirectingLine","s_x","s_y","e_x","e_y","_direction","getDirectionLine","link_direction_class","dist","pow","tan","angle","atan","coordinateCircleQuarter","PI","sin","cos","ieTransform","shiftLeft","shiftTop","sX","eX","sY","eY","_dir_start","dd","advanceMarker","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","_get_link_type","addLink","createLinkDND","createTaskDND","round_task_dates","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","clear_drag_state","set_actions","drag_from_start","evs","stage","_move","_resize","_resize_progress","start_x","start_y","coords_x","_drag_task_coords","minDurationInUnits","_calculateMinDuration","min_duration","_init_task_timing","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","_update_on_move","_update_item_on_move","original","curr_date","dragHash","_isMultiselect","getSelectedTasks","dragProject","drag_project","initialDrag","childDrag","_bulk_dnd","_update_parents","_get_drag_mode","_fix_dnd_scale_time","fixStart","correct_work_time","roundDate","fixEnd","_fix_working_times","getClosestWorkTime","correctTaskWorkTime","_finalize_mouse_up","_fireEvent","_dhx_changed","finalizingBulkMove","moveCount","doFinalize","batchUpdate","modes","dragProperty","selectedTasksIds","selectedTask","_addSubtasksToDragMultiple","params","drag_state","drag_multiple","summaryId","taskDnD","linkDnD","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","extendDom","_clearDomEvents","_clearStateProvider","_delete_link_handler","question","link_description","confirm_link_deleting","deleteLink","coll","coll_date","scale_step","unregisterProvider","gridToPageCoordinates","gridPos","removeLineHighlight","markerLine","highlightPosition","ePos","gridHeight","getTaskMarkerPosition","pointerEvents","markerFolder","maxBottom","highlightFolder","linePos","indentNode","indent","itemTop","itemHeight","childCount","getLineMarkerPosition","markerLineTop","highlightRow","dropTarget","relTargetPos","eventTop","findClosesTarget","allowedLevel","targetLevel","findTargetAbove","findTargetBelow","targetTask","targetAbove","targetBelow","rootLevel","getLockedLevelTarget","getMultiLevelTarget","higlighter","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","initial_open_state","outerHTML","drop_target","$transparent","getDropPosition","$drop_target","minTop","firstVisibleTaskPos","hiddenTaskPart","getTargetTaskId","lockLevel","order_branch_free","getStore","lastTaskOfLevel","last_item","_getGridPos","_getTargetY","_getTaskByY","dropIndex","targetY","over","nextId","prevId","rowDnd","rowDndMarker","extendGantt","inlineEditors","_inlineEditors","createEditors","initEvents","clearEvents","scroll_on_click","_is_icon_open_click","conf","sorting_method","callHandler","createTask","totalWidth","getRowRectangle","getVisibleRange","resize_el","task_grid_row_resizer_attribute","getRectangle","getVisibleCellsRange","isColumnVisible","resourceTimetable","renderBar","renderConnection","prevLevel","getResourceLoad","renderedHistogramCells","renderedHistogramRows","renderedHistogramCapacity","detachRenderedHistogramCell","renderedRow","renderCapacityElement","capacityMatrix","maxCapacity","renderedElement","capacityElement","capacity","colStart","colEnd","bar","connection","renderHistogramLine","renderHistogramCell","histogram_cell_class","histogram_cell_label","fill","histogram_cell_allocated","smartRendering","histogram_cell_capacity","row","checkedColumns","renderedCell","renderedResourceLines","renderResourceLineCell","resource_cell_class","resource_cell_value","detachRenderedResourceLine","aria","date_grid","tree","grid_indent","grid_blank","grid_file","grid_open","grid_folder","align","justifyContent","center","getGlobalTaskIndex","grid_row_class","css_template","isSelected","onrender","rowNode","cellNode","external_render","adapter","isElement","renderElement","sourceTop","sourceHeight","targetTop","targetHeight","sourceLeft","sourceRight","targetLeft","targetRight","tmp","isInViewPort","drawer","current_pos","dirs","down","path","point","get_lines","dots","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","link_wrapper_width","get_line_sizes","line_size","marginTop","render_line","innerPos","get_direction","vect","path_builder","point_to","get_points","pt","get_endpoint","xy","shiftX","lineType","get_line_type","forward","sign","milestoneHeight","lines","cssTemplate","link_class","isCriticalLink","endpoint","_render_link_arrow","borderColor","renderedCells","isRendered","detachRenderedCell","getCellTemplate","task_cell_class","warn","timeline_cell_class","renderOneCell","cssTemplateContent","static_background_cells","cellTemplate","show_task_cells","odd","task_row_class","createBaseBarRender","defaultRender","$rollup","isBarInViewport","isProject","resetProjectDates","mapTo","keepDatesOnEdit","keepDurationOnEdit","defaultActionOnEdit","TextEditor","formatters","durationFormatter","PredecessorEditor","linkFormatter","parseInputString","predecessors","delimiter","formatPredecessors","formatLinkKey","lag","getLinksDiff","predecessorCodes","selectedLinks","getSelectedLinks","existingLinksSearch","linkId","linksToAdd","linkKey","linksToDelete","linksDiff","autoSchedule","inputPredecessors","taskPredecessors","html5DateFormat","dateToStr","strToDate","DateEditor","str_to_date","minValue","maxValue","parsed","SelectEditor","optionsHtml","NumberEditor","controller","onBlurDelay","keyNav","keyboardNavigation","activeCell","locateCell","columnName","editorState","getEditorConfig","startEdit","command","hasEditor","keyboard","preventKeyNav","ENTER","ctrlKey","metaKey","ESC","LEFT","RIGHT","editorType","DELETE","TAB","editPrevCell","editNextCell","modifiers","anyModifier","alt","ctrl","meta","getCommandHandler","onShow","onHide","isChanged","defaultPrevented","shouldPrevent","defaultMapping","keyNavMappings","setMapping","getMapping","keyboard_navigation_cells","getKeyboardMapping","textEditorFactory","numberEditorFactory","selectEditorFactory","dateEditorFactory","predecessorEditorFactory","durationEditorFactory","linkedPropertiesProcessor","initConfigs","editor_types","number","predecessor","keyboardMapping","eventBus","inlineEditController","_createPlaceholder","_getEditorPosition","findVisibleIndex","updateTaskDateProperties","ganttHandlers","_itemId","_columnName","_editor","_editorType","_placeholder","batch_update","editorConfig","_getItemValue","oldValue","inline_editors_date_processing","_findEditableCell","nextIndex","nextColumn","getNextCell","getFirstCell","getLastCell","canChangeRow","moveRow","moveTask","nextItem","editNextRow","editPrevRow","ScrollbarCell","SCROLL_MODIFIER_KEYS","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","eachCell","_updateLinkedViews","scrollHorizontally","_scrolling","codeScrollLeft","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","outerScroll","innerScroll","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","_oldTop","_checkWheelTarget","targetNode","connectedViews","wheelSpeed","wheelSpeedConfig","wheel_scroll_sensitivity","ff","wx","deltaX","wheelDeltaX","wy","horizontalScrollModifier","horizontal_scroll_key","oldLeft","detail","oldTop","ViewCell","childConfig","createView","$initialized","unload","outerX","outerY","childSize","ViewLayout","$cell","byMaxSize","otherCell","genericViewPortChecker","basicGetRectangle","basicGetRange","task_area_pulls","task_area_renderers","getRenderer","renderMethod","updateMethod","renderCallbackMethod","specializedViewPortChecker","layer_attribute","render_item","layerView","viewConfig","rendererViewPort","dom","useBuffer","remove_item","clear_container","get_visible_range","render_items","buffer","createDocumentFragment","vis","itemsSearch","renderedItems","newElements","update_items","nodesToRemove","itemNode","restore","replace_item","newNode","change_id","oldid","newid","clearRenderers","renderFactoryProvider","mergeFilters","filter_methods","filter_method","renderFactory","createGroup","getContainer","relativeRoot","defaultFilters","initLayer","renderGroup","tempCollection","renderers","filters","getLayers","_add","pending","topmost","rel","requestUpdate","onUpdateRequest","eachLayer","createLayerFactory","previusSiblingContainer","defaultContainerSibling","setService","removeTaskLayer","_clearTaskLayers","_getLinkLayers","removeLinkLayer","_clearLinkLayers","createMouseHandler","eventHandlers","doubleclick","contextMenu","addEventTarget","onClick","findEventHandlers","callEventHandlers","_multiselect","selectTask","onContextMenu","returnValue","delegateHandlers","details_on_dblclick","onMouseMove","_last_move_event","domEvents","reset","elementHandlers","ViewSettings","extendSettings","parentSettings","own","parentView","parentConfig","parentTemplates","configurable","createFactory","createdViews","creator","configure","registerView","viewConstructor","uiFactory","createLayers","Resizer","Scrollbar","ResourceGrid","ResourceTimeline","ResourceHistogram","gridEditorsFactory","renderTaskBar","renderSplitTaskBar","renderRollupTaskBar","renderTaskBg","renderLink","gridRenderer","resourceMatrixRenderer","resourceHistogramRenderer","gridTaskRowResizerRenderer","mainGridInitializer","mainTimelineInitializer","mainLayoutInitializer","attachInitializer","layersEngine","layersApi","resourceRow","resourceHistogram","layersService","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","messageBox","modality","cover","buttonAriaAttrs","getFirstDefined","values","_createBox","cancel","contentId","message_ok","message_cancel","btn","_boxStructure","alertPopup","confirmPopup","boxPopup","box_params","focusable","expire","timers","info","hideAll","popups","modalbox","codeHelpers","_eventRemoveAll","uiApi","$mouseEvents","createLayoutFacade","targetAttribute","_locateHTML","initial_scroll","firstTask","getTaskByIndex","attachedScrollbar","month_short","day_full","day_short","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_add","link_start","link_end","type_task","type_project","type_milestone","weeks","section_constraint","asap","alap","snet","snlt","fnet","fnlt","mso","mfo","resources_filter_placeholder","resources_filter_label","LocaleManager","addLocale","_locales","getLocale","locale_ar_1","locale_be_1","locale_ca_1","locale_cn_1","locale_cs_1","locale_da_1","locale_de_1","locale_el_1","locale_en_1","locale_es_1","locale_fa_1","locale_fi_1","locale_fr_1","locale_he_1","locale_hr_1","locale_hu_1","locale_id_1","locale_it_1","locale_jp_1","locale_kr_1","locale_manager_1","locale_nb_1","locale_nl_1","locale_no_1","locale_pl_1","locale_pt_1","locale_ro_1","locale_ru_1","locale_si_1","locale_sk_1","locale_sv_1","locale_tr_1","locale_ua_1","en","ar","be","ca","cn","cs","da","de","es","fa","fi","fr","he","hr","hu","it","jp","kr","nb","nl","no","pl","ro","ru","si","sk","sv","tr","ua","_dp","check","show_errors","listenWindowResize","resizeDelay","resizeTimeout","container_resize_timeout","container_resize_method","lowlevelResizeWatcher","repaintGantt","previousHeight","previousWidth","getPropertyValue","resizeWatcher","tabIndex","contentWindow","addResizeListener","calculateScaleRange","invalidContainerMessage","validateNode","isHTMLElement","_reinit","_quickRefresh","stores","_getDatastores","dropLayout","rebuildLayout","storeNames","resetLayout","initTemplates","edit","delete","confirm_deleting_title","deleteTask","preserveScroll","preserve_scroll","new_pos","setSizes","getTaskRowNode","prevOffset","time_unit","offsetChanged","activate","_cached_functions","update_if_changed","active","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","methodname","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","getUTCDate","stringify_argument","deactivate","setup","override_gantt","gantt_methods","optimize_render","deactivTimeout","checkType","isUnscheduledTask","unscheduled","show_unscheduled","taskStart","taskEnd","_getProjectEnd","project_end","_getProjectStart","project_start","getDefaultTaskDate","parent_id","schedule_from_end","_set_default_task_timing","details_on_create","parseDate","getSelectedId","getTaskTimingMode","task_type","$no_start","$no_end","$rendered_type","updateTaskTiming","$effective_calendar","getSubtaskInfo","rollup","task_mode","dirty","$calculate_duration","effectiveCalendar","inherit_calendar","taskMode","taskTiming","getSubtaskDuration","updateAll","has_changed","oldStart","oldEnd","upper","lower","colIndex","steps","calendarManager","timeCalculator","getWorkHours","setWorkTime","unsetWorkTime","_hasDuration","hasDuration","mergeCalendars","createCalendar","addCalendar","getCalendar","getCalendars","getResourceCalendar","deleteCalendar","CalendarDisabledTimeStrategy","argumentsHelper","_calculateDuration","fixedUnits","hasWorkTime","equals","createArgumentsHelper","NoWorkTimeCalendar","TimeCalculator","$disabledCalendar","_getCalendar","manager","dynamicCalendars","getCalendarIdFromMultipleResources","resourceAssignments","resource_id","getResourcesCalendarKey","tempCalendar","assignment","resourceId","mergeResourceCalendars","isLegacyResourceCalendarFormat","resourceCalendarsProperty","getResourceProperty","resourceCalendarsConfig","resource_calendars","propertyName","getCalendarIdFromLegacyConfig","calendarId","getMinutesPerWeek","weekStart","_weekCache","has","_calendar","minutesPerWeek","week_start","getHoursPerDay","set","getMinutesPerMonth","monthStart","_monthCache","minutesPerMonth","nextMonth","_cache","subCache","setItem","rawValue","unitCache","yearCache","CalendarWorkTimeStrategy","_workingUnitsCache","_largeUnitsCache","_worktime","_cached_timestamps","_cached_timestamps_count","_getUnitOrder","_resetTimestampCache","_timestamp","UTC","_checkIfWorkingUnit","_is_work_day","_getWorkHours","_is_work_hour","startHour","endHour","_getTimeOfDayStamp","dayEnd","_is_work_minute","checkTime","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","checkFirst","checkLast","isLastStep","_isWorkTime","unitOrder","biggerTimeUnit","_getClosestWorkTimeFuture","_getMinutesPerHour","hourStart","hourEnd","worktimes","_getMinutesPerDay","durationMinutes","durationHours","_getWorkUnitsForRange","getUnitsPerDay","total","_getMinutesBetweenSingleDay","_getIntervalTimestamp","minuteFrom","minuteTo","_getMinutesBetween","firstDayStart","firstDayEnd","day_start","lastDayStart","lastDayEnd","startPart","endPart","_getHoursBetween","_setConfig","_parseSettings","haveCustomWeeks","customWeeks","customWeeksRangeStart","customWeeksRangeEnd","customWeeksBoundaries","_parseHours","minCustomRangeStart","maxCustomRangeEnd","customTime","rangeStart","rangeEnd","fromReadable","toReadable","currentWeek","_tryChangeCalendarSettings","backup","JSON","stringify","_arraysEqual","_compareSettings","mySettings","thatSettings","myDays","otherDates","myHours","otherHours","myWeek","thatWeek","getDay","getSeconds","endHours","timestampRanges","timerangeConfig","startMinute","endMinute","durationSeconds","calendarConfig","reset_calendar","isWorkUnit","dateKey","mult","_calculateEndDate","_calculateMinuteEndDate","_subtractMinuteDate","_calculateHourEndDate","_addInterval","stopAction","added","previous","timezoneDifferenceWithPrevious","timezoneDifference","_addHoursUntilDayEnd","rangeHours","addHours","intervalEnd","durationLeft","setMinutes","setSeconds","hoursPerDay","_addMinutesUntilHourEnd","hour_start","rangeMinutes","addMinutes","_subtractMinutesUntilHourStart","hourStartTimestamp","initialDateTimestamp","addedInterval","calculatedDay","daySchedule","minutesInDay","dayStart","iterateFromDayEnd","isWorkHour","workInterval","minutesInHour","_getClosestWorkTimePast","times","lastInterval","_getClosestWorkTime","inputDate","closestFuture","closestPast","_getClosestWorkTimeGeneric","_findClosestTimeInDay","resultDate","fromDayEnd","_getClosestWorkMinute","increment","worktime","exceptions","hasRegularHours","_checkWorkHours","dayConfig","hoursArray","WorkTimeCalendarMerger","_getIntervals","_toHoursArray","intervalsArray","formatHHMM","secondsValue","minutePart","toFixed","_intersectHourRanges","baseArray","overridesArray","base","_mergeAdjacentIntervals","_mergeHoursConfig","firstHours","secondHours","merge","firstConfig","secondConfig","mergedSettings","firstDate","secondDate","CalendarMergeHelper","legacyResourceCalendarConfig","dynamicResourceCalendars","CalendarManager","_calendars","_legacyConfig","_isLegacyConfig","_convertWorkTimeSettings","calendars","mergeHelper","_createCalendarFromConfig","apiCore","preparedConfig","parentCalendar","defaults","fulltime","createDefaultCalendars","_getOwnCalendar","calendar_property","dynamic_resource_calendars","calendarsConfig","taskObject","stop","isCalendar","restoreConfigCalendars","possibleCalendar","every","worktimeFacadeFactory","facade","jsonParseError","load","url","_load_url","cl","_load_type","ajax","on_load","xmlDoc","responseText","resp","status","responseURL","_process_loading","collections","_load_collections","linksStore","collections_loaded","option","option_key","$ignore","json","dhx_security","security_key","serializeTask","_copyObject","serializeLink","_copyLink","xml_format","format_date","rawLinks","getLinks","xml","_xmlNodeToJSON","attrs_only","nodeValue","_getCollections","loader","xpath","itms","_getXML","toptag","getXMLTopNode","xmltop","xmlParseError","skey","oldxml","startdate","est","enddate","predecessortasks","editable_property","readonly_property","getGridColumn","ScrollableGrid","_scrollOrder","getCurrentX","_dnd","_scrollView","attachEvents","isScrollable","gridBoundingRect","maxLeft","minLeft","currentX","autoscrollRight","autoscrollStart","autoscrollLeft","autoscrollStop","getCorrection","scrollable_grid_1","ColumnsGridDnd","_targetMarker","calculateCurrentPosition","eventX","DND","_scrollableGrid","_draggedCell","draggedColumn","draggedIndex","_gridConfig","_originAutoscroll","_dragX","columnIndexes","findColumnsIndexes","targetColumn","cleanTargetMarker","setMarkerPosition","drawTargetMarker","_a","xBefore","xAfter","columnRelativePos","draggedId","currentColumn","startX","endX","relativeX","gridOffset","_obj","nextPosition","column_grid_dnd_1","_task_grid_row_resize","row_before_start","row_id","row_after_start","row_drag_move","pointerPosition","markerStartPosition","marker_height","minPointerPosition","min_task_grid_row_height","row_drag_end","oldItemHeight","finalHeight","cachedRowHeight","canUseSimpleCalc","_getRowHeight","_refreshState","globalRowHeight","visibleColumns","loadedBranches","oldHasChildren","branch_loading","branch_loading_property","needLoading","requestData","encodeURIComponent","LinkFormatterSimple","_getWBSCode","_linkReg","linkPart","exec","_findSource","_gantt","pred","getWBSCode","reqTemplate","wbs","getTaskByWBSCode","DurationFormatter","LinkFormatter","enter","callIfEnabled","auto_types","updateParents","checkParent","targetType","getTaskTypeToUpdate","updateTaskType","setTaskType","delTaskParent","group_mode","allTypes","hasChildren","originalRowDndParent","originalMoveTaskParent","isParsingDone","updateAfterRemoveChild","placeholder_task","insertPlaceholder","placeholders","afterEdit","newTask","dataProcessor","_silencedPlaceholder","setUpdated","ready","isPlaceholderTask","isPlaceholderLink","action","commands","entity","resourceAssignmentsProperty","resource_assignment_store","resourceAssignmentFormats","auto","singleValue","valueArray","resourceValueArray","assignmentsArray","resourceAssignmentFormat","assignmentModes","fixedDates","fixedDuration","initAssignmentFields","initDelay","timing","_assignmentTimeFromTask","resourceAssignmentsStore","createDatastore","_makeAssignmentsFromTask","detectFormat","usedIds","defaultMode","_updateTaskBack","_assignAssignments","getTaskAssignments","_loadAssignmentsFromTask","taskAssignments","_syncAssignments","storeAssignments","taskValues","assignmentsStoreValues","inBoth","inTaskNotInStore","inStoreNotInTask","taskOwner","ownerId","foundOwnerAssignment","taskSearch","storeSearch","processedIds","inTask","inStore","diffAssignments","ignoreFields","assignmentHasChanged","updateAssignment","_syncOnTaskUpdate","totalAssignments","needUpdate","needUpdateFor","assignmentsHash","deleteIds","ids","idsSearch","_syncOnTaskDelete","resourceAssignmentsCache","resourceTaskAssignmentsCache","taskAssignmentsCache","searchTaskId","resourceTaskCacheKey","updateTaskAssignments","createResourceMethods","singleResourceCacheBuilt","falsyValuePrefix","random","resourceHashFunction","getCacheKey","resourceIds","getResourceTasks","matchingResources","resourceValue","selectAssignments","owners","propertyValue","filterResourceTasks","resource_store","_needRecalc","_isRecalcNeeded","_isGroupSort","_calcWBS","$virtual","$wbs","_setWBSCode","getByWBSCode","currentNode","_isFirst","_prevSibling","_wbs","_parent","createWbs","createMethod","isActive","disableMethod","methodName","dummyMethod","restoreMethod","restoreMethods","batchUpdatePayload","noRedraw","dp_mode","call_dp","updateMode","setUpdateMode","resetProjects","refreshLink","methodsHash","setGanttMode","sendData","SimpleStorage","_storage","storeItem","getStoredItem","dp","getUserData","userdata","setUserData","_change_id","_ganttMode","changeLinkId","changeTaskId","_row_style","rowId","_delete_task","_sendTaskOrder","setDp","DataProcessorEvents","$dp","_dataProcessorHandlers","treeHelper","cascadeDelete","clientSideDelete","updated","updatedRows","clientOnly","_in_progress","cascade_delete","dpMode","cascade","sendAllData","_tSend","_waitMode","itemLinks","_links","getTaskLinks","updateLink","_tMode","_serverProcessor","substring","serverProcessor","pluralizedMode","urlSeparator","upd","isExist","objData","xml_date","parse_date","data_processor_events_1","extend_gantt_1","simple_storage_1","createDataProcessor","router","tMode","DataProcessor","setTransactionMode","serverProcessorURL","action_param","autoUpdate","_headers","_payload","_postDelim","_routerParametersFormat","_invalid","messages","inserted","deleted","invalid","invalid_cell","enableUTFencoding","headers","_serializeAsJson","_router","escape","_utf","getSyncState","findRow","existing","set_invalid","is_invalid","markRow","_methods","details","getActionByState","checkBeforeUpdate","editStop","_beforeSendData","_getRowData","_serializeAsJSON","serialize_one","stack","pref","serialized","valid","_forEachUpdatedRow","_sendData","_getAllData","pattern","defineAction","_uActions","afterUpdateCallback","btag","ganttMode","correct","originalSid","afterUpdate","_xml","getGanttMode","reqUrl","filePath","finalizeUpdate","cleanUpdate","atag","_dp_init","_setDefaultTransactionMode","dataProcessorEvents","setOnAfterUpdate","setOnBeforeUpdateHandler","setAutoUpdate","user","_user","_needUpdate","_updateBusy","afterAutoUpdate","fullSync","loadUpdate","xml_node","getUpdates","vers","_getXmlNodeValue","updates","status_1","parent_1","_applyPayload","_cleanupArgumentsBeforeSend","dataToSend","processedData","_cleanupItemBeforeSend","updatedItem","output","queryParams","urlParams","preprocessedData","query","taskState_1","taskAction","ganttMode_1","_onResolvedCreateUpdate_1","actionPromise","then","catch","hasOne","_prepareDate","_prepareArray","traversedObjects","_prepareObject","rawItem","processedItem","_prepareDataItem","dataItem","DEPRECATED_api","server","getDataProcessorModes","getAvailableModes","bindDataStore","itemRepainter","allData","loadedRanges","layerData","skipRepaint","refreshId","selectedId","deleteItem","subItem","getLinkCount","getTaskCount","getVisibleTaskCount","startTask","calculateTaskLevel","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","getDatastores","createDatastoreFacade","$StoreType","open_tree_initially","deepcopy_on_parse","dropService","storeList","refresh_links","refreshLinks","hasSplitParent","_clear_data","unselectTask","facadeFactory","originalTask","checkLinkedTaskVisibility","sync_link","sourceTask","sync_link_delete","sync_links","mapEvents","mapFrom","sourceEvent","targetEvent","taskLinks","existingLink","sourceMatch","targetMatch","typeMatch","show_tasks_outside_timescale","sourceVisible","targetVisible","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","setImmediate","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","onGlobalMessage","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","script","onreadystatechange","installReadyStateChangeImplementation","clearImmediate","scope","Timeout","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","u","_dereq_","1","Promise","SomePromiseArray","_SomePromiseArray","any","promises","promise","setHowMany","setUnwrap","2","firstLineError","schedule","Queue","util","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","AsyncInvokeLater","receiver","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","_drainQueue","_drainQueueStep","_settlePromises","setScheduler","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","stderr","write","exit","throwLater","invokeLater","invoke","settlePromises","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","resolve","4","old","bluebird","noConflict","./promise","5","cr","callerCache","getterCache","canEvaluate","caller","classString","TypeError","ensureMethod","namedGetter","indexedGetter","isIdentifier","isIndex","maybeGetter","getGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancellation","_warn","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","getKeys","instances","cb","boundTo","predicateLoop","matchesPredicate","isObject","./es5","8","longStackTraces","contextStack","Context","_trace","CapturedTrace","peekContext","lastIndex","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","unhandledRejectionHandled","possiblyUnhandledRejection","printWarning","getDomain","_getDomain","Warning","es5","canAttachTrace","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","debugging","warnings","wForgottenReturn","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","shouldUseOwnTrace","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","hasLongStackTraces","fireDomEvent","CustomEvent","dispatchEvent","eventData","cancelable","domEvent","Event","initCustomEvent","fireGlobalEvent","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","domEventFired","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","warningsOption","_clearCancellationData","_execute","monitoring","isFulfilled","ignoreSelf","attachExtraTrace","__stackCleaned__","parseStackAndMessage","notEnumerableProp","formatAndLogError","cleanStack","isTraceLine","isInternalFrame","shouldIgnore","stackFramesAsArray","isSoft","localHandler","localEventFired","formatNonError","newStr","maxChars","snip","captureStackTrace","parseLineInfoRegex","parseLineInfo","fileName","_promisesCreated","uncycle","inherits","stackToIndex","currentStack","cycleEdgeNode","currentChildLength","stacks","currentLastIndex","currentLastLine","commonRootMeetPoint","removeCommonRoots","removeDuplicateOrEmptyJumps","reconstructStack","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","err","isTTY","checkForgottenReturns","handlerLine","creatorLine","traceLines","lineMatches","firstUserLine","msg","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","deprecated","replacement","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","PromiseReduce","reduce","PromiseAll","promiseAllThis","mapSeries","12","_TypeError","_RangeError","Objectfreeze","freeze","subError","nameProperty","defaultMessage","SubError","CancellationError","TimeoutError","AggregateError","RangeError","writable","OperationalError","cause","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","getOwnPropertyNames","propertyIsWritable","prop","descriptor","proto","ObjectKeys","14","PromiseMap","15","catchFilter","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","errors","yieldHandlers","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","_promiseRejected","_run","_rejectCallback","traceParent","promiseFromYieldHandler","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","spread","18","MappingPromiseArray","limit","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","_init$","_init","_values","preservedValues","totalResolved","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","maybeWrapAsError","rErrorKey","wrapAsOperationalError","isUntypedError","markAsOriginatingFromRejection","multiArgs","wrapped","21","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","22","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","createContext","nodebackForPromise","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","toResolutionValue","getActualLength","shouldCopyValues","isResolved","24","THIS","withAppended","defaultPromisified","__isPromisified__","noCopyPropsPattern","defaultFilter","propsFilter","isPromisified","hasPromisified","suffix","getDataPropertyOrDefault","promisifiableMethods","suffixRegexp","inheritedDataKeys","passesDefaultFilter","keyWithoutAsyncSuffix","checkValid","escapeIdentRegex","makeNodePromisified","makeNodePromisifiedEval","defaultThis","promisified","promisifyAll","promisifier","promisifiedKey","promisify","copyDescriptors","isClass","25","Es6Map","mapToEntries","extractEntry","PropertiesPromiseArray","entries","isMap","_isMap","props","castValue","entriesToMap","keyOffset","26","_capacity","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","srcIndex","dst","dstIndex","arrayMove","27","raceLater","race","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","ProcessNextTick","isRecentNode","nativePromise","standalone","cordova","toggleScheduled","div2","o2","observe","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","CANCELLATION","_howMany","_unwrap","some","howMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","hasProp","doGetThen","getThen","isAnyBluebirdPromise","doThenable","34","HandleWrapper","afterValue","ms","successClear","failureClear","handleWrapper","afterTimeout","35","NULL","dispose","thenable","_isDisposable","_getDisposer","_setDisposable","castPreservingDisposable","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","doDispose","_unsetDisposable","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatchTarget","globalObject","tryCatcher","Child","Parent","T","isPrimitive","maybeError","safeToString","appendee","defaultValue","excludedPrototypes","isExcludedProto","visitedKeys","enumeration","thisAssignmentPattern","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","FakeConstructor","ic","foo","rident","filledRange","prefix","isError","ArrayFrom","itResult","hasEnvVariables","chrome","loadTimes","P","stateProviders","provider","regTemplates","initial","template_name","date_format","server_utc","task_unscheduled_time","grid_date_format","tooltip_date_format","dom_helpers","copyDomEvent","altKey","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","eventParams","passive","timeStamp","original_target","dragStart","traceDragEvents","domElement","inputMethod","mousemove","dragMove","dragScroll","limited_mousemove","dndActive","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","initDnDMarker","backupEventTarget","getEvent","backup_element","elementFromPoint","cspVersion","utc","to_fixed","getUTCMonth","getUTCFullYear","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCISOWeek","getISOWeek","mask","month_short_hash","month_full_hash","fastVersion","dateToStrFn","getWeek","splt","strToDateFn","cspCompliantVersion","canUseCsp","useCsp","csp","time_part","start_on_monday","month_start","setDate","quarter_start","res_month","setMonth","year_start","minute_start","getMilliseconds","setMilliseconds","_add_days","modifiedDate","inc","originalDate","incCondition","getHoursCondition","getDateCondition","ndate","setYear","add_quarter","num","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","convert_to_utc","createConfig","DOMParser","ActiveXObject","loadXML","parseFromString","tagname","xhr","responseXML","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","put","postData","del","post","postSync","isQt","readyState","setRequestHeader","toUpperCase","send","show_loading","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","project_sections","milestone_sections","grid_resizer_column_attribute","keep_grid_width","grid_resize","prevent_default_scroll","drag_timeline","service","ExtensionsManager","addExtension","_extensions","getExtension","supportedExtensions","license","extensionManager","ExtensionManager","activePlugins","plugins","plugin","templatesLoader","stateService","selected_task","i18n","setLocale","localeObject","MAX_UNDO_STEPS","Undo","maxSteps","undoEnabled","redoEnabled","invert","revert","inverseCommands","_undoStack","_redoStack","getUndoStack","getRedoStack","clearUndoStack","clearRedoStack","updateConfigs","undo_steps","undo_types","undo_actions","undo","redo","_pop","_reorderCommands","_applyAction","_push","logAction","weights","actionWeights","weightA","entities","actions","isExists","getMethod","startsWith","noTrack","onBeforeUndo","onBeforeRedo","batchActions","Monitor","_batchAction","_batchMode","_ignore","_ignoreMoveEvents","_initialTasks","_initialLinks","_nestedTasks","_nestedLinks","_undo","_attachEvents","overwrite","_storeTask","_storeLink","isMoveEventsIgnored","toggleIgnoreMoveEvents","startIgnore","stopIgnore","startBatchAction","_timeout","stopBatchAction","onTaskAdded","_storeTaskCommand","onTaskUpdated","onTaskMoved","getInitialTask","_storeEntityCommand","onTaskDeleted","childrenLinks","_storeLinkCommand","onLinkAdded","onLinkUpdated","onLinkDeleted","setNestedTasks","taskIds","_getLinks","setInitialTask","uniqueLinks","setInitialLink","setInitialTaskObject","clearInitialTasks","getInitialLink","clearInitialLinks","deleteCacheCooldown","saveInitialAll","getMoveObjectByTaskId","nested","_storeCommand","actionType","entityType","monitor_1","undo_1","monitor","changeTaskCommandId","updLink","oldTaskId","newTaskId","changeLinkCommandId","updateTasksIds","updateLinksIds","saveState","Tooltip","_tooltipNode","setViewport","_root","_isLikeMouseEvent","_calculateTooltipPosition","setContent","_getViewPort","_getViewPortSize","tooltipNode","tooltip","mouse","containerPos","domEventsScope","tooltip_1","TooltipManager","_listeners","_initDelayedFunctions","hideTooltip","delayHide","watchableTarget","eventTarget","doOnMouseEnter","onmouseenter","onmousemove","onmouseleave","listener","tooltipFor","cloneDomEvent","clone","delayShow","tooltip_timeout","tooltip_hide_timeout","tooltipManager_1","tooltipManager","tooltips","touch_tooltip","QuickInfo","_showForTask","_showAtCoordinates","forced","qi","_quickInfoBox","_quickInfoBoxId","_quickInfoTask","quick_info_detached","setContainer","_container","defaultContent","quickinfo_buttons","_createQuickInfoElement","titleBox","titleContent","titleDate","main","controls","_qiButtonClickHandler","_qiKeyPressHandler","_qi_button_click","_appendAtCoordinates","show_quick_info","_getContainer","_get_event_counter_part","xViewport","yViewport","_init_quick_info","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","domEv","_quickInfoReadonly","quick_info_class","allowedButtons","isEditor","quick_info_title","quick_info_date","quick_info_content","popupHeight","scrolls","screenWidth","relativePopupBottom","top_1","quickInfo_1","quickInfo","hidingFunction","clearQuickInfo","multiselect_one_level","_selected","_one_level","_active","_first_selected_when_shift","getDefaultSelected","selected","getSelected","setFirstSelected","getFirstSelected","updateState","setLastSelected","getLastSelected","afterSelect","forSelected","isSameLevel","doSelection","target_ev","defaultLast","isLast","multiSelect","singleSelection","blockSelection","first_indx","target_indx","last_indx","old_selectTask","old_unselectTask","toggleTaskSelection","eachSelectedTask","getLastSelectedTask","old_isSelected","render_marker","show_markers","marker_class","initMarkerArea","markerArea","$marker_area","_markers","renderMarkers","getMarker","addMarker","deleteMarker","updateMarker","_getMarkers","$keyboardNavigation","dispatcher","activeNode","globalNode","GanttNode","setActiveNode","getActiveNode","getDefaultNode","TaskCell","TaskRow","isValid","setDefaultNode","fromDomElement","inputs","HeaderCell","focusGlobalNode","blurNode","focusNode","focusChanged","compareTo","keptFocus","blur","keyDownHandler","isModal","ganttNode","shortcuts","getCommandFromEvent","activeElement","findHandler","doAction","awaitsFocus","clearDelay","modalsStack","afterPopup","startModal","trapFocus","endModal","currentTarget","isTopModal","traceLightbox","focusElement","_compose","cellElement","nextElement","prevTask","moveTo","nextTask","home","pagedown","pageup","bindAll","KeyNavNode","viewWidth","viewHeight","scrollPositionX","scrollPositionY","attachedScrollbarHorizontal","scrollbarHorizontal","attachedScrollbarVertical","scrollbarVertical","scrollGrid","shift+down","shift+up","shift+right","shift+left","space","ctrl+left","ctrl+right","ctrl+enter","taskRow","enter, space","EventHandler","canStringifyThis","canStringifyThat","eventFacade","$eventAttached","alt+left","alt+right","alt+up","alt+down","ctrl+z","ctrl+r","currentFocus","currentIndex","lastItem","firstItem","getHash","shortcut","unbind","initKeys","createCommand","expr","getExpressions","words","getWords","commandKeys","specialKeys","charCodeAt","printableKey","fromCharCode","getHashFromEvent","junctionChar","term","combinationChar","backspace","tab","esc","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","keyboard_navigation","isTaskFocused","isInlineEditorCell","focusHandler","$preventDefault","reFocusActiveNode","mousedownHandler","locateTask","removeAttribute","onReady","updateRender","_redrawTasks","focusedItemVisible","nodeConstructor","getScope","scopes","headerCell","taskCell","findVisibleColumnIndex","keyNavFacade","addShortcut","scopeObject","getShortcutHandler","removeShortcut","getScopeName","setupKeyNav","isExpanded","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreen","backupBodyPadding","backupElementSizes","zIndex","modified","backupPositioning","updateSizes","expandGantt","onFullScreenChange","getFullscreenElement","positions","originalPositioning","resetParentPositioning","setFullScreenSizes","record","restoreParentPositioning","restoreSizes","cantFullscreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","expand","requestArguments","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","collapse","requestExitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","exitFullscreen","EventsManager","_mouseDown","_calculateDirectionVector","vectors","resultVector_1","vector","magnitude","angleDegrees","atan2","_applyDndReadyStyles","_timeline","_clearDndReadyStyles","_getScrollPosition","_countNewScrollPosition","coords","_startPoint","shiftY","_scrollState","_setScrollPosition","requestAnimationFrame","_stopDrag","_originalReadonly","_startDrag","enabled","filterTargets","eventsManager_1","helpers_1","SelectedRegion","_el","relative","_singleRow","_getTaskPositionByTop","_view","_viewPort","_endPoint","draw","singleRow","_useRequestAnimationFrame","useRequestAnimationFrame","getElement","setStart","startPoint","_startDate","setEnd","endPoint","_endDate","_positionPoint","absolute","setPosition","positionPoint","tasksByTime","tasksByIndex","_getTasksByTop","getInBounds","startValue","endValue","selectedRegion","_originPosition","_restoreOriginPosition","scheduledDndCoordinates","_getCoordinates","coordinates","viewPortBounds","selectedRegion_1","defaultConfig","eventsManager","clickDrag","__assign","click_drag","click_drag_1","drag_timeline_1","fullscreen_1","quick_info_1","quick_info","extensions_gpl_1"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dhtmlxgantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dhtmlxgantt\"] = factory();\n\telse\n\t\troot[\"dhtmlxgantt\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 250);\n","var helpers = require(\"./helpers\");\r\n\r\nfunction isCustomType(object){\r\n\tvar constructorString = object.constructor.toString();\r\n\tvar plainObjectConstructor = ({}).constructor.toString();\r\n\r\n\treturn constructorString !== plainObjectConstructor;\r\n}\r\n\r\nfunction copy(object) {\r\n\tvar i, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\r\n\t\tswitch (true){\r\n\t\t\tcase (helpers.isDate(object)):\r\n\t\t\t\tresult = new Date(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isArray(object)):\r\n\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isStringObject(object)):\r\n\t\t\t\tresult = new String(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isNumberObject(object)):\r\n\t\t\t\tresult = new Number(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isBooleanObject(object)):\r\n\t\t\t\tresult = new Boolean(object);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tif(isCustomType(object)){\r\n\t\t\t\t\tresult = Object.create(object);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (i in object) {\r\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_.])\", \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction hasClass(element, className){\r\n\tif ('classList' in element) {\r\n\t\treturn element.classList.contains(className);\r\n\t} else { \r\n\t\treturn new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave;\r\nfunction insert(node, newone) {\r\n\tif(!_slave){\r\n\t\t_slave = document.createElement(\"div\");\r\n\t}\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = \"\";\r\n\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tvar d = document.documentElement;\r\n\tvar box = elementPosition(node);\r\n\r\n\treturn {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nfunction closest(element, selector){\r\n\tif(element.closest){\r\n\t\treturn element.closest(selector);\r\n\t}else if(element.matches || element.msMatchesSelector || element.webkitMatchesSelector){\r\n\t\tvar el = element;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tvar method = el.matches || el.msMatchesSelector || el.webkitMatchesSelector;\r\n\r\n\t\t\tif (method.call(el, selector)) return el;\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1); \r\n\t\treturn null;\r\n\t}else{\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Your browser is not supported\");\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n\thasClass: hasClass,\r\n\tclosest: closest\r\n};","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback) {\r\n\tif (arr.forEach) {\r\n\t\tarr.forEach(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback) {\r\n\tif (arr.map) {\r\n\t\treturn arr.map(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\t\treturn resArray;\r\n\t}\r\n}\r\n\r\n\r\nfunction arrayFind(arr, callback) {\r\n\tif (arr.find) {\r\n\t\treturn arr.find(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\treturn arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayIncludes(arr, item) {\r\n\tif(arr.includes){\r\n\t\treturn arr.includes(item);\r\n\t}else{\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i] === item) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction isValidDate(obj){\r\n\treturn isDate(obj) && !isNaN(obj.getTime());\r\n}\r\n\r\nfunction arrayFilter(arr, callback) {\r\n\tvar result = [];\r\n\r\n\tif (arr.filter) {\r\n\t\treturn arr.filter(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\tresult[result.length] = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction hashToArray(hash) {\r\n\tvar result = [];\r\n\r\n\tfor (var key in hash) {\r\n\t\tif (hash.hasOwnProperty(key)) {\r\n\t\t\tresult.push(hash[key]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction arraySome(arr, callback) {\r\n\tif (arr.length === 0) return false;\r\n\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tif (callback(arr[i], i, arr)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction arrayDifference(arr, callback) {\r\n\treturn arrayFilter(arr, function(item, i) {\r\n\t\treturn !callback(item, i);\r\n\t});\r\n}\r\n\r\nfunction throttle (callback, timeout) {\r\n\tvar wait = false;\r\n\r\n\treturn function () {\r\n\t\tif (!wait) {\r\n\t\t\tcallback.apply(null, arguments);\r\n\t\t\twait = true;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\twait = false;\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\r\n\tvar result = function() {\r\n\t\tresult.$cancelTimeout();\r\n\t\tresult.$pending = true;\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\tresult.$pending = false;\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tresult.$pending = false;\r\n\tresult.$cancelTimeout = function(){\r\n\t\tclearTimeout(timer);\r\n\t\tresult.$pending = false;\r\n\t};\r\n\tresult.$execute = function(){\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tcallback.apply(this, args);\r\n\t\tresult.$cancelTimeout();\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction sortArrayOfHash(arr, field, desc) {\r\n\tvar compare = function(a, b) {\r\n\t\treturn a < b;\r\n\t};\r\n\r\n\tarr.sort(function(a, b) {\r\n\t\tif (a[field] === b[field]) return 0;\r\n\r\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\r\n\t});\r\n}\r\n\r\nfunction objectKeys(obj) {\r\n\tif (Object.keys) {\r\n\t\treturn Object.keys(obj);\r\n\t}\r\n\tvar result = [];\r\n\tvar key;\r\n\tfor (key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tresult.push(key);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction isEventable(obj) {\r\n\treturn obj.attachEvent && obj.detachEvent;\r\n}\r\n\r\n//GS-1090: A task should be able to have the id = 0\r\nfunction replaceValidZeroId(id, rootId) {\r\n\tif (checkZeroId(id) && !checkZeroId(rootId)){\r\n\t\tid = \"0\";\r\n\t}\r\n\treturn id;\r\n}\r\n\r\nfunction checkZeroId(id) {\r\n\tif (id === 0){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap,\r\n\tarrayIncludes: arrayIncludes,\r\n\tarrayFind: arrayFind,\r\n\tarrayFilter: arrayFilter,\r\n\tarrayDifference: arrayDifference,\r\n\tarraySome: arraySome,\r\n\thashToArray: hashToArray,\r\n\tsortArrayOfHash: sortArrayOfHash,\r\n\tthrottle: throttle,\r\n\tisArray: isArray,\r\n\tisDate: isDate,\r\n\tisValidDate: isValidDate,\r\n\tisStringObject: isStringObject,\r\n\tisNumberObject: isNumberObject,\r\n\tisBooleanObject: isBooleanObject,\r\n\tdelay: delay,\r\n\tobjectKeys: objectKeys,\r\n\tisEventable: isEventable,\r\n\treplaceValidZeroId: replaceValidZeroId,\r\n\tcheckZeroId: checkZeroId,\r\n\tfindBinary: findBinary\r\n};","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","var EventHost = function(){\r\n\tthis._silent_mode = false;\r\n\tthis.listeners = {};\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar handlers = {};\r\n\tvar index = 0;\r\n\tvar eventStorage = function(){\r\n\t\tvar combinedResult = true;\r\n\t\tfor(var i in handlers){\r\n\t\t\tvar handlerResult = handlers[i].apply(obj, arguments);\r\n\t\t\tcombinedResult=combinedResult && handlerResult;\r\n\t\t}\r\n\t\treturn combinedResult;\r\n\t};\r\n\teventStorage.addEvent=function(handler, settings){\r\n\t\tif (typeof (handler) == \"function\"){\r\n\t\t\tvar handlerId;\r\n\t\t\tif(settings && settings.id){\r\n\t\t\t\thandlerId = settings.id;\r\n\t\t\t}else{\r\n\t\t\t\thandlerId = index;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings && settings.once){\r\n\t\t\t\tvar originalHandler = handler;\r\n\t\t\t\thandler = function(){\r\n\t\t\t\t\toriginalHandler();\r\n\t\t\t\t\teventStorage.removeEvent(handlerId);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\thandlers[handlerId] = handler;\r\n\t\t\treturn handlerId;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\teventStorage.removeEvent=function(id){\r\n\t\tdelete handlers[id];\r\n\t};\r\n\r\n\teventStorage.clear = function(){\r\n\t\thandlers = {};\r\n\t};\r\n\r\n\treturn eventStorage;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(eventName, handler, settings){\r\n\t\teventName = 'ev_'+eventName.toLowerCase();\r\n\t\tif (!eventHost.listeners[eventName]){\r\n\t\t\teventHost.listeners[eventName] = createEventStorage(this);\r\n\t\t}\r\n\r\n\t\tif(settings && settings.thisObject){\r\n\t\t\thandler = handler.bind(settings.thisObject);\r\n\t\t}\r\n\r\n\t\tvar innerId = eventHost.listeners[eventName].addEvent(handler, settings);\r\n\r\n\t\tvar handlerId = (eventName+':'+innerId); //return ID (ev_eventname:1)\r\n\t\tif(settings && settings.id){\r\n\t\t\thandlerId = settings.id;\r\n\t\t}\r\n\t\treturn handlerId;\r\n\t};\r\n\r\n\tobj.attachAll = function(callback){\r\n\t\tthis.attachEvent('listen_all', callback);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, eventArguments){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\tif (listeners['ev_listen_all']){\r\n\t\t\tlisteners['ev_listen_all'].apply(this, [name].concat(eventArguments));\r\n\t\t}\r\n\r\n\t\tif (listeners[handlerName])\r\n\t\t\treturn listeners[handlerName].apply(this, eventArguments);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tobj.checkEvent=function(name){\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\treturn (!!listeners['ev_'+name.toLowerCase()]);\r\n\t};\r\n\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tfor(var i in listeners){\r\n\t\t\t\tlisteners[i].removeEvent(id); //remove event\r\n\t\t\t}\r\n\r\n\t\t\tvar list = id.split(':');//get EventName and ID\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tif(list.length === 2){\r\n\t\t\t\tvar eventName = list[0];\r\n\t\t\t\tvar eventId = list[1];\r\n\t\t\t\tif(listeners[eventName]){\r\n\t\t\t\t\tlisteners[eventName].removeEvent(eventId); //remove event\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost.listeners) {\r\n\t\t\teventHost.listeners[name].clear();\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;","module.exports = function getVisibleTasksRange(gantt, view, config, datastore, viewport){\r\n\tvar buffer = 1;\r\n\tvar start = view.getItemIndexByTopPosition(viewport.y) || 0;\r\n\tvar end = view.getItemIndexByTopPosition(viewport.y_end) || datastore.count();\r\n\tvar indexStart = Math.max(0, start - buffer);\r\n\tvar indexEnd =  Math.min(datastore.count(), end + buffer);\r\n\treturn {\r\n\t\tstart: indexStart,\r\n\t\tend: indexEnd\r\n\t};\r\n};","function dummy() {\r\n\t// eslint-disable-next-line\r\n\tconsole.log(\"Method is not implemented.\"); \r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nmodule.exports = function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","var utils = require(\"./env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn utils.isNode || !gantt.$root;\r\n};","/* eslint-disable no-restricted-globals */\r\nvar isWindowAwailable = typeof window !== \"undefined\";\r\n\r\n/* eslint-enable no-restricted-globals */\r\n\r\nvar env = {\r\n\tisIE: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: isWindowAwailable && (!XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: isWindowAwailable && (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: isWindowAwailable && (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: isWindowAwailable && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: isWindowAwailable && (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: isWindowAwailable && (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: isWindowAwailable && (navigator.userAgent.indexOf(\"Edge\")!=-1),\r\n\tisNode: (!isWindowAwailable || typeof navigator == \"undefined\")\r\n};\r\n\r\nmodule.exports = env;","var utils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\t//GS-333 Add a way to scroll the HTML views:\r\n\t\tvar cell = this.$view;\r\n\t\tif (this.$config.html) cell = this.$view.firstChild;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tcell.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tcell.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000000000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000000000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n","var __extends = require(\"../../../../utils/extends\");\r\nvar htmlHelpers = require(\"../../utils/html_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\thtml += htmlHelpers.getHtmlSelect(sns.options, [{ key: \"style\", value: \"width:100%;\" }]);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","module.exports = function(gantt){\r\n\treturn gantt.config.smart_rendering && gantt._smart_render;\r\n};","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","\r\n/* eslint-disable no-restricted-globals */\r\nvar globalScope;\r\nif(typeof window !== \"undefined\"){\r\n\tglobalScope = window;\r\n}else{\r\n\tglobalScope = global;\r\n}\r\n/* eslint-enable no-restricted-globals */\r\n\r\nmodule.exports = globalScope;","/**\r\n * The state object for order branch drag and drop\r\n */\r\n\r\nvar utils = require(\"../../../../utils/utils\");\r\n\r\nmodule.exports = {\r\n\tcreateDropTargetObject: function createDropTargetObject(parent) {\r\n\t\tvar res = {\r\n\t\t\ttargetParent: null,\r\n\t\t\ttargetIndex: 0,\r\n\t\t\ttargetId: null,\r\n\t\t\tchild: false,\r\n\t\t\tnextSibling: false,\r\n\t\t\tprevSibling: false\r\n\t\t};\r\n\r\n\t\tif (parent) {\r\n\t\t\tutils.mixin(res, parent, true);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tnextSiblingTarget: function nextSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.nextSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) != result.targetParent || result.targetIndex < store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex += 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprevSiblingTarget: function prevSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.prevSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) == result.targetParent && result.targetIndex > store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex -= 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tfirstChildTarget: function firstChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.targetParent = result.targetId;\r\n\t\tresult.targetIndex = 0;\r\n\t\tresult.child = true;\r\n\t\treturn result;\r\n\t},\r\n\tlastChildTarget: function lastChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar children = store.getChildren(targetTaskId);\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = children[children.length - 1];\r\n\t\tresult.targetParent = targetTaskId;\r\n\t\tresult.targetIndex = children.length;\r\n\t\tresult.nextSibling = true;\r\n\t\treturn result;\r\n\t}\r\n};","var isLegacyRender = require(\"../is_legacy_smart_render\");\r\n\r\nmodule.exports = function isColumnVisible(columnIndex, scale, viewPort, gantt){\r\n\tvar width = scale.width[columnIndex];\r\n\tif(width <= 0){\r\n\t\treturn false;\r\n\t}\r\n\tif(!gantt.config.smart_rendering || isLegacyRender(gantt)){\r\n\t\treturn true;\r\n\t}\r\n\tvar cellLeftCoord = scale.left[columnIndex] - width;\r\n\tvar cellRightCoord = scale.left[columnIndex] + width;\r\n\treturn (cellLeftCoord <= viewPort.x_end && cellRightCoord >= viewPort.x);//do not render skipped columns\r\n};","module.exports = function getVisibleCellsRange(scale, viewport){\r\n\tvar firstCellIndex = 0;\r\n\tvar lastCellIndex = scale.left.length - 1;\r\n\tif(viewport){\r\n\t\tfor(var i = 0; i < scale.left.length; i++){\r\n\t\t\tvar left = scale.left[i];\r\n\t\t\tif(left < viewport.x){\r\n\t\t\t\tfirstCellIndex = i;\r\n\t\t\t}\r\n\t\t\tif(left > viewport.x_end){\r\n\t\t\t\tlastCellIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tstart: firstCellIndex,\r\n\t\tend: lastCellIndex\r\n\t};\r\n};","module.exports = function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","function createTaskRenderer(gantt) {\r\n\r\n\tfunction _render_task_element(task, view, config) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view, config);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view, config);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view, config) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\t\tif (!gantt._isTaskInTimelineLimits(task)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = config,\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\t\tvar height = view.getBarHeight(task.id, taskType == cfg.types.milestone);\r\n\r\n\t\tvar controlsMargin = 0;\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tcontrolsMargin = (height - pos.height)/2;\r\n\t\t}\r\n\r\n\t\tvar padd = Math.floor((view.getItemHeight(task.id) - height) / 2);\r\n\t//\tif(task.type == cfg.types.milestone){\r\n\t//\t\tpadd -= 1;\r\n\t//\t}\r\n\t//\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t//\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t//\t\tpadd += 1;\r\n\t//\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute) {\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t\tdiv.setAttribute(view.$config.bind + \"_id\", task.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tif (pos.width < 20){\r\n\t\t\tcss += \" gantt_thin_task\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + (taskType == cfg.types.milestone ? pos.height : height) + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg, controlsMargin);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass, marginStyle) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\tif(marginStyle){\r\n\t\t\tcontent.style[marginStyle.type] = Math.abs(marginStyle.value) + \"px\";\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginRight\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.leftside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginLeft\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.rightside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone){\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\t} else if(gantt.getTaskType(task.type) == gantt.config.types.milestone && width) {\r\n\t\t\tcontent.style.height = content.style.width = width + \"px\";\r\n\t\t}\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task) && ((cfg.open_split_tasks && !task.$open) || !cfg.open_split_tasks)) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && gantt.isSelectedTask(itemId)) {\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\t\t}\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id) &&\r\n\t\t\t(state.link_target_id == itemId || state.link_source_id == itemId)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config, margin) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginLeft = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginRight = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","// optimized checker for task bars smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\nmodule.exports = function isBarInViewport(item, viewport, view, config, gantt){\r\n\tif(!item.start_date || !item.end_date){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar top = view.getItemTop(item.id);\r\n\tvar height = view.getItemHeight(item.id);\r\n\r\n\tif(top > viewport.y_end || top + height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 200;\r\n\tvar startCoord = view.posFromDate(item.start_date);\r\n\tvar endCoord = view.posFromDate(item.end_date);\r\n\tvar left = Math.min(startCoord, endCoord) - padding;\r\n\tvar right = Math.max(startCoord, endCoord) + padding;\r\n\r\n\tif(left > viewport.x_end || right < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\nvar helpers = require(\"../../../utils/helpers\");\r\nvar topPositionMixin = require(\"../row_position_mixin\");\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\tthis._posFromDateCache = {};\r\n\tthis._timelineDragScroll = null;\r\n\tutils.mixin(this, topPositionMixin(this));\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container) {\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = \"data-\" + this.$config.bindLinks + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t\tif (this.$gantt.ext.dragTimeline) {\r\n\t\t\tthis._timelineDragScroll = this.$gantt.ext.dragTimeline.create();\r\n\t\t\tthis._timelineDragScroll.attach(this);\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tthis.$task_bg.style.height = this.getTotalHeight() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this.isVisible() ? this._tasks.full_width : 0;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.isVisible() ? this.$config.width : 0,\r\n\t\t\ty: this.isVisible() ? this.$config.height : 0,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar viewPort = this.getViewPort();\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, viewPort.x, viewPort.x_end);\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar barVisible = function(id, task){\r\n\t\t\treturn !task.hide_bar;\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar(),\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter, barVisible]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskSplitBar(),\r\n\t\t\t\tfilter: [taskFilter],\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tappend: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskRollupBar(),\r\n\t\t\t\tfilter: [taskFilter],\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tappend: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg(),\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\t//function(){\r\n\t\t\t\t\t//\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t//},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link(),\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tthis._bindStore();\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\" || (layer && layer.render && layer.update)){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.view = this;\r\n\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.view = this;\r\n\t\t\t//\tlayer.getViewPort = getViewPort;\r\n\t\t\t//\tsubscribeSmartRender(layer);\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tvar staticBgContainer = self.$task_bg_static;\r\n\t\t\t\tif(!staticBgContainer){\r\n\t\t\t\t\tstaticBgContainer = document.createElement(\"div\");\r\n\t\t\t\t\tstaticBgContainer.className = \"gantt_task_bg\";\r\n\t\t\t\t\tself.$task_bg_static = staticBgContainer;\r\n\t\t\t\t\tif(self.$task_bg.nextSibling){\r\n\t\t\t\t\t\tself.$task_data.insertBefore(staticBgContainer, self.$task_bg.nextSibling);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tself.$task_data.appendChild(staticBgContainer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(staticBgContainer, config, self.getScale(), self.getTotalHeight(), self.getItemHeight(item ? item.id : null));\r\n\t\t\t\t}\r\n\t\t\t}else if(config.static_background){\r\n\t\t\t\tif(self.$task_bg_static && self.$task_bg_static.parentNode){\r\n\t\t\t\t\tself.$task_bg_static.parentNode.removeChild(self.$task_bg_static);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent(\"onDestroy\", function () {\r\n\t\t\tstaticRender.destroy();\r\n\t\t});\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._linkLayers) {\r\n\t\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\t\t\tthis._posFromDateCache = {};\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.templates;\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.templates;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, css = null;\r\n\r\n\t\tvar content = config.format || config.template || config.date;\r\n\r\n\t\tif(typeof content === \"string\"){\r\n\t\t\tcontent = this.$gantt.date.date_to_str(content);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = helpers.findBinary(config.left, fromPos);\r\n\t\t\tendIndex = helpers.findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = helpers.findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tif(!date){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tvar dateValue = String(date.valueOf());\r\n\r\n\t\tif(this._posFromDateCache[dateValue] !== undefined){\r\n\t\t\treturn this._posFromDateCache[dateValue];\r\n\t\t}\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar roundPos = Math.round(pos);\r\n\t\tthis._posFromDateCache[dateValue] = roundPos;\r\n\t\treturn Math.round(roundPos);\r\n\t},\r\n\r\n\t_getNextVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the right\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex++;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getPrevVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the left\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex--;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getClosestVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\tvar visibleDateIndex = this._getNextVisibleColumn(startIndex, columns, ignores);\r\n\t\tif (!columns[visibleDateIndex]) {\r\n\t\t\tvisibleDateIndex =  this._getPrevVisibleColumn(startIndex, columns, ignores);\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dateIndex = helpers.findBinary(days, pos);\r\n\r\n\t\tvar visibleIndex = this._getClosestVisibleColumn(dateIndex, days, ignores);\r\n\t\tvar visibleDate = days[visibleIndex];\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\r\n\t\tif(!visibleDate){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[visibleIndex]) / this._getColumnDuration(this._tasks, days[visibleIndex]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[visibleIndex] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn visibleIndex + part;\r\n\t\t}\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\r\n\t\tvar height = this.getBarHeight(task.id);\r\n\t\tvar rowHeight = this.getItemHeight(task.id);\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width,\r\n\t\t\trowHeight: rowHeight\r\n\t\t};\r\n\t},\r\n\r\n\tgetBarHeight: function(taskId, isMilestoneRender){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar task = this.$config.rowStore.getItem(taskId);\r\n\t\t// height of the bar item\r\n\t\tvar height = task.task_height || task.bar_height || config.bar_height || config.task_height;\r\n\t\tvar rowHeight = this.getItemHeight(taskId);\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = rowHeight - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, rowHeight);\r\n\t\tif (isMilestoneRender) { // to get correct height for addapting Milestone to the row\r\n\t\t\theight = Math.round(height / Math.sqrt(2));\r\n\t\t}\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale(config)].concat(helpers.getSubScales(config));\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._timelineCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._timelineCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore._timelineCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._timelineCacheAttached);\r\n\t\t\t\trowStore._timelineCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefresh: function(){\r\n\t\tthis._bindStore();\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\t\tthis._unbindStore();\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tif(this._timelineDragScroll) {\r\n\t\t\tthis._timelineDragScroll.destructor();\r\n\t\t\tthis._timelineDragScroll = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;","module.exports = function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\"),\r\n\ttopPositionMixin = require(\"../row_position_mixin\"),\r\n\trowResize = require(\"./task_grid_row_resize\");\r\n\r\nvar ColumnDnd = require(\"../plugins/column_grid_dnd\").default;\r\n\r\nvar Grid = function (parent, config, factory, gantt) {\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n\tutils.mixin(this, topPositionMixin(this));\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function(container) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\t\tvar _ganttConfig = this.$getConfig();\r\n\t\tvar reorderColumns = _ganttConfig.reorder_grid_columns || false;\r\n\t\tif (this.$config.reorder_grid_columns !== undefined) {\r\n\t\t\treorderColumns = this.$config.reorder_grid_columns;\r\n\t\t}\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \" + gridAriaAttr + \"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \" +\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = _ganttConfig[this.$config.bind + \"_attribute\"];\r\n\t\tif (!attr && this.$config.bind) {\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\tif (!this.$config.layers) {\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tvar resizerrow = rowResize(gantt, this);\r\n\t\tresizerrow.init();\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (reorderColumns) {\r\n\t\t\tthis._columnDND = new ColumnDnd(gantt, this);\r\n\t\t\tthis._columnDND.init();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\t_validateColumnWidth: function (column, property) {\r\n\t\t// user can set {name:\"text\", width:\"200\",...} for some reason,\r\n\t\t// check and convert it to number when possible\r\n\t\tvar value = column[property];\r\n\t\tif (value && value != \"*\") {\r\n\t\t\tvar gantt = this.$gantt;\r\n\t\t\tvar numericWidth = value * 1;\r\n\t\t\tif (isNaN(numericWidth)) {\r\n\t\t\t\tgantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\r\n\t\t\t} else {\r\n\t\t\t\tcolumn[property] = numericWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function (width, height) {\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$config.height = this.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar elasticColumns = config.grid_elastic_columns;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tthis._validateColumnWidth(columns[i], \"min_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"max_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"width\");\r\n\r\n\t\t\tinnerWidth += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif (isNaN(innerWidth) || !this.$config.scrollable) {\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable && elasticColumns && !isNaN(innerWidth)){\r\n\r\n\t\t\tvar minWidth = 0;\r\n\t\t\tcolumns.forEach(function(col){\r\n\t\t\t\tminWidth += col.min_width || config.min_grid_column_width;\r\n\t\t\t});\r\n\r\n\t\t\tvar columnsWidth = Math.max(minWidth, width);\r\n\t\t\tinnerWidth = this._setColumnsWidth(columnsWidth);\r\n\t\t\touterWidth = width;\r\n\t\t}\r\n\r\n\t\tif (this.$config.scrollable) {\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t} else {\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (outerWidth !== width) {\r\n\t\t\tif(outerWidth !== undefined){\r\n\t\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t\t}else{\r\n\t\t\t\tif(!isNaN(innerWidth)){\r\n\t\t\t\t\tthis._setColumnsWidth(innerWidth);\r\n\t\t\t\t\tconfig.grid_width = innerWidth;\r\n\t\t\t\t\tthis.$config.width = innerWidth - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function () {\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._gridCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._gridCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore._gridCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._gridCacheAttached);\r\n\t\t\t\trowStore._gridCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function (left, top) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\r\n\t\tif (left * 1 == left) {\r\n\t\t\tthis.$config.scrollLeft = this.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif (top * 1 == top) {\r\n\t\t\tthis.$config.scrollTop = this.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function (name, excludeHidden) {\r\n\t\tvar columns = this.$getConfig().columns;\r\n\t\tvar hiddenIndexShift = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t// GS-1257. If the cell is hidden, the target column index should be correct\r\n\t\t\tif (excludeHidden && columns[i].hide){\r\n\t\t\t\thiddenIndexShift++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i - hiddenIndexShift;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function (name) {\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif (index === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function () {\r\n\t\tif (this.$parent && this.$parent.$config) {\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t} else {\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t// getItemHeight: function () {\r\n\t// \tvar config = this.$getConfig();\r\n\t// \treturn config.row_height;\r\n\t// },\r\n\r\n\t_createLayerConfig: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridTaskRowResizer(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tappend: true,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn gantt.config.resize_rows;\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function (gantt) {\r\n\t\tif (!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (!taskRenderer) {\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function () { return self.$grid_data; }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor (var i = 0; taskLayers && i < taskLayers.length; i++) {\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.view = this;\r\n\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function (id) {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif (!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif (this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif (scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif (!contentHeight) {\r\n\t\t\tcontentHeight = store ? this.getTotalHeight() : 0;\r\n\t\t}\r\n\r\n\t\tif (contentHeight) {\r\n\t\t\tif (this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode) {\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function () {\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif (!store) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis._initSmartRenderingPlaceholder = function () { };\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function (gantt) {\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor (var i = 0; i < this._taskLayers.length; i++) {\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function (column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// set min width only if width < than config.min_grid_column_width\r\n\t_checkGridColumnMinWidthLimits: function (columns, config) {\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tvar width = columns[i].width * 1;\r\n\t\t\tif (!columns[i].min_width && width < config.min_grid_column_width){\r\n\t\t\t\tcolumns[i].min_width = width;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function () {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._checkGridColumnMinWidthLimits(columns, config); // FIX ME: should it be before calculating limits?\r\n\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]\r\n\t_setColumnsWidth: function (newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i = 0; i < start_index + 1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i = start_index + 1; i < columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar share = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width + share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width + share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width + share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index + 1; i < columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function () {\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\r\n\t\t\t// autofit adjusts columns widths to the outer grid width\r\n\t\t\t// it doesn't makes sense if grid has inner scroll with elastic columns\r\n\t\t\tif (config.autofit && !config.grid_elastic_columns) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length - i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length - i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif (changed) {\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif (config.rtl) {\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name] || labels[col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif (this._renderHeaderResizers) {\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function () {\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function () {\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tif (this._mouseDelegates) {\r\n\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\tthis._mouseDelegates = null;\r\n\t\t}\r\n\t\tthis._unbindStore();\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\t\tif (this.$config.rowStore) {\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_isLegacyMode: function(config){\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\t\t\treturn scaleConfig.scale_unit || scaleConfig.date_scale || scaleConfig.subscales;\r\n\t\t},\r\n\t\t_prepareScaleObject: function(scale){\r\n\t\t\tvar format = scale.format;\r\n\t\t\tif(!format){\r\n\t\t\t\tformat = scale.template || scale.date || \"%d %M\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof format === \"string\"){\r\n\t\t\t\tformat = gantt.date.date_to_str(format);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tunit: scale.unit || \"day\",\r\n\t\t\t\tstep: scale.step || 1,\r\n\t\t\t\tformat: format,\r\n\t\t\t\tcss: scale.css\r\n\t\t\t};\r\n\t\t},\r\n\t\tprimaryScale: function(config) {\r\n\t\t\tvar templates = services.getService(\"templateLoader\");\r\n\t\t\tvar legacyMode = this._isLegacyMode(config);\r\n\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\r\n\t\t\tvar result;\r\n\t\t\tif(legacyMode){\r\n\t\t\t\ttemplates.initTemplate(\"date_scale\", undefined, undefined, scaleConfig, gantt.config.templates);\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tunit: gantt.config.scale_unit,\r\n\t\t\t\t\tstep: gantt.config.step,\r\n\t\t\t\t\ttemplate: gantt.templates.date_scale,\r\n\t\t\t\t\tdate: gantt.config.date_scale,\r\n\t\t\t\t\tcss: gantt.templates.scale_cell_class\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\tvar primaryScale = scaleConfig.scales[0];\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tunit: primaryScale.unit,\r\n\t\t\t\t\tstep: primaryScale.step,\r\n\t\t\t\t\ttemplate: primaryScale.template,\r\n\t\t\t\t\tformat: primaryScale.format,\r\n\t\t\t\t\tdate: primaryScale.date,\r\n\t\t\t\t\tcss: primaryScale.css || gantt.templates.scale_cell_class\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn this._prepareScaleObject(result);\r\n\t\t},\r\n\t\tgetSubScales: function(config) {\r\n\t\t\tvar legacyMode = this._isLegacyMode(config);\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\t\t\tvar scales;\r\n\t\t\tif(legacyMode){\r\n\t\t\t\tscales = scaleConfig.subscales || [];\r\n\t\t\t}else{\r\n\t\t\t\tscales = scaleConfig.scales.slice(1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn scales.map(function(scale){\r\n\t\t\t\treturn this._prepareScaleObject(scale);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (gantt.config.skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n","var helpers = require(\"../../../utils/helpers\");\r\n\r\nvar htmlHelpers = {\r\n\tgetHtmlSelect: function(options, attributes, value) {\r\n\t\tvar innerHTML = \"\";\r\n\t\tvar _this = this;\r\n\r\n\t\toptions = options || [];\r\n\t\t\r\n\t\thelpers.forEach(options, function(entry) {\r\n\t\t\tvar _attributes = [{ key: \"value\", value: entry.key }];\r\n\r\n\t\t\tif (value == entry.key) {\r\n\t\t\t\t_attributes[_attributes.length] = { key: \"selected\", value: \"selected\" };\r\n\t\t\t}\r\n\t\t\tif (entry.attributes) {\r\n\t\t\t\t_attributes = _attributes.concat(entry.attributes);\r\n\t\t\t}\r\n\t\t\tinnerHTML += _this.getHtmlOption({ innerHTML: entry.label }, _attributes);\r\n\t\t});\r\n\r\n\t\treturn _getHtmlContainer(\"select\", { innerHTML: innerHTML }, attributes);\r\n\t},\r\n\tgetHtmlOption: function(options, attributes) { return _getHtmlContainer(\"option\", options, attributes); },\r\n\tgetHtmlButton: function(options, attributes) { return _getHtmlContainer(\"button\", options, attributes); },\r\n\tgetHtmlDiv: function(options, attributes) { return _getHtmlContainer(\"div\", options, attributes); },\r\n\tgetHtmlLabel: function(options, attributes) { return _getHtmlContainer(\"label\", options, attributes); },\r\n\tgetHtmlInput: function(attributes) {\r\n\t\treturn \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\r\n\t}\r\n};\r\n\r\nfunction _getHtmlContainer(tag, options, attributes) {\r\n\tvar html;\r\n\r\n\toptions = options || [];\r\n\t\r\n\thtml = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag +\">\";\r\n\treturn html;\r\n\r\n}\r\n\r\nfunction _getHtmlAttributes(attributes) {\r\n\tvar html = \"\";\r\n\r\n\thelpers.forEach(attributes, function(entry) {\r\n\t\thtml += \" \" + entry.key + \"='\" + entry.value + \"'\";\r\n\t});\r\n\treturn html;\r\n}\r\n\r\nmodule.exports = htmlHelpers;","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function createResourceTimelineBuilder(gantt){\r\n\r\n\tvar resourceTaskCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getResourceLoad(resource, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = resource.id + \"_\" + resourceProperty  + \"_\" + scale.unit + \"_\" + scale.step;\r\n\t\tvar res;\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\r\n\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoadFromAssignments(items, scale, assignmentsPassed){\r\n\t\tvar scaleUnit = scale.unit;\r\n\t\tvar scaleStep = scale.step;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tvar precalculatedTimes = {};\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\tvar item = items[i];\r\n\t\t\tvar task = item;\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\ttask = gantt.getTask(item.task_id);\r\n\t\t\t}\r\n\t\t\tvar minDate = (item.start_date || task.start_date);\r\n\t\t\tvar maxDate = (item.end_date || task.end_date);\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\tif(item.start_date){\r\n\t\t\t\t\tminDate = new Date(Math.max(item.start_date.valueOf(), task.start_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t\tif(item.end_date){\r\n\t\t\t\t\tmaxDate = new Date(Math.min(item.end_date.valueOf(), task.end_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar firstColumn = helpers.findBinary(scale.trace_x, minDate.valueOf());\r\n\t\t\tvar currDate = new Date(scale.trace_x[firstColumn] || gantt.date[scaleUnit + \"_start\"](new Date(minDate)));\r\n\r\n\t\t\tvar calendar = gantt.config.work_time ? gantt.getTaskCalendar(task) : gantt;\r\n\t\t\tprecalculatedTimes[calendar.id] = {};\r\n\t\t\twhile (currDate < maxDate) {\r\n\t\t\t\tvar cachedTimes = precalculatedTimes[calendar.id];\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, scaleStep, scaleUnit);\r\n\r\n\t\t\t\tif(cachedTimes[timestamp] === false){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar isWorkTime = calendar.isWorkTime({date: date, task: task, unit: scaleUnit});\r\n\t\t\t\tif(!isWorkTime){\r\n\t\t\t\t\tcachedTimes[timestamp] = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = {tasks: [], assignments: []};\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].tasks.push(task);\r\n\t\t\t\tif(assignmentsPassed){\r\n\t\t\t\t\ttimegrid[timestamp].assignments.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn timegrid;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resource, resourceProperty, scale, timeline) {\r\n\r\n\t\tvar items;\r\n\t\tvar assignmentsPassed = false;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tif(gantt.config.process_resource_assignments && resourceProperty === gantt.config.resource_property){\r\n\t\t\tif(resource.$role == \"task\"){\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\r\n\t\t\t}else{\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.id);\r\n\t\t\t}\r\n\r\n\t\t\tassignmentsPassed = true;\r\n\t\t}else if(resource.$role == \"task\"){\r\n\t\t\titems = [];\r\n\t\t}else{\r\n\t\t\titems = gantt.getTaskBy(resourceProperty, resource.id);\r\n\t\t}\r\n\r\n\t\tvar timegrid = calculateResourceLoadFromAssignments(items, scale, assignmentsPassed);\r\n\t\tvar scaleUnit = scale.unit;\r\n\t\tvar scaleStep = scale.step;\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks, assignments, cell;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, scaleStep, scaleUnit);\r\n\t\t\tcell = timegrid[start.valueOf()] || {};\r\n\t\t\ttasks = cell.tasks || [];\r\n\t\t\tassignments = cell.assignments || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks,\r\n\t\t\t\t\tassignments: assignments\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttimetable.push(null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\r\n\r\n\treturn getResourceLoad;\r\n};","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../utils/dom_helpers\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t\t// GS-707 If the scrollbar was hidden then showed, the container resize shouldn't happen because of that\r\n\t\t\t\tfor(var j = 0; j < visibleScrollbars.length; j++){\r\n\t\t\t\t\tif(visibleScrollbars[j] == scrollbar){\r\n\t\t\t\t\t\tthis.$gantt.$scrollbarRepaint = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\t// GS-149 & GS-150: By default this code only increases the container sizes, because of that, the cell sizes\r\n\t\t// are also increased. Keep this code here in the case if something goes wrong\r\n\t\t/*\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\t\t*/\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000000000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000000000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\nimport { WorkUnitsMapCache } from \"./workunit_map_cache\";\r\nimport { WorkUnitsObjectCache } from \"./workunit_object_cache\";\r\nexport { LargerUnitsCache } from \"./larger_units_helper\";\r\n\r\nexport function createCacheObject(): IWorkUnitCache {\r\n\r\n\t// worktime hash is on the hot path,\r\n\t// Map seems to work faster than plain array, use it whenever possible\r\n\tif (typeof Map !== \"undefined\") {\r\n\t\treturn new WorkUnitsMapCache();\r\n\t} else {\r\n\t\treturn new WorkUnitsObjectCache();\r\n\t}\r\n}\r\n","var utils = require(\"../../utils/utils\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getWorkHours method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getWorkHours method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for isWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for isWorkTime method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t}\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (helpers.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\tif(!helpers.isValidDate(config.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.end_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid end_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid end_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\r\n\t\t\t\t// received a task object as an argument\r\n\t\t\t\t// ignore 'unit' and 'step' properties in this case, since it's likely a part of data model of a task\r\n\t\t\t\tprocessedConfig.unit = null;\r\n\t\t\t\tprocessedConfig.step = null;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;","var quickPositionHelperFactory = require(\"./row_position_fixed_height\");\r\n\r\nfunction createMixin(view){\r\n\tvar getItemTopCache = {};\r\n\tvar getRowTopCache = {};\r\n\tvar getItemHeightCache = null;\r\n\tvar totalHeightCache = -1;\r\n\tvar getItemHeightCacheState = null;\r\n\r\n\tvar quickPosition = quickPositionHelperFactory(view);\r\n\r\n\treturn {\r\n\t\t_resetTopPositionHeight: function(){\r\n\t\t\tgetItemTopCache = {};\r\n\t\t\tgetRowTopCache = {};\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\t\t_resetHeight: function(){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tvar newState = this.getCacheStateTotalHeight(store);\r\n\t\t\tif(!getItemHeightCacheState){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t}else if(this.shouldClearHeightCache(getItemHeightCacheState, newState)){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t\tgetItemHeightCache = null;\r\n\t\t\t}\r\n\r\n\t\t\ttotalHeightCache = -1;\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getRowTop(index);\r\n\t\t\t}\r\n\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif(getRowTopCache[index] !== undefined){\r\n\t\t\t\treturn getRowTopCache[index];\r\n\t\t\t}else {\r\n\t\t\t\tvar all = store.getIndexRange();\r\n\t\t\t\tvar top = 0;\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tfor(var i = 0; i < all.length; i++){\r\n\t\t\t\t\tgetRowTopCache[i] = top;\r\n\t\t\t\t\ttop += this.getItemHeight(all[i].id);\r\n\t\t\t\t\tif(i < index){\r\n\t\t\t\t\t\tresult = top;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by item id\r\n\t\t * @param {*} task_id\r\n\t\t */\r\n\t\tgetItemTop: function (taskId) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(getItemTopCache[taskId] !== undefined){\r\n\t\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t\t}\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return 0;\r\n\r\n\t\t\t\tvar itemIndex = store.getIndexById(taskId);\r\n\r\n\t\t\t\tif (itemIndex === -1 && store.getParent && store.exists(taskId)) {\r\n\t\t\t\t\tvar parentId = store.getParent(taskId);\r\n\t\t\t\t\tif (store.exists(parentId)) {\r\n\t\t\t\t\t\t// if task is not found in list - maybe it's parent is a split task and we should use parents index instead\r\n\t\t\t\t\t\tvar parent = store.getItem(parentId);\r\n\t\t\t\t\t\tif (this.$gantt.isSplitTask(parent)) {\r\n\t\t\t\t\t\t\treturn this.getItemTop(parentId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgetItemTopCache[taskId] = this.getRowTop(itemIndex);\r\n\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getItemHeight(itemId);\r\n\t\t\t}\r\n\r\n\t\t\tif(!getItemHeightCache && this.$config.rowStore){\r\n\t\t\t\tthis._fillHeightCache(this.$config.rowStore);\r\n\t\t\t}\r\n\r\n\t\t\tif(getItemHeightCache[itemId] !== undefined){\r\n\t\t\t\treturn getItemHeightCache[itemId];\r\n\t\t\t}\r\n\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return defaultHeight;\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\r\n\t\t\t\treturn getItemHeightCache[itemId] = item && item.row_height || defaultHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultHeight;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_fillHeightCache: function(store){\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgetItemHeightCache = {};\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\t\t\tstore.eachItem(function(item){\r\n\t\t\t\treturn getItemHeightCache[item.id] = item && item.row_height || defaultHeight;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetCacheStateTotalHeight: function(store){\r\n\r\n\t\t\tvar globalHeight = this.$getConfig().row_height;\r\n\t\t\tvar itemHeightCache = {};\r\n\t\t\tvar items = [];\r\n\t\t\tvar sumHeight = 0;\r\n\t\t\tif(store){\r\n\t\t\t\tstore.eachItem(function(item){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\titemHeightCache[item.id] = item.row_height;\r\n\t\t\t\t\tsumHeight += item.row_height || globalHeight;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\tglobalHeight: globalHeight,\r\n\t\t\t\titems: items,\r\n\t\t\t\tcount: items.length,\r\n\t\t\t\tsumHeight: sumHeight\r\n\t\t\t};\r\n\t\t},\r\n\t\tshouldClearHeightCache: function(oldState, newState){\r\n\r\n\t\t\tif(oldState.count != newState.count){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(oldState.globalHeight != newState.globalHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif(oldState.sumHeight != newState.sumHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in oldState.items){\r\n\t\t\t\tvar newValue = newState.items[i];\r\n\t\t\t\tif(newValue !== undefined && newValue != oldState.items[i]){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getTotalHeight();\r\n\t\t\t}\r\n\r\n\t\t\tif(totalHeightCache != -1){\r\n\t\t\t\treturn totalHeightCache;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tthis._fillHeightCache(store);\r\n\t\t\t\tvar getHeight = this.getItemHeight.bind(this);\r\n\t\t\t\tvar visibleItems = store.getVisibleItems();\r\n\t\t\t\tvar totalHeight = 0;\r\n\r\n\t\t\t\tvisibleItems.forEach(function(item){\r\n\t\t\t\t\ttotalHeight += getHeight(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttotalHeightCache = totalHeight;\r\n\t\t\t\treturn totalHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\t\treturn quickPosition.getItemIndexByTopPosition(top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tfor(var i = 0; i < store.countVisible(); i++){\r\n\t\t\t\t\tvar current = this.getRowTop(i);\r\n\t\t\t\t\tvar next = this.getRowTop(i+1);\r\n\t\t\t\t\tif(!next){\r\n\t\t\t\t\t\tvar taskId = store.getIdByIndex(i);\r\n\t\t\t\t\t\tnext = current + this.getItemHeight(taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(top >= current && top < next){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;","export default class DurationFormatterNumeric implements IDurationFormatter {\r\n\tstatic create = (settings: IDurationFormatterConfig = null): IDurationFormatter => {\r\n\t\treturn new DurationFormatterNumeric();\r\n\t}\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn !isNaN(this.parse(value));\r\n\t}\r\n\tformat = (value: number) : string => {\r\n\t\treturn String(value);\r\n\t}\r\n\tparse = (value: string) : number => {\r\n\t\treturn parseInt(value, 10);\r\n\t}\r\n}","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\nvar PrimaryScaleHelper = require(\"./ui/timeline/scales\");\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar primaryScale = (new PrimaryScaleHelper(gantt)).primaryScale();\r\n\tvar unit = primaryScale.unit;\r\n\tvar step = primaryScale.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(helper.getSubScales());\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = gantt.getSubtaskDates();\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = {\r\n\t\t\t\tstart_date: new Date(),\r\n\t\t\t\tend_date: new Date()\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar helpers = require(\"../../utils/helpers\");\r\nvar DataStore = require(\"./datastore\");\r\nvar {replaceValidZeroId} = require(\"../../utils/helpers\");\r\n\r\n// TODO: remove workaround for mixup with es5 and ts imports\r\nif(DataStore.default){\r\n\tDataStore = DataStore.default;\r\n}\r\n\r\nvar TreeDataStore = function(config){\r\n\tDataStore.apply(this, [config]);\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\t//GS-761 Update existing item instead of adding it to the new position\r\n\tthis.$initItem = function (item){\r\n\t\tvar loadedItem = item;\r\n\t\tif(config.initItem){\r\n\t\t\tloadedItem = config.initItem(loadedItem);\r\n\t\t}\r\n\t\tvar existingItem = this.getItem(item.id);\r\n\t\tif(existingItem && existingItem.parent != loadedItem.parent){\r\n\t\t\tthis.move(loadedItem.id, loadedItem.$index || -1, loadedItem.parent || this._ganttConfig.root_id);\r\n\t\t}\r\n\t\treturn loadedItem;\r\n\t};\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._eachItemMainRangeCache = null;\r\n\tthis._getItemsCache = null;\r\n\tthis._skip_refresh = false;\r\n\r\n\tthis._ganttConfig = null;\r\n\tif(config.getConfig){\r\n\t\tthis._ganttConfig = config.getConfig();\r\n\t}\r\n\r\n\tvar splitParents = {};\r\n\tvar splitItems = {};\r\n\r\n\tvar taskOpenState = {};\r\n\tvar taskVisibility = {};\r\n\tvar haveSplitItems = false;\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onPreFilter\", function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t\thaveSplitItems = false;\r\n\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tvar parent = this.getParent(item.id);\r\n\t\t\tif(item.$open && taskOpenState[parent] !== false){\r\n\t\t\t\ttaskOpenState[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskOpenState[item.id] = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._isSplitItem(item)){\r\n\t\t\t\thaveSplitItems = true;\r\n\t\t\t\tsplitParents[item.id] = true;\r\n\t\t\t\tsplitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(haveSplitItems && splitItems[parent]){\r\n\t\t\t\tsplitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(taskOpenState[parent] || taskOpenState[parent] === undefined){\r\n\t\t\t\ttaskVisibility[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskVisibility[item.id] = false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\r\n\t\tvar canOpenSplitTasks = false;\r\n\t\tif(this._ganttConfig){\r\n\t\t\tvar canOpenSplitTasks = this._ganttConfig.open_split_tasks;\r\n\t\t}\r\n\r\n\t\tvar open = taskVisibility[item.id];\r\n\r\n\t\tif(haveSplitItems){\r\n\t\t\tif(open && splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\topen = !!canOpenSplitTasks;\r\n\t\t\t}\r\n\r\n\t\t\tif(splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\titem.$split_subtask = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titem.$expanded_branch = !!taskVisibility[item.id];\r\n\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilter\", function(){\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\t\t\t\titem.$local_index = this.getBranchIndex(item.id);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\t\t_isSplitItem: function(item){\r\n\t\t\treturn (item.render == \"split\" && this.hasChild(item.id));\r\n\t\t},\r\n\t\tparse: function(data){\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\t}\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tid = replaceValidZeroId(id, this._ganttConfig.root_id);\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\ttid = replaceValidZeroId(tid, this._ganttConfig.root_id);\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch && branch.length;\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch ? branch : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id){\r\n\t\t\t\t\tvar nextSibling = siblings[i+1];\r\n\t\t\t\t\tif (nextSibling === 0 && i > 0){\r\n\t\t\t\t\t\tnextSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn nextSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id){\r\n\t\t\t\t\tvar previousSibling = siblings[i-1];\r\n\t\t\t\t\tif (previousSibling === 0 && i > 0){\r\n\t\t\t\t\t\tpreviousSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn previousSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\r\n\t\t_eachItemCached: function(code, cache){\r\n\t\t\tfor(var i = 0, len = cache.length; i < len; i++){\r\n\t\t\t\tcode.call(this, cache[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_eachItemIterate: function(code, startId, cache){\r\n\t\t\tvar itemsStack = this.getChildren(startId);\r\n\t\t\tif(itemsStack.length){\r\n\t\t\t\titemsStack = itemsStack.slice().reverse();\r\n\t\t\t}\r\n\t\t\twhile(itemsStack.length){\r\n\t\t\t\tvar itemId = itemsStack.pop();\r\n\t\t\t\tvar item = this.getItem(itemId);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tif(cache){\r\n\t\t\t\t\tcache.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.hasChild(item.id)){\r\n\t\t\t\t\tvar children = this.getChildren(item.id);\r\n\t\t\t\t\tvar len = children.length;\r\n\t\t\t\t\tfor(var i = len - 1; i >= 0; i--){\r\n\t\t\t\t\t\titemsStack.push(children[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\teachItem: function(code, parent){\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = rootId;\r\n\t\t\t}\r\n\t\t\tvar startId = parent || rootId;\r\n\r\n\t\t\tvar useCache = false;\r\n\t\t\tvar buildCache = false;\r\n\t\t\tvar cache = null;\r\n\t\t\tif(startId === rootId){\r\n\t\t\t\tif(this._eachItemMainRangeCache){\r\n\t\t\t\t\tuseCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbuildCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._eachItemCached(code, cache);\r\n\t\t\t}else{\r\n\t\t\t\tthis._eachItemIterate(code, startId, buildCache ? cache : null);\r\n\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem) {\r\n\t\t\tvar parentsHash = {};\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\tif (parentsHash[parent]) {\r\n\t\t\t\t\tthrow new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \" + parent);\r\n\t\t\t\t}\r\n\t\t\t\tparentsHash[parent] = true;\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif (a[field] == b[field] ||\r\n\t\t\t\t\t(helpers.isDate(a[field]) && helpers.isDate(b[field]) && a[field].valueOf() == b[field].valueOf()))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t\tthis._indexRangeCache = {};\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._getItemsCache = null;\r\n\tthis.$config = config;\r\n\teventable(this);\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_attachDataChange: function(callback){\r\n\t\tthis.attachEvent(\"onClearAll\", callback);\r\n\t\tthis.attachEvent(\"onBeforeParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeUpdate\", callback);\r\n\t\tthis.attachEvent(\"onBeforeDelete\", callback);\r\n\t\tthis.attachEvent(\"onBeforeAdd\", callback);\r\n\t\tthis.attachEvent(\"onParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeFilter\", callback);\r\n\t},\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\tif(this.$config.copyOnParse()){\r\n\t\t\t\t\titem = utils.copy(item);\r\n\t\t\t\t}\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t\tloaded.push(item);\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t}\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t}\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\t// This is how it worked before updating the properties:\r\n\t\t// this.pull[id]=item;\r\n\t\tutils.mixin(this.pull[id],item, true);\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterDeleteConfirmed\", [obj.id, obj]);\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tif(this.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// GS-956 We need to unselect the resource as its ID is cached\r\n\t\tthis.silent(function(){\r\n\t\t\tthis.unselect();\r\n\t\t});\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tvar item;\r\n\t\tif(id){\r\n\t\t\titem = this.getItem(id);\r\n\t\t}\r\n\r\n\t\tvar args;\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tif(this.callEvent(\"onBeforeStoreUpdate\", args) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar skipFilter = this._quick_refresh && !this._mark_recompute;\r\n\t\tthis._mark_recompute = false;\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick && !skipFilter){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(!skipFilter){\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",args);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.getItem(this.fullOrder[i]);\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\r\n\tfind: function(filter) {\r\n\t\tvar result = [];\r\n\t\tthis.eachItem(function(item) {\r\n\t\t\tif(filter(item)){\r\n\t\t\t\tresult.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\r\n\tfilter: function(rule){\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onBeforeFilter\", []);\r\n\t\t}\r\n\t\tthis.callEvent(\"onPreFilter\", []);\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onFilter\", []);\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tvar max = Math.min((to||Infinity),this.countVisible()-1);\r\n\t\tvar min = from||0;\r\n\r\n\t\tvar cacheKey = min + '-' + max;\r\n\t\tif(this._indexRangeCache[cacheKey]){\r\n\t\t\treturn this._indexRangeCache[cacheKey].slice();\r\n\t\t}\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=min; i <= max; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\r\n\t\tthis._indexRangeCache[cacheKey] = ret.slice();\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tif(this._getItemsCache){\r\n\t\t\treturn this._getItemsCache.slice();\r\n\t\t}\r\n\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t\tthis._getItemsCache = res.slice();\r\n\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.$destroyed = true;\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t\tthis._indexRangeCache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction createScope(addEvent, removeEvent) {\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\tvar eventScope = {\r\n\t\tattach: function(el, event, callback, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: callback, capture: capture});\r\n\t\t\taddEvent(el, event, callback, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, callback, capture){\r\n\t\t\tremoveEvent(el, event, callback, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function () {\r\n\t\t\tvar staticArray = handlers.slice();\r\n\t\t\t// original handlers array can be spliced on every iteration\r\n\t\t\tfor (var i = 0; i < staticArray.length; i++){\r\n\t\t\t\tvar handler = staticArray[i];\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, undefined);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, false);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, true);\r\n\t\t\t}\r\n\t\t\thandlers.splice(0, handlers.length);\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n\r\n\treturn eventScope;\r\n}\r\n\r\nmodule.exports = createScope;","module.exports = function(gantt){\r\n\t// TODO: why eslint fails on regexp?\r\n\t// eslint-disable-next-line no-control-regex\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\", gantt.isSelectedTask(task.id) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState(\"tasksDnd\").drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue, task){\r\n\t\t\tvar attributes = {\"role\":\"gridcell\", \"aria-label\": textValue};\r\n\t\t\tif(!column.editor || gantt.isReadonly(task)){\r\n\t\t\t\tattributes[\"aria-readonly\"] = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.getAttributeString(attributes);\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./select_control\")(gantt);\r\n\r\n\tfunction TypeselectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TypeselectControl, _super);\r\n\r\n\tTypeselectControl.prototype.render = function(sns) {\r\n\t\tvar types = gantt.config.types,\r\n\t\t\tlocale = gantt.locale.labels,\r\n\t\t\toptions = [];\r\n\r\n\t\tvar filter = sns.filter || function (typeKey, typeValue) {\r\n\t\t\tif (!types.placeholder || typeValue !== types.placeholder) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tfor (var i in types) {\r\n\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\toptions.push({ key: types[i], label: locale[\"type_\" + i] });\r\n\t\t\t}\r\n\t\t}\r\n\t\tsns.options = options;\r\n\r\n\t\tvar oldOnChange = sns.onchange;\r\n\t\tsns.onchange = function () {\r\n\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\tif (this.value === gantt.config.types.task){\r\n\t\t\t\tgantt._lightbox_new_type = \"task\";\r\n\t\t\t}\r\n\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn _super.prototype.render.apply(this, arguments);\r\n\t};\r\n\r\n\treturn TypeselectControl;\r\n};\r\n","var __extends = require(\"../../../../utils/extends\");\r\nvar htmlHelpers = require(\"../../utils/html_helpers\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction ConstraintControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ConstraintControl, _super);\r\n\r\n\tfunction isNonTimedConstraint(value) {\r\n\t\tif (!value || value === gantt.config.constraint_types.ASAP || value === gantt.config.constraint_types.ALAP) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleTimeSelect(timeSelects, typeValue) {\r\n\t\tvar isNonTimed = isNonTimedConstraint(typeValue);\r\n\t\tfor (var i = 0; i < timeSelects.length; i++) {\r\n\t\t\ttimeSelects[i].disabled = isNonTimed;\r\n\t\t}\r\n\t}\r\n\r\n\tConstraintControl.prototype.render = function (sns) {\r\n\t\tvar height = (sns.height || 30) + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext gantt_section_\" + sns.name + \"' style='height:\" + height + \";'>\";\r\n\r\n\t\tvar options = [];\r\n\t\tfor (var i in gantt.config.constraint_types) {\r\n\t\t\toptions.push({ key: gantt.config.constraint_types[i], label: gantt.locale.labels[gantt.config.constraint_types[i]] });\r\n\t\t}\r\n\r\n\t\tsns.options = sns.options || options;\r\n\r\n\t\thtml += \"<span data-constraint-type-select>\" + htmlHelpers.getHtmlSelect(sns.options, [{ key: \"data-type\", value: \"constraint-type\" }]) + \"</span>\";\r\n\r\n\t\tvar timeLabel = gantt.locale.labels[\"constraint_date\"] || \"Constraint date\";\r\n\t\thtml += \"<label data-constraint-time-select>\" + timeLabel + \": \" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</label>\";\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tConstraintControl.prototype.set_value = function (node, value, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (!typeSelect._eventsInitialized) {\r\n\t\t\ttypeSelect.addEventListener(\"change\", function (e) {\r\n\t\t\t\ttoggleTimeSelect(timeSelects, e.target.value);\r\n\t\t\t});\r\n\t\t\ttypeSelect._eventsInitialized = true;\r\n\t\t}\r\n\r\n\t\tvar constraintDate = task[mapping.constraint_date] || new Date();\r\n\t\tgantt.form_blocks._fill_lightbox_select(timeSelects, 0, constraintDate, map, config);\r\n\r\n\t\tvar constraintType = task[mapping.constraint_type] || gantt.getConstraintType(task);\r\n\t\ttypeSelect.value = constraintType;\r\n\t\ttoggleTimeSelect(timeSelects, constraintType);\r\n\t};\r\n\r\n\tConstraintControl.prototype.get_value = function (node, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\r\n\t\tvar constraintType = typeSelect.value;\r\n\t\tvar constraintDate = null;\r\n\t\tif (!isNonTimedConstraint(constraintType)) {\r\n\t\t\tconstraintDate = gantt.form_blocks.getTimePickerValue(timeSelects, config);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tconstraint_type: constraintType,\r\n\t\t\tconstraint_date: constraintDate\r\n\t\t};\r\n\t};\r\n\r\n\tConstraintControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.querySelector(\"select\"));\r\n\t};\r\n\r\n\treturn ConstraintControl;\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./select_control\")(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\t// GS-1051. If the value is `0`, the set_value function in the select control won't select \r\n\t\t// the first child because (0 || '') = '';\r\n\t\tif (value === 0) value = \"0\";\r\n\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nvar DurationFormatterNumeric = require(\"../../../common/duration_formatter_numeric\").default;\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || new DurationFormatterNumeric();\r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = \" \"+ gantt.locale.labels[gantt.config.duration_unit + \"s\"] +\" \";\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\tvar durationInputClass = \"gantt_duration_value\";\r\n\t\tif(sns.formatter) {\r\n\t\t\tlabel = \"\";\r\n\t\t\tdurationInputClass += \" gantt_duration_value_formatted\" ;\r\n\t\t}\r\n\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5days' class='\"+durationInputClass+\"'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\"+label+\"<span></span>\" +\r\n\t\t\t\"</div>\";\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tvar template = gantt.templates.task_end_date || gantt.templates.task_date;\r\n\t\t\tendspan.innerHTML = template(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = getFormatter(config).parse(value);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = getFormatter(config).format(value);\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = getFormatter(config).format(duration_val);\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node, config) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = getFormatter(config).parse(duration.value);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\treturn DurationControl; \r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","var helpers = require(\"../../../../utils/helpers\");\r\nvar __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tsns.single_value = true;\r\n\t\t\thtml += \"<label><input type='checkbox' name='\" + sns.name + \"'></label>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = checkboxes[0];\r\n\t\t\tbox.checked = !!value;\r\n\t\t}else{\r\n\t\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node, task, sns) {\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = node.querySelector(\"input[type=checkbox]\");\r\n\t\t\treturn box.checked;\r\n\t\t}else{\r\n\t\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\t\treturn entry.value;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\tTimeControl.prototype.render = function (sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function (node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({ start_date: start_date, duration: 1, task: ev });\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof (mapping) === \"string\") mapping = { start_date: mapping };\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function (node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar startDate;\r\n\t\tvar map = config._time_format_order;\r\n\t\tfunction _getEndDate(selects, map, startDate) {\r\n\t\t\tvar endDate = gantt.form_blocks.getTimePickerValue(selects, config, map.size);\r\n\t\t\t// GS-1010: We need to add a way to obtain exact end_date for validation\r\n\t\t\tif (endDate <= startDate) {  // when end date seems wrong\r\n\t\t\t\tif (config.autofix_end !== false || config.single_date) { // auto correct it in two cases - when the auto correction is not disabled, or when we have 'single date' control and the user don't have the UI to specify the end date\r\n\t\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tstartDate = gantt.form_blocks.getTimePickerValue(selects, config);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","var __extends = require(\"../../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","module.exports = function (gantt) {\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\tvar helpers = require(\"../../../utils/helpers\");\r\n\r\n\tvar TemplateControl = require(\"./controls/template_control\")(gantt);\r\n\tvar TextareaControl = require(\"./controls/textarea_control\")(gantt);\r\n\tvar TimeControl = require(\"./controls/time_control\")(gantt);\r\n\tvar SelectControl = require(\"./controls/select_control\")(gantt);\r\n\tvar CheckboxControl = require(\"./controls/checkbox_control\")(gantt);\r\n\tvar RadioControl = require(\"./controls/radio_control\")(gantt);\r\n\tvar DurationControl = require(\"./controls/duration_control\")(gantt);\r\n\tvar ParentControl = require(\"./controls/parent_control\")(gantt);\r\n\tvar ResourcesControl = require(\"./controls/resources_control\")(gantt);\r\n\tvar ConstraintControl = require(\"./controls/constraint_control\")(gantt);\r\n\tvar TypeselectControl = require(\"./controls/typeselect_control\")(gantt);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function () {\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif (timeline && timeline.isVisible()) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif (!step || step >= 60 * 24) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form || fullWidth)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(lightboxDiv, document.body.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\t\r\n\t\t\t//GS-1131. If gantt_cal_larea is displayed, Firefox renders buttons incorrectly;\r\n\t\t\tvar backup_overflow = ds.style.overflow;\r\n\t\t\tds.style.overflow = 'hidden';\r\n\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\t\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tds.style.overflow = backup_overflow;\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tif (!this._lightbox) return;\r\n\r\n\t\tvar con = this._lightbox.querySelector(\".gantt_cal_larea\");\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\tthis._lightbox.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\tgantt.event(window, \"deviceorientation\", function(){\r\n\t\tif(gantt.getState().lightbox){\r\n\t\t\tgantt._center_lightbox(gantt.getLightbox());\r\n\t\t}\r\n\t});\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function () {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function () {\r\n\t\t\tgantt._lightbox_new_type = null;\r\n\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function () {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function () {\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task, task.parent, this.getTaskIndex(task.id));\r\n\t\t} else if (this.isTaskExists(task.id)) {\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = { \"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true };\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = { start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\" };\r\n\t\t\t} else if (typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { start_date: section.map_to };\r\n\t\t\t}\r\n\t\t} else if (section.type === \"constraint\") {\r\n\t\t\tif (!section.map_to || typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { constraint_type: \"constraint_type\", constraint_date: \"constraint_date\" };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// GS-1282 We need to preserve the task type even if the lightbox doesn't have the typeselect section\r\n\t\tif (gantt._lightbox_new_type == \"task\") {\r\n\t\t\ttask.type = gantt.config.types.task;\r\n\t\t\tgantt._lightbox_new_type = null;\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t\tgantt.hideCover();\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push(String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (gantt.isTaskExists(data.id)){\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t\t}\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (event) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = [event.pageX, event.pageY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (event) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = [event.pageX, event.pageY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = { size: 0 };\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tgetTimePickerValue: function (selects, config, offset) {\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar needSetTime = gantt.defined(map[3]);\r\n\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tvar mapOffset = offset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t},\r\n\r\n\t\t_fill_lightbox_select: function (s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl(),\r\n\t\tresources: new ResourcesControl(),\r\n\t\tconstraint: new ConstraintControl(),\r\n\t\ttypeselect: new TypeselectControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = { text: message };\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t\tthis.showCover();\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = document.getElementById(section.id);\r\n\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + (floatRight ? \" style='float:right;'\" : \"\") + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsns._time_format_order[2] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//year\r\n\r\n\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t// if\r\n\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trange = range || 10;\r\n\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\t\tfor (i = start_year; i < end_year; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsns._time_format_order[1] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//month\r\n\t\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsns._time_format_order[0] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//days\r\n\t\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%H:%i\":\r\n\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\tsns._time_format_order[3] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//hours\r\n\t\t\t\ti = settings.first;\r\n\t\t\t\ttdate = settings.date.getDate();\r\n\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\twhile (i < settings.last) {\r\n\t\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1)) ||\r\n\t\t\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction findTargetView(event){\r\n\t\tvar allViews = gantt.$layout.getCellsByType(\"viewCell\");\r\n\r\n\t\tfor(var i = 0; i < allViews.length; i++){\r\n\t\t\tvar box = allViews[i].$view.getBoundingClientRect();\r\n\t\t\tif(event.clientX >= box.left && event.clientX <= box.right &&\r\n\t\t\t\tevent.clientY <= box.bottom && event.clientY >= box.top){\r\n\t\t\t\t\treturn allViews[i];\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getScrollState(view){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tvar scrollState = {x: null, y: null};\r\n\t\tif(scrollX){\r\n\t\t\tvar state = scrollX.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.x = scrollX.$view.scrollLeft;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tvar state = scrollY.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.y = scrollY.$view.scrollTop;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn scrollState;\r\n\t}\r\n\r\n\tfunction scrollView(view, left, top){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tif(scrollX){\r\n\t\t\tscrollX.scrollTo(left, null);\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tscrollY.scrollTo(null, top);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar tasksDnD;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\ttasksDnD = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn tasksDnD;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar actionMode = false;\r\n\t\tvar scrollMode = false;\r\n\t\tvar actionStart = null;\r\n\t\tvar scrollState;\r\n\t\tvar longTapTimer = null;\r\n\t\tvar currentDndId = null;\r\n\t\tvar dndNodes = [];\r\n\t\tvar targetView = null;\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!actionMode) return;\r\n\r\n\t\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (tasksDnD && (tasksDnD.drag.id || tasksDnD.drag.start_drag)) {\r\n\t\t\t\t\ttasksDnD.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && actionStart) {\r\n\t\t\t\t\t\tvar dx = actionStart.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = actionStart.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scrollMode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tscrollMode = true;\r\n\t\t\t\t\t\t\t//gantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tscrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scrollMode) {\r\n\r\n\t\t\t\t\t\t\tvar newScrollState;\r\n\t\t\t\t\t\t\tvar scrollX = scrollState.x + dx;\r\n\t\t\t\t\t\t\tvar scrollY = scrollState.y + dy;\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollView(targetView, scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tgantt.scrollTo(scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((scrollState.x != newScrollState.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scrollState.y != newScrollState.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (actionMode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\t// block pull-to-refresh\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.add(\"gantt_touch_active\");\r\n\t\t\t}\r\n\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\tactionMode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tactionStart = accessor(e);\r\n\t\t\ttargetView = findTargetView(actionStart);\r\n\t\t\tif (!gantt._locate_css(actionStart, \"gantt_hor_scroll\") && !gantt._locate_css(actionStart, \"gantt_ver_scroll\")) {\r\n\t\t\t\tactionMode = true;\r\n\t\t\t}\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlongTapTimer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(actionStart);\r\n\t\t\t\tif (tasksDnD && (taskId && !gantt._locate_css(actionStart, \"gantt_link_control\") && !gantt._locate_css(actionStart, \"gantt_grid_data\"))) {\r\n\t\t\t\t\ttasksDnD.on_mouse_down(actionStart);\r\n\r\n\t\t\t\t\tif (tasksDnD.drag && tasksDnD.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\ttasksDnD._start_dnd(actionStart);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlongTapTimer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.remove(\"gantt_touch_active\");\r\n\t\t\t}\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\tactionMode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\tif(tasksDnD)\r\n\t\t\t\ttasksDnD.on_mouse_up(source);\r\n\r\n\t\t\tif (currentDndId && gantt.isTaskExists(currentDndId)) {\r\n\t\t\t\tgantt.refreshTask(currentDndId);\r\n\t\t\t\tif(dndNodes.length){\r\n\t\t\t\t\tdndNodes.forEach(function(node){\r\n\t\t\t\t\t\tif(node.parentNode){\r\n\t\t\t\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//gantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tactionMode = scrollMode = false;\r\n\t\t\tdndNodes = [];\r\n\t\t\tcurrentDndId = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (actionStart && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(actionStart);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tcurrentDndId = taskId;\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tdndNodes.push(task);\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","import * as env from \"../../../utils/env\";\r\nimport * as eventable from \"../../../utils/eventable\";\r\nimport * as isHeadless from \"../../../utils/is_headless\";\r\nimport { IScale, TModifierKeys } from \"../../common/config\";\r\n\r\ninterface ITimelineZoomConfig {\r\n\thandler?: (e: Event) => {};\r\n\tstartDate?: Date;\r\n\tendDate?: Date;\r\n\tlevels: IZoomLevel[];\r\n\tactiveLevelIndex?: number;\r\n\twidthStep?: number;\r\n\tminColumnWidth?: number;\r\n\tmaxColumnWidth?: number;\r\n\tuseKey?: \"ctrlKey\" | \"altKey\" | \"shiftKey\";\r\n\ttrigger?: \"wheel\" | null | undefined;\r\n\telement?: Element | (() => Element);\r\n}\r\n\r\nconst USE_KEY = [\"ctrlKey\", \"altKey\", \"shiftKey\", \"metaKey\"];\r\n\r\ninterface IZoomLevel {\r\n\tname?: string;\r\n\tscale_height?: number;\r\n\tmin_column_width: number;\r\n\tscales: IScale[];\r\n}\r\n\r\nconst _defaultScales = [\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"month\",\r\n\t\t\tdate: \"%M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 8\r\n\t\t},\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t],\r\n];\r\n\r\nexport default class TimelineZoom {\r\n\tpublic attachEvent: (eventName: string, handler: () => void) => string;\r\n\tpublic callEvent: (eventName: string, args: any[]) => any;\r\n\tpublic detachEvent: (eventName: string) => any;\r\n\tprotected _initialStartDate: Date;\r\n\tprotected _initialEndDate: Date;\r\n\tprotected _activeLevelIndex: number;\r\n\tprotected _levels: IZoomLevel[];\r\n\tprotected _handler: (e: any) => void;\r\n\tprotected $gantt;\r\n\tprotected _widthStep: number;\r\n\tprotected _minColumnWidth: number;\r\n\tprotected _maxColumnWidth: number;\r\n\tprotected _useKey: TModifierKeys;\r\n\tprotected _visibleDate: Date;\r\n\tprotected _initialized: boolean;\r\n\tprotected _domEvents: any;\r\n\r\n\tconstructor(gantt) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis._domEvents = this.$gantt._createDomEventScope();\r\n\t}\r\n\r\n\tpublic init(config: ITimelineZoomConfig) {\r\n\t\tif(!isHeadless(this.$gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._initialStartDate = config.startDate;\r\n\t\tthis._initialEndDate = config.endDate;\r\n\t\tthis._activeLevelIndex = config.activeLevelIndex ? config.activeLevelIndex : 0;\r\n\t\tthis._levels = this._mapScales(config.levels || _defaultScales);\r\n\t\tthis._handler = config.handler || this._defaultHandler;\r\n\t\tthis._minColumnWidth = config.minColumnWidth || 60;\r\n\t\tthis._maxColumnWidth = config.maxColumnWidth || 240;\r\n\t\tthis._widthStep = config.widthStep || 3/8 * config.minColumnWidth;\r\n\t\tthis._useKey = config.useKey;\r\n\r\n\t\tif(!this._initialized){\r\n\t\t\teventable(this);\r\n\t\t\tthis.$gantt.attachEvent(\"onGanttScroll\", () => {\r\n\t\t\t\tthis._getVisibleDate();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._domEvents.detachAll();\r\n\r\n\t\tif(config.trigger === \"wheel\"){\r\n\t\t\tif(this.$gantt.$root){\r\n\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$gantt.attachEvent(\"onGanttReady\", () => {\r\n\t\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._initialized = true;\r\n\t\tthis.setLevel(this._activeLevelIndex);\r\n\t}\r\n\r\n\tpublic zoomIn = () => {\r\n\t\tconst index = this.getCurrentLevel() - 1;\r\n\t\tif(index < 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t}\r\n\r\n\tpublic zoomOut = () => {\r\n\t\tconst index = this.getCurrentLevel() + 1;\r\n\t\tif(index > this._levels.length - 1){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t}\r\n\r\n\tpublic getCurrentLevel = () => {\r\n\t\treturn this._activeLevelIndex;\r\n\t}\r\n\r\n\tpublic getLevels = () => {\r\n\t\treturn this._levels;\r\n\t}\r\n\r\n\tpublic setLevel = (level: number|string) => {\r\n\t\tconst zoomLevel = this._getZoomIndexByName(level);\r\n\r\n\t\tif(zoomLevel === -1){\r\n\t\t\tthis.$gantt.assert(zoomLevel !== -1, \"Invalid zoom level for gantt.ext.zoom.setLevel. \" + level + \" is not an expected value.\");\r\n\t\t}\r\n\t\tthis._setLevel(zoomLevel, 0);\r\n\t}\r\n\r\n\tprotected _getZoomIndexByName = (levelName: number|string) => {\r\n\t\tlet zoomLevel:number = -1;\r\n\t\tif(typeof levelName === \"string\"){\r\n\t\t\tif(!isNaN(Number(levelName)) &&  this._levels[Number(levelName)]){\r\n\t\t\t\tzoomLevel = Number(levelName);\r\n\t\t\t}else{\r\n\t\t\t\tfor(let i = 0; i < this._levels.length; i++){\r\n\t\t\t\t\tif(this._levels[i].name === levelName){\r\n\t\t\t\t\t\tzoomLevel = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tzoomLevel = levelName;\r\n\t\t}\r\n\t\treturn zoomLevel;\r\n\t}\r\n\r\n\tprotected _mapScales(levels: IScale[][] | any): IZoomLevel[]{\r\n\t\treturn levels.map((l) => {\r\n\t\t\tif(Array.isArray(l)){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tscales: l\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn l;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _getVisibleDate = () => {\r\n\t\tconst scrollPos = this.$gantt.getScrollState().x;\r\n\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\tthis._visibleDate = this.$gantt.dateFromPos(scrollPos + viewPort/2);\r\n\t}\r\n\r\n\tprotected _setLevel = (level: number, cursorOffset: number) => {\r\n\t\tthis._activeLevelIndex = level;\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst nextConfig = gantt.copy(this._levels[this._activeLevelIndex]);\r\n\t\tconst chartConfig = gantt.copy(nextConfig);\r\n\t\tdelete chartConfig.name;\r\n\r\n\t\tgantt.mixin(gantt.config, chartConfig, true);\r\n\r\n\t\tconst isRendered = !!gantt.$root;\r\n\r\n\t\tif(isRendered){\r\n\t\t\tif(cursorOffset){\r\n\t\t\t\tconst cursorDate = this.$gantt.dateFromPos(cursorOffset + this.$gantt.getScrollState().x);\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(cursorDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - cursorOffset);\r\n\t\t\t}else{\r\n\t\t\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\t\t\tif(!this._visibleDate){\r\n\t\t\t\t\tthis._getVisibleDate();\r\n\t\t\t\t}\r\n\t\t\t\tconst middleDate = this._visibleDate;\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(middleDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - viewPort/2);\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterZoom\", [this._activeLevelIndex, nextConfig]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _attachWheelEvent = (config) => {\r\n\t\tconst event = env.isFF ? \"wheel\" : \"mousewheel\";\r\n\t\tlet el: Element;\r\n\t\tif(typeof config.element === \"function\"){\r\n\t\t\tel = config.element();\r\n\t\t}else{\r\n\t\t\tel = config.element as Element;\r\n\t\t}\r\n\t\tif (!el){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._domEvents.attach(el, event, this.$gantt.bind(function(e) {\r\n\t\t\tif (this._useKey) {\r\n\t\t\t\tif (USE_KEY.indexOf(this._useKey) < 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!e[this._useKey]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof this._handler === \"function\") {\r\n\t\t\t\tthis._handler.apply(this, [e]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, this));\r\n\t}\r\n\r\n\tprivate _defaultHandler = (e: any):void => {\r\n\t\tconst timelineOffset = this.$gantt.$task.getBoundingClientRect().x;\r\n\t\tconst cursorOffset = e.clientX - timelineOffset;\r\n\t\tconst wheelY = this.$gantt.env.isFF ? (e.deltaY*-40) : e.wheelDelta;\r\n\t\tlet wheelUp = false;\r\n\t\tif (wheelY > 0) {\r\n\t\t\twheelUp = true;\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tthis._setScaleSettings(wheelUp, cursorOffset);\r\n\t}\r\n\r\n\tprivate _setScaleSettings(wheelUp: boolean, cursorOffset: number) {\r\n\t\tif (wheelUp) {\r\n\t\t\tthis._stepUp(cursorOffset);\r\n\t\t} else {\r\n\t\t\tthis._stepDown(cursorOffset);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _setScaleDates = () => {\r\n\t\tif(this._initialStartDate && this._initialEndDate){\r\n\t\t\tthis.$gantt.config.start_date = this._initialStartDate;\r\n\t\t\tthis.$gantt.config.end_date = this._initialEndDate;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _stepUp(cursorOffset) {\r\n\t\tif (this._activeLevelIndex >= this._levels.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width + this._widthStep;\r\n\t\t\tif (newColumnWidth > this._maxColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._minColumnWidth;\r\n\t\t\t\tnextLevel++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel++;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n\tprivate _stepDown(cursorOffset) {\r\n\t\tif (this._activeLevelIndex < 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width - this._widthStep;\r\n\t\t\tif (newColumnWidth < this._minColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._maxColumnWidth;\r\n\t\t\t\tnextLevel--;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel--;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n}","if (window.dhtmlx){\r\n\r\n\tif (!window.dhtmlx.attaches)\r\n\twindow.dhtmlx.attaches = {};\r\n\r\n\twindow.dhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\twindow.dhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(window.jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;","var domHelpers = require(\"../utils/dom_helpers\");\r\nvar isHeadless = require(\"../../../utils/is_headless\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\r\n\tfunction isDisplayed(element){\r\n\t\treturn element &&\r\n\t\t\tdomHelpers.isChildOf(element, gantt.$root) &&\r\n\t\t\telement.offsetHeight;\r\n\t}\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\tvar element;\r\n\t\tif(isDisplayed(gantt.$task)){\r\n\t\t\telement = gantt.$task;\r\n\t\t}else if(isDisplayed(gantt.$grid)){\r\n\t\t\telement = gantt.$grid;\r\n\t\t}else{\r\n\t\t\telement = gantt.$root;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\")\r\n\t\t\t|| !!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\") ;\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tvar state = gantt.getState();\r\n\t\tvar isClickDrag = state.autoscroll;\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\r\n\t\treturn !((!state.drag_mode && !dragMarker) || isResize) || isClickDrag;\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10\r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\t// if it is a mobile device, we need to detect the touch event coords\r\n\t\tif (event.type == \"touchmove\"){\r\n\t\t\teventPos.x = event.targetTouches[0].clientX;\r\n\t\t\teventPos.y = event.targetTouches[0].clientY;\r\n\t\t}\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar container = getAutoscrollContainer();\r\n\t\tif(!container){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(container);\r\n\r\n\t\tvar posX = eventPos.x - box.x;\r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(document.body, \"touchmove\", autoscrollInterval);\r\n\t\t\tgantt.event(document.body, \"touchmove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(document.body, \"pointermove\", autoscrollInterval);\r\n\t\t\tgantt.event(document.body, \"pointermove\", autoscrollInterval);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tdefineScrollInterval(false);\r\n\t});\r\n\r\n};","module.exports = function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n\r\n\tvar TimelineZoom = require(\"./timeline_zoom\").default;\r\n\tgantt.ext.zoom = new TimelineZoom(gantt);\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height){\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\";\r\n\t}\r\n\tif (skinset.config.bar_height){\r\n\t\tgantt.config.bar_height = skinset.config.bar_height || \"full\";\r\n\t}\r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskBarHeight(task.id);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskBarHeight: function(taskId, isMilestoneRender) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getBarHeight\", [taskId, isMilestoneRender],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function(taskId) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [taskId],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\tvar node = timeline._taskRenderer.rendered[id];\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\tvar domAttr = timeline.$config.item_attribute;\r\n\t\t\t\t\tnode = timeline.$task_bars.querySelector(\"[\" +domAttr+ \"='\"+id+\"']\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn node || null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tvar scrollHorizontal = (horizontal && left*1 == left);\r\n\t\t\tvar scrollVertical = (vertical && top*1 == top);\r\n\t\t\tvar scrollBoth = scrollHorizontal && scrollVertical;\r\n\r\n\t\t\tif(scrollBoth){\r\n\t\t\t\t// some views will be scrolled both horizontally and vertically and smart rendering can be called twice\r\n\t\t\t\t// set flag in order not to invoke smart rendering at the horizontal scroll stage\r\n\t\t\t\t// so it will repaint only once when the scroll is completed\r\n\t\t\t\tvar verticalViews = vertical._getLinkedViews();\r\n\t\t\t\tvar horizontalViews = horizontal._getLinkedViews();\r\n\r\n\t\t\t\tvar commonViews = [];\r\n\t\t\t\tfor(var i = 0; i < verticalViews.length; i++){\r\n\t\t\t\t\tfor(var j = 0; j < horizontalViews.length; j++){\r\n\r\n\t\t\t\t\t\tif(verticalViews[i].$config.id && verticalViews[j].$config.id && verticalViews[i].$config.id === verticalViews[j].$config.id){\r\n\t\t\t\t\t\t\tcommonViews.push(verticalViews[i].$config.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (scrollHorizontal){\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = true;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = false;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(scrollVertical){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\t// GS-1261: we need to show the start_date even in the RTL mode\r\n\t\t\tvar leftPos = pos.left;\r\n\t\t\tif (this.config.rtl) leftPos = pos.left + pos.width;\r\n\r\n\t\t\tvar left = Math.max(leftPos - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.getTaskBarHeight(id))/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;","module.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","var domHelpers = require(\"./utils/dom_helpers\");\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function(layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function() {\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif (mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif (first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif (colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif (!mainGrid.$config.hidden) {\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif (mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tif (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif (!mainGrid.$config.original_grid_width) {\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, null);\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, gantt.config.grid_width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif (mainGrid.$parent.$config.group) {\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis._initScrollStateEvents(layout);\r\n\t\t\t},\r\n\r\n\t\t\t_initScrollStateEvents: function(layout) {\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif (vertical) {\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (horizontal) {\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif (vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start,\r\n\t\tmarkerDefaultOffset = 10,\r\n\t\tscrollDefaultSize = 18;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth(taskId) {\r\n\t\tvar origWidth = timeline.getBarHeight(taskId, true);//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar start_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, {\r\n\t\tsensitivity : 0,\r\n\t\tupdates_per_second : 60,\r\n\t\tmousemoveContainer: gantt.$root,\r\n\t\tselector: \".\" + link_edge_marker,\r\n\t\tpreventDefault: true\r\n\t});\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState(\"tasksDnd\").drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.getTaskHeight(task.id)/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth(task.id);\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getVieportSize(){\r\n\t\tvar root = gantt.$root;\r\n\t\treturn { right: root.offsetWidth, bottom: root.offsetHeight };\r\n\t}\r\n\tfunction getMarkerSize (marker){\r\n\t\tvar width = 0, height = 0;\r\n\t\tif(marker){\r\n\t\t\twidth = marker.offsetWidth || 0;\r\n\t\t\theight = marker.offsetHeight || 0;\r\n\t\t}\r\n\t\treturn { width: width, height: height };\r\n\t}\r\n\r\n\tfunction getPosition(e, marker){\r\n\t\tvar oldPos = dnd.getPosition(e);\r\n\r\n\t\tvar markerSize = getMarkerSize(marker);\r\n\t\tvar viewportSize = getVieportSize();\r\n\r\n\t\tvar offsetX = gantt.config.tooltip_offset_x || markerDefaultOffset;\r\n\t\tvar offsetY = gantt.config.tooltip_offset_y || markerDefaultOffset;\r\n\r\n\t\tvar scrollSize = gantt.config.scroll_size || scrollDefaultSize;\r\n\r\n\t\tvar position = {\r\n\t\t\ty: oldPos.y + offsetY,\r\n\t\t\tx: oldPos.x + offsetX,\r\n\t\t\tbottom: oldPos.y + markerSize.height + offsetY + scrollSize,\r\n\t\t\tright: oldPos.x + markerSize.width + offsetX + scrollSize\r\n\t\t};\r\n\r\n\t\tif(position.bottom > viewportSize.bottom){\r\n\t\t\tposition.y = viewportSize.bottom - markerSize.height - offsetY;\r\n\t\t}\r\n\r\n\t\tif(position.right > viewportSize.right){\r\n\t\t\tposition.x = viewportSize.right - markerSize.width - offsetX;\r\n\t\t}\r\n\t\treturn position;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = getPosition(e, dd.marker);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\r\n\t\t// can drag and drop link to another gantt on the page, such links are not supported\r\n\t\tvar sameGantt = domHelpers.isChildOf(e.target || e.srcElement, gantt.$root);\r\n\t\tif(!sameGantt){\r\n\t\t\tlanding = false;\r\n\t\t\ttarg = null;\r\n\t\t}\r\n\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\tif(gantt.env.isEdge){ // to fix margin collapsing\r\n\t\t\t\tthis._dir_end.y += window.scrollY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link)) {\r\n\t\t\t\tif(gantt.callEvent(\"onLinkCreated\", [link])){\r\n\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + \"px\";\r\n\t\tmarker.style.top = pos.y + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction || !dnd._direction.parentNode){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n\tgantt.attachEvent(\"onGanttRender\", gantt.bind(function() {\r\n\t\tif(dnd._direction){\r\n\t\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\t\t}\r\n\t}, this));\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","var domHelpers = require(\"../utils/dom_helpers\");\r\nvar utils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\nvar helpers = require(\"../../../utils/helpers\");\r\n\r\nfunction createTaskDND(timeline, gantt) {\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function() {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function() {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_move(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_down(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(document.body, \"mouseup\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_up(e);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function() {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function(task, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!task.start_date) {\r\n\t\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!task.end_date) {\r\n\t\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar minDurationInUnits = this._calculateMinDuration(cfg.min_duration, cfg.duration_unit);\r\n\t\t\tif (task.end_date - task.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate(task.end_date, -minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t\telse\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate(task.start_date, minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(task);\r\n\t\t},\r\n\t\t_calculateMinDuration: function(duration, unit) {\r\n\t\t\tvar inMs = {\r\n\t\t\t\t\"minute\": 60000,\r\n\t\t\t\t\"hour\": 3600000,\r\n\t\t\t\t\"day\": 86400000,\r\n\t\t\t\t\"week\": 604800000,\r\n\t\t\t\t\"month\": 2419200000,\r\n\t\t\t\t\"year\": 31356000000\r\n\t\t\t};\r\n\t\t\treturn Math.ceil(duration / inMs[unit]);\r\n\t\t},\r\n\t\t_resize_progress: function(task, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\ttask.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\t\t_find_max_shift: function(dragItems, shift) {\r\n\t\t\tvar correctShift;\r\n\t\t\tfor (var i in dragItems) {\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate(new Date(gantt.getState().min_date));\r\n\t\t\t\tvar maxX = gantt.posFromDate(new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif (coords_x.end + shift > maxX) {\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif (maxShift < correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (coords_x.start + shift < minX) {\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif (minShift > correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function(task, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(gantt.posFromDate(task.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(gantt.posFromDate(task.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = new_start;\r\n\t\t\t\ttask.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function(t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function(oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function(n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function(e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, task);\r\n\t\t\tvar copy = gantt.mixin({}, task);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [task.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function(e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\t\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\t\tvar dragHash = {};\r\n\r\n\t\t\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\t\t\tdragHash = this.dragMultiple;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar dragProject = false;\r\n\t\t\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project) {\r\n\t\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\t\tdragProject = true;\r\n\t\t\t\t\t\t\tdragHash = utils.mixin(initialDrag, this.dragMultiple);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(dragHash, shift);\r\n\t\t\t\t\t\tif (maxShift !== undefined) {\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\r\n\t\t\t\t\t\tfor (var i in dragHash) {\r\n\t\t\t\t\t\t\tvar childDrag =  dragHash[i];\r\n\t\t\t\t\t\t\tif(dragProject && childDrag.id != drag.id){\r\n\t\t\t\t\t\t\t\tgantt._bulk_dnd = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt._bulk_dnd = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// for resize and progress\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function(e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(task, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(task, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif (taskId == drag.id) {\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(task, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(task.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(task);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function(e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\r\n\t\t\t\tvar finalizingBulkMove = false;\r\n\t\t\t\tvar moveCount = 0;\r\n\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && config.drag_project) || (this._isMultiselect())) {\r\n\t\t\t\t\t\tfinalizingBulkMove = true;\r\n\t\t\t\t\t\tmoveCount = Object.keys(dragMultiple).length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar doFinalize = function doFinalize(){\r\n\t\t\t\t\tif(finalizingBulkMove){\r\n\t\t\t\t\t\tfor (var i in dragMultiple) {\r\n\t\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(finalizingBulkMove && moveCount > 25){// 25 - arbitrary threshold for bulk dnd at which we start doing complete repaint to refresh\r\n\t\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function(className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function(e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)){\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t// for don't move selected tasks when drag unselected task\r\n\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\thelpers.forEach(selectedTasksIds, gantt.bind(function(taskId) {\r\n\t\t\t\t\t\t\tvar selectedTask = gantt.getTask(taskId);\r\n\t\t\t\t\t\t\tif (gantt.isSummaryTask(selectedTask) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\t\t\t\tthis._addSubtasksToDragMultiple(selectedTask.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragMultiple[taskId] = gantt.mixin({\r\n\t\t\t\t\t\t\t\tid: selectedTask.id,\r\n\t\t\t\t\t\t\t\tobj: gantt.copy(selectedTask)\r\n\t\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t\t}, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// for move unselected summary\r\n\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\tthis._addSubtasksToDragMultiple(task.id);\r\n\t\t\t\t}\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function(stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task) {\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t},\r\n\t\t_isMultiselect: function() {\r\n\t\t\treturn gantt.config.drag_multiple && !!(gantt.getSelectedTasks && gantt.getSelectedTasks().length > 0);\r\n\t\t},\r\n\t\t_addSubtasksToDragMultiple: function(summaryId) {\r\n\t\t\tgantt.eachTask(function(child) {\r\n\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\tid: child.id,\r\n\t\t\t\t\tobj: gantt.copy(child)\r\n\t\t\t\t}, this.drag);\r\n\t\t\t}, summaryId, this);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline) {\r\n\t\t\ttimeline.roundTaskDates = function(task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt) {\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tif (_tasks_dnd) {\r\n\t\t\t\t_tasks_dnd.destructor();\r\n\t\t\t\t_tasks_dnd = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t\tif (timeline._tasksDnD) {\r\n\t\t\t\t\ttimeline._tasksDnD.destructor();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\n/**\r\n * methods for highlighting current drag and drop position\r\n */\r\n\r\nfunction highlightPosition(target, root, grid){\r\n\tvar markerPos = getTaskMarkerPosition(target, grid);\r\n\t// setting position of row\r\n\troot.marker.style.left = markerPos.x + 9 + \"px\";\r\n\troot.marker.style.top = markerPos.y + \"px\";\r\n\tvar markerLine = root.markerLine;\r\n\tif(!markerLine){\r\n\t\tmarkerLine = document.createElement(\"div\");\r\n\t\tmarkerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\r\n\t\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\t\tmarkerLine.style.pointerEvents = \"none\";\r\n\t}\r\n\r\n\tif(target.child){\r\n\t\thighlightFolder(target, markerLine, grid);\r\n\t}else{\r\n\t\thighlightRow(target, markerLine, grid);\r\n\t}\r\n\r\n\tif(!root.markerLine){\r\n\t\tdocument.body.appendChild(markerLine);\r\n\t\troot.markerLine = markerLine;\r\n\t}\r\n}\r\n\r\nfunction removeLineHighlight(root){\r\n\tif(root.markerLine && root.markerLine.parentNode){\r\n\t\troot.markerLine.parentNode.removeChild(root.markerLine);\r\n\t}\r\n\troot.markerLine = null;\r\n}\r\n\r\nfunction highlightRow(target, markerLine, grid){\r\n\tvar linePos = getLineMarkerPosition(target, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom;\r\n\r\n\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\tmarkerLine.style.left = linePos.x + \"px\";\r\n\tmarkerLine.style.height = \"4px\";\r\n\r\n\tvar markerLineTop = linePos.y - 2;\r\n\tmarkerLine.style.top = markerLineTop + \"px\";\r\n\tmarkerLine.style.width = linePos.width + \"px\";\r\n\r\n\tif (markerLineTop > maxBottom) {\r\n\t\tmarkerLine.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerLine;\r\n}\r\nfunction highlightFolder(target, markerFolder, grid){\r\n\tvar id = target.targetParent;\r\n\tvar pos = gridToPageCoordinates({x: 0, y: grid.getItemTop(id)}, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom;\r\n\r\n\tmarkerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\r\n\tmarkerFolder.style.width = grid.$grid_data.offsetWidth + \"px\";\r\n\tmarkerFolder.style.top = pos.y + \"px\";\r\n\tmarkerFolder.style.left = pos.x  + \"px\";\r\n\tmarkerFolder.style.height = grid.getItemHeight(id) + \"px\";\r\n\tif (pos.y > maxBottom) {\r\n\t\tmarkerFolder.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerFolder;\r\n}\r\n\r\nfunction getLineMarkerPosition(target, grid){\r\n\tvar store = grid.$config.rowStore;\r\n\tvar pos = {x:0, y:0};\r\n\tvar indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\r\n\tvar indent = 15;\r\n\tvar level = 0;\r\n\tif(indentNode){\r\n\t\tindent = indentNode.offsetWidth;\r\n\t}\r\n\tvar iconWidth = 40;\r\n\tif(target.targetId !== store.$getRootId()){\r\n\t\tvar itemTop = grid.getItemTop(target.targetId);\r\n\t\tvar itemHeight = grid.getItemHeight(target.targetId);\r\n\t\tlevel = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\r\n\r\n\t\tif(target.prevSibling){\r\n\t\t\tpos.y = itemTop;\r\n\t\t}else if(target.nextSibling){\r\n\t\t\tvar childCount = 0;\r\n\t\t\tstore.eachItem(function(child){\r\n\t\t\t\tif(store.getIndexById(child.id) !== -1)\r\n\t\t\t\t\tchildCount++;\r\n\t\t\t}, target.targetId);\r\n\r\n\t\t\tpos.y = itemTop + itemHeight + childCount*itemHeight;\r\n\t\t}else {\r\n\t\t\tpos.y = itemTop + itemHeight;\r\n\t\t\tlevel += 1;\r\n\t\t}\r\n\t}\r\n\tpos.x = iconWidth + level * indent;\r\n\tpos.width = Math.max(grid.$grid_data.offsetWidth - pos.x, 0);\r\n\treturn gridToPageCoordinates(pos, grid);\r\n}\r\n\r\nfunction gridToPageCoordinates(pos, grid){\r\n\tvar gridPos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tpos.x += gridPos.x - grid.$grid.scrollLeft;\r\n\tpos.y += gridPos.y - grid.$grid_data.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\nfunction getTaskMarkerPosition(e, grid) {\r\n\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tvar ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data);\r\n\t// row offset\r\n\tvar x = pos.x;\r\n\tvar y = ePos.y - 10;\r\n\r\n\tvar rowHeight = grid.getItemHeight(e.targetId);\r\n\t// prevent moving row out of grid_data container\r\n\tif (y < pos.y) y = pos.y;\r\n\tvar gridHeight = grid.getTotalHeight();\r\n\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\r\n\tpos.x = x;\r\n\tpos.y = y;\r\n\treturn pos;\r\n}\r\n\r\nmodule.exports = {\r\n\tremoveLineHighlight: removeLineHighlight,\r\n\thighlightPosition: highlightPosition\r\n};\r\n","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nmodule.exports = function getMultiLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store){\r\n\tvar result;\r\n\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tif(relTargetPos < 0.25){\r\n\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else if(relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)){\r\n\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else {\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, targetTaskId, store);\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tif(store.hasChild(rootId) && eventTop >= 0){\r\n\t\t\tresult = dropTarget.lastChildTarget(dndTaskId, rootId, store);\r\n\t\t}else{\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, rootId, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nfunction getLast(store){\r\n\tvar current = store.getNext();\r\n\twhile(store.exists(current)){\r\n\r\n\t\tvar next = store.getNext(current);\r\n\t\tif(!store.exists(next)){\r\n\t\t\treturn current;\r\n\t\t}else{\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findClosesTarget(dndTaskId, taskId, allowedLevel, store, up){\r\n\tvar prev = taskId;\r\n\twhile(store.exists(prev)){\r\n\t\tvar targetLevel = store.calculateItemLevel(store.getItem(prev));\r\n\t\tif((targetLevel === allowedLevel || targetLevel === (allowedLevel - 1)) && store.getBranchIndex(prev) > -1){\r\n\t\t\tbreak;\r\n\t\t}else {\r\n\t\t\tprev = up ? store.getPrev(prev) : store.getNext(prev);\r\n\t\t}\r\n\t}\r\n\r\n\tif(store.exists(prev)){\r\n\t\tif(store.calculateItemLevel(store.getItem(prev)) === allowedLevel){\r\n\t\t\treturn up ? dropTarget.nextSiblingTarget(dndTaskId, prev, store) : dropTarget.prevSiblingTarget(dndTaskId, prev, store);\r\n\t\t}else{\r\n\t\t\treturn dropTarget.firstChildTarget(dndTaskId, prev, store);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findTargetAbove(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, true);\r\n}\r\nfunction findTargetBelow(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, false);\r\n}\r\n\r\nmodule.exports = function getSameLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store, level){\r\n\tvar result;\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tvar targetTask = store.getItem(targetTaskId);\r\n\t\tvar targetLevel = store.calculateItemLevel(targetTask);\r\n\t\tif(targetLevel === level){\r\n\t\t\tvar prevSibling = store.getPrevSibling(targetTaskId);\r\n\t\t\tif(relTargetPos < 0.5 && !prevSibling){\r\n\t\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}else{\r\n\t\t\t\tif(relTargetPos < 0.5){\r\n\t\t\t\t\ttargetTaskId = prevSibling;\r\n\t\t\t\t}\r\n\t\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}\r\n\t\t}else if(targetLevel > level){\r\n\t\t\tstore.eachParent(function(parent){\r\n\t\t\t\tif(store.calculateItemLevel(parent) === level){\r\n\t\t\t\t\ttargetTaskId = parent.id;\r\n\t\t\t\t}\r\n\t\t\t}, targetTask); \r\n\t\t\tresult = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t}else{\r\n\t\t\tvar targetAbove = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t\tvar targetBelow = findTargetBelow(dndTaskId, targetTaskId, level, store);\r\n\t\t\tresult = (relTargetPos < 0.5) ? targetAbove : targetBelow;\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tvar rootLevel = store.getChildren(rootId);\r\n\t\tresult = dropTarget.createDropTargetObject();\r\n\t\tif(rootLevel.length && eventTop >= 0){\r\n\t\t\tresult = findTargetAbove(dndTaskId, getLast(store), level, store);\r\n\t\t}else{\r\n\t\t\tresult = findTargetBelow(dndTaskId, rootId, level, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n","var domHelpers = require(\"../utils/dom_helpers\");\r\nvar dropTarget = require(\"./tasks_grid_dnd_marker_helpers/drop_target\");\r\nvar getLockedLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/locked_level\");\r\nvar getMultiLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/multi_level\");\r\nvar higlighter = require(\"./tasks_grid_dnd_marker_helpers/highlight\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tvar datastore = grid.$config.rowStore;\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\tdnd.config.marker.style.opacity = 0.4;\r\n\t\t\telement.style.position = \"static\";\r\n\t\t\telement.style.pointerEvents = \"none\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.level = store.calculateItemLevel(task);\r\n\t\tdnd.config.drop_target = dropTarget.createDropTargetObject({\r\n\t\t\ttargetParent: store.getParent(task.id),\r\n\t\t\ttargetIndex: store.getBranchIndex(task.id),\r\n\t\t\ttargetId: task.id,\r\n\t\t\tnextSibling: true\r\n\t\t});\r\n\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tfunction getTargetTaskId(e){\r\n\t\tvar y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\t// limits for the marker according to the layout layer\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos;\r\n\t\tvar minTop = scrollPos;\r\n\t\tvar firstVisibleTaskPos = grid.$state.scrollTop / grid.getItemHeight();\r\n\t\tvar hiddenTaskPart = firstVisibleTaskPos - Math.floor(firstVisibleTaskPos);\r\n\t\tif (hiddenTaskPart > 0.1 && hiddenTaskPart < 0.9) {\r\n\t\t\tmaxBottom = maxBottom - grid.getItemHeight() * hiddenTaskPart;\r\n\t\t\tminTop = minTop + grid.getItemHeight() * (1 - hiddenTaskPart);\r\n\t\t}\r\n\r\n\t\tif (y >= maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y <= minTop) {\r\n\t\t\ty = minTop;\r\n\t\t}\r\n\r\n\t\tvar index = Math.floor(y / grid.getItemHeight());\r\n\r\n\t\tif (index > store.countVisible() - 1) {\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}\r\n\r\n\tfunction getDropPosition(e){\r\n\t\tvar targetTaskId = getTargetTaskId(e);\r\n\t\tvar relTargetPos = null;\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar config = grid.$getConfig();\r\n\t\tvar lockLevel = !config.order_branch_free;\r\n\r\n\t\tvar eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\r\n\t\tif(targetTaskId !== store.$getRootId()) {\r\n\t\t\tvar rowTop = grid.getItemTop(targetTaskId);\r\n\t\t\tvar rowHeight = grid.getItemHeight(targetTaskId);\r\n\t\t\trelTargetPos = (eventTop - rowTop) / rowHeight;\r\n\t\t}\r\n\r\n\t\tvar result;\r\n\t\tif(!lockLevel){\r\n\t\t\tresult = getMultiLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store);\r\n\t\t}else{\r\n\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar target = getDropPosition(e);\r\n\r\n\t\tif(!target ||\r\n\t\t\tgantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false){\r\n\t\t\t\ttarget = dropTarget.createDropTargetObject(dnd.config.drop_target);\r\n\t\t\t}\r\n\r\n\t\thiglighter.highlightPosition(target, dnd.config, grid);\r\n\t\tdnd.config.drop_target = target;\r\n\r\n\t\tthis.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\r\n\t\thiglighter.removeLineHighlight(dnd.config);\r\n\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\t\tvar target = dnd.config.drop_target;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tstore.move(dnd.config.id, target.targetIndex, target.targetParent);\r\n\t\t\tgantt.render();\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\t}\r\n\t\tstore.refresh(task.id);\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar rowHeight = grid.getItemHeight(dnd.config.id);\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = grid.getTotalHeight();\r\n\t\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos;\r\n\r\n\t\tvar y = e.pageY - pos.y + scrollPos;\r\n\t\tif (y > maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y < scrollPos) {\r\n\t\t\ty = scrollPos;\r\n\t\t}\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = grid.getItemIndexByTopPosition(y);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + (grid.$state.scrollTop || 0);\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tif (pos.y < maxBottom) {\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t} else {\r\n\t\t\tdd.marker.style.top = maxBottom + \"px\";\r\n\t\t}\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tvar itemTop = grid.getItemTop(over.id);\r\n\t\t\tvar itemHeight = grid.getItemHeight(over.id);\r\n\t\t\tif (itemTop + itemHeight / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || itemHeight / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\tgantt.render();\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\nvar rowDndMarker = require(\"./tasks_grid_dnd_marker\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\tif(config.order_branch == \"marker\"){\r\n\t\t\t\t\t\trowDndMarker.init(grid.$gantt, grid);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tgantt.ext.inlineEditors.destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort && column) { // GS-929: if there is no column name, we cannot sort the column\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onAfterRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onAfterRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var getRowRectangle = require(\"./viewport/get_grid_row_rectangle\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\n\r\nfunction createGridTaskRowResizerRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, viewport) {\r\n\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar resize_el = document.createElement(\"div\");\r\n\t\tresize_el.className = \"gantt_task_grid_row_resize_wrap\";\r\n\r\n\t\tresize_el.style.top = (view.getItemTop(item.id) + view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tresize_el.innerHTML = \"<div class='gantt_task_grid_row_resize'></div>\";\r\n\t\tresize_el.setAttribute(config.task_grid_row_resizer_attribute, item.id);\r\n\r\n\t\tgantt._waiAria.gridSeparatorAttr(resize_el);\r\n\t\treturn resize_el;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = createGridTaskRowResizerRender;","var getRectangle = require(\"./viewport/get_bg_row_rectangle\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\r\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\r\nvar resourceTimetable = require(\"../../resource_timetable_builder\");\r\n\r\nfunction renderBar(level, start, end, timeline){\r\n\tvar top = (1 - (level*1||0))*100;\r\n\tvar left = timeline.posFromDate(start);\r\n\tvar right = timeline.posFromDate(end);\r\n\tvar element = document.createElement(\"div\");\r\n\telement.className = \"gantt_histogram_hor_bar\";\r\n\telement.style.top = top + '%';\r\n\telement.style.left = left + \"px\";\r\n\telement.style.width = (right - left + 1) + \"px\";\r\n\treturn element;\r\n}\r\nfunction renderConnection(prevLevel, nextLevel, left){\r\n\tif(prevLevel === nextLevel){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar top = 1 - Math.max(prevLevel, nextLevel);\r\n\tvar height = Math.abs(prevLevel - nextLevel);\r\n\tvar element = document.createElement(\"div\");\r\n\telement.className = \"gantt_histogram_vert_bar\";\r\n\telement.style.top = top*100 + \"%\";\r\n\telement.style.height = height*100 + \"%\";\r\n\telement.style.left = left + \"px\";\r\n\r\n\treturn element;\r\n}\r\n\r\nfunction generateRenderResourceHistogram(gantt){\r\n\tvar getResourceLoad = resourceTimetable(gantt);\r\n\tvar renderedHistogramCells = {};\r\n\tvar renderedHistogramRows = {};\r\n\tvar renderedHistogramCapacity = {};\r\n\r\n\tfunction detachRenderedHistogramCell(id, index){\r\n\r\n\t\tvar renderedRow = renderedHistogramCells[id];\r\n\t\tif(renderedRow && renderedRow[index] &&\r\n\t\t\trenderedRow[index].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedRow[index].parentNode.removeChild(renderedRow[index]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction renderHistogramLine(capacity, timeline, maxCapacity, viewport){\r\n\t\tvar scale = timeline.getScale();\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\t\tfor (var i = range.start; i <= range.end; i++) {\r\n\t\t\tvar colStart = scale.trace_x[i];\r\n\t\t\tvar colEnd = scale.trace_x[i + 1] || gantt.date.add(colStart, scale.step, scale.unit);\r\n\t\t\tvar col = scale.trace_x[i].valueOf();\r\n\t\t\tvar level = Math.min(capacity[col]/maxCapacity, 1) || 0;\r\n\t\t\t// do not render histogram for lines with below zero capacity, as it's reserved for folders\r\n\t\t\tif(level < 0){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar nextLevel = Math.min(capacity[colEnd.valueOf()]/maxCapacity, 1) || 0;\r\n\t\t\tvar bar = renderBar(level, colStart, colEnd, timeline);\r\n\t\t\tif(bar){\r\n\t\t\t\tel.appendChild(bar);\r\n\t\t\t}\r\n\t\t\tvar connection = renderConnection(level, nextLevel, timeline.posFromDate(colEnd));\r\n\t\t\tif(connection){\r\n\t\t\t\tel.appendChild(connection);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport){\r\n\r\n\t\tvar renderedElement = renderedHistogramCapacity[resource.id];\r\n\t\tif(renderedElement && renderedElement.parentNode){\r\n\t\t\trenderedElement.parentNode.removeChild(renderedElement);\r\n\t\t}\r\n\r\n\t\tvar capacityElement = renderHistogramLine(capacityMatrix, timeline, maxCapacity, viewport);\r\n\t\tif (capacityElement) {\r\n\t\t\tcapacityElement.setAttribute(\"data-resource-id\", resource.id);\r\n\t\t\tcapacityElement.setAttribute(timeline.$config.item_attribute, resource.id);\r\n\t\t\tcapacityElement.style.position = \"absolute\";\r\n\t\t\tcapacityElement.style.top = (sizes.top + 1) + \"px\";\r\n\t\t\tcapacityElement.style.height = (timeline.getItemHeight(resource.id) - 1) + \"px\";\r\n\t\t\tcapacityElement.style.left = 0;\r\n\t\t}\r\n\t\treturn capacityElement;\r\n\t}\r\n\r\n\tfunction renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline){\r\n\t\tvar css = templates.histogram_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar content = templates.histogram_cell_label(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar fill = templates.histogram_cell_allocated(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar height = timeline.getItemHeight(resource.id) - 1;\r\n\t\tif(css || content){\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tel.className = [\"gantt_histogram_cell\", css].join(\" \");\r\n\t\t\tel.setAttribute(timeline.$config.item_attribute, resource.id);\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t'height:' + (height) + 'px',\r\n\t\t\t\t'line-height:' + (height) + 'px',\r\n\t\t\t\t'top:' + (sizes.top + 1) + 'px'\r\n\t\t\t].join(\";\");\r\n\r\n\r\n\t\t\tif (content) {\r\n\t\t\t\tcontent = \"<div class='gantt_histogram_label'>\" + content +\"</div>\";\r\n\t\t\t}\r\n\r\n\t\t\tif (fill) {\r\n\t\t\t\tcontent = \"<div class='gantt_histogram_fill' style='height:\"+(Math.min(fill/maxCapacity||0, 1)*100)+\"%;'></div>\" + content;\r\n\t\t\t}\r\n\r\n\t\t\tif (content) {\r\n\t\t\t\tel.innerHTML = content;\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction renderResourceHistogram(resource, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, scale, timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tvar capacityMatrix = {};\r\n\t\tvar maxCapacity = resource.capacity || timeline.$config.capacity || 24;\r\n\t\trenderedHistogramCells[resource.id] = {};\r\n\t\trenderedHistogramRows[resource.id] = null;\r\n\t\trenderedHistogramCapacity[resource.id] = null;\r\n\r\n\t\tvar smartRendering = !!viewport;//no viewport means smart rendering is disabled\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\t\tcapacityMatrix[day.start_date.valueOf()] = capacity || 0;\r\n\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\r\n\t\t\tvar el = renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline);\r\n\t\t\tif(el){\r\n\t\t\t\tcells.push(el);\r\n\t\t\t\trenderedHistogramCells[resource.id][columnIndex] = el;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif (cells.length) {\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar capacityElement = renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport);\r\n\t\t\tif(capacityElement){\r\n\t\t\t\trow.appendChild(capacityElement);\r\n\t\t\t\trenderedHistogramCapacity[resource.id] = capacityElement;\r\n\t\t\t}\r\n\t\t\trenderedHistogramRows[resource.id] = row;\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction updateResourceHistogram(resource, node, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, scale, timeline);\r\n\t\tvar maxCapacity = resource.capacity || timeline.$config.capacity || 24;\r\n\t\tvar capacityMatrix = {};\r\n\r\n\t\tvar smartRendering = !!viewport;//no viewport means smart rendering is disabled\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\r\n\t\tvar checkedColumns = {};\r\n\t\tif(renderedHistogramCells && renderedHistogramCells[resource.id]){\r\n\t\t\tfor(var i in renderedHistogramCells[resource.id]){\r\n\t\t\t\tcheckedColumns[i] = i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tcheckedColumns[columnIndex] = false;\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\t\tcapacityMatrix[day.start_date.valueOf()] = capacity || 0;\r\n\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\r\n\t\t\tif(smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tdetachRenderedHistogramCell(resource.id, columnIndex);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar renderedCell = renderedHistogramCells[resource.id];\r\n\t\t\tif(!renderedCell || !renderedCell[columnIndex]){\r\n\t\t\t\tvar el = renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline);\r\n\t\t\t\tif(el){\r\n\t\t\t\t\tnode.appendChild(el);\r\n\t\t\t\t\trenderedHistogramCells[resource.id][columnIndex] = el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(renderedCell && renderedCell[columnIndex] && !renderedCell[columnIndex].parentNode){\r\n\t\t\t\tnode.appendChild(renderedCell[columnIndex]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i in checkedColumns){\r\n\t\t\tif(checkedColumns[i] !== false){\r\n\t\t\t\tdetachRenderedHistogramCell(resource.id, i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar capacityElement = renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport);\r\n\t\tif(capacityElement){\r\n\t\t\tnode.appendChild(capacityElement);\r\n\t\t\trenderedHistogramCapacity[resource.id] = capacityElement;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderResourceHistogram,\r\n\t\tupdate: updateResourceHistogram,\r\n\t\tgetRectangle: getRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = generateRenderResourceHistogram;","var getRectangle = require(\"./viewport/get_bg_row_rectangle\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\r\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\r\nvar resourceTimetable = require(\"../../resource_timetable_builder\");\r\n\r\nfunction generateRenderResourceLine(gantt){\r\n\tvar getResourceLoad = resourceTimetable(gantt);\r\n\tvar renderedResourceLines = {};\r\n\r\n\tfunction renderResourceLineCell(resource, day, templates, config, timeline){\r\n\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar height = timeline.getItemHeight(resource.id) - 1;\r\n\r\n\t\tif (css || content){\r\n\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tel.setAttribute(timeline.$config.item_attribute, resource.id);\r\n\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t'height:' + (height) + 'px',\r\n\t\t\t\t'line-height:' + (height) + 'px',\r\n\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\tif(content)\r\n\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction detachRenderedResourceLine(id, index){\r\n\t\tif(renderedResourceLines[id] && renderedResourceLines[id][index] &&\r\n\t\t\trenderedResourceLines[id][index].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedResourceLines[id][index].parentNode.removeChild(renderedResourceLines[id][index]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\t\tvar smartRendering = !!viewport;//no viewport means smart rendering is disabled\r\n\t\tvar cells = [];\r\n\t\trenderedResourceLines[resource.id] = {};\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\tif(cell){\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction updateResourceLine(resource, node, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\r\n\t\tvar checkedColumns = {};\r\n\t\tif(renderedResourceLines && renderedResourceLines[resource.id]){\r\n\t\t\tfor(var i in renderedResourceLines[resource.id]){\r\n\t\t\t\tcheckedColumns[i] = i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tcheckedColumns[columnIndex] = false;\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, columnIndex);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!renderedResourceLines[resource.id] || !renderedResourceLines[resource.id][columnIndex]){\r\n\t\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(renderedResourceLines[resource.id] && renderedResourceLines[resource.id][columnIndex] && !renderedResourceLines[resource.id][columnIndex].parentNode){\r\n\t\t\t\tnode.appendChild(renderedResourceLines[resource.id][columnIndex]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i in checkedColumns){\r\n\t\t\tif(checkedColumns[i] !== false){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderResourceLine,\r\n\t\tupdate: updateResourceLine,\r\n\t\tgetRectangle: getRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = generateRenderResourceLine;","var helpers = require(\"../../../utils/helpers\");\r\nvar getRowRectangle = require(\"./viewport/get_grid_row_rectangle\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, config, viewport) {\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar templates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (helpers.isDate(value)){\r\n\t\t\t\t\tvalue = templates.date_grid(value, item, col.name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tcss += \" gantt_cell_tree\";\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item) && !gantt.config.open_split_tasks);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align)){\r\n\t\t\t\tvar flexAlign = {\r\n\t\t\t\t\tright: \"flex-end\",\r\n\t\t\t\t\tleft: \"flex-start\",\r\n\t\t\t\t\tcenter: \"center\"\r\n\t\t\t\t};\r\n\t\t\t\tvar justifyContent = flexAlign[col.align];\r\n\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";justify-content:\"  + justifyContent + \";\";\r\n\t\t\t}\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue, item);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight(item.id);\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\tel.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction onrender(item, rowNode, view){\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar column = columns[i];\r\n\t\t\tif (column.onrender){\r\n\r\n\t\t\t\t// find cell node for current column\r\n\t\t\t\tvar cellNode = rowNode.querySelector(\"[data-column-name=\" + column.name + \"]\");\r\n\t\t\t\tif (cellNode) {\r\n\t\t\t\t\tvar content = column.onrender(item, cellNode);\r\n\t\t\t\t\tif (content && typeof content === \"string\") {\r\n\t\t\t\t\t\tcellNode.innerHTML = content;\r\n\t\t\t\t\t} else if (content && typeof content === \"object\") {\r\n\t\t\t\t\t\t// render object to node using additional functionality\r\n\t\t\t\t\t\tif (gantt.config.external_render){\r\n\t\t\t\t\t\t\tvar adapter = gantt.config.external_render;\r\n\t\t\t\t\t\t\tif (adapter.isElement(content)){\r\n\t\t\t\t\t\t\t\tadapter.renderElement(content, cellNode);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange,\r\n\t\tonrender: onrender\r\n\t};\r\n}\r\n\r\nmodule.exports = createGridLineRender;","\r\n// optimized checker for links smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\n\r\nmodule.exports = function isLinkInViewPort(item, viewport, view, config, gantt){\r\n\tvar source = view.$gantt.getTask(item.source);\r\n\tvar target = view.$gantt.getTask(item.target);\r\n\t// check vertical visibility first since it's a lighter check\r\n\tvar sourceTop = view.getItemTop(source.id);\r\n\tvar sourceHeight = view.getItemHeight(source.id);\r\n\r\n\tvar targetTop = view.getItemTop(target.id);\r\n\tvar targetHeight = view.getItemHeight(target.id);\r\n\r\n\tif(viewport.y > sourceTop + sourceHeight &&\r\n\t\tviewport.y > targetTop + targetHeight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.y_end < targetTop &&\r\n\t\tviewport.y_end < sourceTop){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 100;\r\n\tvar sourceLeft = view.posFromDate(source.start_date);\r\n\tvar sourceRight = view.posFromDate(source.end_date);\r\n\tvar targetLeft = view.posFromDate(target.start_date);\r\n\tvar targetRight = view.posFromDate(target.end_date);\r\n\r\n\tif(sourceLeft > sourceRight){\r\n\t\t// rtl\r\n\t\tvar tmp = sourceRight;\r\n\t\tsourceRight = sourceLeft;\r\n\t\tsourceLeft = tmp;\r\n\t}\r\n\tif(targetLeft > targetRight){\r\n\t\t// rtl\r\n\t\tvar tmp = targetRight;\r\n\t\ttargetRight = targetLeft;\r\n\t\ttargetLeft = tmp;\r\n\t}\r\n\tsourceLeft += -padding; // add buffer for custom elements\r\n\tsourceRight += padding;\r\n\ttargetLeft += -padding; // add buffer for custom elements\r\n\ttargetRight += padding;\r\n\r\n\tif(viewport.x > sourceRight &&\r\n\t\tviewport.x > targetRight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.x_end < sourceLeft &&\r\n\t\tviewport.x_end < targetLeft){\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n","var isInViewPort = require(\"./viewport/is_link_in_viewport\");\r\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view, config) {\r\n\tvar source = gantt.getTask(link.source);\r\n\tif(source.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar target = gantt.getTask(link.target);\r\n\tif(target.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view, source, target);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view, source, target);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t\tdiv.setAttribute(\"link_id\", link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view, link.source);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view, link.source);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view, targetId) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size ) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view, itemId) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\ty = v.y - (wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view, itemId) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view, itemId);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view, source, target) {\r\n\t\tvar pt = this.get_endpoint(link, view, source, target);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tvar rowHeight = view.getItemHeight(link.source);\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view, source, target) {\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar from = getMilestonePosition(source, view, config),\r\n\t\t\tto = getMilestonePosition(target, view, config);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top + (from.rowHeight/2) - 1,\r\n\t\t\te_y: to.top + (to.rowHeight/2) - 1\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view, config){\r\n\tvar pos = view.getItemPosition(task);\r\n\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = view.getBarHeight(task.id, true);\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\r\n\treturn pos;\r\n}\r\n\r\n\r\nreturn {\r\n\trender: _render_link_element,\r\n\tupdate: null,\r\n\t//getRectangle: getLinkRectangle\r\n\tisInViewPort: isInViewPort\r\n};\r\n}\r\n\r\nmodule.exports = createLinkRender;","var getRowRectangle = require(\"./viewport/get_bg_row_rectangle\");\r\nvar isLegacyRender = require(\"./is_legacy_smart_render\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\r\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\r\n\r\nfunction createTaskBgRender(gantt){\r\n\tvar renderedCells = {};\r\n\tvar visibleCells = {};\r\n\r\n\tfunction isRendered(item, columnIndex){\r\n\t\tif(renderedCells[item.id][columnIndex] && renderedCells[item.id][columnIndex].parentNode){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction detachRenderedCell(itemId, columnIndex){\r\n\t\tif(renderedCells[itemId] && renderedCells[itemId][columnIndex] &&\r\n\t\t\trenderedCells[itemId][columnIndex].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedCells[itemId][columnIndex].parentNode.removeChild(renderedCells[itemId][columnIndex]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction getCellTemplate(view){\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cssTemplate;\r\n\t\tif (typeof templates.task_cell_class !== \"undefined\") {\r\n\t\t\tcssTemplate = templates.task_cell_class;\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tvar log = console.warn || console.log;\r\n\t\t\tlog('gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.');\r\n\t\t} else {\r\n\t\t\tcssTemplate = templates.timeline_cell_class;\r\n\t\t}\r\n\t\treturn cssTemplate;\r\n\t}\r\n\r\n\tfunction renderCells(item, node, view, config, viewPort){\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar cssTemplate = getCellTemplate(view);\r\n\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tif(!renderedCells[item.id]){\r\n\t\t\t\trenderedCells[item.id] = {};\r\n\t\t\t}\r\n\t\t\tif(!visibleCells[item.id]){\r\n\t\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t}\r\n\r\n\t\t\tvar range = getVisibleCellsRange(cfg, viewPort);\r\n\r\n\t\t\tfor(var i in visibleCells[item.id]){\r\n\t\t\t\tvar index = visibleCells[item.id][i];\r\n\r\n\t\t\t\tif(Number(index) < range.start || Number(index) > range.end){\r\n\t\t\t\t\tdetachRenderedCell(item.id, index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t// TODO: do not iterate all cell, only ones in the viewport and once that are already rendered\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cssTemplate, config);\r\n\t\t\t\tif(!cell && isRendered(item, columnIndex)){\r\n\t\t\t\t\tdetachRenderedCell(item.id, columnIndex);\r\n\t\t\t\t}else if (cell && !cell.parentNode){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderOneCell(scale, columnIndex, item, viewPort, count, cssTemplate, config){\r\n\t\tvar width = scale.width[columnIndex],\r\n\t\t\tcssclass = \"\";\r\n\r\n\t\tif (isColumnVisible(columnIndex, scale, viewPort, gantt)) {//do not render skipped columns\r\n\r\n\t\t\tvar cssTemplateContent = cssTemplate(item, scale.trace_x[columnIndex]);\r\n\r\n\t\t\tif(config.static_background){\r\n\t\t\t\t// if cell render in static background is not allowed, or if it's a blank cell\r\n\t\t\t\tif(!(config.static_background_cells && cssTemplateContent)){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(renderedCells[item.id][columnIndex]){\r\n\t\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\t\t\t\treturn renderedCells[item.id][columnIndex];\r\n\t\t\t}\r\n\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\tcssclass = \"gantt_task_cell\" + (columnIndex == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\tif (cssTemplateContent) {\r\n\t\t\t\tcssclass += \" \" + cssTemplateContent;\r\n\t\t\t}\r\n\t\t\tcell.className = cssclass;\r\n\r\n\t\t\tcell.style.position = \"absolute\";\r\n\t\t\tcell.style.left = scale.left[columnIndex] + \"px\";\r\n\t\t\trenderedCells[item.id][columnIndex] = cell;\r\n\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction _render_bg_line(item, view, config, viewPort) {\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\r\n\t\tif(config.static_background && !config.static_background_cells){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar row = document.createElement(\"div\");\r\n\r\n\t\tvar cellTemplate = getCellTemplate(view);\r\n\r\n\t\tvar range;\r\n\r\n\t\tif(!viewPort || !config.smart_rendering || isLegacyRender(gantt)){\r\n\t\t\trange = {\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tend: count - 1\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\trange = getVisibleCellsRange(cfg, viewPort.x);\r\n\t\t}\r\n\t\tif (config.show_task_cells) {\r\n\t\t\trenderedCells[item.id] = {};\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cellTemplate, config);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}else{\r\n\t\t\trow.style.position = \"relative\";\r\n\t\t}\r\n\t\trow.style.height = (view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\trow.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_bg_line,\r\n\t\tupdate: renderCells,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\r\n","var createBaseBarRender = require(\"./task_bar_render\");\r\nvar isInViewPort = require(\"./viewport/is_bar_in_viewport\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\n\r\nfunction createTaskRenderer(gantt){\r\n\tvar defaultRender = createBaseBarRender(gantt);\r\n\r\n\tfunction renderSplitTask(task, timeline) {\r\n\t\tif (task.$rollup && task.$rollup.length) {\r\n\t\t\tvar el = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\ttask.$rollup.forEach(function(itemId){\r\n\t\t\t\tvar child = gantt.getTask(itemId);\r\n\t\t\t\tvar element = defaultRender(child, timeline);\r\n\t\t\t\tif(!element)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\r\n\t\t\t\tvar padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\r\n\r\n\t\t\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\t\t\telement.classList.add(\"gantt_rollup_child\");\r\n\t\t\t\tel.appendChild(element);\r\n\t\t\t});\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\treturn {\r\n\t\trender: renderSplitTask,\r\n\t\tupdate: null,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","var isBarInViewport = require(\"./is_bar_in_viewport\");\r\nmodule.exports = function isSplitTaskInViewport(item, viewport, view, config, gantt){\r\n\tif (!gantt.isSplitTask(item)) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar range = gantt.getSubtaskDates(item.id);\r\n\r\n\treturn isBarInViewport({\r\n\t\tid: item.id,\r\n\t\tstart_date: range.start_date,\r\n\t\tend_date: range.end_date,\r\n\t\tparent: item.parent\r\n\t}, viewport, view, gantt);\r\n};","var createBaseBarRender = require(\"./task_bar_render\");\r\nvar isInViewPort = require(\"./viewport/is_split_task_in_viewport\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\n\r\nfunction createTaskRenderer(gantt){\r\n\tvar defaultRender = createBaseBarRender(gantt);\r\n\r\n\tfunction renderSplitTask(task, timeline) {\r\n\t\tif (gantt.isSplitTask(task) && ((gantt.config.open_split_tasks && !task.$open) || !gantt.config.open_split_tasks)) {\r\n\t\t\tvar el = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\tvar isProject = gantt.isSummaryTask(child);\r\n\t\t\t\t\tif(isProject){\r\n\t\t\t\t\t\tgantt.resetProjectDates(child);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(child.hide_bar){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar element = defaultRender(child, timeline);\r\n\t\t\t\t\tif(!element)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\r\n\t\t\t\t\tvar padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\r\n\r\n\t\t\t\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\t\t\t\telement.classList.add(\"gantt_split_child\");\r\n\t\t\t\t\tif(isProject){\r\n\t\t\t\t\t\telement.classList.add(\"gantt_split_subproject\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tel.appendChild(element);\r\n\t\t\t\t}, task.id);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\treturn {\r\n\t\trender: renderSplitTask,\r\n\t\tupdate: null,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","var isInViewPort = require(\"./viewport/is_bar_in_viewport\");\r\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\r\nvar createBaseBarRender = require(\"./task_bar_render\");\r\n\r\nmodule.exports = function createTaskRenderer(gantt){\r\n\tvar defaultRender = createBaseBarRender(gantt);\r\n\treturn {\r\n\t\trender: defaultRender,\r\n\t\tupdate: null,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n};","module.exports = function (gantt) {\r\n\treturn function processTaskDateProperties(item, mapTo, mode) {\r\n\t\tif (mode == \"keepDates\") {\r\n\t\t\tkeepDatesOnEdit(item, mapTo);\r\n\t\t} else if (mode == \"keepDuration\") {\r\n\t\t\tkeepDurationOnEdit(item, mapTo);\r\n\t\t} else {\r\n\t\t\tdefaultActionOnEdit(item, mapTo);\r\n\t\t}\r\n\t};\r\n\r\n\t// resize task\r\n\t// resize task when start/end/duration changes\r\n\tfunction keepDatesOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t} else if (mapTo == \"end_date\" || mapTo == \"start_date\") {\r\n\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// move task(before 6.2)\r\n\t// move task when start/end dates changes\r\n\t// resize task when duration changes\r\n\tfunction keepDurationOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"end_date\") {\r\n\t\t\titem.start_date = gantt.calculateEndDate({\r\n\t\t\t\tstart_date: item.end_date,\r\n\t\t\t\tduration: -item.duration,\r\n\t\t\t\ttask: item\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t} else if (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// default behavior\r\n\t// move task when start date changes\r\n\t// resize task when end date/duration changes\r\n\tfunction defaultActionOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t} else if (mapTo == \"end_date\") {\r\n\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t}\r\n\t}\r\n};","module.exports = function(gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.durationFormatter();\r\n\t}\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = getFormatter(column.editor).format(value);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn getFormatter(column.editor).parse(this.get_input(node).value || \"\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.linkFormatter();\r\n\t}\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tlabels.push(getFormatter(config).format(link));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes, config) {\r\n\t\tvar links = [];\r\n\t\tpredecessorCodes.forEach(function (code) {\r\n\t\t\tvar link = getFormatter(config).parse(code);\r\n\t\t\tif(link){\r\n\t\t\t\tlink.target = taskId;\r\n\t\t\t\t// GS-1290 A way to preserve the link. Otherwise validation will return false\r\n\t\t\t\t// because the existing link ID is not passed there\r\n\t\t\t\tlink.id = \"predecessor_generated\";\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlink.id = undefined;\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction formatLinkKey(link){\r\n\t\treturn link.source + \"_\" + link.target + \"_\" + link.type + \"_\" + (link.lag||0);\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes, config) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes, config);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[formatLinkKey(link)] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = formatLinkKey(link);\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node), column.editor);\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","module.exports = function (gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init() {\r\n\t\tif (!dateToStr) {\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif (!strToDate) {\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tinit();\r\n\t\t\tvar minValue = null;\r\n\t\t\tvar maxValue = null;\r\n\r\n\t\t\tif(typeof config.min === \"function\"){\r\n\t\t\t\tminValue = config.min(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tminValue = config.min;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.max === \"function\"){\r\n\t\t\t\tmaxValue = config.max(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tmaxValue = config.max;\r\n\t\t\t}\r\n\r\n\t\t\tvar minAttr = minValue ? \" min='\" + dateToStr(minValue)+\"' \"  : \"\";\r\n\t\t\tvar maxAttr = maxValue ? \" max='\" + dateToStr(maxValue)+\"' \"  : \"\";\r\n\t\t\tvar html = \"<div style='width:140px'><input type='date' \" + minAttr + maxAttr + \" name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tif (value && value.getFullYear) {\r\n\t\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.get_input(node).value = value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tparsed = null;// return null will cancel changes\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><select name='\" + column.name + \"'>\";\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = \"<div><input type='number' min='\" + min + \"' max='\" + max + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","module.exports = function(gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif((hasEditor && controller.isVisible()) || state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t} else if(hasEditor && controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tvar modifiers = command.modifiers;\r\n\r\n\t\t\t\t\t\t\tvar anyModifier = modifiers.alt || modifiers.ctrl || modifiers.meta || modifiers.shift;\r\n\t\t\t\t\t\t\tif(modifiers.alt){\r\n\t\t\t\t\t\t\t\t// don't start editing on alt+key\r\n\t\t\t\t\t\t\t}else if (anyModifier && keyNav.getCommandHandler(command, \"taskCell\")){\r\n\t\t\t\t\t\t\t\t// don't start editing if command already have a keyboard shortcut\r\n\t\t\t\t\t\t\t}else if(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tgantt.focus();\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","module.exports = {\r\n\tinit: function (controller, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tif (controller.isVisible() && controller.isChanged()) {\r\n\t\t\t\tcontroller.save();\r\n\t\t\t} else {\r\n\t\t\t\tcontroller.hide();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function (id, e) {\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif (cell && controller.isVisible() && cell.columnName == state.columnName) {\r\n\t\t\t\t//GS-933 probably, we don't need to hide the inline editor because the lightbox cannot be opened if you double-click on an inline editor\r\n\t\t\t\t//remove this code later if people don't complain\r\n\t\t\t\t//controller.hide();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function (controller, placeholder, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\t\t\r\n\r\n\t\tif(gantt.ext && gantt.ext.keyboardNavigation){\r\n\t\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\t\tvar keyCode = e.keyCode;\r\n\t\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\t\tswitch (keyCode){\r\n\t\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (preventKeyNav){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif (e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tif (controller.isVisible()) {\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldPrevent) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonHide: function () {\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\r\n\t}\r\n};\r\n\r\n","var defaultMapping = require(\"./keyboard_mappings/default\");\r\nvar keyNavMappings = require(\"./keyboard_mappings/keyboard_navigation\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells && gantt.ext.keyboardNavigation){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","var getKeyboardMapping = require(\"./keyboard_mappings\");\r\nvar textEditorFactory = require(\"./editors/text\"),\r\n\tnumberEditorFactory = require(\"./editors/number\"),\r\n\tselectEditorFactory = require(\"./editors/select\"),\r\n\tdateEditorFactory = require(\"./editors/date\"),\r\n\tpredecessorEditorFactory = require(\"./editors/predecessor\"),\r\n\tdurationEditorFactory = require(\"./editors/duration\");\r\nvar utils = require(\"../../../../utils/utils\");\r\nvar domHelpers = require(\"../../utils/dom_helpers\");\r\nvar eventable = require(\"../../../../utils/eventable\");\r\nvar linkedPropertiesProcessor = require(\"./linked_properties\");\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))(),\r\n\t\tduration: new (durationEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping(gantt);\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tif(!domHelpers.isChildOf(node, grid.$grid)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\tright = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (config.rtl) {\r\n\t\t\t\t\tright += cols[i].width;\r\n\t\t\t\t}\telse {\r\n\t\t\t\t\tleft += cols[i].width;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tright: right,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tleft: left,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction findVisibleIndex(grid, columnName) {\r\n\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(grid.$config.bind + \"_id\", itemId);// for backward compatibility\r\n\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\r\n\t\t\tvar visibleIndex = findVisibleIndex(grid, columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", visibleIndex);\r\n\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"right:\" + pos.right + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t} else {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\t\tvar updateTaskDateProperties = linkedPropertiesProcessor(gantt);\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar ganttHandlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\treturn column.editor;\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tganttHandlers.push(gantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\t\tif(self._editor && self._placeholder && !domHelpers.isChildOf(self._placeholder, gantt.$root)){\r\n\t\t\t\t\t\tgrid.$grid_data.appendChild(self._placeholder);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif (gantt.isReadonly(store.getItem(itemId))) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.callEvent(\"onBeforeEditStart\", [editorState]) === false) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.show(editorState.id, editorState.columnName);\r\n\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, gantt.$root));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\t\t\t\teditor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tthis._editor = editor;\r\n\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor && this._editor.hide) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif (this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif (!this._editor.is_valid || this._editor.is_valid(editorState.newValue, editorState.id, editorState.columnName, this._placeholder)) {\r\n\r\n\t\t\t\t\t\tvar mapTo = editorConfig.map_to;\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (mapTo != \"auto\") {\r\n\t\t\t\t\t\t\titem[mapTo] = value;\r\n\t\t\t\t\t\t\tupdateTaskDateProperties(item, mapTo, gantt.config.inline_editors_date_processing);\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\t// GS-1257. true means to exclude hidden columns\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName, true) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir) {\r\n\t\t\t\tvar moveTask = dir > 0 ? gantt.getNext : gantt.getPrev;\r\n\t\t\t\tmoveTask = gantt.bind(moveTask, gantt);\r\n\r\n\t\t\t\tvar nextItem = moveTask(this._itemId);\r\n\t\t\t\t// skip readonly rows\r\n\t\t\t\twhile (gantt.isTaskExists(nextItem) && gantt.isReadonly(gantt.getTask(nextItem))) {\r\n\t\t\t\t\tnextItem = moveTask(nextItem);\r\n\t\t\t\t}\r\n\t\t\t\treturn nextItem;\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(){\r\n\t\t\t\tvar row = this.getNextCell(1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(){\r\n\t\t\t\tvar row = this.getNextCell(-1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tganttHandlers.forEach(function(handlerId){\r\n\t\t\t\t\tgantt.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\thandlers = [];\r\n\t\t\t\tganttHandlers = [];\r\n\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = create;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function () { },\r\n\t\tdestroy: function () { }\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\tvar SCROLL_MODIFIER_KEYS = [\"altKey\", \"shiftKey\", \"metaKey\"]; // it's no way to disable ctrl+wheel\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\r\n\t\tvar wheelSpeed = {x: 1, y: 1};\r\n\t\tvar wheelSpeedConfig = this.$gantt.config.wheel_scroll_sensitivity;\r\n\r\n\t\tif (typeof wheelSpeedConfig == \"number\" && !!wheelSpeedConfig) {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig, y: wheelSpeedConfig};\r\n\t\t}\r\n\t\telse if (({}).toString.apply(wheelSpeedConfig) == \"[object Object]\") {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig.x, y: wheelSpeedConfig.y};\r\n\t\t}\r\n\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX * -20 * wheelSpeed.x) : e.wheelDeltaX * 2 * wheelSpeed.x;\r\n\t\tvar wy = ff ? (e.deltaY * -40 * wheelSpeed.y) : e.wheelDelta * wheelSpeed.y;\r\n\r\n\t\tvar horizontalScrollModifier = this.$gantt.config.horizontal_scroll_key;\r\n\r\n\t\tif (horizontalScrollModifier !== false) {\r\n\t\t\tif (SCROLL_MODIFIER_KEYS.indexOf(horizontalScrollModifier) >= 0) {\r\n\t\t\t\tif(e[horizontalScrollModifier] && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\t\t\twx = wy*2;\r\n\t\t\t\t\twy = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;","module.exports = null;","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tif(typeof x === \"number\"){\r\n\t\t\tvar outerX = x + borders.horizontal;\r\n\t\t\tthis.$config.width = outerX;\r\n\t\t}\r\n\t\tif(typeof y === \"number\"){\r\n\t\t\tvar outerY = y + borders.vertical;\r\n\t\t\tthis.$config.height = outerY;\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;","module.exports = function(viewport, box){\r\n\tif(!box){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.left > viewport.x_end || box.left + box.width < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.top > viewport.y_end || box.top + box.height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","var genericViewPortChecker = require(\"./viewport/is_in_viewport\");\r\nvar isLegacyRender = require(\"./is_legacy_smart_render\");\r\nvar basicGetRectangle = require(\"./viewport/get_grid_row_rectangle\");\r\nvar basicGetRange = require(\"./viewport/get_visible_bars_range\");\r\nvar rendererFactory = function(gantt){\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getView(layer){\r\n\t\tvar view = null;\r\n\t\tif (typeof layer.view === \"string\") {\r\n\t\t\tview = gantt.$ui.getView(layer.view);\r\n\t\t} else if (layer.view) {\r\n\t\t\tview = layer.view;\r\n\t\t}\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderMethod = null;\r\n\t\tvar updateMethod = null;\r\n\t\tvar getRectangle = null;\r\n\t\tvar renderCallbackMethod = null;\r\n\t\tvar specializedViewPortChecker = null;\r\n\r\n\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\trenderMethod = layer.renderer;\r\n\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t}else{\r\n\t\t\trenderMethod = layer.renderer.render;\r\n\t\t\tupdateMethod = layer.renderer.update;\r\n\t\t\trenderCallbackMethod = layer.renderer.onrender;\r\n\t\t\t\r\n\t\t\tif(layer.renderer.isInViewPort){\r\n\t\t\t\tspecializedViewPortChecker = layer.renderer.isInViewPort;\r\n\t\t\t}else{\r\n\t\t\t\tgetRectangle = layer.renderer.getRectangle;\r\n\t\t\t}\r\n\r\n\t\t\tif (!getRectangle && getRectangle !== null) {\r\n\t\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(gantt.config.layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container, viewPort, layerView, viewConfig) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar view = layerView || getView(layer);\r\n\t\t\t\tvar config = viewConfig || (view ? view.$getConfig() : null);\r\n\t\t\t\tvar rendererViewPort = viewPort;\r\n\t\t\t\tif(!rendererViewPort && config && config.smart_rendering){\r\n\t\t\t\t\trendererViewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = null;\r\n\t\t\t\tif(!isLegacyRender(gantt) && (getRectangle || specializedViewPortChecker) && rendererViewPort){\r\n\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, rendererViewPort, view, config, gantt);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tisVisible = genericViewPortChecker(rendererViewPort, getRectangle(item, view, config, gantt));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(isVisible){\r\n\t\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t\tvar useBuffer = container.nodeType == 11;//DocumentFragment\r\n\t\t\t\tif(renderCallbackMethod && !useBuffer && dom) {\r\n\t\t\t\t\trenderCallbackMethod.call(gantt, item, dom, view);\r\n\t\t\t\t} \r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\tget_visible_range: function(datastore){\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewport;\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewport = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar range;\r\n\t\t\t\tif(view && viewport){\r\n\t\t\t\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\t\t\t\trange = basicGetRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}else if(layer.renderer && layer.renderer.getVisibleRange){\r\n\t\t\t\t\t\trange = layer.renderer.getVisibleRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!range){\r\n\t\t\t\t\trange = {\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tend: datastore.count()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn range;\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer, container);\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_items: function (items, container) {\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(!view || !view.$getConfig().smart_rendering || isLegacyRender(gantt)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(getRectangle || specializedViewPortChecker)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tif(view){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\r\n\t\t\t\tvar nodesToRemove = {};\r\n\t\t\t\tfor(var i in this.rendered){\r\n\t\t\t\t\tnodesToRemove[i] = true;\r\n\t\t\t\t\trenderedItems[i] = true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\tvar itemNode = this.rendered[item.id];\r\n\t\t\t\t\tnodesToRemove[item.id] = false;\r\n\t\t\t\t\tif (itemNode && itemNode.parentNode) {\r\n\t\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, viewPort, view, viewConfig, gantt);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tisVisible = genericViewPortChecker(viewPort, getRectangle(item, view, viewConfig, gantt));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!isVisible) {\r\n\t\t\t\t\t\t\tnodesToRemove[item.id] = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(updateMethod){\r\n\t\t\t\t\t\t\t\tupdateMethod.call(gantt, item, itemNode, view, viewConfig, viewPort);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.restore(item, buffer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var i in nodesToRemove){\r\n\t\t\t\t\tif(nodesToRemove[i]){\r\n\t\t\t\t\t\tthis.hide(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(buffer.childNodes.length){\r\n\t\t\t\t\tcontainer.appendChild(buffer, container);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item, container) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, container || node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, container || node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\"),\r\n\tdomHelpers = require(\"../utils/dom_helpers\"),\r\n\tisLegacyRender = require(\"./is_legacy_smart_render\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (getContainer, relativeRoot, defaultFilters, initLayer) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: getContainer,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = relativeRoot ? relativeRoot() : container.firstChild;\r\n\t\t\t\t\t\t\t// GS-1274: if we don't add the second check, Gantt stops working if\r\n\t\t\t\t\t\t\t// we add the task layer without the timeline and switch to a layout with the timeline\r\n\t\t\t\t\t\t\tif (rel && rel.parentNode == container)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (initLayer) {\r\n\t\t\t\t\t\tinitLayer(layer, gantt);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tconfig.requestUpdate = function(){\r\n\t\t\t\t\t\tif(gantt.config.smart_rendering && !isLegacyRender(gantt)){\r\n\t\t\t\t\t\t\tif(self.renderers[config.id]){\r\n\t\t\t\t\t\t\t\tself.onUpdateRequest(self.renderers[config.id]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\tonUpdateRequest: function(layer){\r\n\r\n\t\t\t},\r\n\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nfunction initLayer(layer, gantt){\r\n\tif(!layer.view){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar view = layer.view;\r\n\tif(typeof view === \"string\"){\r\n\t\tview = gantt.$ui.getView(view);\r\n\t}\r\n\r\n\tif(view && view.attachEvent){\r\n\t\tview.attachEvent(\"onScroll\", function(){\r\n\t\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\t\t// don't repaint if we're inside batchUpdate, a complete repaint will be called afterwards\r\n\t\t\tif(!state.getState(\"batchUpdate\").batch_update && !view.$config.$skipSmartRenderOnScroll){\r\n\t\t\t\tif(layer.requestUpdate){\r\n\t\t\t\t\tlayer.requestUpdate();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tinitLayer\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: config\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: {\r\n\t\t\t\t\t\t\t\trender: config\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;","var domHelpers = require(\"./utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// GS-1025: if we don't do that, the dropdown or date select will be closed for unselected tasks\r\n\t\t\t\t// GS-1078: or for the built-in select inline editor\r\n\t\t\t\tswitch(e.target.nodeName) {\r\n\t\t\t\t\tcase \"SELECT\":\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//allow task selection when the multiselect plugin is not enabled\r\n\t\t\t\tif (id && gantt.getTask(id) && !gantt._multiselect && gantt.config.select_task) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\t// when doubleclick fired not on task, id === null\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || id === null || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick && !gantt.isReadonly()) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.config){\r\n\t\t\t\treturn parentConfig;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t\t}\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.templates){\r\n\t\t\t\treturn parentTemplates;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\"),\r\n\tResourceHistogram = require(\"./timeline/resource_histogram\");\r\n\r\n\r\nvar gridEditorsFactory = require(\"./grid/editors/controller\");\r\n\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_smart_render\"),\r\n\trenderSplitTaskBar = require(\"./render/task_split_render\"),\r\n\trenderRollupTaskBar = require(\"./render/task_rollup_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\"),\r\n\tresourceMatrixRenderer = require(\"./render/resource_matrix_render\"),\r\n\tresourceHistogramRenderer = require(\"./render/resource_histogram_render\"),\r\n\tgridTaskRowResizerRenderer = require(\"./render/task_grid_row_resize_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\tfactory.registerView(\"resourceHistogram\", ResourceHistogram);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: function(){\r\n\t\t\t\treturn gridRenderer(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBg: function(){\r\n\t\t\t\treturn renderTaskBg(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBar: function(){\r\n\t\t\t\treturn renderTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskRollupBar: function() {\r\n\t\t\t\treturn renderRollupTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskSplitBar: function(){\r\n\t\t\t\treturn renderSplitTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\tlink: function(){\r\n\t\t\t\treturn renderLink(gantt);\r\n\t\t\t},\r\n\t\t\tresourceRow: function(){\r\n\t\t\t\treturn resourceMatrixRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tresourceHistogram: function(){\r\n\t\t\t\treturn resourceHistogramRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tgridTaskRowResizer: function(){\r\n\t\t\t\treturn gridTaskRowResizerRenderer(gantt);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};","var utils = require(\"../../utils/utils\");\r\nvar domHelpers = require(\"./utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(event) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\r\n\t\t\tvar code = event.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = event.target || event.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (event.preventDefault){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn !(event.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\t// GS-1213: We need that when Gantt is destroyed\r\n\t\t\t\tif (messageBox) messageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (event) {\r\n\t\t\tvar source = event.target || event.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (domHelpers.closest(source, \".gantt_popup_button\")) {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\tvar utils = require(\"../utils/utils\");\r\n\tvar env = require(\"../utils/env\");\r\n\tvar isHeadless = require(\"../utils/is_headless\");\r\n\r\n\tif(!env.isNode){\r\n\t\tvar domHelpers = require(\"./ui/utils/dom_helpers\");\r\n\r\n\t\tvar codeHelpers = require(\"../utils/helpers\");\r\n\t\tgantt.utils = {\r\n\t\t\tarrayFind: codeHelpers.arrayFind,\r\n\t\t\tdom: {\r\n\t\t\t\tgetNodePosition: domHelpers.getNodePosition,\r\n\t\t\t\tgetRelativeEventPosition: domHelpers.getRelativeEventPosition,\r\n\t\t\t\tisChildOf: domHelpers.isChildOf,\r\n\t\t\t\thasClass: domHelpers.hasClass,\r\n\t\t\t\tclosest: domHelpers.closest\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar domEvents = require(\"./ui/utils/dom_event_scope\")();\r\n\t\tgantt.event = domEvents.attach;\r\n\t\tgantt.eventRemove = domEvents.detach;\r\n\t\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\t\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\t\tutils.mixin(gantt, require(\"./ui/message\")(gantt));\r\n\t\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\t\tgantt.$ui = uiApi.factory;\r\n\t\tgantt.$ui.layers = uiApi.render;\r\n\t\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\t\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\t\treturn gantt.$mouseEvents;\r\n\t\t});\r\n\t\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\t\tgantt.$services.setService(\"layers\", function () {\r\n\t\t\treturn uiApi.layersService;\r\n\t\t});\r\n\r\n\t\tvar createLayoutFacade = require(\"./facades/layout\");\r\n\t\tgantt.mixin(gantt, createLayoutFacade());\r\n\t\trequire(\"./ui/skin\")(gantt);\r\n\t\trequire(\"../css/skins/skyblue\")(gantt);\r\n\t\trequire(\"../css/skins/meadow\")(gantt);\r\n\t\trequire(\"../css/skins/terrace\")(gantt);\r\n\t\trequire(\"../css/skins/broadway\")(gantt);\r\n\t\trequire(\"../css/skins/material\")(gantt);\r\n\t\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\t\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\t\trequire(\"./ui/plugins\")(gantt);\r\n\t\trequire(\"./ui/touch\")(gantt);\r\n\t\trequire(\"./ui/lightbox\")(gantt);\r\n\t\trequire(\"./ui/lightbox/lightbox_optional_time\")(gantt);\r\n\t\trequire(\"./ui/wai_aria\")(gantt);\r\n\r\n\t\tgantt.locate = function(e) {\r\n\t\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t\t// ignore empty rows/cells of the timeline\r\n\t\t\tif(domHelpers.closest(trg, \".gantt_task_row\")){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\t\tif(node){\r\n\t\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgantt._locate_css = function(e, classname, strict){\r\n\t\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t\t};\r\n\r\n\t\tgantt._locateHTML = function(e, attribute) {\r\n\t\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onParse\", function(){\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tif(gantt.config.initial_scroll){\r\n\t\t\t\t\tvar firstTask = gantt.getTaskByIndex(0);\r\n\t\t\t\t\tvar id = firstTask ? firstTask.id : gantt.config.root_id;\r\n\t\t\t\t\tif(gantt.isTaskExists(id))\r\n\t\t\t\t\tgantt.showTask(id);\r\n\t\t\t\t}\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\t// detach listeners before clearing old DOM, possible IE errors when accessing detached nodes\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t\tthis.$mouseEvents.reset();\r\n\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// GS-1261: scroll the views to the right side when RTL is enabled\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(!isHeadless(gantt) && gantt.config.rtl){\r\n\t\t\tgantt.$layout.getCellsByType(\"viewCell\").forEach(function(cell){ \r\n\t\t\t\tvar attachedScrollbar = cell.$config.scrollX;\r\n\t\t\t\tif (!attachedScrollbar) return;\r\n\r\n\t\t\t\tvar scrollbar = gantt.$ui.getView(attachedScrollbar);\r\n\t\t\t\tif (scrollbar) scrollbar.scrollTo(scrollbar.$config.scrollSize,0);\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n};","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"'\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //   .   ?\r\n\t\tconfirm_deleting: \"  .  ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n * updated by @levkar at https://github.com/DHTMLX/gantt/pull/10\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\"],\r\n\t\tmonth_short: [\"Oca\", \"ub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Au\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\r\n\t\tday_full: [\"Pazar\", \"Pazartesi\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\"],\r\n\t\tday_short: [\"Paz\", \"Pzt\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cmt\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Yeni grev\",\r\n\t\ticon_save: \"Kaydet\",\r\n\t\ticon_cancel: \"ptal\",\r\n\t\ticon_details: \"Detaylar\",\r\n\t\ticon_edit: \"Dzenle\",\r\n\t\ticon_delete: \"Sil\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Grev silinecek, emin misiniz?\",\r\n\t\tsection_description: \"Aklama\",\r\n\t\tsection_time: \"Zaman Aral\",\r\n\t\tsection_type: \"Tip\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Grev Ad\",\r\n\t\tcolumn_start_date: \"Balang\",\r\n\t\tcolumn_duration: \"Sre\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Balant\",\r\n\t\tconfirm_link_deleting: \"silinecek\",\r\n\t\tlink_start: \" (balang)\",\r\n\t\tlink_end: \" (biti)\",\r\n\r\n\t\ttype_task: \"Grev\",\r\n\t\ttype_project: \"Proje\",\r\n\t\ttype_milestone: \"Kilometreta\",\r\n\r\n\r\n\t\tminutes: \"Dakika\",\r\n\t\thours: \"Saat\",\r\n\t\tdays: \"Gn\",\r\n\t\tweeks: \"Hafta\",\r\n\t\tmonths: \"Ay\",\r\n\t\tyears: \"Yl\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"ptal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n\tTranslation by Peter Eriksson\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mn\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny uppgift\",\r\n\t\ticon_save: \"Spara\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detajer\",\r\n\t\ticon_edit: \"ndra\",\r\n\t\ticon_delete: \"Ta bort\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"r du sker p att du vill ta bort hndelsen permanent?\",\r\n\t\tsection_description: \"Beskrivning\",\r\n\t\tsection_time: \"Tid\",\r\n\t\tsection_type: \"Typ\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Uppgiftsnamn\",\r\n\t\tcolumn_start_date: \"Starttid\",\r\n\t\tcolumn_duration: \"Varaktighet\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"Lnk\",\r\n\t\tconfirm_link_deleting: \"kommer tas bort\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (slut)\",\r\n\t\ttype_task: \"Uppgift\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milstolpe\",\r\n\r\n\t\tminutes: \"Minuter\",\r\n\t\thours: \"Timmar\",\r\n\t\tdays: \"Dagar\",\r\n\t\tweeks: \"Veckor\",\r\n\t\tmonths: \"Mnader\",\r\n\t\tyears: \"r\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Marec\", \"Aprl\", \"Mj\", \"Jn\", \"Jl\", \"August\", \"September\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedea\", \"Pondelok\", \"Utorok\", \"Streda\", \"tvrtok\", \"Piatok\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"t\", \"Pi\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov loha\",\r\n\t\ticon_save: \"Uloi\",\r\n\t\ticon_cancel: \"Sp\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Zmaza\",\r\n\t\tconfirm_closing: \"Vae zmeny nebud uloen. Skutone?\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udalos bude natrvalo vymazan. Skutone?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Sp\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"etrtek\", \"Petek\", \"Sobota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"et\", \"Pet\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova naloga\",\r\n\t\ticon_save: \"Shrani\",\r\n\t\ticon_cancel: \"Preklii\",\r\n\t\ticon_details: \"Podrobnosti\",\r\n\t\ticon_edit: \"Uredi\",\r\n\t\ticon_delete: \"Izbrii\",\r\n\t\tconfirm_closing: \"\", // Spremembe ne bodo shranjene. elite nadaljevati ?\r\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. elite nadaljevati?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"asovni okvir\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Preklii\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"O\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"Ma\", \"A\", \"Ma\", \"\", \"\", \"A\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"    \",\r\n\t\tresources_filter_label: \"  \"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\r\n\t\tday_short: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Sarcina noua\",\r\n\t\ticon_save: \"Salveaza\",\r\n\t\ticon_cancel: \"Anuleaza\",\r\n\t\ticon_details: \"Detalii\",\r\n\t\ticon_edit: \"Editeaza\",\r\n\t\ticon_delete: \"Sterge\",\r\n\t\tconfirm_closing: \"Schimbarile nu vor fi salvate, esti sigur?\",// Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Evenimentul va fi sters permanent, esti sigur?\",\r\n\t\tsection_description: \"Descriere\",\r\n\t\tsection_time: \"Interval\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuleaza\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n\r\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONALVES\r\n\r\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\r\n\r\n www.atrixian.com.br\r\n\r\n\r\n Updated by Jorge Albernaz Martins\r\n\r\n jorgefox@hotmail.com\r\n\r\n www.redfox.inf.br\r\n\r\n JorgeFox\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tarefa\",\r\n\t\ticon_save: \"Salvar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalhes\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Excluir\",\r\n\t\tconfirm_closing: \"\",// Suas alteraes sero perdidas, confirme?\r\n\t\tconfirm_deleting: \"As tarefas sero excluidas permanentemente, confirme?\",\r\n\t\tsection_description: \"Descrio\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EAP\",\r\n\t\tcolumn_text: \"Nome tarefa\",\r\n\t\tcolumn_start_date: \"Data incio\",\r\n\t\tcolumn_duration: \"Durao\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"Ser excludo!\",\r\n\t\tlink_start: \" (incio)\",\r\n\t\tlink_end: \" (fim)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Projeto\",\r\n\t\ttype_milestone: \"Marco\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Dias\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Anos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Restrio\",\r\n\t\tconstraint_type: \"Tipo Restrio\",\r\n\t\tconstraint_date: \"Data restrio\",\r\n\t\tasap: \"Mais breve possvel\",\r\n\t\talap: \"Mais tarde possvel\",\r\n\t\tsnet: \"No comear antes de\",\r\n\t\tsnlt: \"No comear depois de\",\r\n\t\tfnet: \"No terminar antes de\",\r\n\t\tfnlt: \"No terminar depois de\",\r\n\t\tmso: \"Precisa comear em\",\r\n\t\tmfo: \"Precisa terminar em\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"Tipo de filtros\",\r\n\t\tresources_filter_label: \"Ocultar vazios\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Stycze\", \"Luty\", \"Marzec\", \"Kwiecie\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpie\", \"Wrzesie\", \"Padziernik\", \"Listopad\", \"Grudzie\"],\r\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Pa\", \"Lis\", \"Gru\"],\r\n\t\tday_full: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"],\r\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"ro\", \"Czw\", \"Pi\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nowe zadanie\",\r\n\t\ticon_save: \"Zapisz\",\r\n\t\ticon_cancel: \"Anuluj\",\r\n\t\ticon_details: \"Szczegy\",\r\n\t\ticon_edit: \"Edytuj\",\r\n\t\ticon_delete: \"Usu\",\r\n\t\tconfirm_closing: \"\", // Zmiany zostan usunite, jeste pewien?\r\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunite na zawsze, kontynuowa?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Okres czasu\",\r\n\t\tsection_type: \"Typ\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nazwa zadania\",\r\n\t\tcolumn_start_date: \"Pocztek\",\r\n\t\tcolumn_duration: \"Czas trwania\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"zostanie usunity\",\r\n\t\tlink_start: \" (pocztek)\",\r\n\t\tlink_end: \" (koniec)\",\r\n\r\n\t\ttype_task: \"Zadanie\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuty\",\r\n\t\thours: \"Godziny\",\r\n\t\tdays: \"Dni\",\r\n\t\tweeks: \"Tydzie\",\r\n\t\tmonths: \"Miesice\",\r\n\t\tyears: \"Lata\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuluj\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Endre\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", // Endringer blir ikke lagret, er du sikker?\r\n\t\tconfirm_deleting: \"Oppfringen vil bli slettet, er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\r\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nieuwe taak\",\r\n\t\ticon_save: \"Opslaan\",\r\n\t\ticon_cancel: \"Annuleren\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Bewerken\",\r\n\t\ticon_delete: \"Verwijderen\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\r\n\t\tsection_description: \"Beschrijving\",\r\n\t\tsection_time: \"Tijd periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Taak omschrijving\",\r\n\t\tcolumn_start_date: \"Startdatum\",\r\n\t\tcolumn_duration: \"Duur\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Koppeling\",\r\n\t\tconfirm_link_deleting: \"zal worden verwijderd\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (eind)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"minuten\",\r\n\t\thours: \"uren\",\r\n\t\tdays: \"dagen\",\r\n\t\tweeks: \"weken\",\r\n\t\tmonths: \"maanden\",\r\n\t\tyears: \"jaren\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuleren\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Rediger\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","export default class LocaleManager{\r\n\tprivate _locales:{[key:string]: IGanttLocale };\r\n\r\n\tconstructor(config: {[key:string]: IGanttLocale }){\r\n\t\tthis._locales = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._locales[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddLocale = (name: string, locale: IGanttLocale) => {\r\n\t\tthis._locales[name] = locale;\r\n\t}\r\n\r\n\tgetLocale = (name: string): IGanttLocale => {\r\n\t\treturn this._locales[name];\r\n\t}\r\n}","/*\r\n\tTranslated by cjkim@dbvalley.com\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \" \",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \" ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" ?\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n Translation by Genexus Japan Inc.\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // \r\n\t\tconfirm_deleting: \"\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n Update 29/12/2015:\r\n New labels translation by ARCANGELI CLAUDIO\r\n\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nuovo compito\",\r\n\t\ticon_save: \"Salva\",\r\n\t\ticon_cancel: \"Chiudi\",\r\n\t\ticon_details: \"Dettagli\",\r\n\t\ticon_edit: \"Modifica\",\r\n\t\ticon_delete: \"Elimina\",\r\n\t\tconfirm_closing: \"\",// \"Sei sicuro di confermare la chiusura?\",\r\n\t\tconfirm_deleting: \"Sei sicuro di confermare l'eliminazione?\",\r\n\t\tsection_description: \"Descrizione\",\r\n\t\tsection_time: \"Periodo di tempo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nome Attivit\",\r\n\t\tcolumn_start_date: \"Inizio\",\r\n\t\tcolumn_duration: \"Durata\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"sar eliminato\",\r\n\t\tlink_start: \" (inizio)\",\r\n\t\tlink_end: \" (fine)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuti\",\r\n\t\thours: \"Ore\",\r\n\t\tdays: \"Giorni\",\r\n\t\tweeks: \"Settimane\",\r\n\t\tmonths: \"Mesi\",\r\n\t\tyears: \"Anni\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Chiudi\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\r\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Tugas baru\",\r\n\t\ticon_save: \"Simpan\",\r\n\t\ticon_cancel: \"Batal\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Hapus\",\r\n\t\tconfirm_closing: \"\", /* Perubahan tidak akan disimpan ? */\r\n\t\tconfirm_deleting: \"Acara akan dihapus\",\r\n\t\tsection_description: \"Keterangan\",\r\n\t\tsection_time: \"Periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Batal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Mrcius\", \"prilis\", \"Mjus\", \"Jnius\", \"Jlius\", \"Augusztus\", \"Szeptember\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"pr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Vasrnap\", \"Htf\", \"Kedd\", \"Szerda\", \"Cstrtk\", \"Pntek\", \"szombat\"],\r\n\t\tday_short: [\"Va\", \"H\", \"Ke\", \"Sze\", \"Cs\", \"P\", \"Szo\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"j feladat\",\r\n\t\ticon_save: \"Ments\",\r\n\t\ticon_cancel: \"Mgse\",\r\n\t\ticon_details: \"Rszletek\",\r\n\t\ticon_edit: \"Szerkeszts\",\r\n\t\ticon_delete: \"Trls\",\r\n\t\tconfirm_closing: \"\", // A vltozsok elvesznek, biztosan folytatja? \"\r\n\t\tconfirm_deleting: \"Az esemny trlve lesz, biztosan folytatja?\",\r\n\t\tsection_description: \"Lers\",\r\n\t\tsection_time: \"Idszak\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Mgse\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n  Translation by Davor\r\n http://docs.dhtmlx.com/gantt/desktop__localization.html#comment-2569116291\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Sijeanj\", \"Veljaa\", \"Oujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\r\n\t\tmonth_short: [\"Sij\", \"Velj\", \"Ou\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\r\n\t\tday_full: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"etvrtak\", \"Petak\", \"Subota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"et\", \"Pet\", \"Sub\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Novi Zadatak\",\r\n\t\ticon_save: \"Spremi\",\r\n\t\ticon_cancel: \"Odustani\",\r\n\t\ticon_details: \"Detalji\",\r\n\t\ticon_edit: \"Izmjeni\",\r\n\t\ticon_delete: \"Obrii\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"Zadatak e biti trajno izbrisan, jeste li sigurni?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Vremenski Period\",\r\n\t\tsection_type: \"Tip\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Naziv Zadatka\",\r\n\t\tcolumn_start_date: \"Poetno Vrijeme\",\r\n\t\tcolumn_duration: \"Trajanje\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Poveznica\",\r\n\t\tconfirm_link_deleting: \"e biti izbrisan\",\r\n\t\tlink_start: \" (poetak)\",\r\n\t\tlink_end: \" (kraj)\",\r\n\r\n\t\ttype_task: \"Zadatak\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minute\",\r\n\t\thours: \"Sati\",\r\n\t\tdays: \"Dani\",\r\n\t\tweeks: \"Tjedni\",\r\n\t\tmonths: \"Mjeseci\",\r\n\t\tyears: \"Godine\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Odustani\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"  .?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\"],\r\n\t\tmonth_short: [\"Jan\", \"Fv\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Ao\", \"Sep\", \"Oct\", \"Nov\", \"Dc\"],\r\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nouvelle tche\",\r\n\t\ticon_save: \"Enregistrer\",\r\n\t\ticon_cancel: \"Annuler\",\r\n\t\ticon_details: \"Dtails\",\r\n\t\ticon_edit: \"Modifier\",\r\n\t\ticon_delete: \"Effacer\",\r\n\t\tconfirm_closing: \"\",// Vos modifications seront perdus, tes-vous sr ?\r\n\t\tconfirm_deleting: \"L'vnement sera effac sans appel, tes-vous sr ?\",\r\n\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Priode\",\r\n\t\tsection_type: \"Type\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"OTP\",\r\n\t\tcolumn_text: \"Nom de la tche\",\r\n\t\tcolumn_start_date: \"Date initiale\",\r\n\t\tcolumn_duration: \"Dure\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Le lien\",\r\n\t\tconfirm_link_deleting: \"sera supprim\",\r\n\t\tlink_start: \"(dbut)\",\r\n\t\tlink_end: \"(fin)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Heures\",\r\n\t\tdays: \"Jours\",\r\n\t\tweeks: \"Semaines\",\r\n\t\tmonths: \"Mois\",\r\n\t\tyears: \"Annes\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuler\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\r\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\r\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Uusi tehtv\",\r\n\t\ticon_save: \"Tallenna\",\r\n\t\ticon_cancel: \"Peru\",\r\n\t\ticon_details: \"Tiedot\",\r\n\t\ticon_edit: \"Muokkaa\",\r\n\t\ticon_delete: \"Poista\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\r\n\t\tsection_description: \"Kuvaus\",\r\n\t\tsection_time: \"Aikajakso\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Peru\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n dhtmlxGantt Persian (Farsi, fa_IR) locale by Mohammad Shokri http://slashsbin.com/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tday_short: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"       \",\r\n\t\tconfirm_deleting: \"         \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \" \",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"  \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\r\n\r\n Update 30/10/2015:\r\n Translation of new labels by Jorge Macias\r\n https://disqus.com/by/disqus_bTuZk1voC7/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jueves\", \"Viernes\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nueva tarea\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalles\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Eliminar\",\r\n\t\tconfirm_closing: \"\", // \"Sus cambios se perdern, continuar ?\"\r\n\t\tconfirm_deleting: \"El evento se borrar definitivamente, continuar?\",\r\n\t\tsection_description: \"Descripcin\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EDT\",\r\n\t\tcolumn_text: \"Tarea\",\r\n\t\tcolumn_start_date: \"Inicio\",\r\n\t\tcolumn_duration: \"Duracin\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Enlace\",\r\n\t\tconfirm_link_deleting: \"ser borrada\",\r\n\t\tlink_start: \" (inicio)\",\r\n\t\tlink_end: \" (fin)\",\r\n\r\n\t\ttype_task: \"Tarea\",\r\n\t\ttype_project: \"Proyecto\",\r\n\t\ttype_milestone: \"Hito\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Das\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Aos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"New task\",\r\n\t\ticon_save: \"Save\",\r\n\t\ticon_cancel: \"Cancel\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Delete\",\r\n\t\tconfirm_closing: \"\",// Your changes will be lost, are you sure?\r\n\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Time period\",\r\n\t\tsection_type: \"Type\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancel\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"    .   ;\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" Januar\", \" Februar\", \" Mrz \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\r\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Neue Aufgabe\",\r\n\t\ticon_save: \"Speichern\",\r\n\t\ticon_cancel: \"Abbrechen\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"ndern\",\r\n\t\ticon_delete: \"Lschen\",\r\n\t\tconfirm_closing: \"\", // \"Ihre Vernderungen werden verloren sein, wollen Sie ergnzen? \"\r\n\t\tconfirm_deleting: \"Der Eintrag wird gelscht\",\r\n\t\tsection_description: \"Beschreibung\",\r\n\t\tsection_time: \"Zeitspanne\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"PSP\",\r\n\t\tcolumn_text: \"Task-Namen\",\r\n\t\tcolumn_start_date: \"Startzeit\",\r\n\t\tcolumn_duration: \"Dauer\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"werden gelscht\",\r\n\t\tlink_start: \"(starten)\",\r\n\t\tlink_end: \"(ende)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuten\",\r\n\t\thours: \"Stunden\",\r\n\t\tdays: \"Tage\",\r\n\t\tweeks: \"Wochen\",\r\n\t\tmonths: \"Monate\",\r\n\t\tyears: \"Jahre\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Abbrechen\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny opgave\",\r\n\t\ticon_save: \"Gem\",\r\n\t\ticon_cancel: \"Fortryd\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Tilret\",\r\n\t\ticon_delete: \"Slet\",\r\n\t\tconfirm_closing: \"Dine rettelser vil g tabt.. Er dy sikker?\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Fortryd\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Leden\", \"nor\", \"Bezen\", \"Duben\", \"Kvten\", \"erven\", \"ervenec\", \"Srpen\", \"Z\", \"jen\", \"Listopad\", \"Prosinec\"],\r\n\t\tmonth_short: [\"Led\", \"n\", \"Be\", \"Dub\", \"Kv\", \"er\", \"ec\", \"Srp\", \"Z\", \"j\", \"List\", \"Pro\"],\r\n\t\tday_full: [\"Nedle\", \"Pondl\", \"ter\", \"Steda\", \"tvrtek\", \"Ptek\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"t\", \"St\", \"t\", \"P\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov prce\",\r\n\t\ticon_save: \"Uloit\",\r\n\t\ticon_cancel: \"Zpt\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Smazat\",\r\n\t\tconfirm_closing: \"\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udlost bude trvale smazna, opravdu?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Zpt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\nTranslation by FreezeSoul\r\n\r\nUpdate 26/10/2015:\r\nTranslation of new labels by zwh8800\r\n https://github.com/DHTMLX/gantt/pull/7\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"!\", // Your changes will be lost, are your sure?\r\n\t\tconfirm_deleting: \"?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"\",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Mar\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\r\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tasca\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancellar\",\r\n\t\ticon_details: \"Detalls\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Esborrar\",\r\n\t\tconfirm_closing: \"\", // \"Els seus canvis es perdrn, continuar ?\"\r\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrar definitivament, continuar ?\",\r\n\t\tsection_description: \"Descripci\",\r\n\t\tsection_time: \"Periode de temps\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancellar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \"()\",\r\n\t\tlink_end: \"()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"ii\",\r\n\t\thours: \"i\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" \", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \", \" \", \" \"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"  ,   \", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"       \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\"\r\n\t}\r\n};\r\n\r\nexport default locale;","import ar from \"./locale_ar\";\r\nimport be from \"./locale_be\";\r\nimport ca from \"./locale_ca\";\r\nimport cn from \"./locale_cn\";\r\nimport cs from \"./locale_cs\";\r\nimport da from \"./locale_da\";\r\nimport de from \"./locale_de\";\r\nimport el from \"./locale_el\";\r\nimport en from \"./locale_en\";\r\nimport es from \"./locale_es\";\r\nimport fa from \"./locale_fa\";\r\nimport fi from \"./locale_fi\";\r\nimport fr from \"./locale_fr\";\r\nimport he from \"./locale_he\";\r\nimport hr from \"./locale_hr\";\r\nimport hu from \"./locale_hu\";\r\nimport id from \"./locale_id\";\r\nimport it from \"./locale_it\";\r\nimport jp from \"./locale_jp\";\r\nimport kr from \"./locale_kr\";\r\n\r\nimport LocaleManager from \"./locale_manager\";\r\n\r\nimport nb from \"./locale_nb\";\r\nimport nl from \"./locale_nl\";\r\nimport no from \"./locale_no\";\r\nimport pl from \"./locale_pl\";\r\nimport pt from \"./locale_pt\";\r\nimport ro from \"./locale_ro\";\r\nimport ru from \"./locale_ru\";\r\nimport si from \"./locale_si\";\r\nimport sk from \"./locale_sk\";\r\nimport sv from \"./locale_sv\";\r\nimport tr from \"./locale_tr\";\r\nimport ua from \"./locale_ua\";\r\n\r\nexport default function(){\r\n\treturn new LocaleManager({\r\n\t\ten,\r\n\t\tar,\r\n\t\tbe,\r\n\t\tca,\r\n\t\tcn,\r\n\t\tcs,\r\n\t\tda,\r\n\t\tde,\r\n\t\tel,\r\n\t\tes,\r\n\t\tfa,\r\n\t\tfi,\r\n\t\tfr,\r\n\t\the,\r\n\t\thr,\r\n\t\thu,\r\n\t\tid,\r\n\t\tit,\r\n\t\tjp,\r\n\t\tkr,\r\n\t\tnb,\r\n\t\tnl,\r\n\t\tno,\r\n\t\tpl,\r\n\t\tpt,\r\n\t\tro,\r\n\t\tru,\r\n\t\tsi,\r\n\t\tsk,\r\n\t\tsv,\r\n\t\ttr,\r\n\t\tua\r\n\t});\r\n}","// all builds except for evaluation version get this mockup\r\n// the evaluation build gets actual codes\r\nexport default () => {};","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tthis.clearAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tif(this._eventRemoveAll){\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tif(this.resetLightbox){\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\t\tthis.$services.destructor();\r\n\r\n\t\t// detachAllEvents should be called last, because in components may be attached events\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.$destroyed = true;\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tif (gantt.message) {\r\n\t\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\t\tconsole.log(message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// eslint-disable-next-line no-debugger\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","function addResizeListener(gantt){\r\n\tvar containerStyles = window.getComputedStyle(gantt.$root);\r\n\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\tgantt.$root.style.position = \"relative\";\r\n\t}\r\n\r\n\tvar resizeWatcher = document.createElement('iframe');\r\n\tresizeWatcher.className = \"gantt_container_resize_watcher\";\r\n\tresizeWatcher.tabIndex = -1;\r\n\tif(gantt.config.wai_aria_attributes){\r\n\t\tresizeWatcher.setAttribute(\"role\", \"none\");\r\n\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\r\n\t}\r\n\r\n\tvar salesforce_environment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"];\r\n\tif (salesforce_environment){\r\n\t\tgantt.config.container_resize_method = \"timeout\";\r\n\t}\r\n\r\n\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\r\n\tgantt.$root.appendChild(resizeWatcher);\r\n\tif (resizeWatcher.contentWindow) {\r\n\t\tlistenWindowResize(gantt, resizeWatcher.contentWindow);\r\n\t} else {\r\n\t\t// if so - ditch the iframe and fallback to listening the main window resize\r\n\t\tgantt.$root.removeChild(resizeWatcher);\r\n\t\tlistenWindowResize(gantt, window);\r\n\t}\r\n}\r\n\r\nfunction listenWindowResize(gantt, window){\r\n\tvar resizeTimeout = gantt.config.container_resize_timeout || 20;\r\n\tvar resizeDelay;\r\n\r\n\tif (gantt.config.container_resize_method == \"timeout\"){\r\n\t\tlowlevelResizeWatcher();\r\n\t}\r\n\telse {\r\n\t\ttry {\r\n\t\t\tgantt.event(window, \"resize\", function () {\r\n\t\t\t\tif (gantt.$scrollbarRepaint) {\r\n\t\t\t\t\tgantt.$scrollbarRepaint = null;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\trepaintGantt();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tlowlevelResizeWatcher();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction repaintGantt(){\r\n\t\tclearTimeout(resizeDelay);\r\n\t\tresizeDelay = setTimeout(function(){\r\n\t\t\tgantt.render();\r\n\t\t}, resizeTimeout);\r\n\t}\r\n\r\n\tvar previousHeight = gantt.$root.offsetHeight;\r\n\tvar previousWidth = gantt.$root.offsetWidth;\t\r\n\r\n\tfunction lowlevelResizeWatcher(){\r\n\t\tif (gantt.$root.offsetHeight != previousHeight ||\r\n\t\t\t\tgantt.$root.offsetWidth != previousWidth){\r\n\t\t\t\trepaintGantt();\r\n\t\t}\r\n\r\n\t\tpreviousHeight = gantt.$root.offsetHeight;\r\n\t\tpreviousWidth = gantt.$root.offsetWidth;\r\n\r\n\t\tsetTimeout(lowlevelResizeWatcher, resizeTimeout);\r\n\t}\r\n}\r\n\r\nmodule.exports = addResizeListener;","var domHelpers = require(\"./ui/utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\nvar isHeadless = require(\"../utils/is_headless\");\r\nvar addResizeListener = require(\"./ui/resize_listener\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n\tfunction isHTMLElement(node){\r\n\t\ttry {\r\n\t\t\tnode.cloneNode(false);\r\n\t\t}\r\n\t\tcatch (e){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tvar invalidContainerMessage = \"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).\" +\r\n\t\"This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";\r\n\r\n\tfunction validateNode(node){\r\n\t\tif (!node || (typeof node == 'string' && document.getElementById(node))) return true;\r\n\t\tif (isHTMLElement(node)) return true;\r\n\r\n\t\tgantt.assert(false, invalidContainerMessage);\r\n\t\tthrow new Error(invalidContainerMessage);\r\n\t}\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif (gantt.env.isNode) { \r\n\t\t\tnode = null; // for the nodejs version\r\n\t\t} else {\r\n\t\t\tvalidateNode(node); // for the web version\r\n\t\t}\r\n\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (gantt.env.isNode) { \r\n\t\t\t\tnode = null; // for the nodejs version\r\n\t\t\t} else {\r\n\t\t\t\tvalidateNode(node); // for the web version\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._quickRefresh = function(code){\r\n\t\tvar stores = this._getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = true;\r\n\t\t}\r\n\r\n\t\tcode();\r\n\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar dropLayout = (function dropLayout(){\r\n\t\tif(this._clearTaskLayers){\r\n\t\t\tthis._clearTaskLayers();\r\n\t\t}\r\n\r\n\t\tif(this._clearLinkLayers){\r\n\t\t\tthis._clearLinkLayers();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$layout = null;\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\t}).bind(gantt);\r\n\r\n\tvar rebuildLayout = (function rebuildLayout(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$root.innerHTML = \"\";\r\n\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", this.$root, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshData();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tthis.$container = this.$layout.$container.firstChild;\r\n\r\n\t\taddResizeListener(this);\r\n\t}).bind(gantt);\r\n\r\n\tgantt.resetLayout = function(){\r\n\t\tdropLayout();\r\n\t\trebuildLayout();\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\tthis._update_flags();\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tdropLayout();\r\n\r\n\t\tthis.$root = null;\r\n\t\tif(node){\r\n\t\t\tthis.$root = domHelpers.toNode(node);\r\n\t\t\trebuildLayout();\r\n\t\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\": function(id) {\r\n\t\t\t\tif (gantt.isReadonly(gantt.getTask(id))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\": function(id) {\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar visibleDate;\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tif (!this.config.sort && this._sort) {\r\n\t\t\t\tthis._sort = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$root){\r\n\t\t\t\tif(this.config.rtl){\r\n\t\t\t\t\tthis.$root.classList.add(\"gantt_rtl\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$root.classList.remove(\"gantt_rtl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = this.getScrollState();\r\n\t\t\tvar posX = pos ? pos.x : 0;\r\n\t\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvisibleDate = null;\r\n\t\t\tif(posX){\r\n\t\t\t\tvisibleDate = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\t\tvar preserveScroll = this.config.preserve_scroll;\r\n\t\t\tthis.config.preserve_scroll = false; // prevent scrolling from layout resize, scroll will be called here later on\r\n\t\t\tthis.$layout.resize();\r\n\t\t\tthis.config.preserve_scroll = preserveScroll;\r\n\r\n\t\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\t\tif(posX){\r\n\t\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\t\tif(!(+visibleDate == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\t\tvar posX = null;\r\n\t\t\t\t\t\tvar posY = null;\r\n\t\t\t\t\t\tif(visibleDate){\r\n\t\t\t\t\t\t\tvar posX = Math.max(gantt.posFromDate(visibleDate) - gantt.config.task_scroll_offset, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(pos.y){\r\n\t\t\t\t\t\t\tposY = pos.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt.scrollTo(posX, posY);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSplitTask. Task object was expected\");\r\n\t\treturn this.$data.tasksStore._isSplitItem(task);\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.getTaskType = function (type) {\r\n\t\tvar checkType = type;\r\n\t\tif(type && typeof type == \"object\"){\r\n\t\t\tcheckType = type.type;\r\n\t\t}\r\n\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == checkType) {\r\n\t\t\t\treturn checkType;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn gantt.config.types.task;\r\n\t};\r\n};","// all builds except for evaluation version get this mockup\r\n// the evaluation build gets actual codes\r\nexport default () => {};","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isUnscheduledTask. Task object was expected\");\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt._isTaskInTimelineLimits = function(task) {\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\t\treturn !!(taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf());\r\n\t};\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!(this._isAllowedUnscheduledTask(task) || this._isTaskInTimelineLimits(task))) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(this.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._getProjectEnd = function() {\r\n\t\tif(gantt.config.project_end){\r\n\t\t\treturn gantt.config.project_end;\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskByTime();\r\n\t\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\t\treturn +a.end_date > +b.end_date ? 1 : -1;\r\n\t\t\t});\r\n\t\t\treturn tasks.length ? tasks[tasks.length - 1].end_date : null;\r\n\t\t}\r\n\t};\r\n\tgantt._getProjectStart = function() {\r\n\t\tif (gantt.config.project_start) {\r\n\t\t\treturn gantt.config.project_start;\r\n\t\t}\r\n\r\n\t\t// use timeline start if project start is not specified\r\n\t\tif (gantt.config.start_date) {\r\n\t\t\treturn gantt.config.start_date;\r\n\t\t}\r\n\t\tif (gantt.getState().min_date) {\r\n\t\t\treturn gantt.getState().min_date;\r\n\t\t}\r\n\r\n\t\t// earliest task start if neither project start nor timeline are specified\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\treturn +a.start_date > +b.start_date ? 1 : -1;\r\n\t\t});\r\n\t\treturn tasks.length ? tasks[0].start_date : null;\r\n\t};\r\n\r\n\tvar getDefaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != gantt.config.root_id) ? gantt.getTask(parent_id) : false,\r\n\t\t\tstartDate = null;\r\n\t\tif (parent) {\r\n\t\t\tif(gantt.config.schedule_from_end){\r\n\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: parent.end_date,\r\n\t\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\t\ttask:item\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tstartDate = parent.start_date;\r\n\t\t\t}\r\n\r\n\t\t} else if(gantt.config.schedule_from_end) {\r\n\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\tstart_date: gantt._getProjectEnd(),\r\n\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tvar first = gantt.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? gantt.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t}) : null)) : gantt.config.start_date || gantt.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || getDefaultTaskDate(task, gantt.getParent(task));\r\n\t\ttask.duration = task.duration || gantt.config.duration_step;\r\n\t\ttask.end_date = task.end_date || gantt.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = getDefaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (this.isTaskExists(parent)) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\t//GS-761: assert unique ID\r\n\t\t\tif (gantt.isTaskExists(item.id)){\r\n\t\t\t\tvar task = gantt.getTask(item.id);\r\n\t\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\titem.$new = true;\r\n\t\t\t\tthis.silent(function(){\r\n\t\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar getTaskTimingMode = function (task, force) {\r\n\t\tvar task_type = gantt.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == gantt.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != gantt.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = getTaskTimingMode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t\ttask.$calculate_duration = false;// do not recalculate duration below\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date && task.$calculate_duration !== false) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif(!task.$calculate_duration){\r\n\t\t\ttask.$calculate_duration = true;\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t\t// GS-1145. We should let tasks to have 0 duration if user wants it\r\n\t\tif (this.config.min_duration === 0 && task.duration === 0){\r\n\t\t\ttask.$no_end = false;\r\n\t\t}\r\n\r\n\t\t// work calendar of task has changed\r\n\t\tvar effectiveCalendar = this.getTaskCalendar(task);\r\n\t\tif(task.$effective_calendar && task.$effective_calendar !== effectiveCalendar.id){\r\n\t\t\tupdateTaskTiming(task);\r\n\t\t\tif(this.config.inherit_calendar && this.isSummaryTask(task)){\r\n\t\t\t\tthis.eachTask(function(child){\r\n\t\t\t\t\tupdateTaskTiming(child);\r\n\t\t\t\t}, task.id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttask.$effective_calendar = effectiveCalendar.id;\r\n\t};\r\n\r\n\tfunction updateTaskTiming(task) {\r\n\t\ttask.$effective_calendar = gantt.getTaskCalendar(task).id;\r\n\t\ttask.start_date = gantt.getClosestWorkTime({\r\n\t\t\tdir: \"future\",\r\n\t\t\tdate: task.start_date,\r\n\t\t\tunit: gantt.config.duration_unit,\r\n\t\t\ttask: task\r\n\t\t});\r\n\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t}\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSummaryTask. Task object was expected\");\r\n\r\n\t\tvar mode = getTaskTimingMode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = getTaskTimingMode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar info = getSubtaskInfo(task.id);\r\n\t\t\tassignProjectDates.call(this, task, taskMode, info.start_date, info.end_date);\r\n\t\t\ttask.$rollup = info.rollup;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction assignProjectDates(task, taskTiming, from, to) {\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = getDefaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.getSubtaskDuration = function (taskId) {\r\n\t\tvar res = 0,\r\n\t\t\troot = taskId !== undefined ? taskId : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tfunction getSubtaskInfo (taskId){\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = taskId !== undefined ? taskId : gantt.config.root_id,\r\n\t\t\trollup = [];\r\n\r\n\t\tgantt.eachTask(function (child) {\r\n\t\t\tif (gantt.getTaskType(child.type) == gantt.config.types.project || gantt.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(child.rollup){\r\n\t\t\t\trollup.push(child.id);\r\n\t\t\t}\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null,\r\n\t\t\trollup: rollup\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar info = getSubtaskInfo(task_id);\r\n\t\treturn {\r\n\t\t\tstart_date: info.start_date,\r\n\t\t\tend_date: info.end_date\r\n\t\t};\r\n\t};\r\n\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent, updateAll) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif(task.rollup){\r\n\t\t\tupdateAll = true;\r\n\t\t}\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = getTaskTimingMode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\t\t// GS-761 the dates check is necessary for adding empty tasks: gantt.addTask({id:\"2\"})\r\n\t\tif (updateAll || (task.start_date && task.end_date && (taskTiming.$no_start || taskTiming.$no_end))) {\r\n\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (!updateAll && oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent, updateAll);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (helpers.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function (id, parent, tindex) {\r\n\t\tgantt._init_task_timing(gantt.getTask(id));\r\n\t\treturn true;\r\n\t});\r\n\r\n};","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorkTimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tmergeCalendars: utils.bind(calendarManager.mergeCalendars, calendarManager),\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetResourceCalendar: utils.bind(calendarManager.getResourceCalendar, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorkTimeFacade };","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\thasWorkTime: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function(calendar) {\r\n\t\tif(!(calendar instanceof CalendarDisabledTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.config.work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n","module.exports = function() {\r\n\tfunction getResourcesCalendarKey(resourceAssignments){\r\n\t\treturn resourceAssignments.map(function(res){\r\n\t\t\tif(res && res.resource_id){\r\n\t\t\t\treturn res.resource_id;\r\n\t\t\t} else {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t}).sort().join(\"-\");\r\n\t}\r\n\r\n\tvar dynamicCalendars = {};\r\n\r\n\tfunction mergeResourceCalendars(resourceAssignments, manager){\r\n\t\treturn manager.mergeCalendars(resourceAssignments.map(function(assignment){\r\n\t\t\tvar resourceId = (assignment && assignment.resource_id) ? assignment.resource_id : assignment;\r\n\t\t\treturn manager.getResourceCalendar(resourceId);\r\n\t\t}));\r\n\t}\r\n\tfunction getCalendarIdFromMultipleResources(resourceAssignments, manager){\r\n\t\tvar key = getResourcesCalendarKey(resourceAssignments);\r\n\t\tif(!resourceAssignments.length){\r\n\t\t\treturn null;\r\n\t\t}else if(resourceAssignments.length === 1){\r\n\t\t\treturn manager.getResourceCalendar(key).id;\r\n\t\t}else if (dynamicCalendars[key]){\r\n\t\t\treturn dynamicCalendars[key].id;\r\n\t\t} else {\r\n\t\t\tvar tempCalendar = mergeResourceCalendars(resourceAssignments, manager);\r\n\r\n\t\t\tdynamicCalendars[key] = tempCalendar;\r\n\t\t\treturn manager.addCalendar(tempCalendar);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetCalendarIdFromMultipleResources: getCalendarIdFromMultipleResources\r\n\t};\r\n};","module.exports = {\r\n\tisLegacyResourceCalendarFormat: function(resourceCalendarsProperty){\r\n\t\t// modern format:\r\n\t\t//gantt.config.resource_calendars = {\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId\r\n\t\t//\t};\r\n\t\t\r\n\t\t// legacy format:\r\n\t\t// gantt.config.resource_calendars = {\r\n\t\t//\t\"resourceProperty\": {\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId\r\n\t\t//\t\t}\r\n\t\t//\t};\r\n\r\n\t\tif(!resourceCalendarsProperty){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor(var i in resourceCalendarsProperty){\r\n\t\t\tif(resourceCalendarsProperty[i] && typeof resourceCalendarsProperty[i] === \"object\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tgetResourceProperty: function(config){\r\n\t\tvar resourceCalendarsConfig = config.resource_calendars;\r\n\t\tvar propertyName = config.resource_property;\r\n\t\tif(this.isLegacyResourceCalendarFormat(resourceCalendarsConfig)){\r\n\t\t\tfor(var i in config){\r\n\t\t\t\tpropertyName = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn propertyName;\r\n\t},\r\n\tgetCalendarIdFromLegacyConfig: function(task, config){\r\n\t\tif (config) {\r\n\t\t\tfor (var field in config) {\r\n\t\t\t\tvar resource = config[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn calendarId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};","\r\n\r\nexport class LargerUnitsCache {\r\n\tprivate _weekCache: Map<number, number>;\r\n\tprivate _monthCache: Map<number, number>;\r\n\tprivate _calendar: any;\r\n\tconstructor(calendar) {\r\n\t\tthis.clear();\r\n\t\tthis._calendar = calendar;\r\n\t}\r\n\r\n\tgetMinutesPerWeek = (weekStart: Date) => {\r\n\t\tconst key = weekStart.valueOf();\r\n\r\n\t\tif(this._weekCache.has(key)){\r\n\t\t\treturn this._weekCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerWeek = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(weekStart));\r\n\t\tfor(let i = 0; i < 7; i++){\r\n\t\t\tminutesPerWeek += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._weekCache.set(key, minutesPerWeek);\r\n\t\treturn minutesPerWeek;\r\n\t}\r\n\r\n\tgetMinutesPerMonth = (monthStart: Date) => {\r\n\t\tconst key = monthStart.valueOf();\r\n\r\n\t\tif(this._monthCache.has(key)){\r\n\t\t\treturn this._monthCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerMonth = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(monthStart));\r\n\t\tconst nextMonth = gantt.date.add(start, 1, \"month\").valueOf();\r\n\t\twhile(start.valueOf() < nextMonth){\r\n\t\t\tminutesPerMonth += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._monthCache.set(key, minutesPerMonth);\r\n\t\treturn minutesPerMonth;\r\n\t}\r\n\r\n\tclear = (): void => {\r\n\t\tthis._weekCache = new Map<number, number>();\r\n\t\tthis._monthCache = new Map<number, number>();\r\n\t}\r\n}","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsObjectCache implements IWorkUnitCache {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tconst cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tconst units = cache[unit];\r\n\t\t\tif(units === undefined){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tconst subCache = units[value.getFullYear()];\r\n\t\t\tif (subCache && subCache[timestamp] !== undefined) {\r\n\t\t\t\treturn subCache[timestamp];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tif (!cache) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tconst unitCache = cache[unit];\r\n\r\n\t\tconst year = rawValue.getFullYear();\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = {};\r\n\t\t}\r\n\t\tyearCache[timestamp] = value;\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","\r\n\r\nimport { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsMapCache implements IWorkUnitCache {\r\n\tprivate _cache: Map<string, Array<Map<string, boolean>>>;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tif (this._cache.has(unit)) {\r\n\t\t\tconst unitCache = this._cache.get(unit);\r\n\r\n\t\t\tconst subCache = unitCache[value.getFullYear()];\r\n\t\t\tif (subCache && subCache.has(timestamp)) {\r\n\t\t\t\treturn subCache.get(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\t\tconst year = rawValue.getFullYear();\r\n\r\n\t\tlet unitCache;\r\n\t\tif (!cache.has(unit)) {\r\n\t\t\tunitCache = [];\r\n\t\t\tcache.set(unit, unitCache);\r\n\t\t} else {\r\n\t\t\tunitCache = cache.get(unit);\r\n\t\t}\r\n\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = new Map<string, boolean>();\r\n\t\t}\r\n\r\n\r\n\t\tyearCache.set(timestamp, value);\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = new Map<string, Array<Map<string, boolean>>>();\r\n\t}\r\n}","var createCacheObject = require(\"./work_unit_cache\").createCacheObject;\r\nvar LargerUnitsCache = require(\"./work_unit_cache\").LargerUnitsCache;\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper) {\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = createCacheObject();\r\n\tthis._largeUnitsCache = new LargerUnitsCache(this);\r\n\tthis._worktime = null;\r\n\tthis._cached_timestamps = {};\r\n\tthis._cached_timestamps_count = 0;\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_resetTimestampCache: function(){\r\n\t\tthis._cached_timestamps = {};\r\n\t\tthis._cached_timestamps_count = 0;\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\t\t// minor optimization, store calculated timestamps to reduce computations\r\n\t\t// reset cache when number of keys exceeds large number where key lookup may became more expensive than the recalculation\r\n\t\tif(this._cached_timestamps_count > 1000000){\r\n\t\t\tthis._resetTimestampCache();\r\n\t\t}\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\tvar value = String(settings.date.valueOf());\r\n\t\t\tif(this._cached_timestamps[value]){\r\n\t\t\t\ttimestamp = this._cached_timestamps[value];\r\n\t\t\t}else{\r\n\t\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t\t\tthis._cached_timestamps[value] = timestamp;\r\n\t\t\t\tthis._cached_timestamps_count++;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit) {\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (Array.isArray(val)) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar value = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(value >= hours[i].startHour && value < hours[i].endHour){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_getTimeOfDayStamp: function(date, dayEnd) {\r\n\t\tvar hours = date.getHours();\r\n\t\tif(!date.getHours() && !date.getMinutes() && dayEnd){\r\n\t\t\thours = 24;\r\n\t\t}\r\n\t\treturn hours * 60 * 60 + date.getMinutes() * 60;\r\n\t},\r\n\r\n\t_is_work_minute: function(date){\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar checkTime = this._getTimeOfDayStamp(date);\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(checkTime >= hours[i].start && checkTime < hours[i].end){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_nextDate: function (start, unit, step) {\r\n\t\treturn this.$gantt.date.add(start, step, unit);\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar unitOrder = this._getUnitOrder(unit);\r\n\t\t\t\tvar biggerTimeUnit = this.units[unitOrder - 1];\r\n\t\t\t\tif(biggerTimeUnit && !this._isWorkTime(start, biggerTimeUnit)){\r\n\t\t\t\t\tnext = this._getClosestWorkTimeFuture(start, biggerTimeUnit);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\r\n\t_getMinutesPerHour: function (date) {\r\n\t\tvar hourStart = this._getTimeOfDayStamp(date);\r\n\t\tvar hourEnd = this._getTimeOfDayStamp(this._nextDate(date, \"hour\", 1));\r\n\t\tif (hourEnd === 0){\r\n\t\t\thourEnd = 24 * 60 * 60;\r\n\t\t}\r\n\t\tvar worktimes = this._getWorkHours(date);\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(hourStart >= interval.start && hourEnd <= interval.end){\r\n\t\t\t\treturn 60;// hour inside a working interval, all hour is a work hour\r\n\t\t\t}else if(hourStart < interval.end && hourEnd > interval.start){\r\n\t\t\t\t// hour is partially work time\r\n\t\t\t\tvar duration = Math.min(hourEnd, interval.end) - Math.max(hourStart, interval.start);\r\n\t\t\t\treturn duration / 60;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t_getMinutesPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationMinutes;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tgetHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationHours;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkUnitsForRange: function (from, to, unit, step) {\r\n\t\tvar total = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\tvar getUnitsPerDay;\r\n\t\tif (unit == \"minute\") {\r\n\t\t\tgetUnitsPerDay = utils.bind(this._getMinutesPerDay, this);\r\n\t\t} else {\r\n\t\t\tgetUnitsPerDay = utils.bind(this.getHoursPerDay, this);\r\n\t\t}\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif(end - start > 1000*60*60*24*32 && start.getDate() === 0) {\r\n\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerMonth(start);\r\n\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t}\r\n\t\t\t\ttotal += units;\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"month\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}else if(end - start > 1000*60*60*24*16) {\r\n\t\t\t\tvar weekStart = this.$gantt.date.week_start(new Date(start));\r\n\t\t\t\tif(start.valueOf() === weekStart.valueOf()){\r\n\t\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerWeek(start);\r\n\t\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal += units;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, 7, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t//\tif (this._isWorkTime(start, \"day\")) {\r\n\t\t\ttotal += getUnitsPerDay(start);\r\n\t\t//\t}\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\r\n\t\treturn total / step;\r\n\t},\r\n\r\n\r\n\t_getMinutesBetweenSingleDay: function(from, to){\r\n\t\tvar range = this._getIntervalTimestamp(from, to);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tvar result = 0;\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\r\n\t\t\t\tresult += (minuteTo - minuteFrom) / 60;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.floor(result);\r\n\t},\r\n\r\n\t_getMinutesBetween: function(from, to, unit, step){\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getMinutesBetweenSingleDay(from, to);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd);\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd);\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn total;\r\n\t\t}\r\n\t},\r\n\t// optimized method for calculating work units duration of large time spans\r\n\t// implemented for hours and minutes units, bigger time units don't benefit from the optimization so much\r\n\t_getHoursBetween: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn Math.round(this._getMinutesBetweenSingleDay(from, to) / 60);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd, unit, step) / 60;\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd, unit, step) / 60;\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn Math.round(total);\r\n\t\t}\r\n\t},\r\n\r\n\tgetConfig: function () {\r\n\t\treturn this._worktime;\r\n\t},\r\n\t_setConfig: function (settings) {\r\n\t\tthis._worktime = settings;\r\n\t\tthis._parseSettings();\r\n\t\tthis._workingUnitsCache.clear();\r\n\t\tthis._largeUnitsCache.clear();\r\n\t},\r\n\t_parseSettings: function() {\r\n\t\tvar settings = this.getConfig();\r\n\t\tsettings.parsed = {\r\n\t\t\tdates: {},\r\n\t\t\thours: null,\r\n\t\t\thaveCustomWeeks: false,\r\n\t\t\tcustomWeeks: {},\r\n\t\t\tcustomWeeksRangeStart: null,\r\n\t\t\tcustomWeeksRangeEnd: null,\r\n\t\t\tcustomWeeksBoundaries: []\r\n\t\t};\r\n\r\n\t\tsettings.parsed.hours = this._parseHours(settings.hours);\r\n\t\tfor(var i in settings.dates){\r\n\t\t\tsettings.parsed.dates[i] = this._parseHours(settings.dates[i]);\r\n\t\t}\r\n\r\n\t\tif(settings.customWeeks) {\r\n\t\t\tvar minCustomRangeStart = null;\r\n\t\t\tvar maxCustomRangeEnd = null;\r\n\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\tvar customTime = settings.customWeeks[i];\r\n\r\n\t\t\t\tif(customTime.from && customTime.to){\r\n\t\t\t\t\tvar rangeStart = customTime.from;\r\n\t\t\t\t\tvar rangeEnd = customTime.to;\r\n\t\t\t\t\tif(!minCustomRangeStart || minCustomRangeStart > rangeStart.valueOf()){\r\n\t\t\t\t\t\tminCustomRangeStart = rangeStart.valueOf();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!maxCustomRangeEnd || maxCustomRangeEnd < rangeEnd.valueOf()){\r\n\t\t\t\t\t\tmaxCustomRangeEnd = rangeEnd.valueOf();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsettings.parsed.customWeeksBoundaries.push({\r\n\t\t\t\t\t\tfrom: rangeStart.valueOf(),\r\n\t\t\t\t\t\tfromReadable: new Date(rangeStart),\r\n\t\t\t\t\t\tto: rangeEnd.valueOf(),\r\n\t\t\t\t\t\ttoReadable: new Date(rangeEnd),\r\n\t\t\t\t\t\tname: i\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsettings.parsed.haveCustomWeeks = true;\r\n\t\t\t\t\tvar currentWeek = settings.parsed.customWeeks[i] = {\r\n\t\t\t\t\t\tfrom: customTime.from,\r\n\t\t\t\t\t\tto: customTime.to,\r\n\t\t\t\t\t\thours: this._parseHours(customTime.hours),\r\n\t\t\t\t\t\tdates: {}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfor(var d in customTime.dates){\r\n\t\t\t\t\t\tcurrentWeek.dates[d] = this._parseHours(customTime.dates[d]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsettings.parsed.customWeeksRangeStart = minCustomRangeStart;\r\n\t\t\tsettings.parsed.customWeeksRangeEnd = maxCustomRangeEnd;\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this.getConfig());\r\n\t\tpayload();\r\n\t\tif (!this.hasWorkTime()) {\r\n\t\t//\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setConfig(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\tthis._largeUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_arraysEqual: function(a, b){\r\n\t\tif (a === b) return true;\r\n\t\tif (!a || !b) return false;\r\n\t\tif (a.length != b.length) return false;\r\n\r\n\t\tfor (var i = 0; i < a.length; ++i) {\r\n\t\t\tif (a[i] !== b[i]) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t_compareSettings: function (mySettings, thatSettings) {\r\n\t\tif (!this._arraysEqual(mySettings.hours, thatSettings.hours)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar myDays = Object.keys(mySettings.dates);\r\n\t\tvar otherDates = Object.keys(thatSettings.dates);\r\n\t\tmyDays.sort();\r\n\t\totherDates.sort();\r\n\r\n\t\tif (!this._arraysEqual(myDays, otherDates)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < myDays.length; i++){\r\n\t\t\tvar timestamp = myDays[i];\r\n\t\t\tvar myHours = mySettings.dates[timestamp];\r\n\t\t\tvar otherHours = mySettings.dates[timestamp];\r\n\r\n\t\t\t// day settings not equal\r\n\t\t\tif(myHours !== otherHours &&\r\n\t\t\t\t// but still can be two arrays with the equivalent hour settings\r\n\t\t\t\t!(Array.isArray(myHours) && Array.isArray(otherHours) && this._arraysEqual(myHours, otherHours))\r\n\t\t\t\t){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function (calendar) {\r\n\t\tif(!(calendar instanceof CalendarWorkTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar mySettings = this.getConfig();\r\n\t\tvar thatSettings = calendar.getConfig();\r\n\r\n\t\tif(!this._compareSettings(mySettings, thatSettings)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(mySettings.parsed.haveCustomWeeks && thatSettings.parsed.haveCustomWeeks){\r\n\t\t\tif(mySettings.parsed.customWeeksBoundaries.length != thatSettings.parsed.customWeeksBoundaries.length){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in mySettings.parsed.customWeeks){\r\n\t\t\t\tvar myWeek = mySettings.parsed.customWeeks[i];\r\n\t\t\t\tvar thatWeek = thatSettings.parsed.customWeeks[i];\r\n\t\t\t\tif(!thatWeek){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this._compareSettings(myWeek, thatWeek)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(mySettings.parse.haveCustomWeeks !== thatSettings.parsed.haveCustomWeeks){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date, false);\r\n\t},\r\n\t_getWorkHours: function (date, parsed) {\r\n\t\tvar calendar = this.getConfig();\r\n\t\tif(parsed !== false){\r\n\t\t\tcalendar = calendar.parsed;\r\n\t\t}\r\n\r\n\t\tif(!date){\r\n\t\t\treturn calendar.hours;\r\n\t\t}\r\n\r\n\t\tvar dateValue = this._timestamp({date: date});\r\n\r\n\t\tif(calendar.haveCustomWeeks){\r\n\t\t\tif(calendar.customWeeksRangeStart <= dateValue && calendar.customWeeksRangeEnd > dateValue){\r\n\t\t\t\tfor(var i = 0; i < calendar.customWeeksBoundaries.length; i++){\r\n\t\t\t\t\tif(calendar.customWeeksBoundaries[i].from <= dateValue && calendar.customWeeksBoundaries[i].to > dateValue){\r\n\t\t\t\t\t\tcalendar = calendar.customWeeks[calendar.customWeeksBoundaries[i].name];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hours = true;\r\n\r\n\t\tif (calendar.dates[dateValue] !== undefined) {\r\n\t\t\thours = calendar.dates[dateValue];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\t_getIntervalTimestamp: function(from, to){\r\n\t\tvar res = {\r\n\t\t\tstart: 0,\r\n\t\t\tend: 0\r\n\t\t};\r\n\r\n\t\tres.start = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\t\tvar endHours = to.getHours();\r\n\t\tif(!endHours && !to.getMinutes() && !to.getSeconds() && from.valueOf() < to.valueOf()){\r\n\t\t\tendHours = 24;\r\n\t\t}\r\n\t\tres.end = endHours * 60 * 60 + to.getMinutes() * 60 + to.getSeconds();\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_parseHours: function(hours) {\r\n\t\tif(Array.isArray(hours)){\r\n\r\n\t\t\tvar timestampRanges = [];// worktime as seconds range\r\n\t\t\thours.forEach(function(hour){\r\n\t\t\t\tif(typeof hour === \"number\"){\r\n\t\t\t\t\ttimestampRanges.push(hour*60*60);\r\n\t\t\t\t}else if(typeof hour === \"string\") {\r\n\t\t\t\t\t// \"12-13\", or \"12:00-13:00\", or \"12:00:00-13:00:00\"\r\n\t\t\t\t\thour.split(\"-\").map(function(time){\r\n\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t}).forEach(function(part){\r\n\t\t\t\t\t\tvar parsed = part.split(\":\").map(function(time){\r\n\t\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar value = parseInt(parsed[0]*60*60);\r\n\t\t\t\t\t\tif(parsed[1]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[1]*60);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(parsed[2]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[2]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimestampRanges.push(value);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar timerangeConfig = [];\r\n\t\t\tfor (var i = 0; i < timestampRanges.length; i += 2) {\r\n\t\t\t\tvar start = timestampRanges[i];\r\n\t\t\t\tvar end = timestampRanges[i + 1];\r\n\t\t\t\tvar duration = end - start;\r\n\r\n\t\t\t\ttimerangeConfig.push({\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\tend: end,\r\n\t\t\t\t\tstartHour: Math.floor(start / (60*60)),\r\n\t\t\t\t\tstartMinute: Math.floor(start / (60)),\r\n\t\t\t\t\tendHour: Math.ceil(end / (60*60)),\r\n\t\t\t\t\tendMinute: Math.ceil(end / (60)),\r\n\t\t\t\t\tdurationSeconds: duration,\r\n\t\t\t\t\tdurationMinutes: duration/60,\r\n\t\t\t\t\tdurationHours: duration/(60 * 60)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn timerangeConfig;\r\n\t\t} else {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tvar calendarConfig = this.getConfig();\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tcalendarConfig.dates[timestamp] = hours;\r\n\t\t\t} else if(!settings.customWeeks) {\r\n\t\t\t\tcalendarConfig.hours = hours;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings.customWeeks){\r\n\t\t\t\tif(!calendarConfig.customWeeks){\r\n\t\t\t\t\tcalendarConfig.customWeeks = {};\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\t\tcalendarConfig.customWeeks[i] = settings.customWeeks[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._parseSettings();\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\tthis._largeUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this.getConfig().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\tthis._largeUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit) {\r\n\t\t// Check if this item has in the cache\r\n\r\n\t\tvar useCache = true;//unit === \"day\"; // use cache only for days. In case of hours/minutes cache size grows too large and the overhead exceeds the gains\r\n\t\tvar isWorkUnit = -1;\r\n\t\tvar dateKey = null;\r\n\r\n\t\tif(useCache){\r\n\t\t\t// use string keys\r\n\t\t\tdateKey = String(date.valueOf());\r\n\t\t\tisWorkUnit = this._workingUnitsCache.getItem(unit, dateKey, date);\r\n\t\t}\r\n\r\n\t\tif (isWorkUnit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tisWorkUnit = this._checkIfWorkingUnit(date, unit);\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._workingUnitsCache.setItem(unit, dateKey, isWorkUnit, date);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn isWorkUnit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\r\n\t},\r\n\r\n\t_calculateDuration: function (from, to, unit, step) {\r\n\t\tvar res = 0;\r\n\r\n\t\tvar sign = 1;\r\n\t\tif(from.valueOf() > to.valueOf()){\r\n\t\t\tvar tmp = to;\r\n\t\t\tto = from;\r\n\t\t\tfrom = tmp;\r\n\t\t\tsign = -1;\r\n\t\t}\r\n\r\n\t\tif (unit == \"hour\" && step == 1) {\r\n\t\t\tres = this._getHoursBetween(from, to, unit, step);\r\n\t\t} else if(unit == \"minute\" && step == 1){\r\n\t\t\t// quick calculation for minutes with 1 minute step\r\n\t\t\tres = this._getMinutesBetween(from, to, unit, step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t}\r\n\r\n\t\t// getWorkUnits.. returns decimal durations\r\n\t\treturn sign * Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tvar endDate = this._calculateEndDate(from, duration, unit, step * mult);\r\n\t\treturn endDate;\r\n\t},\r\n\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tif (step == 1 && unit == \"minute\") {\r\n\t\t\treturn this._calculateMinuteEndDate(from, duration, step);\r\n\t\t} else if(step == -1 && unit == \"minute\") {\r\n\t\t\treturn this._subtractMinuteDate(from, duration, step);\r\n\t\t} else if (step == 1 && unit == \"hour\") {\r\n\t\t\treturn this._calculateHourEndDate(from, duration, step);\r\n\t\t} else {\r\n\t\t\tvar interval = this._addInterval(from, duration, unit, step, null);\r\n\t\t\treturn interval.end;\r\n\t\t}\r\n\t},\r\n\r\n\t_addInterval: function (start, duration, unit, step, stopAction) {\r\n\t\tvar added = 0;\r\n\t\tvar current = start;\r\n\t\tvar previous = new Date(current.valueOf() - 1);\r\n\t\tvar timezoneDifferenceWithPrevious = current.getTimezoneOffset() - previous.getTimezoneOffset();\r\n\r\n\t\twhile (added < duration && !(stopAction && stopAction(current))) {\r\n\t\t\tvar next = this._nextDate(current, unit, step);\r\n\r\n\t\t\tif (timezoneDifferenceWithPrevious < 0 && step > 0){ // the step parameter is for backward scheduling and startDate calcuation\r\n\t\t\t\tnext.setTime(next.getTime() + 60 * 1000 * timezoneDifferenceWithPrevious);\r\n\t\t\t\ttimezoneDifferenceWithPrevious = false;\r\n\t\t\t}\r\n\t\t\tvar timezoneDifference = next.getTimezoneOffset() - current.getTimezoneOffset();\r\n\t\t\tif (timezoneDifference < 0 && step > 0) { // the step parameter is for backward scheduling and startDate calcuation\r\n\t\t\t\tnext.setTime(next.getTime() + 60 * 1000 * timezoneDifference);\r\n\t\t\t}\r\n\r\n\t\t\tvar dateValue = new Date(next.valueOf() + 1);\r\n\t\t\tif (step > 0) {\r\n\t\t\t\tdateValue = new Date(next.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tvar workTimeCheck = this._isWorkTime(dateValue, unit);\r\n\r\n\t\t\tif (workTimeCheck) {\r\n\t\t\t\tadded++;\r\n\t\t\t}\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tend: current,\r\n\t\t\tstart: start,\r\n\t\t\tadded: added\r\n\t\t};\r\n\t},\r\n\r\n\t_addHoursUntilDayEnd: function(from, duration) {\r\n\t\tvar dayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(from)), 1, \"day\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, dayEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeHours = (minuteTo - minuteFrom) / (60 * 60);\r\n\t\t\t\tif(rangeHours > left){\r\n\t\t\t\t\trangeHours = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60 * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar addHours = Math.round((minuteTo - minuteFrom) / (60 * 60));\r\n\t\t\t\tadded += addHours;\r\n\t\t\t\tleft -= addHours;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = dayEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_calculateHourEndDate: function (from, duration,  step) {\r\n\t\tvar start = new Date(from),\r\n\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\tvar interval = this._addHoursUntilDayEnd(start, duration);\r\n\t\tadded = interval.added;\r\n\t\tstart = interval.end;\r\n\r\n\t\tvar durationLeft = duration - added;\r\n\r\n\t\tif (durationLeft) {\r\n\t\t\tvar current = start;\r\n\t\t\twhile (added < duration) {\r\n\t\t\t\tvar next = this._nextDate(current, \"day\", step);\r\n\t\t\t\t// reset to day start in case DST switch happens in the process\r\n\t\t\t\tnext.setHours(0);\r\n\t\t\t\tnext.setMinutes(0);\r\n\t\t\t\tnext.setSeconds(0);\r\n\r\n\t\t\t\tvar hoursPerDay = 0;\r\n\t\t\t\tif(step > 0){\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() - 1));\r\n\t\t\t\t}else{\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() + 1));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (added + hoursPerDay >= duration) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tadded += hoursPerDay;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent = next;\r\n\t\t\t}\r\n\t\t\tstart = current;\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\tinterval = this._addHoursUntilDayEnd(start, durationLeft);\r\n\t\t\tstart = interval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\t_addMinutesUntilHourEnd: function(from, duration){\r\n\t\tif(from.getMinutes() === 0) {\r\n\t\t\t// already at hour end\r\n\t\t\treturn {\r\n\t\t\t\tadded: 0,\r\n\t\t\t\tend: new Date(from)\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar hourEnd = this.$gantt.date.add(this.$gantt.date.hour_start(new Date(from)), 1, \"hour\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, hourEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeMinutes = (minuteTo - minuteFrom) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60);\r\n\t\t\t\t}\r\n\t\t\t\tvar addMinutes = Math.round((minuteTo - minuteFrom) / 60);\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinutesUntilHourStart: function(from, duration){\r\n\t\tvar hourStart = this.$gantt.date.hour_start(new Date(from));\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar hourStartTimestamp = hourStart.getHours() * 60 * 60 + hourStart.getMinutes() * 60 + hourStart.getSeconds();\r\n\t\tvar initialDateTimestamp = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = worktimes.length - 1; i >= 0 && added < duration; i--){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(initialDateTimestamp > interval.start && hourStartTimestamp <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.min(initialDateTimestamp, interval.end);\r\n\t\t\t\tvar minuteTo = Math.max(hourStartTimestamp, interval.start);\r\n\r\n\t\t\t//\tvar minuteFrom = Math.max(interval.start, currentHour.start);\r\n\t\t\t//\tvar minuteTo = Math.min(interval.end, currentHour.end);\r\n\t\t\t\tvar rangeMinutes = (minuteFrom - minuteTo) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom - (left * 60);\r\n\t\t\t\t}\r\n\t\t\t\tvar addMinutes = Math.abs(Math.round((minuteFrom - minuteTo) / 60));\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\tinitialDateTimestamp = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourStart;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, initialDateTimestamp);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinuteDate: function (from, duration, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tvar addedInterval = this._subtractMinutesUntilHourStart(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start));\r\n\r\n\t\t\tvar iterateFromDayEnd = false;\r\n\t\t\tif(start.valueOf() === dayStart.valueOf()){\r\n\t\t\t\tdayStart = this.$gantt.date.add(dayStart, -1, \"day\");\r\n\t\t\t\titerateFromDayEnd = true;\r\n\t\t\t}\r\n\t\t\t//var dayStartTimestamp = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tvar dayEnd = new Date(dayStart.getFullYear(), dayStart.getMonth(), dayStart.getDate(), 23, 59,59,999).valueOf();\r\n\r\n\t\t\tif(dayEnd !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(dayStart);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(dayStart);\r\n\t\t\t\tcalculatedDay = dayEnd;\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start, iterateFromDayEnd);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[daySchedule.length - 1].end <= timestamp){\r\n\t\t\t\tif(left > minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tfor(var i = daySchedule.length - 1; i >= 0; i--){\r\n\t\t\t\tif(daySchedule[i].start < timestamp - 1 && daySchedule[i].end >= timestamp - 1){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\tif(timestamp === workInterval.end && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t}else if(left <= (timestamp/60 - workInterval.startMinute)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -left, \"minute\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0){\r\n\t\t\t\t\tvar prev = this._getClosestWorkTimePast(start, \"hour\");\r\n\t\t\t\t\tif(prev.valueOf() === start.valueOf()){\r\n\t\t\t\t\t\tvar prev = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\t\tvar times = this._getWorkHours(prev);\r\n\t\t\t\t\t\tif(times.length){\r\n\t\t\t\t\t\t\tvar lastInterval = times[times.length - 1];\r\n\t\t\t\t\t\t\tprev.setSeconds(lastInterval.durationSeconds);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart = prev;\r\n\r\n\t\t\t\t} else{\r\n\t\t\t\t\tstart = this._getClosestWorkTimePast(new Date(start - 1), \"hour\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\t_calculateMinuteEndDate: function (from, duration, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tvar addedInterval = this._addMinutesUntilHourEnd(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tif(dayStart !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(start);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(start);\r\n\t\t\t\tcalculatedDay = dayStart;\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(this.$gantt.date.day_start(start), 1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[0].start >= timestamp){\r\n\t\t\t\tif(left >= minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tif (left == minutesInDay) {\r\n\t\t\t\t\t\tstart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, daySchedule[daySchedule.length - 1].end);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tfor(var i = 0; i < daySchedule.length; i++){\r\n\t\t\t\tif(daySchedule[i].start <= timestamp && daySchedule[i].end > timestamp){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\tif(timestamp === workInterval.start && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t}else if(left <= (workInterval.endMinute - timestamp/60)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, left, \"minute\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstart = this._getClosestWorkTimeFuture(start, \"hour\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar settings =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(settings.date, settings.unit, settings.dir);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (inputDate, unit, direction) {\r\n\t\tvar result = new Date(inputDate);\r\n\r\n\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\r\n\t\tif (direction == 'any' || !direction) {\r\n\t\t\tvar closestFuture = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t\tvar closestPast = this._getClosestWorkTimePast(result, unit);\r\n\t\t\tif (Math.abs(closestFuture - inputDate) <= Math.abs(inputDate - closestPast)) {\r\n\t\t\t\tresult = closestFuture;\r\n\t\t\t} else {\r\n\t\t\t\tresult = closestPast;\r\n\t\t\t}\r\n\t\t} else if (direction == \"past\") {\r\n\t\t\tresult = this._getClosestWorkTimePast(result, unit);\r\n\t\t} else {\r\n\t\t\tresult = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_getClosestWorkTimeFuture: function (date, unit) {\r\n\t\treturn this._getClosestWorkTimeGeneric(date, unit, 1);\r\n\t},\r\n\r\n\t_getClosestWorkTimePast: function (date, unit) {\r\n\t\tvar result = this._getClosestWorkTimeGeneric(date, unit, -1);\r\n\t\t// should return the end of the closest work interval\r\n\t\treturn this.$gantt.date.add(result, 1, unit);\r\n\t},\r\n\r\n\t_findClosestTimeInDay: function(date, direction, worktimes) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar resultDate = null;\r\n\t\tvar fromDayEnd = false;\r\n\t\tif(!this._getWorkHours(start).length){\r\n\t\t\tstart = this._getClosestWorkTime(start, \"day\", direction < 0 ? \"past\" : \"future\");\r\n\t\t\tif(direction < 0){\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t\tfromDayEnd = true;\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t}\r\n\r\n\t\tvar value = this._getTimeOfDayStamp(start);\r\n\t\tif(fromDayEnd){\r\n\t\t\tvalue = this._getTimeOfDayStamp(new Date(start.valueOf() + 1), fromDayEnd);\r\n\t\t}\r\n\t\tif(direction > 0){\r\n\t\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\t\tif(worktimes[i].start >= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].start);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(var i = worktimes.length - 1; i >= 0; i--){\r\n\t\t\t\tif(worktimes[i].end <= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].end);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}else if(worktimes[i].end > value && worktimes[i].start <= value) {\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn resultDate;\r\n\t},\r\n\t_getClosestWorkMinute: function(date, unit, direction) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar worktimes = this._getWorkHours(start);\r\n\t\tvar resultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\tif(!resultDate){\r\n\t\t\tstart = this.calculateEndDate(start, direction, \"day\");\r\n\t\t\tif(direction > 0){\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t\tresultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\t}\r\n\t\tif(direction < 0){\r\n\t\t\t// getClosestWorkTimePast adds one time unit to the result date after this\r\n\t\t\tresultDate = this.$gantt.date.add(resultDate, -1, unit);\r\n\t\t}\r\n\t\treturn resultDate;\r\n\t},\r\n\r\n\t_getClosestWorkTimeGeneric: function (date, unit, increment) {\r\n\t\tif(unit === \"hour\" || unit === \"minute\"){\r\n\t\t\treturn this._getClosestWorkMinute(date, unit, increment);\r\n\t\t}\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\tvar result = date;\r\n\r\n\t\t// be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\tvar maximumLoop = 3000,\r\n\t\t\tcount = 0;\r\n\r\n\t\twhile (!this._isWorkTime(result, unit)) {\r\n\t\t\tif (biggerTimeUnit && !this._isWorkTime(result, biggerTimeUnit)) {\r\n\t\t\t\t// if we look for closest work hour and detect a week-end - first find the closest work day,\r\n\t\t\t\t// and continue iterations after that\r\n\t\t\t\tif (increment > 0) {\r\n\t\t\t\t\tresult = this._getClosestWorkTimeFuture(result, biggerTimeUnit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._getClosestWorkTimePast(result, biggerTimeUnit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximumLoop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar tzOffset = result.getTimezoneOffset();\r\n\t\t\tresult = this.$gantt.date.add(result, increment, unit);\r\n\r\n\t\t\tresult = this.$gantt._correct_dst_change(result, tzOffset, increment, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start']) {\r\n\t\t\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Check whether this calendar has working time. Calendar has working time only if there are regular working days of week\r\n\t *\r\n\t */\r\n\thasWorkTime: function () {\r\n\t\tvar worktime = this.getConfig();\r\n\t\tvar dates = worktime.dates;\r\n\r\n\t\tvar daysOfWeek = [0, 1, 2, 3, 4, 5, 6];\r\n\t\tvar exceptions = [];\r\n\t\tfor(var i in worktime.dates){\r\n\t\t\tif(Number(i) > 6){\r\n\t\t\t\texceptions.push(Number(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hasRegularHours = this._checkWorkHours(worktime.hours);\r\n\r\n\t\tvar result = false;\r\n\t\tdaysOfWeek.forEach((function(day){\r\n\t\t\tif(result){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar dayConfig = dates[day];\r\n\t\t\tif(dayConfig === true){\r\n\t\t\t\t// workday uses global hours\r\n\t\t\t\tresult = hasRegularHours;\r\n\t\t\t}else if(Array.isArray(dayConfig)){\r\n\t\t\t\t// workday uses custom hours\r\n\t\t\t\tresult = this._checkWorkHours(dayConfig);\r\n\t\t\t}\r\n\t\t}).bind(this));\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t_checkWorkHours: function(hoursArray) {\r\n\t\tif (hoursArray.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar result = false;\r\n\t\tfor (var i = 0; i < hoursArray.length; i += 2) {\r\n\t\t\tif (hoursArray[i] !== hoursArray[i + 1]) {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;","var utils = require(\"../../../utils/utils\");\r\nfunction WorkTimeCalendarMerger(){\r\n}\r\n\r\nWorkTimeCalendarMerger.prototype = {\r\n\r\n\r\n\t/**\r\n\t * convert hours array items into objects, e.g. [8, 12, 17, 18] -> [{start: 8, end: 12}, {start:17, end:18}]\r\n\t * @param {Array} hoursArray\r\n\t */\r\n\t_getIntervals: function(hoursArray){\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < hoursArray.length; i += 2){\r\n\r\n\t\t\tresult.push({\r\n\t\t\t\tstart: hoursArray[i],\r\n\t\t\t\tend: hoursArray[i+1]\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Convert ranges config into hours array\r\n\t * [{start: 8, end: 12}, {start:17, end:18}] --> [8, 12, 17, 18]\r\n\t * @param {*} intervalsArray\r\n\t */\r\n\t_toHoursArray: function(intervalsArray){\r\n\t\tvar result = [];\r\n\r\n\t\tfunction toFixed(value){\r\n\t\t\tvar str = String(value);\r\n\t\t\tif(str.length < 2){\r\n\t\t\t\tstr = \"0\" + str;\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tfunction formatHHMM(secondsValue){\r\n\t\t\tvar hours = Math.floor(secondsValue / (60*60));\r\n\t\t\tvar minutePart = secondsValue - hours * 60 * 60;\r\n\r\n\t\t\tvar minutes = Math.floor(minutePart / (60));\r\n\t\t\treturn hours + \":\" + toFixed(minutes);\r\n\t\t}\r\n\t\tfor(var i = 0; i < intervalsArray.length; i++){\r\n\t\t\tresult.push(\r\n\t\t\t\tformatHHMM(intervalsArray[i].start) +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tformatHHMM(intervalsArray[i].end)\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Build intersection of hour intervals. e.g.\r\n\t * first: [{start: 8, end: 12}, {start:13, end:18}]\r\n\t * second: [{start: 10, end: 15}]\r\n\t * result: [{start: 10, end: 12}, {start: 13, end: 15}]\r\n\t * @param {Array} first\r\n\t * @param {Array} second\r\n\t */\r\n\t_intersectHourRanges: function(first, second){\r\n\t\tvar result = [];\r\n\r\n\t\tvar baseArray = first.length > second.length ? first : second;\r\n\t\tvar overridesArray = first === baseArray ? second: first;\r\n\t\tbaseArray = baseArray.slice();\r\n\t\toverridesArray = overridesArray.slice();\r\n\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < baseArray.length; i++){\r\n\t\t\tvar base = baseArray[i];\r\n\r\n\t\t\tfor(var j = 0; j < overridesArray.length; j++){\r\n\t\t\t\tvar current = overridesArray[j];\r\n\t\t\t\tif(current.start < base.end && current.end > base.start){\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tstart: Math.max(base.start, current.start),\r\n\t\t\t\t\t\tend: Math.min(base.end, current.end)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(base.end > current.end){\r\n\t\t\t\t\t\toverridesArray.splice(j, 1);\r\n\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Reduce the number of ranges in config when possible,\r\n\t * joins ranges that can be merged\r\n\t * parts: [{start: 8, end: 12}, {start:12, end:13}, {start: 15, end: 17}]\r\n\t * result: [{start: 8, end: 13}, {start: 15, end: 17}]\r\n\t * @param {Array} parts\r\n\t */\r\n\t_mergeAdjacentIntervals: function(parts){\r\n\t\tvar result = parts.slice();\r\n\t\tresult.sort(function(a, b){\r\n\t\t\treturn a.start - b.start;\r\n\t\t});\r\n\t\tvar base = result[0];\r\n\t\tfor(var i = 1; i < result.length; i++){\r\n\t\t\tvar current = result[i];\r\n\t\t\tif(current.start <= base.end){\r\n\t\t\t\tif(current.end > base.end){\r\n\t\t\t\t\tbase.end = current.end;\r\n\t\t\t\t}\r\n\t\t\t\tresult.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\tbase = current;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_mergeHoursConfig: function(firstHours, secondHours){\r\n\t\t//var firstIntervals = this._getIntervals(firstHours);\r\n\t\t//var secondIntervals = this._getIntervals(secondHours);\r\n\r\n\t\treturn this._mergeAdjacentIntervals(\r\n\t\t\tthis._intersectHourRanges(firstHours, secondHours)\r\n\t\t);\r\n\t},\r\n\r\n\tmerge: function(first, second){\r\n\t\tvar firstConfig = utils.copy(first.getConfig().parsed);\r\n\r\n\t\tvar secondConfig = utils.copy(second.getConfig().parsed);\r\n\r\n\t\tvar mergedSettings = {\r\n\t\t\thours: this._toHoursArray(this._mergeHoursConfig(firstConfig.hours, secondConfig.hours)),\r\n\t\t\tdates: {},\r\n\t\t\tcustomWeeks: {}\r\n\t\t};\r\n\r\n\t\tfor(var i in firstConfig.dates){\r\n\t\t\tvar firstDate = firstConfig.dates[i];\r\n\t\t\tvar secondDate = secondConfig.dates[i];\r\n\r\n\t\t\t// if this key is a working date in both calendars\r\n\t\t\tif(firstDate && secondDate){\r\n\t\t\t\t// if at least one of working date is set by hours config - build intersection\r\n\t\t\t\tif(Array.isArray(firstDate) || Array.isArray(secondDate)){\r\n\t\t\t\t\tvar firstHours = Array.isArray(firstDate) ? firstDate : firstConfig.hours;\r\n\t\t\t\t\tvar secondHours = Array.isArray(secondDate) ? secondDate : secondConfig.hours;\r\n\t\t\t\t\tmergedSettings.dates[i] = this._toHoursArray(this._mergeHoursConfig(firstHours, secondHours));\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// date will use global hours\r\n\t\t\t\t\tmergedSettings.dates[i] = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tmergedSettings.dates[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// transfer and overwrite custom week calendars\r\n\t\tif(firstConfig.customWeeks){\r\n\t\t\tfor(var i in firstConfig.customWeeks){\r\n\t\t\t\tmergedSettings.customWeeks[i] = firstConfig.customWeeks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(secondConfig.customWeeks){\r\n\t\t\tfor(var i in secondConfig.customWeeks){\r\n\t\t\t\tmergedSettings.customWeeks[i] = secondConfig.customWeeks[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mergedSettings;\r\n\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = WorkTimeCalendarMerger;","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarMergeHelper = require(\"./strategy/work_calendar_merger\");\r\nvar CalendarWorkTimeStrategy = require(\"./strategy/calendar_strategy\");\r\nvar legacyResourceCalendarConfig = require(\"./legacy_resource_config\");\r\nvar dynamicResourceCalendars = require(\"./dynamic_resource_calendars\")();\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n\tthis._legacyConfig = undefined;\r\n\tthis.$gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(this.$gantt.config.resource_calendars){\r\n\t\t\tthis._isLegacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars);\r\n\t\t}\r\n\t}.bind(this));\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_convertWorkTimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days && !settings.dates) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete settings.days;\r\n\t\treturn settings;\r\n\t},\r\n\tmergeCalendars: function(){\r\n\t\tvar calendars = [];\r\n\t\tvar args = arguments;\r\n\t\tif(Array.isArray(args[0])){\r\n\t\t\tcalendars = args[0].slice();\r\n\t\t}else{\r\n\t\t\tfor(var i = 0; i < arguments.length; i++){\r\n\t\t\t\tcalendars.push(arguments[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mergeHelper = new CalendarMergeHelper();\r\n\r\n\t\tvar result;\r\n\t\tcalendars.forEach(function(calendar){\r\n\t\t\tif(!result){\r\n\t\t\t\tresult = calendar;\r\n\t\t\t} else{\r\n\t\t\t\tresult = this._createCalendarFromConfig(mergeHelper.merge(result, calendar));\r\n\t\t\t}\r\n\r\n\t\t}.bind(this));\r\n\t\treturn this.createCalendar(result);\r\n\t},\r\n\r\n\t_createCalendarFromConfig: function(config){\r\n\t\tvar apiCore = new CalendarWorkTimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tapiCore.id = String(utils.uid());\r\n\r\n\t\tvar preparedConfig = this._convertWorkTimeSettings(config);\r\n\t\tif(preparedConfig.customWeeks){\r\n\t\t\tfor(var i in preparedConfig.customWeeks){\r\n\t\t\t\tpreparedConfig.customWeeks[i] = this._convertWorkTimeSettings(preparedConfig.customWeeks[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tapiCore._setConfig(preparedConfig);\r\n\r\n\t\treturn apiCore;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.getConfig){\r\n\t\t\tsettings = utils.copy(parentCalendar.getConfig());\r\n\t\t} else if (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\treturn this._createCalendarFromConfig(settings);\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_getOwnCalendar: function(task){\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t}\r\n\r\n\t\tif (config.resource_calendars) {\r\n\t\t\tvar calendar;\r\n\t\t\tvar calendarId;\r\n\t\t\tvar resourceProperty;\r\n\t\t\tif(this._legacyConfig === false){\r\n\t\t\t\tresourceProperty = config.resource_property;\r\n\t\t\t}else{\r\n\t\t\t\tresourceProperty = legacyResourceCalendarConfig.getResourceProperty(config);\r\n\t\t\t}\r\n\t\t\tif(Array.isArray(task[resourceProperty])){\r\n\t\t\t\t// if multiple resources are attached to the task - merge their calendars\r\n\t\t\t\tif(config.dynamic_resource_calendars){\r\n\t\t\t\t\tcalendarId = dynamicResourceCalendars.getCalendarIdFromMultipleResources(task[resourceProperty], this);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this._legacyConfig){\r\n\t\t\t\t\tvar calendarId = legacyResourceCalendarConfig.getCalendarIdFromLegacyConfig(task, config.resource_calendars);\r\n\t\t\t\t}else if(resourceProperty && task[resourceProperty] && config.resource_calendars[task[resourceProperty]]){\r\n\t\t\t\t\tvar calendar = this.getResourceCalendar(task[resourceProperty]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\tcalendar = this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t\tif(calendar){\r\n\t\t\t\treturn calendar;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns calendar assigned to the specified resource.\r\n\t * Returns the global calendar if no custom calendar is associated with the resource.\r\n\t * @param {(string|number|Object)} resource - resource object or resource id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetResourceCalendar: function(resource) {\r\n\t\tif (resource === null || resource === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar resourceId = null;\r\n\t\t// if task id is provided\r\n\t\tif((typeof resource === \"number\" || typeof resource === \"string\")){\r\n\t\t\tresourceId = resource;\r\n\t\t}else{\r\n\t\t\tresourceId = resource.id || resource.key;\r\n\t\t}\r\n\r\n\t\tvar config = this.$gantt.config;\r\n\t\tvar calendarsConfig = config.resource_calendars;\r\n\t\tvar calendarId = null;\r\n\t\tif (calendarsConfig) {\r\n\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._legacyConfig){\r\n\t\t\t\tfor(var field in calendarsConfig){\r\n\t\t\t\t\tif(calendarsConfig[field][resourceId]){\r\n\t\t\t\t\t\tcalendarId = calendarsConfig[field][resourceId];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar calendarId = calendarsConfig[resourceId];\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the calendar assigned to a task.\r\n\t * - Returns a calendar assigned via task[gantt.config.calendar_property] if specified.\r\n\t * - Returns a calendar assigned to the task resource if specified.\r\n\t * - Returns the global calendar otherwise.\r\n\t * @param {(string|number|Object)} task - task object or task id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar taskObject;\r\n\t\tif (task === null || task === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\t// if task id is provided\r\n\t\tif((typeof task === \"number\" || typeof task === \"string\") && gantt.isTaskExists(task)){\r\n\t\t\ttaskObject = gantt.getTask(task);\r\n\t\t}else{\r\n\t\t\ttaskObject = task;\r\n\t\t}\r\n\r\n\t\tif(!taskObject){\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar calendar = this._getOwnCalendar(taskObject);\r\n\t\tif (!calendar && gantt.config.inherit_calendar && gantt.isTaskExists(taskObject.parent)){\r\n\t\t\tvar stop = false;\r\n\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\tif(stop) return;\r\n\t\t\t\tif(gantt.isSummaryTask(parent)){\r\n\t\t\t\t\tcalendar = this._getOwnCalendar(parent);\r\n\t\t\t\t\tif(calendar){\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, taskObject.id, this);\r\n\t\t}\r\n\r\n\t\treturn calendar || this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function(calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(this.isCalendar(calendar))) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!calendar._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\r\n\t\t\tthis.$gantt.callEvent(\"onCalendarError\", [{message: \"Invalid calendar settings, no worktime available\"}, calendar]);\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tvar config = this.$gantt.config;\r\n\r\n\t\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\t\tthis._calendars[calendar.id] = calendar;\r\n\t\t\tif (!config.worktimes)\r\n\t\t\t\tconfig.worktimes = {};\r\n\t\t\tconfig.worktimes[calendar.id] = calendar.getConfig();\r\n\t\t\treturn calendar.id;\r\n\t\t}\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 12, 13, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t},\r\n\r\n\tisCalendar: function(possibleCalendar) {\r\n\t\t// because we don't have any way to check without dependency to CalendarWorkTimeStrategy\r\n\t\tvar props = [\r\n\t\t\tpossibleCalendar.isWorkTime,\r\n\t\t\tpossibleCalendar.setWorkTime,\r\n\t\t\tpossibleCalendar.getWorkHours,\r\n\t\t\tpossibleCalendar.unsetWorkTime,\r\n\t\t\tpossibleCalendar.getClosestWorkTime,\r\n\t\t\tpossibleCalendar.calculateDuration,\r\n\t\t\tpossibleCalendar.hasDuration,\r\n\t\t\tpossibleCalendar.calculateEndDate\r\n\t\t];\r\n\t\treturn props.every(function(entry) {\r\n\t\t\treturn entry instanceof Function;\r\n\t\t});\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\treturn this.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tif(resp.xmlDoc && resp.xmlDoc.status === 404){ // work if we don't have a file at current url\r\n\t\t\tthis.assert(false, \"Failed to load the data from <a href='\" + resp.xmlDoc.responseURL + \"' target='_blank'>\" \r\n\t\t\t\t+ resp.xmlDoc.responseURL + \"</a>, server returns 404\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data || data.tasks);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tfunction jsonParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tif(!data){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (typeof JSON != undefined){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e) {\r\n\t\t\t\t\t\tjsonParseError(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!data.data && !data.tasks){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (helpers.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.defined(gantt.templates.xml_format) ? gantt.templates.xml_format(copy[key]) : gantt.templates.format_date(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tfunction xmlParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) {\r\n\t\t\t\txmlParseError(text);\r\n\t\t\t}\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\r\n\t\tif((typeof item == \"number\" || typeof item == \"string\") && gantt.isTaskExists(item)){\r\n\t\t\titem = gantt.getTask(item);\r\n\t\t}\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function(name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function() {\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n};","const SENSITIVITY = 20;\r\nconst TIMEOUT = 50;\r\nconst SCROLLSTEP = 10;\r\n\r\nexport default class ScrollableGrid {\r\n\tpublic getCurrentX;\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dnd;\r\n\tprivate _scrollView;\r\n\tprivate _scrollOrder: 0 | 1 | -1 = 0;\r\n\r\n\tconstructor(params) {\r\n\t\tconst {gantt, grid, dnd, getCurrentX} = params;\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t\tthis._dnd = dnd;\r\n\t\tthis.getCurrentX = getCurrentX;\r\n\t\tthis._scrollView = this.$gantt.$ui.getView(this.$grid.$config.scrollX);\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tif (this.isScrollable()) {\r\n\t\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\t\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\t\t\tconst minLeft = gridBoundingRect.left;\r\n\t\t\t\tconst currentX = this.getCurrentX(e.clientX);\r\n\r\n\t\t\t\tif (currentX >= maxLeft - SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollRight();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX <= minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollLeft();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX < maxLeft - SENSITIVITY && currentX > minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollStop();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\t\tthis.autoscrollStop();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tautoscrollStart() {\r\n\t\tif (this._scrollOrder === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst scrollStep = SCROLLSTEP * this._scrollOrder;\r\n\t\tconst scrollState = this._scrollView.getScrollState();\r\n\t\tthis._scrollView.scrollTo(scrollState.position + scrollStep);\r\n\t\tsetTimeout(() => { this.autoscrollStart(); }, TIMEOUT);\r\n\t}\r\n\tautoscrollRight() {\r\n\t\tthis._scrollOrder = 1;\r\n\t}\r\n\tautoscrollLeft() {\r\n\t\tthis._scrollOrder = -1;\r\n\t}\r\n\tautoscrollStop() {\r\n\t\tthis._scrollOrder = 0;\r\n\t}\r\n\tgetCorrection() {\r\n\t\tif (!this.isScrollable()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this._scrollView.getScrollState().position;\r\n\t}\r\n\tisScrollable() {\r\n\t\treturn !!this.$grid.$config.scrollable;\r\n\t}\r\n}","import * as domHelpers from \"../../utils/dom_helpers\";\r\nimport ScrollableGrid from \"./scrollable_grid\";\r\n\r\nconst COLUMN_ID_ATTR_NAME = \"data-column-id\";\r\n\r\nexport class ColumnsGridDnd {\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dragX;\r\n\tprivate _dnd;\r\n\tprivate _originAutoscroll;\r\n\tprivate _scrollableGrid: ScrollableGrid;\r\n\tprivate _draggedCell;\r\n\tprivate _targetMarker = null;\r\n\tprivate _gridConfig;\r\n\tconstructor(gantt, grid) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t}\r\n\tinit() {\r\n\t\tconst DND = this.$gantt.$services.getService(\"dnd\");\r\n\t\tthis._dnd = new DND(this.$grid.$grid_scale, { updates_per_second: 60 });\r\n\t\tthis._scrollableGrid = new ScrollableGrid({\r\n\t\t\tgantt: this.$gantt,\r\n\t\t\tgrid: this.$grid,\r\n\t\t\tdnd: this._dnd,\r\n\t\t\tgetCurrentX: this.calculateCurrentPosition\r\n\t\t});\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tthis._dnd.attachEvent(\"onBeforeDragStart\", (obj, e) => {\r\n\t\t\tthis._draggedCell = this.$gantt.utils.dom.closest(e.target, \".gantt_grid_head_cell\");\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\t\tconst columnName = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tlet draggedColumn;\r\n\t\t\tlet draggedIndex;\r\n\t\t\tcolumns.map(function(column, index){\r\n\t\t\t\tif(column.name === columnName){\r\n\t\t\t\t\tdraggedColumn = column;\r\n\t\t\t\t\tdraggedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.$grid.callEvent(\"onBeforeColumnDragStart\", [{ draggedColumn, draggedIndex}]) === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._draggedCell || !draggedColumn) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._gridConfig = this.$grid.$getConfig();\r\n\t\t\tthis._originAutoscroll = this.$gantt.config.autoscroll;\r\n\t\t\tthis.$gantt.config.autoscroll = false;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onAfterDragStart\", (obj, e) => {\r\n\t\t\tthis._dnd.config.column = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tthis._dnd.config.marker.innerHTML = this._draggedCell.outerHTML;\r\n\t\t\tthis._dnd.config.marker.classList.add(\"gantt_column_drag_marker\");\r\n\t\t\tthis._dnd.config.marker.style.height = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._dnd.config.marker.style.lineHeight = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\");\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dragX = e.clientX;\r\n\t\t\tconst x = this.calculateCurrentPosition(e.clientX);\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tconst targetIndex = columnIndexes.targetIndex;\r\n\t\t\tconst draggedIndex = columnIndexes.draggedIndex;\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\r\n\t\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\t\tconst targetColumn = columns[targetIndex];\r\n\t\t\tif (this.$grid.callEvent(\"onColumnDragMove\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\t\tthis.cleanTargetMarker();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.setMarkerPosition(x);\r\n\t\t\tthis.drawTargetMarker(columnIndexes);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.autoscroll = this._originAutoscroll;\r\n\t\t\tthis._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\");\r\n\t\t\tthis.cleanTargetMarker();\r\n\t\t\tthis.reorderColumns();\r\n\t\t});\r\n\r\n\t}\r\n\treorderColumns() {\r\n\t\tconst { targetIndex, draggedIndex } = this.findColumnsIndexes();\r\n\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\tconst targetColumn = columns[targetIndex];\r\n\r\n\t\tif (this.$grid.callEvent(\"onBeforeColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (targetIndex === draggedIndex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcolumns.splice(draggedIndex, 1);\r\n\t\tcolumns.splice(targetIndex, 0, draggedColumn);\r\n\t\tthis.$gantt.render();\r\n\t\tthis.$grid.callEvent(\"onAfterColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]);\r\n\t}\r\n\tfindColumnsIndexes() {\r\n\t\tconst draggedId = this._dnd.config.column;\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tlet targetIndex: number;\r\n\t\tlet draggedIndex: number;\r\n\t\tlet xBefore: number;\r\n\t\tlet xAfter: number;\r\n\t\tconst currentColumn = { startX: 0, endX: 0 };\r\n\r\n\t\tlet start = 0;\r\n\t\tlet end = columns.length - 1;\r\n\t\tlet compare = (a, b) => a <= b;\r\n\t\tlet next = (index) => ++index;\r\n\t\tif (this.$gantt.config.rtl) {\r\n\t\t\tstart = columns.length - 1;\r\n\t\t\tend = 0;\r\n\t\t\tcompare = (a, b) => a >= b;\r\n\t\t\tnext = (index) => --index;\r\n\t\t}\r\n\r\n\t\tlet columnRelativePos: number;\r\n\r\n\t\tconst relativeX = this._dragX - this.$grid.$grid.getBoundingClientRect().left + this._scrollableGrid.getCorrection();\r\n\t\tfor (let i = start; compare(i, end); i = next(i)) {\r\n\t\t\tif (targetIndex !== undefined && draggedIndex !== undefined) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(!columns[i].hide) {\r\n\t\t\t\tcurrentColumn.startX = currentColumn.endX;\r\n\t\t\t\tcurrentColumn.endX += columns[i].width;\r\n\r\n\t\t\t\t// if drop on a column or drop after the last column\r\n\t\t\t\tif (relativeX >= currentColumn.startX && (relativeX <= currentColumn.endX || !compare(next(i), end))) {\r\n\t\t\t\t\ttargetIndex = i;\r\n\t\t\t\t\txBefore = currentColumn.startX;\r\n\t\t\t\t\txAfter = currentColumn.endX;\r\n\t\t\t\t\tcolumnRelativePos = (relativeX - currentColumn.startX) / (currentColumn.endX - currentColumn.startX);\r\n\t\t\t\t}\r\n\t\t\t\tif (draggedId === columns[i].name) {\r\n\t\t\t\t\tdraggedIndex = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttargetIndex,\r\n\t\t\tdraggedIndex,\r\n\t\t\txBefore,\r\n\t\t\txAfter,\r\n\t\t\tcolumnRelativePos\r\n\t\t};\r\n\t}\r\n\tsetMarkerPosition(x: number, y: number = 10) {\r\n\t\tconst { marker } = this._dnd.config;\r\n\t\tconst gridOffset = this._dnd._obj.getBoundingClientRect();\r\n\t\tmarker.style.top = `${gridOffset.y + y}px`;\r\n\t\tmarker.style.left = `${x}px`;\r\n\t}\r\n\tcalculateCurrentPosition = (eventX: number) => {\r\n\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\tconst minLeft = gridBoundingRect.left;\r\n\t\tlet x = eventX;\r\n\t\tif (x > maxLeft) {\r\n\t\t\tx = maxLeft;\r\n\t\t}\r\n\t\tif (x < minLeft) {\r\n\t\t\tx = minLeft;\r\n\t\t}\r\n\t\treturn x;\r\n\t}\r\n\tdrawTargetMarker({ targetIndex, draggedIndex, xBefore, xAfter, columnRelativePos }) {\r\n\t\tif (!this._targetMarker) {\r\n\t\t\tthis._targetMarker = document.createElement(\"div\");\r\n\t\t\tdomHelpers.addClassName(this._targetMarker, \"gantt_grid_target_marker\");\r\n\t\t\tthis._targetMarker.style.display = \"none\";\r\n\t\t\tthis._targetMarker.style.height = `${this._gridConfig.scale_height}px`;\r\n\t\t}\r\n\r\n\t\t// marker can be detached after gantt.render\r\n\t\tif(!this._targetMarker.parentNode){\r\n\t\t\tthis.$grid.$grid_scale.appendChild(this._targetMarker);\r\n\t\t}\r\n\r\n\t\tlet nextPosition: number;\r\n\t\tif (targetIndex > draggedIndex) {\r\n\t\t\tnextPosition = xAfter;\r\n\t\t} else if (targetIndex < draggedIndex) {\r\n\t\t\tnextPosition = xBefore;\r\n\t\t} else {\r\n\t\t\tif(columnRelativePos > 0.5){\r\n\t\t\t\tnextPosition = xAfter;\r\n\t\t\t}else{\r\n\t\t\t\tnextPosition = xBefore;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._targetMarker.style.left = `${nextPosition}px`;\r\n\t\tthis._targetMarker.style.display = \"block\";\r\n\t}\r\n\tcleanTargetMarker() {\r\n\t\tif (this._targetMarker && this._targetMarker.parentNode) {\r\n\t\t\tthis.$grid.$grid_scale.removeChild(this._targetMarker);\r\n\t\t}\r\n\t\tthis._targetMarker = null;\r\n\t}\r\n}","import {ColumnsGridDnd} from \"./column_grid_dnd\";\r\nexport default ColumnsGridDnd;","var domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nfunction createRowResizer(gantt, grid){\r\n\r\n\tvar _task_grid_row_resize = {\r\n\t\trow_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute),\r\n\t\t\t\trow = store.getItem(row_id);\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResize\", [row]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\trow_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\r\n\t\t\tdnd.config.marker.className += \" gantt_row_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.width = grid.$grid.offsetWidth + \"px\";\r\n\t\t\tdnd.config.drag_id = row_id;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = parseInt(dd.drag_id, 10),\r\n\t\t\t\titemHeight = grid.getItemHeight(id),\r\n\t\t\t\titemTop = grid.getItemTop(id);\r\n\t\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.top, 10),\r\n\t\t\t\tmarkerStartPosition = itemTop + pos.y,\r\n\t\t\t\tmarker_height = 0,\r\n\t\t\t\tminPointerPosition = config.min_task_grid_row_height;\r\n\r\n\t\t\tmarker_height = pointerPosition - markerStartPosition;\r\n\t\t\tif(marker_height < minPointerPosition){\r\n\t\t\t\tmarker_height = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.marker.style.left = pos.x + \"px\";\r\n\t\t\tdd.marker.style.top = markerStartPosition - 1 + \"px\";\r\n\t\t\tdd.marker.style.height = Math.abs(marker_height) + 1 + \"px\";\r\n\r\n\t\t\tdd.marker_height = marker_height;\r\n\t\t\t\r\n\t\t\tgrid.callEvent(\"onRowResize\", [id, store.getItem(id), marker_height + itemHeight]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = parseInt(dd.drag_id, 10),\r\n\t\t\t\titem = store.getItem(id),\r\n\t\t\t\toldItemHeight = grid.getItemHeight(id);\r\n\r\n\t\t\tvar finalHeight = dd.marker_height;\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResizeEnd\", [id, item, finalHeight]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (item.row_height == finalHeight)\r\n\t\t\t\treturn;\r\n\r\n\t\t\titem.row_height = finalHeight;\r\n\t\t\tgantt.updateTask(id);\r\n\r\n\t\t\tgrid.callEvent(\"onAfterRowResize\", [id, item, oldItemHeight, finalHeight]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n\t// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize\r\n\t};\r\n}\r\n\r\nmodule.exports = createRowResizer;","function createHelper(view){\r\n\tvar cachedRowHeight = -1;\r\n\tvar canUseSimpleCalc = -1;\r\n\treturn {\r\n\t\tresetCache: function(){\r\n\t\t\tcachedRowHeight = -1;\r\n\t\t\tcanUseSimpleCalc = -1;\r\n\t\t},\r\n\t\t_getRowHeight: function(){\r\n\t\t\tif(cachedRowHeight === -1){\r\n\t\t\t\tcachedRowHeight = view.$getConfig().row_height;\r\n\t\t\t}\r\n\t\t\treturn cachedRowHeight;\r\n\t\t},\r\n\t\t_refreshState: function(){\r\n\t\t\tthis.resetCache();\r\n\t\t\tcanUseSimpleCalc = true;\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar globalRowHeight = this._getRowHeight();\r\n\t\t\tfor (var i=0; i<store.fullOrder.length; i++) {\r\n\t\t\t\tvar item = store.getItem(store.fullOrder[i]);\r\n\t\t\t\tif(item.row_height && item.row_height !== globalRowHeight){\r\n\t\t\t\t\tcanUseSimpleCalc = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tcanUseSimpleCalculation: function(){\r\n\t\t\tif(canUseSimpleCalc === -1){\r\n\t\t\t\tthis._refreshState();\r\n\t\t\t}\r\n\t\t\treturn canUseSimpleCalc;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn index * this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\treturn this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\tvar store = view.$config.rowStore;\r\n\t\t\t\treturn store.countVisible() * this._getRowHeight();\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\treturn Math.floor(top / this._getRowHeight());\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createHelper;","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;","var Grid = require(\"./ui/grid/grid\");\r\n\r\nmodule.exports = function(gantt) {\r\n\trequire(\"./grid_column_api.gpl\")(gantt);\r\n\tGrid.prototype.getGridColumns = function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = config.columns,\r\n\t\t\tvisibleColumns = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (!columns[i].hide)\r\n\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t}\r\n\r\n\t\treturn visibleColumns;\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\tvar TreeDataStore = require(\"./datastore/treedatastore\");\r\n\r\n\tvar loadedBranches = {};\r\n\tgantt.attachEvent(\"onClearAll\", function(){\r\n\t\tloadedBranches = {};\r\n\t});\r\n\r\n\tvar oldHasChildren = TreeDataStore.prototype.hasChild;\r\n\tgantt.$data.tasksStore.hasChild = function (id) {\r\n\t\tif(!gantt.config.branch_loading){\r\n\t\t\treturn oldHasChildren.call(this, id);\r\n\t\t}else{\r\n\t\t\tif (oldHasChildren.call(this, id))\r\n\t\t\t\treturn true;\r\n\t\t\tif (this.exists(id)) {\r\n\t\t\t\treturn this.getItem(id)[gantt.config.branch_loading_property];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction needLoading(id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\tvar alreadyLoaded = !!loadedBranches[id];\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (!alreadyLoaded && (!gantt.getChildren(id).length && gantt.hasChild(id))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskOpened\", function (id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (needLoading(id)) {\r\n\t\t\t\tvar url = gantt._load_url;\r\n\t\t\t\turl = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\r\n\t\t\t\tvar param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n\t\t\t\tvar y = gantt.getScrollState().y || 0;\r\n\r\n\t\t\t\tvar requestData = {\r\n\t\t\t\t\ttaskId: id,\r\n\t\t\t\t\turl: url + param + \"parent_id=\" + encodeURIComponent(id)\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt.callEvent(\"onBeforeBranchLoading\", [requestData]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.load(requestData.url, this._load_type, function () {\r\n\t\t\t\t\tif (y) {\r\n\t\t\t\t\t\tgantt.scrollTo(null, y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.callEvent(\"onAfterBranchLoading\", [requestData]);\r\n\t\t\t\t});\r\n\t\t\t\tloadedBranches[id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};","export default class LinkFormatterSimple implements ILinkFormatter {\r\n\tstatic create = (settings: ILinkFormatterConfig = null, gantt: any): LinkFormatterSimple => {\r\n\t\treturn new LinkFormatterSimple(gantt);\r\n\t}\r\n\tprotected _linkReg: RegExp;\r\n\tprotected _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._linkReg = /^[0-9\\.]+/;\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tformat = (link: ILink) : string => {\r\n\t\tconst wbs = this._getWBSCode(link.source);\r\n\t\treturn wbs;\r\n\t}\r\n\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn this._linkReg.test(value);\r\n\t}\r\n\tparse = (value: string) : ILink => {\r\n\t\tif(!this.canParse(value)){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst linkPart = this._linkReg.exec(value)[0].trim();\r\n\r\n\t\tconst source = this._findSource(linkPart) || null;\r\n\r\n\t\treturn {\r\n\t\t\tid: undefined,\r\n\t\t\tsource,\r\n\t\t\ttarget: null,\r\n\t\t\ttype: this._gantt.config.links.finish_to_start,\r\n\t\t\tlag: 0\r\n\t\t};\r\n\t}\r\n\r\n\tprotected _getWBSCode = (source: number | string) => {\r\n\t\tconst pred = this._gantt.getTask(source);\r\n\t\treturn this._gantt.getWBSCode(pred);\r\n\t}\r\n\r\n\tprotected _findSource = (value: string) => {\r\n\t\tconst reqTemplate = new RegExp(\"^[0-9\\.]+\", \"i\");\r\n\t\tif(reqTemplate.exec(value)){\r\n\t\t\tconst wbs = reqTemplate.exec(value)[0];\r\n\t\t\tconst task = this._gantt.getTaskByWBSCode(wbs);\r\n\t\t\tif(task){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","\r\nvar DurationFormatter = require(\"../common/duration_formatter\").default;\r\nvar LinkFormatter = require(\"../common/link_formatter\").default;\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.ext.formatters = {\r\n\t\tdurationFormatter: function(settings){\r\n\t\t\tif(!settings){\r\n\t\t\t\tsettings = {};\r\n\t\t\t}\r\n\t\t\tif(!settings.store){\r\n\t\t\t\tsettings.store = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\tif(!settings.enter){\r\n\t\t\t\tsettings.enter = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\treturn DurationFormatter.create(settings, gantt);\r\n\t\t},\r\n\t\tlinkFormatter: function(settings){\r\n\t\t\treturn LinkFormatter.create(settings, gantt);\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\tfunction isEnabled() {\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback) {\r\n\t\treturn function() {\r\n\t\t\tif (!isEnabled()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction updateParents(childId) {\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tcheckParent(childId);\r\n\t\t});\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction checkParent(id) {\r\n\t\tsetTaskType(id);\r\n\t\tvar parent = gantt.getParent(id);\r\n\r\n\t\tif (parent != gantt.config.root_id) {\r\n\t\t\tcheckParent(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setTaskType(id) {\r\n\t\tid = id.id || id;\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\r\n\t\tif (targetType !== false) {\r\n\t\t\tupdateTaskType(task, targetType);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTaskType(task, targetType) {\r\n\t\tif(!gantt.getState().group_mode){\r\n\t\t\ttask.type = targetType;\r\n\t\t\tgantt.updateTask(task.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskTypeToUpdate(task) {\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar hasChildren = gantt.hasChild(task.id);\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tif (hasChildren && taskType === allTypes.task) {\r\n\t\t\treturn allTypes.project;\r\n\t\t}\r\n\r\n\t\tif (!hasChildren && taskType === allTypes.project) {\r\n\t\t\treturn allTypes.task;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar isParsingDone = true;\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function() {\r\n\t\tisParsingDone = false;\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tgantt.eachTask(function(task) {\r\n\t\t\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\t\t\tif (targetType !== false) {\r\n\t\t\t\t\tupdateTaskType(task, targetType);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tisParsingDone = true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex) {\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex) {\r\n\t\tif (document.querySelector(\".gantt_drag_marker\")) {\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n};","module.exports = function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(dataProcessor){\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\tgantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\r\n\r\n\tvar ready = false;\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(ready){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tready = true;\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n\tfunction isPlaceholderTask(taskId){\r\n\t\tif(gantt.config.types.placeholder && gantt.isTaskExists(taskId)){\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif(task.type == gantt.config.types.placeholder){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction isPlaceholderLink(link){\r\n\t\tif(isPlaceholderTask(link.source) || isPlaceholderTask(link.target)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeLinkAdd\", function(id,link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeUndoStack\", function(action){\r\n\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\tvar command = action.commands[i];\r\n\t\t\tif(command.entity === \"task\" && command.value.type === gantt.config.types.placeholder){\r\n\t\t\t\taction.commands.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n};","module.exports = function (gantt) {\r\n\tvar resourceAssignmentsProperty = \"$resourceAssignments\";\r\n\tgantt.config.resource_assignment_store = \"resourceAssignments\";\r\n\tgantt.config.process_resource_assignments = true;\r\n\r\n\tvar resourceAssignmentFormats = {\r\n\t\tauto: \"auto\",\r\n\t\tsingleValue: \"singleValue\",\r\n\t\tvalueArray: \"valueArray\",\r\n\t\tresourceValueArray: \"resourceValueArray\",\r\n\t\tassignmentsArray: \"assignmentsArray\"\r\n\t};\r\n\tvar resourceAssignmentFormat = resourceAssignmentFormats.auto;//\"primitiveSingle\";//\"primitive\";//\"object\"|\"assignment\"\r\n\r\n\tvar assignmentModes = {\r\n\t\tfixedDates: \"fixedDates\",\r\n\t\tfixedDuration: \"fixedDuration\",\r\n\t\tdefault: \"default\"\r\n\t};\r\n\r\n\r\n\tfunction initAssignmentFields(item, task){\r\n\t\tif (item.start_date) {\r\n\t\t\titem.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.start_date = null;\r\n\t\t}\r\n\r\n\t\tif (item.end_date) {\r\n\t\t\titem.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.end_date = null;\r\n\t\t}\r\n\r\n\t\tvar delay = Number(item.delay);\r\n\t\tvar initDelay = false;\r\n\t\tif (!isNaN(delay)) {\r\n\t\t\titem.delay = delay;\r\n\t\t} else {\r\n\t\t\titem.delay = 0;\r\n\t\t\tinitDelay = true;\r\n\t\t}\r\n\r\n\t\tif (!gantt.defined(item.value)) {\r\n\t\t\titem.value = null;\r\n\t\t}\r\n\r\n\t\tif (!item.task_id || !item.resource_id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\titem.mode = item.mode || assignmentModes.default;\r\n\r\n\t\tif(item.mode === assignmentModes.fixedDuration){\r\n\t\t\tif(isNaN(Number(item.duration))){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.duration = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: item.start_date,\r\n\t\t\t\t\tend_date: item.end_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(initDelay){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.delay = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tend_date: item.start_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.mode !== assignmentModes.fixedDates && (task || gantt.isTaskExists(item.task_id))) {\r\n\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\tvar timing = _assignmentTimeFromTask(item, task);\r\n\t\t\titem.start_date = timing.start_date;\r\n\t\t\titem.end_date = timing.end_date;\r\n\t\t\titem.duration = timing.duration;\r\n\t\t}\r\n\t}\r\n\t// gantt init\r\n\tvar resourceAssignmentsStore = gantt.createDatastore({\r\n\t\tname: gantt.config.resource_assignment_store,\r\n\t\tinitItem: function (item) {\r\n\t\t\tif (!item.id) {\r\n\t\t\t\titem.id = gantt.uid();\r\n\t\t\t}\r\n\r\n\t\t\tinitAssignmentFields(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction _assignmentTimeFromTask(assignment, task) {\r\n\r\n\t\tif (assignment.mode === assignmentModes.fixedDates) {\r\n\t\t\treturn {\r\n\t\t\t\tstart_date: assignment.start_date,\r\n\t\t\t\tend_date: assignment.end_date,\r\n\t\t\t\tduration: assignment.duration\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvar start = assignment.delay ? gantt.calculateEndDate({\r\n\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\tduration: assignment.delay,\r\n\t\t\t\ttask: task\r\n\t\t\t}) : new Date(task.start_date);\r\n\r\n\t\t\tvar end;\r\n\t\t\tvar duration;\r\n\t\t\tif (assignment.mode === assignmentModes.fixedDuration) {\r\n\t\t\t\tend = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tduration: assignment.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t\tduration = assignment.duration;\r\n\t\t\t} else {\r\n\t\t\t\tend = new Date(task.end_date);\r\n\t\t\t\tduration = task.duration - assignment.delay;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: start,\r\n\t\t\tend_date: end,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t}\r\n\r\n\t// data loading\r\n\r\n\tfunction _makeAssignmentsFromTask(task) {\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar assignments = task[property];\r\n\t\tvar resourceAssignments = [];\r\n\t\tvar detectFormat = resourceAssignmentFormat === resourceAssignmentFormats.auto;\r\n\r\n\t\tif (gantt.defined(assignments) && assignments) {\r\n\t\t\tif (!Array.isArray(assignments)) {\r\n\t\t\t\tassignments = [assignments];\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.singleValue;\r\n\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar usedIds = {};\r\n\t\t\tassignments.forEach(function (res) {\r\n\t\t\t\tif (!res.resource_id) { // when resource is a string/number\r\n\t\t\t\t\tres = { resource_id: res };\r\n\t\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.valueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//\tisSimpleArray = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tif (res.id && res.task_id && res.resource_id) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.assignmentsArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.resourceValueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar defaultMode = assignmentModes.default;\r\n\t\t\t\tif(!res.mode){\r\n\t\t\t\t\tif((res.start_date && res.end_date) || (res.start_date && res.duration)){\r\n\t\t\t\t\t\tdefaultMode = assignmentModes.fixedDuration;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar id = res.id;\r\n\t\t\t\tif(!id && res.$id && !usedIds[res.$id]){\r\n\t\t\t\t\tid = res.$id;\r\n\t\t\t\t\tusedIds[id] = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tid = gantt.uid();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar assignment = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tstart_date: res.start_date,\r\n\t\t\t\t\tduration: res.duration,\r\n\t\t\t\t\tend_date: res.end_date,\r\n\t\t\t\t\tdelay: res.delay,\r\n\t\t\t\t\ttask_id: task.id,\r\n\t\t\t\t\tresource_id: res.resource_id,\r\n\t\t\t\t\tvalue: res.value,\r\n\t\t\t\t\tmode: res.mode || defaultMode\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(!(assignment.start_date && assignment.start_date.getMonth \r\n\t\t\t\t\t&& assignment.end_date && assignment.end_date.getMonth && typeof assignment.duration === \"number\")){\r\n\t\t\t\t\tinitAssignmentFields(assignment, task);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresourceAssignments.push(assignment);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn resourceAssignments;\r\n\t}\r\n\r\n\tfunction _updateTaskBack(taskId) {\r\n\t\tvar task = gantt.getTask(taskId);\r\n\t\tvar assignments = gantt.getTaskAssignments(task.id);\r\n\t\t_assignAssignments(task, assignments);\r\n\t}\r\n\r\n\tfunction _assignAssignments(task, assignments){\r\n\t\tassignments.sort(function(a, b){\r\n\t\t\tif(a.start_date && b.start_date && a.start_date.valueOf() != b.start_date.valueOf()){\r\n\t\t\t\treturn a.start_date - b.start_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments;\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments.map(function (a) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t$id: a.id,\r\n\t\t\t\t\tstart_date: a.start_date,\r\n\t\t\t\t\tduration: a.duration,\r\n\t\t\t\t\tend_date: a.end_date,\r\n\t\t\t\t\tdelay: a.delay,\r\n\t\t\t\t\tresource_id: a.resource_id,\r\n\t\t\t\t\tvalue: a.value,\r\n\t\t\t\t\tmode: a.mode\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttask[resourceAssignmentsProperty] = assignments;\r\n\t}\r\n\r\n\tfunction _loadAssignmentsFromTask(task) {\r\n\t\tvar assignments = _makeAssignmentsFromTask(task);\r\n\t\tvar taskAssignments = [];\r\n\t\tassignments.forEach(function (a) {\r\n\t\t\ta.id = a.id || gantt.uid();\r\n\t\t\t//var newId = resourceAssignmentsStore.addItem(a);\r\n\t\t\ttaskAssignments.push(a);\r\n\t\t});\r\n\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\tfunction diffAssignments(taskValues, assignmentsStoreValues) {\r\n\t\tvar result = {\r\n\t\t\tinBoth: [],\r\n\t\t\tinTaskNotInStore: [],\r\n\t\t\tinStoreNotInTask: []\r\n\t\t};\r\n\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.singleValue) {\r\n\t\t\tvar taskOwner = taskValues[0];\r\n\t\t\tvar ownerId = taskOwner ? taskOwner.resource_id : null;\r\n\t\t\tvar foundOwnerAssignment = false;\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tif (a.resource_id != ownerId) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(a);\r\n\t\t\t\t} else if (a.resource_id == ownerId) {\r\n\t\t\t\t\tresult.inBoth.push({ store: a, task: taskOwner });\r\n\t\t\t\t\tfoundOwnerAssignment = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!foundOwnerAssignment && taskOwner) {\r\n\t\t\t\tresult.inTaskNotInStore.push(taskOwner);\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.valueArray){\r\n\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tif (processedIds[a.resource_id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tprocessedIds[a.resource_id] = true;\r\n\t\t\t\tvar inTask = taskSearch[a.resource_id];\r\n\t\t\t\tvar inStore = storeSearch[a.resource_id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if ((resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray)\r\n\t\t\t|| (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray)) {\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.id || a.$id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tvar id = a.id || a.$id;\r\n\t\t\t\tif (processedIds[id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprocessedIds[id] = true;\r\n\t\t\t\tvar inTask = taskSearch[id];\r\n\t\t\t\tvar inStore = storeSearch[id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction assignmentHasChanged(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\tif (String(source[i]) !== String(target[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction updateAssignment(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\ttarget[i] = source[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _syncAssignments(task, storeAssignments){\r\n\t\tvar tasksAssignments = _makeAssignmentsFromTask(task);\r\n\r\n\t\tvar diff = diffAssignments(tasksAssignments, storeAssignments);\r\n\t\tdiff.inStoreNotInTask.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t\tdiff.inTaskNotInStore.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.addItem(a);\r\n\t\t});\r\n\r\n\t\tdiff.inBoth.forEach(function (a) {\r\n\t\t\tif (assignmentHasChanged(a.task, a.store)) {\r\n\t\t\t\tupdateAssignment(a.task, a.store);\r\n\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t} else {\r\n\t\t\t\tif (a.task.start_date && a.task.end_date && a.task.mode !== assignmentModes.fixedDates) {\r\n\t\t\t\t\tvar timing = _assignmentTimeFromTask(a.store, task);\r\n\t\t\t\t\tif (a.store.start_date.valueOf() != timing.start_date.valueOf() || a.store.end_date.valueOf() != timing.end_date.valueOf()) {\r\n\t\t\t\t\t\ta.store.start_date = timing.start_date;\r\n\t\t\t\t\t\ta.store.end_date = timing.end_date;\r\n\t\t\t\t\t\ta.store.duration = timing.duration;\r\n\t\t\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t_updateTaskBack(task.id);\r\n\t}\r\n\r\n\tfunction _syncOnTaskUpdate(task) {\r\n\t\tvar storeAssignments = task[resourceAssignmentsProperty] || resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\r\n\t\t_syncAssignments(task, storeAssignments);\r\n\t}\r\n\r\n\tfunction _syncOnTaskDelete(ids) {\r\n\t\tvar idsSearch = {};\r\n\t\tids.forEach(function (id) {\r\n\t\t\tidsSearch[id] = true;\r\n\t\t});\r\n\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn idsSearch[a.task_id];\r\n\t\t});\r\n\t\ttaskResources.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\r\n\t\tif (gantt.config.process_resource_assignments) {\r\n\t\t\tgantt.attachEvent(\"onParse\", function () {\r\n\t\t\t\tgantt.silent(function () {\r\n\t\t\t\t\tresourceAssignmentsStore.clearAll();\r\n\t\t\t\t\tvar totalAssignments = [];\r\n\t\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\t\tif (task.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar assignments = _loadAssignmentsFromTask(task);\r\n\t\t\t\t\t\t_assignAssignments(task, assignments);\r\n\r\n\t\t\t\t\t\tassignments.forEach(function (a) {\r\n\t\t\t\t\t\t\ttotalAssignments.push(a);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresourceAssignmentsStore.parse(totalAssignments);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar batchUpdate = false;\r\n\t\t\tvar needUpdate = false;\r\n\t\t\tvar needUpdateFor = {};\r\n\t\t\tgantt.attachEvent(\"onBeforeBatchUpdate\", function(){\r\n\t\t\t\tbatchUpdate = true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterBatchUpdate\", function(){\r\n\t\t\t\tbatchUpdate = false;\r\n\t\t\t\tif(needUpdate){\r\n\t\t\t\t\tvar assignmentsHash = {};\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\tassignmentsHash[i] = gantt.getTaskAssignments(needUpdateFor[i].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\t_syncAssignments(needUpdateFor[i], assignmentsHash[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tneedUpdate = false;\r\n\t\t\t\tneedUpdateFor = {};\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskCreated\", function (item) {\r\n\t\t\t\tvar assignments = _loadAssignmentsFromTask(item);\r\n\t\t\t\tresourceAssignmentsStore.parse(assignments);\r\n\t\t\t\t_assignAssignments(item, assignments);\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskUpdate\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t/*\tgantt.attachEvent(\"onRowDragMove\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});*/\r\n\t\t\tgantt.attachEvent(\"onRowDragEnd\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});\r\n\t\t\tgantt.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\", function (id, item) {\r\n\t\t\t\tvar deleteIds = [id];\r\n\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\tdeleteIds.push(task.id);\r\n\t\t\t\t}, id);\r\n\t\t\t\t_syncOnTaskDelete(deleteIds);\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\t\t\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\t\t\treturn a.task_id == id;\r\n\t\t\t\t});\r\n\t\t\t\ttaskResources.forEach(function (a) {\r\n\t\t\t\t\ta.task_id = new_id;\r\n\t\t\t\t\tresourceAssignmentsStore.updateItem(a.id);\r\n\t\t\t\t});\r\n\t\t\t\t_updateTaskBack(new_id);\r\n\t\t\t\t//any custom logic here\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar resourceAssignmentsCache = null;\r\n\t\t\tvar resourceTaskAssignmentsCache = null;\r\n\t\t\tvar taskAssignmentsCache = null;\r\n\r\n\t\t\tresourceAssignmentsStore.attachEvent(\"onStoreUpdated\", function resetCache(){\r\n\t\t\t\tresourceAssignmentsCache = null;\r\n\t\t\t\tresourceTaskAssignmentsCache = null;\r\n\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.getResourceAssignments = function (resourceId, taskId) {\r\n\t\t\t\tvar searchTaskId = gantt.defined(taskId) && taskId !== null;\r\n\r\n\t\t\t\tif(resourceAssignmentsCache === null){\r\n\t\t\t\t\tresourceAssignmentsCache = {};\r\n\t\t\t\t\tresourceTaskAssignmentsCache = {};\r\n\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!resourceAssignmentsCache[a.resource_id]){\r\n\t\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id].push(a);\r\n\r\n\t\t\t\t\t\tvar resourceTaskCacheKey = a.resource_id + \"-\" + a.task_id;\r\n\t\t\t\t\t\tif(!resourceTaskAssignmentsCache[resourceTaskCacheKey]){\r\n\t\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey].push(a);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(searchTaskId){\r\n\t\t\t\t\treturn (resourceTaskAssignmentsCache[resourceId + \"-\" + taskId] || []).slice();\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn (resourceAssignmentsCache[resourceId] || []).slice();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t\r\n\t\t\tgantt.getTaskAssignments = function (taskId) {\r\n\t\t\t\tif(taskAssignmentsCache === null){\r\n\t\t\t\t\tvar result = [];\r\n\t\t\t\t\ttaskAssignmentsCache = {};\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!taskAssignmentsCache[a.task_id]){\r\n\t\t\t\t\t\t\ttaskAssignmentsCache[a.task_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttaskAssignmentsCache[a.task_id].push(a);\r\n\t\t\t\t\t\tif (a.task_id == taskId) {\r\n\t\t\t\t\t\t\tresult.push(a);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn (taskAssignmentsCache[taskId] || []).slice();\r\n\t\t\t};\r\n\r\n\t\t\tgantt.updateTaskAssignments = _updateTaskBack;\r\n\t\t}\r\n\t}, {once: true});\r\n};","var helpers = require(\"../../utils/helpers\");\r\n\r\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {};\r\n\tvar singleResourceCacheBuilt = false;\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tsingleResourceCacheBuilt = false;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue) {\r\n\t\tif (typeof propertyName == \"function\") {\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t} else {\r\n\t\t\tif (helpers.isArray(propertyValue)) {\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t} else {\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter) {\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tvar falsyValuePrefix = String(Math.random());\r\n\tfunction resourceHashFunction(value){\r\n\t\tif (value === null){\r\n\t\t\treturn falsyValuePrefix + String(value);\r\n\t\t}\r\n\t\treturn String(value);\r\n\t}\r\n\r\n\tfunction getCacheKey(resourceIds, property){\r\n\t\tif(Array.isArray(resourceIds)){\r\n\t\t\treturn resourceIds.map(function(value){return resourceHashFunction(value);}).join(\"_\") + \"_\" + property;\r\n\t\t}else{\r\n\t\t\treturn resourceHashFunction(resourceIds) + \"_\" + property;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\t\tvar cacheKey = getCacheKey(resourceIds, property);\r\n\t\tvar matchingResources = {};\r\n\t\thelpers.forEach(resourceIds, function(resourceId) {\r\n\t\t\tmatchingResources[resourceHashFunction(resourceId)] = true;\r\n\t\t});\r\n\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (task.type == gantt.config.types.project) return;\r\n\t\t\t\tif (property in task) {\r\n\t\t\t\t\tvar resourceValue;\r\n\t\t\t\t\tif (!helpers.isArray(task[property])) {\r\n\t\t\t\t\t\tresourceValue = [task[property]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceValue = task[property];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thelpers.forEach(resourceValue, function(value) {\r\n\t\t\t\t\t\tvar resourceValue = (value && value.resource_id) ? value.resource_id : value;\r\n\r\n\t\t\t\t\t\tif (matchingResources[resourceHashFunction(resourceValue)]) {\r\n\t\t\t\t\t\t\tres.push(task);\r\n\t\t\t\t\t\t}else if(!singleResourceCacheBuilt){\r\n\r\n\t\t\t\t\t\t\tvar key = getCacheKey(value, property);\r\n\t\t\t\t\t\t\tif(!resourceTaskCache[key]){\r\n\t\t\t\t\t\t\t\tresourceTaskCache[key] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresourceTaskCache[key].push(task);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsingleResourceCacheBuilt = true;\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction selectAssignments(resourceId, taskId, result){\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar owners = [];\r\n\t\tif (gantt.getDatastore(\"task\").exists(taskId)) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\towners = task[property] || [];\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(owners)) {\r\n\t\t\towners = [owners];\r\n\t\t}\r\n\t\tfor (var i = 0; i < owners.length; i++) {\r\n\t\t\tif (owners[i].resource_id == resourceId) {\r\n\t\t\t\tresult.push({task_id: task.id, resource_id:owners[i].resource_id, value:owners[i].value});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceAssignments(resourceId, taskId){\r\n\t\t// resource assignment as an independent module:\r\n\t\t// {taskId:, resourceId, value}\r\n\t\t// TODO: probably should add a separate datastore for these\r\n\t\tvar assignments = [];\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tif(taskId !== undefined){\r\n\t\t\tselectAssignments(resourceId, taskId, assignments);\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskBy(property, resourceId);\r\n\t\t\ttasks.forEach(function(task){\r\n\t\t\t\tselectAssignments(resourceId, task.id, assignments);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetTaskBy: getTaskBy,\r\n\t\tgetResourceAssignments: getResourceAssignments\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.getTaskBy;\r\n\tgantt.getResourceAssignments = methods.getResourceAssignments;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\t/**\r\n\t * these are placeholder functions that should be redefined by the user\r\n\t*/\r\n\tgantt.templates.histogram_cell_class = function(start_date, end_date, resource, tasks, assignments) {};\r\n\tgantt.templates.histogram_cell_label = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length + \"/3\";\r\n\t};\r\n\tgantt.templates.histogram_cell_allocated = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length / 3;\r\n\t};\r\n\tgantt.templates.histogram_cell_capacity = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks, assignments) {\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks, assignments) {\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt.getState().group_mode);\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tvar parts = code.split(\".\");\r\n\t\tvar currentNode = gantt.config.root_id;\r\n\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\tvar children = gantt.getChildren(currentNode);\r\n\t\t\tvar index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tfunction resetCache(){\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", resetCache);\r\n\tgantt.attachEvent(\"onBeforeParse\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", resetCache);\r\n\tgantt.attachEvent(\"onAfterSort\", resetCache);\r\n\r\n};\r\n","var global = require(\"../../utils/global\");\r\n\r\nfunction createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\tglobal.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, false);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"link\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","module.exports = function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./resources\"),\r\n\t\trequire(\"./resource_assignments\"),\r\n\t\trequire(\"./new_task_placeholder\"),\r\n\t\trequire(\"./auto_task_types\"),\r\n\t\trequire(\"./formatters\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};","import * as utils from \"../../utils/utils\";\r\n\r\nexport default class SimpleStorage {\r\n\tpublic static create = () : SimpleStorage => {\r\n\t\treturn new SimpleStorage();\r\n\t}\r\n\r\n\tprotected _storage: { [id: string]: any; };\r\n\r\n\tprotected constructor() {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic clear = (): void => {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic storeItem = (item: any): void => {\r\n\t\tthis._storage[item.id] = utils.copy(item);\r\n\t}\r\n\r\n\tpublic getStoredItem = (id: string): any => {\r\n\t\treturn this._storage[id] || null;\r\n\t}\r\n}","\r\nexport default function extendGantt(gantt: any, dp: any) {\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) {\r\n\t\t\treturn this.userdata[id][name];\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tif (!this.userdata[id]) {\r\n\t\t\tthis.userdata[id] = {};\r\n\t\t}\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n\r\n\tgantt._change_id = function(oldId, newId) {\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\tthis.changeLinkId(oldId, newId);\r\n\t\t} else {\r\n\t\t\tthis.changeTaskId(oldId, newId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._row_style = function(rowId, classname){\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!gantt.isTaskExists(rowId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst task = gantt.getTask(rowId);\r\n\t\ttask.$dataprocessor_class = classname;\r\n\t\tgantt.refreshTask(rowId);\r\n\t};\r\n\r\n\t// fake method for dataprocessor\r\n\tgantt._delete_task = function(rowId, node) {}; // tslint:disable-line\r\n\r\n\tgantt._sendTaskOrder = function(id, item){\r\n\t\tif (item.$drop_target) {\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\tthis._dp.setUpdated(id, true,\"order\");\r\n\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\tgantt.setDp();\r\n}","import * as helpers from \"../../utils/helpers\";\r\n\r\nexport default class DataProcessorEvents {\r\n\tprotected _dataProcessorHandlers: any[];\r\n\tprotected $gantt: any;\r\n\tprotected $dp: any;\r\n\r\n\tconstructor(gantt: any, dp: any) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$dp = dp;\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n\r\n\tattach() {\r\n\t\tconst dp = this.$dp;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tconst cascadeDelete = {};\r\n\r\n\t\tfunction clientSideDelete(id) {\r\n\t\t\tconst updated = dp.updatedRows.slice();\r\n\t\t\tlet clientOnly = false;\r\n\r\n\t\t\tfor (let i = 0; i < updated.length && !dp._in_progress[id]; i++) {\r\n\t\t\t\tif (updated[i] === id) {\r\n\t\t\t\t\tif (gantt.getUserData(id, \"!nativeeditor_status\") === \"inserted\") {\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task) {\r\n\t\t\tlet _links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\t_links = _links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\t_links = _links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn _links;\r\n\t\t}\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\r\n\t\t\t\t// gantt can be destroyed/reinitialized after dp.setUpdated\r\n\t\t\t\tif(gantt._sendTaskOrder){\r\n\t\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onBeforeTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (!gantt.config.cascade_delete) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.config.cascade_delete && cascadeDelete[id]) {\r\n\t\t\t\tconst dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tconst cascade = cascadeDelete[id];\r\n\t\t\t\tfor (const i in cascade.tasks) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.tasks[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor (const i in cascade.links) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.links[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif (dpMode !== \"off\") {\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\t\t\t}\r\n\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\r\n\t\t\tif (dp.updateMode !== \"off\" && !dp._tSend) {\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onRowDragEnd\", function(id, target) { // tslint:disable-line\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tlet tasks = null;\r\n\t\tlet links = null;\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onTaskIdChange\", function(oldId, newId) { // tslint:disable-line\r\n\t\t\tif (!dp._waitMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst children = gantt.getChildren(newId);\r\n\t\t\tif (children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tconst ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = this.getTask(newId);\r\n\t\t\tconst itemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif (itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tconst link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function() {\r\n\t\t\tif (tasks || links) {\r\n\t\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\t\tfor (const id in tasks) {\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const id in links) {\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet url = this._serverProcessor;\r\n\t\t\tif (this._tMode === \"REST-JSON\" || this._tMode === \"REST\") {\r\n\t\t\t\tconst mode = this._ganttMode;\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t// editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t} else {\r\n\t\t\t\tconst pluralizedMode = this._ganttMode + \"s\";\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + pluralizedMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", function insertCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tconst methods = {\r\n\t\t\t\tadd: gantt.addTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.add = gantt.addLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdata.id = id;\r\n\t\t\tmethods.add.call(gantt, data);\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"updateCallback\", function updateCallback(upd, id) {\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tif (!gantt.isTaskExists(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst objData = gantt.getTask(id);\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tlet property = data[key];\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"id\":\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tcase \"start_date\":\r\n\t\t\t\t\tcase \"end_date\":\r\n\t\t\t\t\t\tproperty = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date(property) : gantt.templates.parse_date(property);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"duration\":\r\n\t\t\t\t\t\tobjData.end_date = gantt.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tobjData[key] = property;\r\n\t\t\t}\r\n\t\t\tgantt.updateTask(id);\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\t\tdp.attachEvent(\"deleteCallback\", function deleteCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst methods = {\r\n\t\t\t\tdelete: gantt.deleteTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.delete = gantt.deleteLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\tmethods.delete.call(gantt, id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdetach() {\r\n\t\thelpers.forEach(this._dataProcessorHandlers, (e) => {\r\n\t\t\tthis.$gantt.detachEvent(e);\r\n\t\t});\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n}\r\n","import * as eventable from \"../../utils/eventable\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport DataProcessorEvents from \"./data_processor_events\";\r\nimport extendGantt from \"./extend_gantt\";\r\nimport SimpleStorage from \"./simple_storage\";\r\n\r\nexport interface DataProcessor { // tslint:disable-line\r\n\t$gantt: any;\r\n\tdetachAllEvents: any;\r\n\tattachEvent: any;\r\n\tcallEvent: any;\r\n\r\n\tserverProcessor: string;\r\n\taction_param: string;\r\n\tupdatedRows: any[];\r\n\tautoUpdate: boolean;\r\n\tupdateMode: string;\r\n\tmessages: any[];\r\n\tstyles: object;\r\n\tdnd: any;\r\n}\r\n\r\nexport function createDataProcessor(config: any) {\r\n\tlet router;\r\n\tlet tMode;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if (config.hasOwnProperty(\"link\") && config.hasOwnProperty(\"task\")) {\r\n\t\trouter = config;\r\n\t}\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\tconst gantt = this; // tslint:disable-line\r\n\tconst dp = new DataProcessor(config.url);\r\n\tdp.init(gantt);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter\r\n\t}, config.batchUpdate);\r\n\treturn dp;\r\n}\r\n\r\nexport class DataProcessor {\r\n\tpublic modes: object;\r\n\tpublic serverProcessor: string;\r\n\tpublic action_param: string; // tslint:disable-line\r\n\tpublic updatedRows: any[];\r\n\tpublic autoUpdate: boolean;\r\n\tpublic updateMode: string;\r\n\tpublic messages: any[];\r\n\tpublic styles: object;\r\n\tpublic dnd: any;\r\n\r\n\tprotected _tMode: string;\r\n\tprotected _headers: any;\r\n\tprotected _payload: any;\r\n\tprotected _postDelim: string;\r\n\tprotected _waitMode: number;\r\n\tprotected _in_progress: object; // tslint:disable-line\r\n\tprotected _invalid: object;\r\n\tprotected _storage: SimpleStorage;\r\n\tprotected _tSend: boolean;\r\n\tprotected _serializeAsJson: boolean;\r\n\tprotected _router: any;\r\n\tprotected _utf: boolean;\r\n\tprotected _methods: any[];\r\n\tprotected _user: any;\r\n\tprotected _uActions: object;\r\n\tprotected _needUpdate: boolean;\r\n\tprotected _ganttMode: \"task\"|\"link\";\r\n\tprotected _routerParametersFormat: \"parameters\"|\"object\";\r\n\r\n\tprotected _silent_mode: any; // tslint:disable-line\r\n\tprotected _updateBusy: any;\r\n\tprotected _serverProcessor: any;\r\n\tprotected _initialized: boolean;\r\n\r\n\tconstructor(serverProcessorURL?) {\r\n\t\tthis.serverProcessor = serverProcessorURL;\r\n\t\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\t\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.updateMode = \"cell\";\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis._postDelim = \"_\";\r\n\t\tthis._routerParametersFormat = \"parameters\";\r\n\r\n\t\tthis._waitMode = 0;\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._storage = SimpleStorage.create();\r\n\t\tthis._invalid = {};\r\n\t\tthis.messages = [];\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated: \"font-weight:bold;\",\r\n\t\t\tinserted: \"font-weight:bold;\",\r\n\t\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\t\terror: \"color:red;\",\r\n\t\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t\t};\r\n\t\tthis.enableUTFencoding(true);\r\n\t\teventable(this);\r\n\t}\r\n\r\n\tsetTransactionMode(mode:any, total?:any) {\r\n\t\tif (typeof mode === \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\tthis._tSend = !!total;\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\r\n\t\t}else{\r\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\r\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t}\r\n\r\n\tescape(data:any) {\r\n\t\tif (this._utf) {\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\t} else {\r\n\t\t\treturn escape(data);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: allows to set escaping mode\r\n\t * @param: true - utf based escaping, simple - use current page encoding\r\n\t * @type: public\r\n\t */\r\n\tenableUTFencoding(mode:boolean) {\r\n\t\tthis._utf = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: get state of updating\r\n\t * @returns:   true - all in sync with server, false - some items not updated yet.\r\n\t * @type: public\r\n\t */\r\n\tgetSyncState() {\r\n\t\treturn !this.updatedRows.length;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: set if rows should be send to server automatically\r\n\t * @param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t * @type: public\r\n\t */\r\n\tsetUpdateMode(mode: string, dnd: any) {\r\n\t\tthis.autoUpdate = (mode === \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t}\r\n\r\n\tignore(code: any, master: any) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: mark row as updated/normal. check mandatory fields, initiate autoupdate (if turned on)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @param: state - true for \"updated\", false for \"not updated\"\r\n\t * @param: mode - update mode name\r\n\t * @type: public\r\n\t */\r\n\tsetUpdated(rowId:number|string, state: boolean, mode?: string) {\r\n\t\tif (this._silent_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tconst existing = this.$gantt.getUserData(rowId, this.action_param);\r\n\t\tif (existing && mode === \"updated\") {\r\n\t\t\tmode = existing;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); // clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$gantt.setUserData(rowId, this.action_param, mode);\r\n\t\t\tif (this._in_progress[rowId]) {\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$gantt.setUserData(rowId, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) {\r\n\t\t\tthis.sendData(rowId);\r\n\t\t}\r\n\t}\r\n\r\n\tmarkRow(id: number | string, state: boolean, mode: string) {\r\n\t\tlet str = \"\";\r\n\t\tconst invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t// default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + \" \" + str;\r\n\r\n\t\t\tthis.$gantt[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (let i = 0; i < invalid.details.length; i++) {\r\n\t\t\t\t\tif (invalid.details[i]) {\r\n\t\t\t\t\t\tthis.$gantt[this._methods[1]](id, i, str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetActionByState(state: string):string {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\r\n\t\t// reorder\r\n\t\treturn \"update\";\r\n\t}\r\n\r\n\tgetState(id: number | string) {\r\n\t\treturn this.$gantt.getUserData(id, this.action_param);\r\n\t}\r\n\r\n\tis_invalid(id: number | string) {\r\n\t\treturn this._invalid[id];\r\n\t}\r\n\r\n\tset_invalid(id: number | string, mode: any, details?) {\r\n\t\tif (details) {\r\n\t\t\tmode = {\r\n\t\t\t\tvalue: mode,\r\n\t\t\t\tdetails,\r\n\t\t\t\ttoString: function() { // tslint:disable-line\r\n\t\t\t\t\treturn this.value.toString();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._invalid[id] = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: check mandatory fields and verify values of cells, initiate update (if specified). Can be redefined in order to provide custom validation\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @type: public\r\n\t */\r\n\t// tslint:disable-next-line\r\n\tcheckBeforeUpdate(rowId: number | string) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: send row(s) values to server\r\n\t * @param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t * @type: public\r\n\t */\r\n\tsendData(rowId?: any) {\r\n\t\tif (this.$gantt.editStop) {\r\n\t\t\tthis.$gantt.editStop();\r\n\t\t}\r\n\r\n\r\n\t\tif (typeof rowId === \"undefined\" || this._tSend) {\r\n\t\t\treturn this.sendAllData();\r\n\t\t}\r\n\t\tif (this._in_progress[rowId]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t}\r\n\r\n\tserialize(data: any, id: any) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tif (typeof id !== \"undefined\") {\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\t} else {\r\n\t\t\tconst stack = [];\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this._postDelim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key) {\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\t}\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t}\r\n\r\n\tserialize_one(data: any, pref: string) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tconst stack = [];\r\n\t\tlet serialized = \"\";\r\n\t\tfor (const key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key === \"id\" ||\r\n\t\t\t\t\tkey == this.action_param) && // tslint:disable-line\r\n\t\t\t\t\tthis._tMode === \"REST\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t}\r\n\r\n\tsendAllData() {\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tlet valid: any = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfindRow(pattern: any) {\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tif (pattern == this.updatedRows[i]) { // tslint:disable-line\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: define custom actions\r\n\t * @param: name - name of action, same as value of action attribute\r\n\t * @param: handler - custom function, which receives a XMl response content for action\r\n\t * @type: private\r\n\t */\r\n\tdefineAction(name: string, handler: any) {\r\n\t\tif (!this._uActions) {\r\n\t\t\tthis._uActions = {};\r\n\t\t}\r\n\t\tthis._uActions[name] = handler;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t * @param: sid - id of item before update\r\n\t * @param: tid - id of item after up0ate\r\n\t * @param: action - action name\r\n\t * @type: public\r\n\t * @topic: 0\r\n\t */\r\n\tafterUpdateCallback(sid: number | string, tid: number | string, action: string, btag: any, ganttMode: string) {\r\n\t\tif(!this.$gantt){\r\n\t\t\t// destructor has been called before the callback\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setGanttMode(ganttMode);\r\n\r\n\t\tconst marker = sid;\r\n\t\tconst correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tconst originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) { // tslint:disable-line\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$gantt[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.$gantt[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$gantt.getUserData(sid, this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: response from server\r\n\t * @param: xml - XMLLoader object with response XML\r\n\t * @type: private\r\n\t */\r\n\tafterUpdate(that: any, xml: any, id?:any) {\r\n\t\tlet _xml;\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t_xml = arguments[1];\r\n\t\t} else {\r\n\t\t\t// old dataprocessor\r\n\t\t\t_xml = arguments[4];\r\n\t\t}\r\n\t\tlet mode = this.getGanttMode();\r\n\t\tconst reqUrl = _xml.filePath || _xml.url;\r\n\r\n\t\tif (this._tMode !== \"REST\" && this._tMode !== \"REST-JSON\") {\r\n\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") !== -1) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setGanttMode(mode);\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\t// try to use json first\r\n\t\tlet tag;\r\n\r\n\t\ttry {\r\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t} catch (e) {\r\n\r\n\t\t\t// empty response also can be processed by json handler\r\n\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\ttag = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (tag) {\r\n\t\t\tconst action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\tconst sid = tag.sid || id[0];\r\n\t\t\tconst tid = tag.tid || id[0];\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag, mode);\r\n\t\t\tthat.finalizeUpdate();\r\n\t\t\tthis.setGanttMode(mode);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// xml response\r\n\t\tconst top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\t\tconst atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < atag.length; i++) {\r\n\t\t\tconst btag = atag[i];\r\n\t\t\tconst action = btag.getAttribute(\"type\");\r\n\t\t\tconst sid = btag.getAttribute(\"sid\");\r\n\t\t\tconst tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag, mode);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t}\r\n\r\n\tcleanUpdate(id: any[]) {\r\n\t\tif (id) {\r\n\t\t\tfor (let i = 0; i < id.length; i++) {\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfinalizeUpdate() {\r\n\t\tif (this._waitMode) {\r\n\t\t\tthis._waitMode--;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: initializes data-processor\r\n\t * @param: gantt - dhtmlxGantt object to attach this data-processor to\r\n\t * @type: public\r\n\t */\r\n\tinit(gantt: any) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$gantt = gantt;\r\n\t\tif (this.$gantt._dp_init) {\r\n\t\t\tthis.$gantt._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tthis._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\t\textendGantt(this.$gantt, this);\r\n\t\tconst dataProcessorEvents = new DataProcessorEvents(this.$gantt, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this.setGanttMode;\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$gantt._dp;\r\n\t\t\tdelete this.$gantt._change_id;\r\n\t\t\tdelete this.$gantt._row_style;\r\n\t\t\tdelete this.$gantt._delete_task;\r\n\t\t\tdelete this.$gantt._sendTaskOrder;\r\n\t\t\tdelete this.$gantt;\r\n\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$gantt.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\t}\r\n\r\n\tsetOnAfterUpdate(handler) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", handler);\r\n\t}\r\n\r\n\tsetOnBeforeUpdateHandler(handler) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", handler);\r\n\t}\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._needUpdate = false;\r\n\r\n\t\tthis._updateBusy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", this.afterAutoUpdate); // arguments sid, action, tid, xml_node;\r\n\r\n\t\tthis.attachEvent(\"onFullSync\", this.fullSync);\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.loadUpdate();\r\n\t\t}, interval);\r\n\t}\r\n\r\n\t/* process updating request response\r\n\t\tif status == collision version is deprecated\r\n\t\tset flag for autoupdating immediately\r\n\t*/\r\n\tafterAutoUpdate(sid, action, tid, xml_node) { // tslint:disable-line\r\n\t\tif (action === \"collision\") {\r\n\t\t\tthis._needUpdate = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync() {\r\n\t\tif (this._needUpdate) {\r\n\t\t\tthis._needUpdate = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates(url, callback) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._updateBusy) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthis._updateBusy = true;\r\n\t\t}\r\n\r\n\t\tajax.get(url, callback);\r\n\r\n\t}\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate() {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tconst version = this.$gantt.getUserData(0, \"version\");\r\n\t\tlet url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, (xml) => {\r\n\t\t\tconst vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tthis.$gantt.setUserData(0, \"version\", this._getXmlNodeValue(vers[0]));\r\n\r\n\t\t\tconst updates = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (updates.length) {\r\n\t\t\t\tthis._silent_mode = true;\r\n\r\n\t\t\t\tfor (let i = 0; i < updates.length; i++) {\r\n\t\t\t\t\tconst status = updates[i].getAttribute(\"status\");\r\n\t\t\t\t\tconst id = updates[i].getAttribute(\"id\");\r\n\t\t\t\t\tconst parent = updates[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateBusy = false;\r\n\t\t});\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis._storage.clear();\r\n\t\tthis._storage = null;\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t}\r\n\r\n\tsetGanttMode(mode) {\r\n\t\tif (mode === \"tasks\") {\r\n\t\t\tmode = \"task\";\r\n\t\t} else if (mode === \"links\") {\r\n\t\t\tmode = \"link\";\r\n\t\t}\r\n\r\n\t\tconst modes = this.modes || {};\r\n\t\tconst ganttMode = this.getGanttMode();\r\n\t\tif (ganttMode) {\r\n\t\t\tmodes[ganttMode] = {\r\n\t\t\t\t_in_progress : this._in_progress,\r\n\t\t\t\t_invalid: this._invalid,\r\n\t\t\t\t_storage: this._storage,\r\n\t\t\t\tupdatedRows : this.updatedRows\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet newState = modes[mode];\r\n\t\tif (!newState) {\r\n\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t_in_progress : {},\r\n\t\t\t\t_invalid : {},\r\n\t\t\t\t_storage : SimpleStorage.create(),\r\n\t\t\t\tupdatedRows : []\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._in_progress = newState._in_progress;\r\n\t\tthis._invalid = newState._invalid;\r\n\t\tthis._storage = newState._storage;\r\n\t\tthis.updatedRows = newState.updatedRows;\r\n\t\tthis.modes = modes;\r\n\t\tthis._ganttMode = mode;\r\n\t}\r\n\tgetGanttMode():string {\r\n\t\treturn this._ganttMode;\r\n\t}\r\n\r\n\tstoreItem(item) {\r\n\t\tthis._storage.storeItem(item);\r\n\t}\r\n\r\n\turl(url: string) {\r\n\t\tthis.serverProcessor = this._serverProcessor = url;\r\n\t}\r\n\r\n\tprotected _beforeSendData(data: any, rowId: any) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._sendData(data, rowId);\r\n\t}\r\n\r\n\tprotected _serializeAsJSON(data: any) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tconst copy = utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t}\r\n\r\n\tprotected _applyPayload(url: string) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._payload) {\r\n\t\t\tfor (const key in this._payload) {\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\r\n\t// clear extra info from the data in order not to change the request format\r\n\tprotected _cleanupArgumentsBeforeSend(dataToSend: any) {\r\n\t\tlet processedData;\r\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\r\n\t\t\tprocessedData = {};\r\n\t\t\tfor(const i in dataToSend) {\r\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t}\r\n\t\treturn processedData;\r\n\t}\r\n\tprotected _cleanupItemBeforeSend(updatedItem: any) {\r\n\t\tlet output = null;\r\n\t\tif(updatedItem){\r\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\r\n\t\t\t\toutput = {};\r\n\t\t\t\toutput.id = updatedItem.id;\r\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\r\n\t\t\t}else{\r\n\t\t\t\toutput = updatedItem;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprotected _sendData(dataToSend: any, rowId?: any) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tconst taskState = this.getState(rowId);\r\n\t\t\tconst taskAction = this.getActionByState(taskState);\r\n\t\t\tconst ganttMode = this.getGanttMode();\r\n\t\t\tconst _onResolvedCreateUpdate = (tag) => {\r\n\t\t\t\tlet action = taskState || \"updated\";\r\n\t\t\t\tlet sid = rowId;\r\n\t\t\t\tlet tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\taction = tag.action || taskState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tthis.afterUpdateCallback(sid, tid, action, tag, ganttMode);\r\n\t\t\t};\r\n\r\n\t\t\tlet actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tif(this._routerParametersFormat === \"object\"){\r\n\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\tentity: ganttMode,\r\n\t\t\t\t\t\taction: taskAction,\r\n\t\t\t\t\t\tdata: dataToSend,\r\n\t\t\t\t\t\tid: rowId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tactionPromise = this._router(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactionPromise = this._router(ganttMode, taskAction, dataToSend, rowId);\r\n\t\t\t\t}\r\n\t\t\t} else if (this._router[ganttMode] instanceof Function) {\r\n\t\t\t\tactionPromise = this._router[ganttMode](taskAction, dataToSend, rowId);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (taskState) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch((error) => {\r\n\t\t\t\t\t\tif(error && error.action){\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet queryParams: any;\r\n\t\tqueryParams = {\r\n\t\t\tcallback: (xml) => {\r\n\t\t\t\tconst ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.afterUpdate(this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tconst urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.$gantt.getUserData(0, \"version\")].join(\"&\")) : \"\");\r\n\t\tlet url: any = this._applyPayload(urlParams);\r\n\t\tlet data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tconst preprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t\t\tfor (const key in preprocessedData) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = preprocessedData[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t}\r\n\r\n\tprotected _forEachUpdatedRow(code: any) {\r\n\t\tconst updatedRows = this.updatedRows.slice();\r\n\t\tfor (let i = 0; i < updatedRows.length; i++) {\r\n\t\t\tconst rowId = updatedRows[i];\r\n\t\t\tif (this.$gantt.getUserData(rowId, this.action_param)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _setDefaultTransactionMode() {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t}\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\tprotected _getXmlNodeValue(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tprotected _getAllData() {\r\n\t\tconst out = {};\r\n\t\tlet hasOne = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thasOne = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn hasOne ? out : null;\r\n\t}\r\n\r\n\tprotected _prepareDate(value: Date) : string {\r\n\t\treturn this.$gantt.defined(this.$gantt.templates.xml_format) ? this.$gantt.templates.xml_format(value) : this.$gantt.templates.format_date(value);\r\n\t}\r\n\r\n\tprotected _prepareArray(value: any[], traversedObjects: object[]) : any[] {\r\n\t\ttraversedObjects.push(value);\r\n\r\n\t\treturn value.map((item) => {\r\n\t\t\tif(helpers.isDate(item)){\r\n\t\t\t\treturn this._prepareDate(item);\r\n\t\t\t} else if (Array.isArray(item) && !helpers.arrayIncludes(traversedObjects, item)){\r\n\t\t\t\treturn this._prepareArray(item, traversedObjects);\r\n\t\t\t} else if (item && typeof item === \"object\" && !helpers.arrayIncludes(traversedObjects, item)) {\r\n\t\t\t\treturn this._prepareObject(item, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _prepareObject(rawItem: any, traversedObjects: object[]) : any {\r\n\t\tconst processedItem = {};\r\n\t\ttraversedObjects.push(rawItem);\r\n\r\n\t\tfor (const key in rawItem) {\r\n\t\t\tif (key.substr(0, 1) === \"$\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst value = rawItem[key];\r\n\t\t\tif (helpers.isDate(value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareDate(value);\r\n\t\t\t} else if(value === null) {\r\n\t\t\t\tprocessedItem[key] = \"\";\r\n\t\t\t} else if (Array.isArray(value) && !helpers.arrayIncludes(traversedObjects, value)){\r\n\t\t\t\tprocessedItem[key] = this._prepareArray(value, traversedObjects);\r\n\t\t\t} else if (value && typeof value === \"object\" && !helpers.arrayIncludes(traversedObjects, value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareObject(value, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedItem[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected _prepareDataItem(rawItem: any): any {\r\n\t\tconst processedItem = this._prepareObject(rawItem, []);\r\n\r\n\t\tprocessedItem[this.action_param] = this.$gantt.getUserData(rawItem.id, this.action_param);\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected getStoredItem(id){\r\n\t\treturn this._storage.getStoredItem(id);\r\n\t}\r\n\r\n\tprotected _getRowData(id) {\r\n\t\tlet dataItem;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tif (this.getGanttMode() === \"task\") {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getTask(id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getLink(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = this.getStoredItem(id);\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = { id };\r\n\t\t}\r\n\r\n\t\treturn this._prepareDataItem(dataItem);\r\n\t}\r\n}","var DataProcessor = require(\"./data_processor\");\r\nmodule.exports = {\r\n\tDEPRECATED_api: function(server) {\r\n\t\treturn new (DataProcessor.DataProcessor)(server);\r\n\t},\r\n\tcreateDataProcessor: DataProcessor.createDataProcessor,\r\n\tgetDataProcessorModes: DataProcessor.getAvailableModes\r\n};","var isHeadless = require(\"../../utils/is_headless\");\r\n\r\nvar storeRenderCreator = function(name, gantt){\r\n\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar allData = null;\r\n\r\n\t\t\tvar loadedRanges = {};\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\tvar layer = renderers[i];\r\n\t\t\t\tvar layerData;\r\n\t\t\t\tif(layer.get_visible_range){\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tvar key = range.start + \" - \" + range.end;\r\n\t\t\t\t\tif(loadedRanges[key]){\r\n\t\t\t\t\t\tlayerData = loadedRanges[key];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlayerData = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t\t\tloadedRanges[key] = layerData;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!allData){\r\n\t\t\t\t\t\tallData = store.getVisibleItems();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlayerData = allData;\r\n\t\t\t\t}\r\n\t\t\t\trenderers[i].render_items(layerData);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateItems: function(layer) {\r\n\t\t\tif(layer.update_items){\r\n\t\t\t\tvar data;\r\n\t\t\t\tif(layer.get_visible_range){\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tdata = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdata = store.getVisibleItems();\r\n\t\t\t\t}\r\n\t\t\t\tlayer.update_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\trenderer.onUpdateRequest = function(layer){\r\n\t\t\t\titemRepainter.updateItems(layer);\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t}else{\r\n\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t}\r\n\t});\r\n\r\n\tstore.attachEvent(\"onAfterRefreshAll\", function(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer && !skipRepaint(gantt)){\r\n\t\t\titemRepainter.renderItems(renderer);\r\n\t\t}\r\n\t});\r\n\tstore.attachEvent(\"onAfterRefreshItem\", function(id){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\titemRepainter.renderItem(id, renderer);\r\n\t\t}\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};","function createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\t\r\n\tfunction unselect(id){\r\n\t\tselectedId = null;\r\n\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t}\r\n\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tunselect.call(this, id);\r\n\t\t}\r\n\r\n\t\tif(selectedId && this.eachItem){\r\n\t\t\tthis.eachItem(function(subItem){\r\n\t\t\t\tif(subItem.id == selectedId){\r\n\t\t\t\t\tunselect.call(this, subItem.id);\r\n\t\t\t\t}\r\n\t\t\t}, id);\r\n\t\t}\r\n\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tisSelected: function(id){\r\n\t\t\treturn id == selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tunselect.call(this, id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;","var utils = require(\"../../utils/utils\");\r\nvar {replaceValidZeroId} = require(\"../../utils/helpers\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\tif(!this.$data || !this.$data.tasksStore){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\t//GS-761: assert unique ID\r\n\t\tif (this.isTaskExists(item.id)){\r\n\t\t\tvar task = this.getTask(item.id);\r\n\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t}\r\n\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = this.config.root_id;\r\n\t\tthis.setParent(item, parent);\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tparent = replaceValidZeroId(parent, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tthis.callEvent(\"onAfterSort\", [field, desc, parent]);\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\nvar isHeadless = require(\"../../utils/is_headless\");\r\nvar {replaceValidZeroId} = require(\"../../utils/helpers\");\r\n\r\n// TODO: remove workaround for mixup with es5 and ts imports\r\nif(DataStore.default){\r\n\tDataStore = DataStore.default;\r\n}\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif (config) {\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t\tconfig.copyOnParse = function(){ return self.config.deepcopy_on_parse; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif (config.name) {\r\n\t\t\tvar servicePrefix = \"datastore:\";\r\n\r\n\t\t\tthis.$services.dropService(servicePrefix + config.name);\r\n\t\t\tthis.$services.setService(servicePrefix + config.name, function() { return store; } );\r\n\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif (!storeList) {\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function() { return storeList; });\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t} else if (storeList.indexOf(config.name) < 0) {\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t}\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\t_getDatastores: getDatastores,\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState;\r\n\t\tif(!isHeadless(this)){\r\n\t\t\tscrollState = this.getScrollState();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(this.config.preserve_scroll && !isHeadless(this) && (scrollState.x || scrollState.y)){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar self = this;\r\n\t\tfunction refreshLinks(){\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState(\"tasksDnd\").drag_id || refresh_links === false);// do quick refresh during drag and drop\r\n\t\t\trefreshLinks();\r\n\t\t}else if(this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId)) && !this._bulk_dnd){\r\n\t\t\tthis.refreshTask(this.getParent(taskId));\r\n\r\n\t\t\tvar hasSplitParent = false;\r\n\t\t\tthis.eachParent(function(parent){\r\n\t\t\t\tif(hasSplitParent || this.isSplitTask(parent)){\r\n\t\t\t\t\thasSplitParent = true;\r\n\t\t\t\t}\r\n\t\t\t}, taskId);\r\n\t\t\tif(hasSplitParent){\r\n\t\t\t\trefreshLinks();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState(\"tasksDnd\").drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (id){\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tisSelectedTask: function(id){\r\n\t\treturn this.$data.tasksStore.isSelected(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function() { return gantt.config.root_id; },\r\n\t\tinitItem: utils.bind(_init_task, gantt),\r\n\t\tgetConfig: function() { return gantt.config; }\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\ttasksStore.destructor();\r\n\t\tlinksStore.destructor();\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(gantt.isLinkExists(link.id) || link.id === \"predecessor_generated\"){\r\n\t\t\t// link was already added into gantt\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar taskLinks = source.$source;\r\n\t\tfor (var i = 0; i < taskLinks.length; i++) {\r\n\t\t\tvar existingLink = gantt.getLink(taskLinks[i]);\r\n\r\n\t\t\tvar sourceMatch = link.source == existingLink.source;\r\n\t\t\tvar targetMatch = link.target == existingLink.target;\r\n\t\t\tvar typeMatch = link.type == existingLink.type;\r\n\r\n\t\t\t// prevent creating duplicated links from the UI\r\n\t\t\tif (sourceMatch && targetMatch && typeMatch) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\titem.$local_index = gantt.getTaskIndex(item.id);\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task) {\r\n\t\tif (gantt.config.show_tasks_outside_timescale) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tif(gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tif (!task.$source) task.$source = [];\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tif (!task.$target) task.$target = [];\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tif(gantt.$layout){\r\n\t\t\t\tgantt.$layout.resize();\r\n\t\t\t}\r\n\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"parse_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"parse_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//task.$calculate_duration = false;\r\n\t\t}\r\n\r\n\t\ttask.progress = Number(task.progress) || 0;\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\r\n\t\tvar originalTask = this.$data.tasksStore.getItem(task.id);\r\n\t\tif (originalTask && !utils.defined(task.open)) {\r\n\t\t\t// if a task with the same id is already in the gantt and the new object doesn't specify the `open` state -\r\n\t\t\t// restore the `open` state we already have in the chart\r\n\t\t\ttask.$open = originalTask.$open;\r\n\t\t}\r\n\r\n\t\tif (task.parent === undefined) {\r\n\t\t\ttask.parent = this.config.root_id;\r\n\t\t}\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2018 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.4\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nfunction _drainQueue(queue) {\n    while (queue.length() > 0) {\n        _drainQueueStep(queue);\n    }\n}\n\nfunction _drainQueueStep(queue) {\n    var fn = queue.shift();\n    if (typeof fn !== \"function\") {\n        fn._settlePromises();\n    } else {\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n}\n\nAsync.prototype._drainQueues = function () {\n    _drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    _drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar es5 = _dereq_(\"./es5\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                es5.defineProperty(\n                    eventData, \"promise\", {value: event.promise});\n                es5.defineProperty(eventData, \"reason\", {value: event.reason});\n                var domEvent = new CustomEvent(name.toLowerCase(), eventData);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n        this._dereferenceTrace();\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.4\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var receiver = new FakeConstructor();\n    function ic() {\n        return typeof receiver.foo;\n    }\n    ic();\n    ic();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version;\n    if (process.versions && process.versions.node) {    \n        version = process.versions.node.split(\".\").map(Number);\n    } else if (process.version) {\n        version = process.version.split(\".\").map(Number);\n    }\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","module.exports = require(\"bluebird\");","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tvar provider = stateProviders[name];\r\n\t\tif(provider){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tvar format_date = d(c.xml_date || c.date_format, c.server_utc);\r\n\t\tvar parse_date = date.str_to_date(c.xml_date || c.date_format, c.server_utc);\r\n\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_format: undefined, // deprecated\r\n\t\t\tformat_date: format_date,\r\n\r\n\t\t\txml_date: undefined, // deprecated\r\n\t\t\tparse_date: parse_date,\r\n\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_end_date: function (date) {\r\n\t\t\t\treturn gantt.templates.task_date(date);\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttimeline_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item, column) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date, column);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_end_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","\r\n\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\nvar global = require(\"../../utils/global\");\r\nvar dom_helpers = require(\"../ui/utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tvar lastDown = 0;\r\n\t\tvar eventParams = {passive: false};\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.preventDefault && config.selector && dom_helpers.closest(e.target, config.selector)){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (gantt.config.touch && e.timeStamp && e.timeStamp - lastDown < 300) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tif(gantt.getState().lightbox){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this), eventParams);\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this), eventParams);\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tutils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (this.config.started && utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dndActive = mousemove(e);\r\n\r\n\t\t\t\tif (dndActive) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tif (e && e.preventDefault && e.cancelable){//e.cancelable condition - because navigator.vibrate is blocked by Chrome\r\n\t\t\t\t\t\t\te.preventDefault();//Cancel default action on DND\r\n\t\t\t\t\t\t} //Cancel default action on DND\r\n\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\t// just suppress the exception, nothing needed to be done here\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//e.cancelBubble = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dndActive;\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || document.body;\r\n\r\n\t\t\tvar eventParams = {passive: false};\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(mousemoveContainer, inputMethod.move, limited_mousemove, eventParams);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup, eventParams);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\t\t\tgantt.event(mousemoveContainer, inputMethod.move, limited_mousemove, eventParams);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup, eventParams);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || document.body;\r\n\t\t\tmousemoveContainer.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(global.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (global.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tif (this.config && this.config.started) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return false;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\t// GS-1279 Gantt crashes on Mobile Firefox after starting to create a link and moving finger outisde the page.\r\n\t\t\t\tif (e.targetTouches && !source.target) return;\r\n\t\t\t\t\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tthis.config.started = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\treturn (date) => {\r\n\t\treturn format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase \"%d\": return utc ? gantt.date.to_fixed(date.getUTCDate()) : gantt.date.to_fixed(date.getDate());\r\n\t\t\t\tcase \"%m\": return utc ? gantt.date.to_fixed((date.getUTCMonth() + 1)) : gantt.date.to_fixed((date.getMonth() + 1));\r\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\r\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\r\n\t\t\t\tcase \"%y\": return utc ? gantt.date.to_fixed(date.getUTCFullYear() % 100) : gantt.date.to_fixed(date.getFullYear() % 100);\r\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\r\n\t\t\t\tcase \"%D\": return utc ? gantt.locale.date.day_short[date.getUTCDay()] : gantt.locale.date.day_short[date.getDay()];\r\n\t\t\t\tcase \"%l\": return utc ? gantt.locale.date.day_full[date.getUTCDay()] : gantt.locale.date.day_full[date.getDay()];\r\n\t\t\t\tcase \"%M\": return utc ? gantt.locale.date.month_short[date.getUTCMonth()] : gantt.locale.date.month_short[date.getMonth()];\r\n\t\t\t\tcase \"%F\": return utc ? gantt.locale.date.month_full[date.getUTCMonth()] : gantt.locale.date.month_full[date.getMonth()];\r\n\t\t\t\tcase \"%h\": return utc ? gantt.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : gantt.date.to_fixed((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\r\n\t\t\t\tcase \"%H\": return utc ? gantt.date.to_fixed(date.getUTCHours()) : gantt.date.to_fixed(date.getHours());\r\n\t\t\t\tcase \"%i\": return utc ? gantt.date.to_fixed(date.getUTCMinutes()) : gantt.date.to_fixed(date.getMinutes());\r\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\r\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\r\n\t\t\t\tcase \"%s\": return utc ? gantt.date.to_fixed(date.getUTCSeconds()) : gantt.date.to_fixed(date.getSeconds());\r\n\t\t\t\tcase \"%W\": return utc ? gantt.date.to_fixed(gantt.date.getUTCISOWeek(date)) : gantt.date.to_fixed(gantt.date.getISOWeek(date));\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\treturn (date: string) => {\r\n\t\tconst set: Array<string|number> = [0, 0, 1, 0, 0, 0];\r\n\t\tconst temp = date.match(/[a-zA-Z]+|[0-9]+/g);\r\n\t\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tswitch (mask[i]) {\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tset[2] = temp[i] as unknown as number || 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tset[1] = (temp[i] as unknown as number || 1) - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number * 1 + ((temp[i] as unknown as number) > 50 ? 1900 : 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\":\r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tset[3] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tset[4] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tset[3] = set[3] as number % 12 + ((temp[i] || \"\").toLowerCase() === \"am\" ? 0 : 12);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%s\":\r\n\t\t\t\t\tset[5] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_short_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_full_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (utc) {\r\n\t\t\treturn new Date(Date.UTC(\r\n\t\t\t\tset[0] as number,\r\n\t\t\t\tset[1] as number,\r\n\t\t\t\tset[2] as number,\r\n\t\t\t\tset[3] as number,\r\n\t\t\t\tset[4] as number,\r\n\t\t\t\tset[5] as number\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn new Date(\r\n\t\t\tset[0] as number,\r\n\t\t\tset[1] as number,\r\n\t\t\tset[2] as number,\r\n\t\t\tset[3] as number,\r\n\t\t\tset[4] as number,\r\n\t\t\tset[5] as number\r\n\t\t);\r\n\t};\r\n\r\n};\r\n\r\n\r\nconst cspVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default cspVersion;","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\tformat = format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\tswitch (a) {\r\n\t\t\tcase \"%d\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Date())+\"`;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Month()+1))+\"`;\r\n\t\t\tcase \"%j\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Date()+\"`;\r\n\t\t\tcase \"%n\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Month()+1)+\"`;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}FullYear()%100)+\"`;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}FullYear()+\"`;\r\n\t\t\tcase \"%D\":\r\n\t\t\t\treturn `\"+locale.date.day_short[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%l\":\r\n\t\t\t\treturn `\"+locale.date.day_full[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\treturn `\"+locale.date.month_short[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\treturn `\"+locale.date.month_full[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%h\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%g\":\r\n\t\t\t\treturn `\"+((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%G\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Hours()+\"`;\r\n\t\t\tcase \"%H\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Hours())+\"`;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Minutes())+\"`;\r\n\t\t\tcase \"%a\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;\r\n\t\t\tcase \"%A\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Seconds())+\"`;\r\n\t\t\tcase \"%W\":\r\n\t\t\t\treturn `\"+to_fixed(getISOWeek(date))+\"`;\r\n\t\t\tcase \"%w\":\r\n\t\t\t\treturn `\"+to_fixed(getWeek(date))+\"`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn a;\r\n\t\t}\r\n\t});\r\n\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst dateToStrFn = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", `return \"${format}\";`);\r\n\r\n\treturn (date: Date) => {\r\n\t\treturn dateToStrFn(date, gantt.date.to_fixed, gantt.locale, gantt.date.getISOWeek, gantt.date.getWeek);\r\n\t};\r\n};\r\n\r\n\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\tlet splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (let i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsplt += `set[2]=temp[${i}]||1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsplt += `set[1]=(temp[${i}]||1)-1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]*1+(temp[${i}]>50?1900:2000);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += `set[3]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += `set[4]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\":\r\n\t\t\t\tsplt += `set[3]=set[3]%12+((temp[${i}]||'').toLowerCase()=='am'?0:12);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\tsplt += `set[5]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_short_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_full_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tlet code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) { code = ` Date.UTC(${code})`; }\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst strToDateFn = new Function(\"date\", \"locale\", `var set=[0,0,1,0,0,0]; ${splt} return new Date(${code});`);\r\n\r\n\treturn (dateString) => {\r\n\t\treturn strToDateFn(dateString, gantt.locale);\r\n\t};\r\n};\r\n\r\nconst fastVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default fastVersion;","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nvar fastVersion = require(\"./date_parsers/fast_version\").default;\r\nvar cspCompliantVersion = require(\"./date_parsers/csp_compliant_version\").default;\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar canUseCsp = false;\r\n\t(function() {\r\n\t\ttry {\r\n\t\t\tnew Function(\"canUseCsp = false;\");\r\n\t\t} catch(e) {\r\n\t\t\tcanUseCsp = true;\r\n\t\t}\r\n\t})();\r\n\tfunction useCsp() {\r\n\t\tvar result = false;\r\n\t\tif (gantt.config.csp === \"auto\") {\r\n\t\t\tresult = canUseCsp;\r\n\t\t} else {\r\n\t\t\tresult = gantt.config.csp;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (modifiedDate, inc, originalDate) {\r\n\r\n\t\t\tmodifiedDate.setDate(modifiedDate.getDate() + inc);\r\n\t\t\tvar incCondition = inc >= 0;\r\n\t\t\tvar getHoursCondition = !originalDate.getHours() && modifiedDate.getHours(); //shift to yesterday on dst\r\n\t\t\tvar getDateCondition = (modifiedDate.getDate() <= originalDate.getDate() || modifiedDate.getMonth() < originalDate.getMonth() || modifiedDate.getFullYear() < originalDate.getFullYear());\r\n\t\t\tif (incCondition && getHoursCondition && getDateCondition){\r\n\t\t\t\tmodifiedDate.setTime(modifiedDate.getTime() + 60 * 60 * 1000 * (24 - modifiedDate.getHours()));\r\n\t\t\t}\r\n\t\t\treturn modifiedDate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.date_to_str(format, utc, gantt);\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.str_to_date(format, utc, gantt);\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (typeof(format) !== \"function\") {\r\n\t\t\t\t\tif (typeof(format) === \"string\") {\r\n\t\t\t\t\t\tif (format === \"parse_date\" || format === \"xml_date\") {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (date) {\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdate = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","export default function serialize(data: object | string) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tlet result = \"\";\r\n\r\n\tfor (const key in data) {\r\n\t\tlet serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = data[key];\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n","var env = require(\"../../utils/env\");\r\nvar global = require(\"../../utils/global\");\r\nvar serialize = require(\"./serialize\").default;\r\n\r\nfunction createConfig(method, args) {\r\n\tvar result = {\r\n\t\tmethod: method\r\n\t};\r\n\r\n\tif (args.length === 0) {\r\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\r\n\t}\r\n\tif (args.length === 1) {\r\n\t\tif (typeof args[0] === \"string\") {\r\n\t\t\tresult.url = args[0];\r\n\t\t\tresult.async = true;\r\n\t\t} else {\r\n\t\t\tresult.url = args[0].url;\r\n\t\t\tresult.async = (args[0].async || true);\r\n\t\t\tresult.callback = args[0].callback;\r\n\t\t\tresult.headers = args[0].headers;\r\n\t\t}\r\n\t\tif (method === \"POST\" || \"PUT\") {\r\n\t\t\tif (args[0].data) {\r\n\t\t\t\tif (typeof args[0].data !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[0].data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[0].data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult.url = args[0];\r\n\tswitch(method) {\r\n\t\tcase \"GET\":\r\n\t\tcase \"DELETE\":\r\n\t\t\tresult.callback = args[1];\r\n\t\t\tresult.headers = args[2];\r\n\t\tbreak;\r\n\t\tcase \"POST\":\r\n\t\tcase \"PUT\":\r\n\t\t\tif (args[1]) {\r\n\t\t\t\tif (typeof args[1] !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[1];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t\tresult.callback = args[2];\r\n\t\t\tresult.headers = args[3];\r\n\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (typeof DOMParser !== \"undefined\" && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (typeof global.ActiveXObject !== \"undefined\") {\r\n\t\t\t\tobj = new global.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\treturn this._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tgetSync: function(url, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"PUT\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tdel: function(url, onLoad, headers) {\r\n\t\t\t/**\r\n\t\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n\t\t\t * A payload within a DELETE request message has no defined semantics;\r\n\t\t\t * sending a payload body on a DELETE request might cause some existing\r\n\t\t\t * implementations to reject the request.\r\n\t\t\t */\r\n\t\t\tvar config = createConfig(\"DELETE\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad, headers) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && typeof(postData) == \"function\") {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpostSync: function(url, postData, headers) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, headers) {\r\n\t\t\treturn new gantt.Promise(function(resolve, reject) {\r\n\t\t\t\tvar t = (typeof XMLHttpRequest !== undefined && !env.isIE ? new XMLHttpRequest() : new global.ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\t\tif (!!async) {\r\n\t\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad.apply(global, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresolve(t);\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.open(method, url, async);\r\n\r\n\t\t\t\tif (headers){\r\n\t\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\t\tpostData = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\t\tt.send(postData);\r\n\r\n\t\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t});\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","type DurationUnits = \"minute\" | \"hour\" | \"day\" | \"week\" | \"month\" | \"year\";\r\ntype Align = \"left\" | \"center\" | \"right\";\r\ntype SectionType = \"textarea\"\r\n\t\t\t\t\t| \"time\"\r\n\t\t\t\t\t| \"duration\"\r\n\t\t\t\t\t| \"select\"\r\n\t\t\t\t\t| \"typeselect\"\r\n\t\t\t\t\t| \"parent\"\r\n\t\t\t\t\t| \"template\"\r\n\t\t\t\t\t| \"checkbox\"\r\n\t\t\t\t\t| \"radio\"\r\n\t\t\t\t\t| \"resources\"\r\n\t\t\t\t\t| \"constraint\";\r\n\r\ntype LightboxSection = Array<ILightboxSection\r\n\t| ILightboxTimeAndDurationSection\r\n\t| ILightboxInputControl\r\n\t| ILightboxSelectControl\r\n\t| ILightboxParentControl\r\n\t| ILightboxTypeselectControl>;\r\n\r\ntype LayoutView = \"grid\"\r\n\t| \"timeline\"\r\n\t| \"resizer\"\r\n\t| \"scrollbar\"\r\n\t| \"resourceGrid\"\r\n\t| \"resourceTimeline\";\r\n\r\ninterface IColumnItem {\r\n\tname: string;\r\n\tlabel?: string;\r\n\ttree?: boolean;\r\n\talign?: Align;\r\n\thide?: boolean;\r\n\tmax_width?: number;\r\n\tmin_width?: number;\r\n\tresize?: boolean;\r\n\ttemplate?: (obj: any) => string;\r\n\twidth?: number | \"*\";\r\n}\r\n\r\nexport type TModifierKeys = \"metaKey\" | \"ctrlKey\" | \"altKey\" | \"shiftKey\" | false | undefined;\r\n\r\nexport interface IScale {\r\n\tcss?: () => string;\r\n\tdate?: string;\r\n\tstep: number;\r\n\ttemplate?: (date: Date) => string;\r\n\tunit: DurationUnits;\r\n}\r\n\r\ninterface ILightboxSection {\r\n\tname: string;\r\n\tmap_to: string;\r\n\ttype: SectionType;\r\n\theight?: number;\r\n\tfocus?: boolean;\r\n}\r\n\r\ninterface ILightboxTimeAndDurationSection extends ILightboxSection {\r\n\treadonly: boolean;\r\n\tyear_range: number[] | number;\r\n\tsingle_date: boolean;\r\n\ttime_format: string;\r\n}\r\n\r\ninterface ILightboxInputControl extends ILightboxSection {\r\n\tdefault_value?: any;\r\n\toptions?: Array<{key: string, label: string}>;\r\n}\r\n\r\ninterface ILightboxSelectControl extends ILightboxInputControl {\r\n\tonchange: () => boolean | undefined;\r\n}\r\n\r\ninterface ILightboxParentControl extends ILightboxSection {\r\n\tallow_root: boolean;\r\n\troot_label: string;\r\n\tsort?: (a: any, b: any) => -1 | 0 | 1;\r\n\tfilter?: (task: string | number | object) => boolean;\r\n\ttemplate?: (start: Date, end: Date, ev: object) => string;\r\n}\r\n\r\ninterface ILightboxTypeselectControl extends ILightboxSection {\r\n\tfilter?: (typeName: string) => boolean;\r\n}\r\n\r\n\r\ninterface ILayoutScrollbar {\r\n\tview: \"scrollbar\";\r\n\tscroll?: \"x\" | \"y\";\r\n\tid: string;\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\n\r\ninterface ILayoutView {\r\n\tview: LayoutView;\r\n\tid?: string;\r\n\tscrollX?: string;\r\n\tscrollY?: string;\r\n\tconfig?: object;\r\n}\r\n\r\ninterface ILayoutGrid extends ILayoutView {\r\n\tview: \"grid\";\r\n\tbind?: string;\r\n}\r\n\r\ninterface ILayoutTimeline extends ILayoutView {\r\n\tview: \"timeline\";\r\n\tbindLinks?: string;\r\n\tlayers?: any[];\r\n}\r\n\r\ninterface ILayoutResizer {\r\n\tview?: undefined;\r\n\tresizer: boolean;\r\n\twidth: number;\r\n}\r\n\r\ninterface ILayoutResourceGrid extends ILayoutView {\r\n\tview: \"resourceGrid\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutResourceTimeline extends ILayoutView {\r\n\tview: \"resourceTimeline\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutHtml {\r\n\thtml: string;\r\n\tcss: string;\r\n\twidth: number;\r\n}\r\n\r\ntype LayoutRow = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { cols: LayoutCol[] };\r\n\r\ntype LayoutCol = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { rows: LayoutRow[] };\r\n\r\ninterface ILayout {\r\n\tcss: string;\r\n\trows?: LayoutRow[];\r\n\tcols?: LayoutCol[];\r\n}\r\n\r\ntype TCsp = boolean | \"auto\";\r\n\r\ninterface IGanttConfig {\r\n\tlayout: ILayout;\r\n\tlinks: {\r\n\t\tfinish_to_start: \"0\";\r\n\t\tstart_to_start: \"1\";\r\n\t\tfinish_to_finish: \"2\";\r\n\t\tstart_to_finish: \"3\";\r\n\t};\r\n\ttypes: {\r\n\t\ttask: string;\r\n\t\tproject: string;\r\n\t\tmilestone: string;\r\n\t};\r\n\tauto_types: boolean;\r\n\tduration_unit: DurationUnits;\r\n\twork_time: boolean;\r\n\tcorrect_work_time: boolean;\r\n\tskip_off_time: boolean;\r\n\tcascade_delete: boolean;\r\n\tautosize: boolean | string;\r\n\tautoscroll: boolean;\r\n\tshow_links: boolean;\r\n\tshow_task_cells: boolean;\r\n\tautosize_min_width: number;\r\n\tautoscroll_speed: number;\r\n\tdeepcopy_on_parse: boolean;\r\n\tstatic_background: boolean;\r\n\tstatic_background_cells: boolean;\r\n\tbranch_loading: boolean;\r\n\tbranch_loading_property: string;\r\n\tshow_loading: boolean;\r\n\tshow_chart: boolean;\r\n\tshow_grid: boolean;\r\n\tmin_duration: number;\r\n\tdate_format: string; // use instead xml_date\r\n\txml_date?: string; // deprecated\r\n\tstart_on_monday: boolean;\r\n\tserver_utc: boolean;\r\n\tshow_progress: boolean;\r\n\tfit_tasks: boolean;\r\n\tselect_task: boolean;\r\n\tscroll_on_click: boolean;\r\n\tsmart_rendering: boolean;\r\n\tpreserve_scroll: boolean;\r\n\treadonly: boolean;\r\n\tcontainer_resize_timeout: number;\r\n\r\n\t/*grid */\r\n\tdate_grid: string;\r\n\r\n\tdrag_links: boolean;\r\n\tdrag_progress: boolean;\r\n\tdrag_resize: boolean;\r\n\tdrag_project: boolean;\r\n\tdrag_move: boolean;\r\n\tdrag_mode: {\r\n\t\tresize: \"resize\",\r\n\t\tprogress: \"progress\",\r\n\t\tmove: \"move\",\r\n\t\tignore: \"ignore\"\r\n\t};\r\n\tround_dnd_dates: boolean;\r\n\tlink_wrapper_width: number;\r\n\troot_id: string | number;\r\n\r\n\tautofit: boolean;\r\n\tcolumns: IColumnItem[];\r\n\r\n\t/* scale*/\r\n\t/* it will be deprecated */\r\n\tdate_scale?: string;\r\n\tstep?: number;\r\n\tscale_unit?: DurationUnits;\r\n\tsubscales?: IScale[];\r\n\t/* it will be deprecated end */\r\n\r\n\tscales: IScale[];\r\n\r\n\tscale_offset_minimal: boolean;\r\n\r\n\tinherit_scale_class: boolean;\r\n\r\n\r\n\ttime_step: number;\r\n\tduration_step: number;\r\n\r\n\r\n\ttask_date: string;\r\n\ttime_picker: string;\r\n\ttask_attribute: string;\r\n\tlink_attribute: string;\r\n\tlayer_attribute: string;\r\n\tbuttons_left: string[];\r\n\t_migrate_buttons: {\r\n\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t};\r\n\r\n\tbuttons_right: string[];\r\n\r\n\r\n\tlightbox: {\r\n\t\tsections?: LightboxSection,\r\n\t\tproject_sections?: LightboxSection,\r\n\t\tmilestone_sections?: LightboxSection\r\n\t};\r\n\tdrag_lightbox: boolean;\r\n\tsort: boolean;\r\n\tdetails_on_create: boolean;\r\n\tdetails_on_dblclick: boolean;\r\n\tinitial_scroll: boolean;\r\n\ttask_scroll_offset: number;\r\n\r\n\torder_branch: boolean;\r\n\torder_branch_free: boolean;\r\n\r\n\t// task_height is deprecated, use 'bar_height` instead\r\n\ttask_height: number | \"full\";\r\n\tbar_height: number | \"full\";\r\n\tmin_column_width: number;\r\n\r\n\t// min width for grid column (when resizing)\r\n\tmin_grid_column_width: number;\r\n\t// name of the attribute with column index for resize element\r\n\tgrid_resizer_column_attribute: string;\r\n\t// name of the attribute with column index for resize element\r\n\t// grid_resizer_attribute: string; // usage of this parameter is not found\r\n\r\n\t// grid width can be increased after the column has been resized\r\n\tkeep_grid_width: boolean;\r\n\r\n\t// grid width can be adjusted\r\n\tgrid_resize: boolean;\r\n\tgrid_elastic_columns: boolean;\r\n\tshow_tasks_outside_timescale: boolean;\r\n\tshow_unscheduled: boolean;\r\n\treadonly_property: string;\r\n\teditable_property: string;\r\n\tcalendar_property: string;\r\n\tresource_calendars: object;\r\n\tdynamic_resource_calendars: boolean;\r\n\tinherit_calendar: boolean;\r\n\ttype_renderers: object;\r\n\r\n\tresize_rows: boolean;\r\n\t// name of the attribute with row index for resize element\r\n\ttask_grid_row_resizer_attribute: string;\r\n\t// min height for row (when resizing)\r\n\tmin_task_grid_row_height: number;\r\n\r\n\topen_tree_initially: boolean;\r\n\toptimize_render: boolean;\r\n\tprevent_default_scroll: boolean;\r\n\tshow_errors: boolean;\r\n\twai_aria_attributes: boolean;\r\n\tsmart_scales: boolean;\r\n\trtl: boolean;\r\n\tplaceholder_task: boolean;\r\n\thorizontal_scroll_key: TModifierKeys;\r\n\tdrag_timeline: {\r\n\t\tuseKey: TModifierKeys;\r\n\t\tignore: string;\r\n\t};\r\n\tdrag_multiple: boolean;\r\n\tcsp: TCsp;\r\n}\r\n\r\nmodule.exports = () => {\r\n\tconst result: IGanttConfig = {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\tfinish_to_start: \"0\",\r\n\t\t\tstart_to_start: \"1\",\r\n\t\t\tfinish_to_finish: \"2\",\r\n\t\t\tstart_to_finish: \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\ttask: \"task\",\r\n\t\t\tproject: \"project\",\r\n\t\t\tmilestone: \"milestone\"\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\t\tdeepcopy_on_parse: false,\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tstatic_background_cells: true,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\tdate_format: \"%d-%m-%Y %H:%i\", // use instead xml_date\r\n\t\txml_date: undefined, // \"%d-%m-%Y %H:%i\", // deprecated\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tsmart_rendering: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\t\tcontainer_resize_timeout: 20,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\tresize: \"resize\",\r\n\t\t\tprogress: \"progress\",\r\n\t\t\tmove: \"move\",\r\n\t\t\tignore: \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: \"*\", resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\r\n\t\tscale_offset_minimal: true,\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\tscales: [\r\n\t\t\t{\r\n\t\t\t\tunit: \"day\",\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tdate: \"%d %M\"\r\n\t\t\t}\r\n\t\t],\r\n// \t\tdate_scale: \"%d %M\",\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"data-task-id\",\r\n\t\tlink_attribute: \"data-link-id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\t// task height is deprecated, use 'bar_height' instead\r\n\t\ttask_height: undefined,// number px of 'full' for row height\r\n\t\tbar_height: \"full\",\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"data-column-index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\t// grid_resizer_attribute: \"grid_resizer\", // - usage of this parameter is not found in code\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\t\tgrid_elastic_columns: false,\r\n\t\tshow_tasks_outside_timescale: false,\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\tresize_rows: false,\r\n\t\t// name of the attribute with row index for resize element\r\n\t\ttask_grid_row_resizer_attribute: \"data-row-index\",\r\n\t\t// min height for row (when resizing)\r\n\t\tmin_task_grid_row_height: 30,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\t\tdynamic_resource_calendars: false,\r\n\t\tinherit_calendar: false,\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false,\r\n\t\thorizontal_scroll_key: \"shiftKey\",\r\n\t\tdrag_timeline: {\r\n\t\t\tuseKey: undefined,\r\n\t\t\tignore: \".gantt_task_line, .gantt_task_link\"\r\n\t\t},\r\n\t\tdrag_multiple: true,\r\n\t\tcsp: \"auto\"\r\n\t};\r\n\treturn result;\r\n};\r\n","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tfunction dropService(name) {\r\n\t\tif (services[name]) {\r\n\t\t\tdelete services[name];\r\n\t\t}\r\n\t}\r\n\r\n\tvar servicesEnum = {};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tdropService: dropService,\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","export default class ExtensionsManager{\r\n\tprivate _extensions:{[key:string]: GanttPlugin };\r\n\r\n\tconstructor(config: {[key:string]: GanttPlugin }){\r\n\t\tthis._extensions = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._extensions[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddExtension = (name: string, ext: GanttPlugin) => {\r\n\t\tthis._extensions[name] = ext;\r\n\t}\r\n\r\n\tgetExtension = (name: string): GanttPlugin => {\r\n\t\treturn this._extensions[name];\r\n\t}\r\n}","module.exports = {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","function DHXGantt(){\r\n\tthis.constants = require(\"../constants\");\r\n\tthis.version = VERSION;\r\n\tthis.license = LICENSE;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nmodule.exports = function(supportedExtensions) {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\tvar ExtensionManager = require(\"../ext/extension_manager\").default;\r\n\tvar extensionManager = new ExtensionManager(supportedExtensions);\r\n\tvar activePlugins = {};\r\n\tgantt.plugins = function(config){\r\n\t\tfor(var i in config){\r\n\t\t\tif(config[i] && !activePlugins[i]){\r\n\t\t\t\tvar plugin = extensionManager.getExtension(i);\r\n\t\t\t\tif(plugin){\r\n\t\t\t\t\tplugin(gantt);\r\n\t\t\t\t\tactivePlugins[i] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$services = require(\"../core/common/services\")();\r\n\tgantt.config = require(\"../core/common/config\")();\r\n\tgantt.ajax =  require(\"../core/common/ajax\")(gantt);\r\n\tgantt.date = require(\"../core/common/date\")(gantt);\r\n\tvar dnd = require(\"../core/common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tvar templatesLoader = require(\"../core/common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\trequire(\"../utils/eventable\")(gantt);\r\n\r\n\tvar StateService = require(\"../core/common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\tvar res = {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: null\r\n\t\t};\r\n\r\n\t\t// do not throw error if getState called from non-initialized gantt\r\n\t\tif(gantt.$data && gantt.$data.tasksStore){\r\n\t\t\tres.selected_task = gantt.$data.tasksStore.getSelectedId();\r\n\t\t}\r\n\t\treturn res;\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\r\n\tgantt.Promise = require(\"../utils/promise\");\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\trequire(\"../core/datastore/datastore_hooks\")(gantt);\r\n\r\n\tvar DataProcessor = require(\"../core/dataprocessor\");\r\n\tgantt.dataProcessor = DataProcessor.DEPRECATED_api;\r\n\tgantt.createDataProcessor = DataProcessor.createDataProcessor;\r\n\r\n\r\n\trequire(\"../core/plugins\")(gantt);\r\n\r\n\trequire(\"../core/dynamic_loading\")(gantt);\r\n\trequire(\"../core/grid_column_api\")(gantt);\r\n\trequire(\"../core/tasks\")(gantt);\r\n\trequire(\"../core/load\")(gantt);\r\n\trequire(\"../core/worktime/work_time\")(gantt);\r\n\trequire(\"../core/data\")(gantt);\r\n\r\n\trequire(\"../publish_helpers/void_script_second\").default(gantt);\r\n\r\n\trequire(\"../core/data_task_types\")(gantt);\r\n\trequire(\"../core/cached_functions\")(gantt);\r\n\r\n\trequire(\"../core/gantt_core\")(gantt);\r\n\trequire(\"../core/destructor\")(gantt);\r\n\trequire(\"../publish_helpers/void_script_third\").default(gantt);\r\n\r\n\tvar i18n = require(\"../locale\").default();\r\n\tgantt.i18n = {\r\n\t\taddLocale: i18n.addLocale,\r\n\t\tsetLocale: function(locale){\r\n\t\t\tif(typeof locale === \"string\"){\r\n\t\t\t\tvar localeObject = i18n.getLocale(locale);\r\n\t\t\t\tif(!localeObject){\r\n\t\t\t\t\tlocaleObject = i18n.getLocale(\"en\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.locale = localeObject;\r\n\t\t\t}else if(locale){\r\n\t\t\t\tif(!gantt.locale){\r\n\t\t\t\t\tgantt.locale = locale;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var i in locale){\r\n\t\t\t\t\t\tif(locale[i] && typeof locale[i] === \"object\"){\r\n\t\t\t\t\t\t\tif(!gantt.locale[i]){\r\n\t\t\t\t\t\t\t\tgantt.locale[i] = {};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgantt.mixin(gantt.locale[i], locale[i], true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tgantt.locale[i] = locale[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLocale: i18n.getLocale\r\n\t};\r\n\tgantt.i18n.setLocale(\"en\");\r\n\treturn gantt;\r\n};","require(\"css/skins/terrace.less\");\r\n\r\nvar factory = require(\"./make_instance_common\");\r\n\r\nmodule.exports = function(supportedExtensions) {\r\n\tvar gantt = factory(supportedExtensions);\r\n\r\n\tif(!gantt.env.isNode){\r\n\t\trequire(\"../core/ui_core\")(gantt);\r\n\t}\r\n\r\n\treturn gantt;\r\n};","import { IUndo, IUndoCommand, IUndoCommands, IUndoPropAction, IUndoPropCommand, TActionType, TEntityType, TUndoStack, TUndoValue } from \"./types\";\r\n\r\nconst MAX_UNDO_STEPS = 10;\r\n\r\nexport class Undo implements IUndo {\r\n\r\n\tmaxSteps = MAX_UNDO_STEPS;\r\n\tundoEnabled = true;\r\n\tredoEnabled = true;\r\n\taction: IUndoPropAction = {\r\n\t\tcreate: (commands?: IUndoCommand[]): IUndoCommands => {\r\n\t\t\treturn { commands: (commands ? commands.slice() : []) };\r\n\t\t},\r\n\t\tinvert: (action: IUndoCommands): IUndoCommands => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(action);\r\n\t\t\tconst commands = this.command;\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tconst command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif (command.type === commands.type.update || command.type === commands.type.move) {\r\n\t\t\t\t\t[command.value, command.oldValue] = [command.oldValue, command.value];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert as IUndoCommands;\r\n\t\t}\r\n\t};\r\n\tcommand: IUndoPropCommand = {\r\n\t\t// entities that require different processing for undoing-redoing changes (gantt.config.undo_types)\r\n\t\tentity: null,\r\n\r\n\t\t// types of traced actions (gantt.config.undo_actions)\r\n\t\ttype: null,\r\n\r\n\t\tcreate: (value: TUndoValue, oldValue: TUndoValue, type: TActionType, entity: TEntityType): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\treturn {\r\n\t\t\t\tentity,\r\n\t\t\t\ttype,\r\n\t\t\t\tvalue: gantt.copy(value),\r\n\t\t\t\toldValue: gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: (command: IUndoCommand): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(command);\r\n\t\t\trevert.type = this.command.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\tinverseCommands: (command: TActionType): TActionType => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst types = this.command.type;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase types.update:\r\n\t\t\t\t\treturn types.update;\r\n\t\t\t\tcase types.remove:\r\n\t\t\t\t\treturn types.add;\r\n\t\t\t\tcase types.add:\r\n\t\t\t\t\treturn types.remove;\r\n\t\t\t\tcase types.move:\r\n\t\t\t\t\treturn types.move;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _undoStack = [];\r\n\tprivate _redoStack = [];\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\tgetUndoStack() {\r\n\t\treturn this._undoStack;\r\n\t}\r\n\r\n\tgetRedoStack() {\r\n\t\treturn this._redoStack;\r\n\t}\r\n\r\n\tclearUndoStack() {\r\n\t\tthis._undoStack = [];\r\n\t}\r\n\r\n\tclearRedoStack() {\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tupdateConfigs() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.maxSteps = gantt.config.undo_steps || MAX_UNDO_STEPS;\r\n\t\tthis.command.entity = gantt.config.undo_types;\r\n\t\tthis.command.type = gantt.config.undo_actions;\r\n\t\tthis.undoEnabled = !!gantt.config.undo;\r\n\t\tthis.redoEnabled = !!gantt.config.redo; // GS-873, Redo should work even when the `gantt.config.undo` is disabled.\r\n\t}\r\n\r\n\tundo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._undoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\t\tif (gantt.callEvent(\"onBeforeUndo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterUndo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", [null]);\r\n\t}\r\n\r\n\tredo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.redoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._redoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\r\n\t\tif (gantt.callEvent(\"onBeforeRedo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(action);\r\n\t\t\t\tthis._push(this._undoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterRedo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", [null]);\r\n\t}\r\n\r\n\t// storeUndo:\r\n\tlogAction(action: IUndoCommands) {\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tprivate _push(stack: TUndoStack, action: IUndoCommands): IUndoCommands {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst event = stack === this._undoStack ? \"onBeforeUndoStack\" : \"onBeforeRedoStack\";\r\n\t\tif (gantt.callEvent(event, [action]) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// commands can be removed from event handler\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstack.push(action);\r\n\t\twhile (stack.length > this.maxSteps) {\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tprivate _pop(stack: TUndoStack): IUndoCommands {\r\n\t\treturn stack.pop();\r\n\t}\r\n\r\n\tprivate _reorderCommands(action) {\r\n\t\t// firstly process tasks and only then links\r\n\t\t// in order to ensure links are added not earlier than their tasks\r\n\t\t// firstly to 'move' actions and only then updates\r\n\t\tconst weights = { any: 0, link:1, task:2 };\r\n\t\tconst actionWeights = { move: 1, any:0 };\r\n\t\taction.commands.sort(function(a, b) {\r\n\t\t\tif (a.entity === \"task\" && b.entity === \"task\") {\r\n\t\t\t\tif (a.type !== b.type) {\r\n\t\t\t\t\treturn (actionWeights[b.type] || 0) - (actionWeights[a.type] || 0);\r\n\t\t\t\t} else if (a.type === \"move\" && a.oldValue && b.oldValue && b.oldValue.parent === a.oldValue.parent) {\r\n\t\t\t\t\treturn a.oldValue.$index - b.oldValue.$index;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst weightA = weights[a.entity] || weights.any;\r\n\t\t\t\tconst weightB = weights[b.entity] || weights.any;\r\n\t\t\t\treturn weightB - weightA;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _applyAction(action: IUndoCommands) {\r\n\t\tlet command = null;\r\n\t\tconst entities = this.command.entity;\r\n\t\tconst actions = this.command.type;\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tget: \"getTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tmove: \"moveTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tget: \"getLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tconst method = methods[command.entity][command.type];\r\n\t\t\t\tconst getMethod = methods[command.entity].get;\r\n\t\t\t\tconst check = methods[command.entity].isExists;\r\n\r\n\t\t\t\tif (command.type === actions.add) {\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$index);\r\n\t\t\t\t} else if (command.type === actions.remove) {\r\n\t\t\t\t\tif (gantt[check](command.value.id)) {\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (command.type === actions.update) {\r\n\t\t\t\t\tconst item = gantt[getMethod](command.value.id);\r\n\t\t\t\t\tfor(const prop in command.value){\r\n\t\t\t\t\t\tif(!prop.startsWith(\"$\") && !prop.startsWith(\"_\")){\r\n\t\t\t\t\t\t\titem[prop] = command.value[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t} else if (command.type === actions.move) {\r\n\t\t\t\t\tgantt[method](command.value.id, command.value.$local_index, command.value.parent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","import { IInlineEditState, IMonitor, IUndo, IUndoCommand, TActionType, TEntityType, TUndoValue } from \"./types\";\r\n\r\nconst noTrack = {\r\n\tonBeforeUndo: \"onAfterUndo\",\r\n\tonBeforeRedo: \"onAfterRedo\"\r\n};\r\n\r\nconst batchActions = [\r\n\t\"onTaskDragStart\",\r\n\t\"onAfterTaskUpdate\",\r\n\t\"onAfterTaskDelete\",\r\n\t\"onBeforeBatchUpdate\"\r\n];\r\n\r\nexport class Monitor implements IMonitor {\r\n\tprivate _batchAction = null;\r\n\tprivate _batchMode = false;\r\n\tprivate _ignore = false;\r\n\tprivate _ignoreMoveEvents = false;\r\n\tprivate _initialTasks = {};\r\n\tprivate _initialLinks = {};\r\n\tprivate _nestedTasks =  {};\r\n\tprivate _nestedLinks = {};\r\n\tprivate _timeout;\r\n\tprivate _gantt: any;\r\n\tprivate _undo: IUndo;\r\n\r\n\tconstructor(undo: IUndo, gantt: any) {\r\n\t\tthis._undo = undo;\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._attachEvents();\r\n\t}\r\n\r\n\tstore(id: TaskID | LinkID, type: TEntityType, overwrite: boolean = false) {\r\n\t\tif (type === this._gantt.config.undo_types.task) {\r\n\t\t\treturn this._storeTask(id, overwrite);\r\n\t\t}\r\n\t\tif (type === this._gantt.config.undo_types.link) {\r\n\t\t\treturn this._storeLink(id, overwrite);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tisMoveEventsIgnored() {\r\n\t\treturn this._ignoreMoveEvents;\r\n\t}\r\n\ttoggleIgnoreMoveEvents(newValue?: boolean) {\r\n\t\tthis._ignoreMoveEvents = newValue || false;\r\n\t}\r\n\tstartIgnore() {\r\n\t\tthis._ignore = true;\r\n\t}\r\n\tstopIgnore() {\r\n\t\tthis._ignore = false;\r\n\t}\r\n\tstartBatchAction() {\r\n\t\t// try catching updates made from event handlers using timeout\r\n\t\tif (!this._timeout){\r\n\t\t\tthis._timeout = setTimeout(() => {\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t}, 10);\r\n\t\t}\r\n\r\n\r\n\t\tif (this._ignore || this._batchMode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._batchMode = true;\r\n\t\tthis._batchAction = this._undo.action.create();\r\n\t}\r\n\tstopBatchAction() {\r\n\t\tif (this._ignore) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst undo = this._undo;\r\n\t\tif (this._batchAction) {\r\n\t\t\tundo.logAction(this._batchAction);\r\n\t\t}\r\n\t\tthis._batchMode = false;\r\n\t\tthis._batchAction = null;\r\n\t}\r\n\tonTaskAdded(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonTaskUpdated(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonTaskMoved(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\t(task as any).$local_index = this._gantt.getTaskIndex(task.id);\r\n\t\t\tconst oldValue = this.getInitialTask(task.id);\r\n\t\t\tif((task as any).$local_index === oldValue.$local_index &&\r\n\t\t\t\tthis._gantt.getParent(task) === this._gantt.getParent(oldValue)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\tthis._storeEntityCommand(\r\n\t\t\t\ttask,\r\n\t\t\t\tthis.getInitialTask(task.id),\r\n\t\t\t\tthis._undo.command.type.move,\r\n\t\t\t\tthis._undo.command.entity.task\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonTaskDeleted(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.remove);\r\n\t\t\tif (this._nestedTasks[task.id]) {\r\n\t\t\t\tconst children = this._nestedTasks[task.id];\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tthis._storeTaskCommand(children[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._nestedLinks[task.id]) {\r\n\t\t\t\tconst childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\tfor (let i = 0; i < childrenLinks.length; i++) {\r\n\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonLinkAdded(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonLinkUpdated(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonLinkDeleted(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.remove);\r\n\t\t}\r\n\t}\r\n\tsetNestedTasks(id: TaskID, taskIds: TaskID[]) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet task = null;\r\n\t\tconst tasks = [];\r\n\t\tlet\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\tfor (let i = 0; i < taskIds.length; i++) {\r\n\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\t\t\ttasks.push(task);\r\n\t\t}\r\n\r\n\t\tconst uniqueLinks = {};\r\n\t\tfor (let i = 0; i < linkIds.length; i++) {\r\n\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t}\r\n\t\tconst links = [];\r\n\t\tfor (const i in uniqueLinks) {\r\n\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t}\r\n\t\tthis._nestedTasks[id] = tasks;\r\n\t\tthis._nestedLinks[id] = links;\r\n\t}\r\n\tsetInitialTask(id: TaskID, overwrite?: boolean) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (overwrite || (!this._initialTasks[id] || !this._batchMode)) {\r\n\t\t\tconst task = gantt.copy(gantt.getTask(id));\r\n\t\t\ttask.$index = gantt.getGlobalTaskIndex(id);\r\n\t\t\ttask.$local_index = gantt.getTaskIndex(id);\r\n\t\t\tthis.setInitialTaskObject(id, task);\r\n\t\t}\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tgetInitialTask(id: TaskID) {\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tclearInitialTasks() {\r\n\t\tthis._initialTasks = {};\r\n\t}\r\n\tsetInitialTaskObject(id: TaskID, object: ITask) {\r\n\t\tthis._initialTasks[id] = object;\r\n\t}\r\n\tsetInitialLink(id: LinkID, overwrite?: boolean) {\r\n\t\tif (!this._initialLinks[id] || !this._batchMode) {\r\n\t\t\tthis._initialLinks[id] = this._gantt.copy(this._gantt.getLink(id));\r\n\t\t}\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tgetInitialLink(id: LinkID) {\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tclearInitialLinks() {\r\n\t\tthis._initialLinks = {};\r\n\t}\r\n\tprivate _attachEvents() {\r\n\t\tlet deleteCacheCooldown = null;\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst saveInitialAll = () => {\r\n\t\t\tif (!deleteCacheCooldown) {\r\n\t\t\t\tdeleteCacheCooldown = setTimeout(() => {\r\n\t\t\t\t\tdeleteCacheCooldown = null;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialTasks();\r\n\t\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\t\tthis.setInitialTask(task.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialLinks();\r\n\t\t\t\tgantt.getLinks().forEach((link: ILink) => {\r\n\t\t\t\t\tthis.setInitialLink(link.id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst getMoveObjectByTaskId = (id: TaskID) => {\r\n\t\t\treturn gantt.copy(gantt.getTask(id));\r\n\t\t};\r\n\r\n\t\tfor (const i in noTrack) {\r\n\t\t\tgantt.attachEvent(i, () => {\r\n\t\t\t\tthis.startIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(noTrack[i], () => {\r\n\t\t\t\tthis.stopIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (let i  = 0; i < batchActions.length; i++) {\r\n\t\t\tgantt.attachEvent(batchActions[i], () => {\r\n\t\t\t\tthis.startBatchAction();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onParse\", () => {\r\n\t\t\tthis._undo.clearUndoStack();\r\n\t\t\tthis._undo.clearRedoStack();\r\n\t\t\tsaveInitialAll();\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.setInitialTask(id, true);\r\n\t\t\tthis.onTaskAdded(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskDeleted(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkAdd\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.setInitialLink(id, true);\r\n\t\t\tthis.onLinkAdded(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkUpdate\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkUpdated(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkDelete\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkDeleted(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onRowDragEnd\", (id: TaskID, target: TaskID) => {\r\n\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\tthis.toggleIgnoreMoveEvents();\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", (id: TaskID) => {\r\n\t\t\tthis.store(id, gantt.config.undo_types.task);\r\n\t\t\tconst nested = [];\r\n\r\n\t\t\t// remember task indexes in case their being deleted in a loop, so they could be restored in the correct order\r\n\t\t\tsaveInitialAll();\r\n\r\n\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\tnested.push(task.id);\r\n\t\t\t}, id);\r\n\t\t\tthis.setNestedTasks(id, nested);\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tconst datastore = gantt.getDatastore(\"task\");\r\n\r\n\t\tdatastore.attachEvent(\"onBeforeItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tsaveInitialAll();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdatastore.attachEvent(\"onAfterItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onRowDragStart\", (id: TaskID, target: TaskID, e: Event) => {\r\n\t\t\tthis.toggleIgnoreMoveEvents(true);\r\n\t\t\tsaveInitialAll();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDrag\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", (task: ITask) => {\r\n\t\t\tthis.store(task.id, gantt.config.undo_types.task);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tif (gantt.ext.inlineEditors) {\r\n\t\t\tgantt.ext.inlineEditors.attachEvent(\"onEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\tthis.store(state.id, gantt.config.undo_types.task);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _storeCommand(command: IUndoCommand) {\r\n\t\tconst undo = this._undo;\r\n\t\tundo.updateConfigs();\r\n\r\n\t\tif (!undo.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._batchMode) {\r\n\t\t\tthis._batchAction.commands.push(command);\r\n\t\t} else {\r\n\t\t\tconst action = undo.action.create([command]);\r\n\t\t\tundo.logAction(action);\r\n\t\t}\r\n\t}\r\n\tprivate _storeEntityCommand(obj: TUndoValue, old: TUndoValue, actionType: TActionType, entityType: TEntityType) {\r\n\t\tconst undo = this._undo;\r\n\t\tconst command = undo.command.create(obj, old, actionType, entityType);\r\n\t\tthis._storeCommand(command);\r\n\t}\r\n\tprivate _storeTaskCommand(obj: ITask, type: TActionType) {\r\n\t\tif(this._gantt.isTaskExists(obj.id)){\r\n\t\t\t(obj as any).$local_index = this._gantt.getTaskIndex(obj.id);\r\n\t\t}\r\n\r\n\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, this._undo.command.entity.task);\r\n\t}\r\n\tprivate _storeLinkCommand(obj: ILink, type: TActionType) {\r\n\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, this._undo.command.entity.link);\r\n\t}\r\n\tprivate _getLinks(task: ITask) {\r\n\t\treturn task.$source.concat(task.$target);\r\n\t}\r\n\tprivate _storeTask(taskId: TaskID, overwrite: boolean = false) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.setInitialTask(taskId, overwrite);\r\n\t\tgantt.eachTask((child: ITask) => {\r\n\t\t\tthis.setInitialTask(child.id);\r\n\t\t}, taskId);\r\n\t\treturn true;\r\n\t}\r\n\tprivate _storeLink(linkId: LinkID, overwrite: boolean = false) {\r\n\t\tthis.setInitialLink(linkId, overwrite);\r\n\t\treturn true;\r\n\t}\r\n}","import { Monitor } from \"./monitor\";\r\nimport { IMonitor, IUndoCommand, TEntityType, TUndoStack } from \"./types\";\r\nimport { Undo } from \"./undo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nconst _undo = new Undo(gantt);\r\nconst monitor: IMonitor = new Monitor(_undo, gantt);\r\n\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate: \"update\",\r\n\tremove: \"remove\", // remove item from datastore\r\n\tadd: \"add\",\r\n\tmove: \"move\" // move task in grid\r\n};\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\n\r\ngantt.ext.undo = {\r\n\tundo: () => _undo.undo(),\r\n\tredo: () => _undo.redo(),\r\n\tgetUndoStack: () => _undo.getUndoStack(),\r\n\tgetRedoStack: () => _undo.getRedoStack(),\r\n\tclearUndoStack: () => _undo.clearUndoStack(),\r\n\tclearRedoStack: () => _undo.clearRedoStack(),\r\n\tsaveState: (id: TaskID | LinkID, type: TEntityType) => monitor.store(id, type, true)\r\n};\r\n\r\ngantt.undo = gantt.ext.undo.undo;\r\ngantt.redo = gantt.ext.undo.redo;\r\ngantt.getUndoStack = gantt.ext.undo.getUndoStack;\r\ngantt.getRedoStack = gantt.ext.undo.getRedoStack;\r\ngantt.clearUndoStack = gantt.ext.undo.clearUndoStack;\r\ngantt.clearRedoStack = gantt.ext.undo.clearRedoStack;\r\n\r\nfunction updTask(task: ITask, oldId: TaskID, newId: TaskID) {\r\n\tif (!task) { return; }\r\n\r\n\tif (task.id === oldId) {\r\n\t\ttask.id = newId;\r\n\t}\r\n\r\n\tif (task.parent === oldId) {\r\n\t\ttask.parent = newId;\r\n\t}\r\n}\r\n\r\nfunction changeTaskCommandId(command: IUndoCommand, oldId: TaskID, newId: TaskID) {\r\n\tupdTask(command.value, oldId, newId);\r\n\tupdTask(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updLink(link: ILink, oldTaskId: TaskID, newTaskId: TaskID) {\r\n\tif (!link) { return; }\r\n\tif (link.source === oldTaskId) {\r\n\t\tlink.source = newTaskId;\r\n\t}\r\n\tif (link.target === oldTaskId) {\r\n\t\tlink.target = newTaskId;\r\n\t}\r\n}\r\n\r\nfunction changeLinkCommandId(command: IUndoCommand, oldId: LinkID, newId: LinkID) {\r\n\tupdLink(command.value, oldId, newId);\r\n\tupdLink(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updateTasksIds(log: TUndoStack, oldId: TaskID, newId: TaskID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tif (entry.commands[j].entity === undo.command.entity.task) {\r\n\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t} else if (entry.commands[j].entity === undo.command.entity.link) {\r\n\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateLinksIds(log: TUndoStack, oldId: LinkID, newId: LinkID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tconst command = entry.commands[j];\r\n\t\t\tif (command.entity === undo.command.entity.link) {\r\n\t\t\t\tif (command.value && command.value.id === oldId) {\r\n\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t}\r\n\t\t\t\tif (command.oldValue && command.oldValue.id === oldId) {\r\n\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", (oldId: TaskID, newId: TaskID) => {\r\n\tconst undo = _undo;\r\n\tupdateTasksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateTasksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onLinkIdChange\", (oldId: LinkID, newId: LinkID) => {\r\n\tconst undo = _undo;\r\n\tupdateLinksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateLinksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onGanttReady\", () => {\r\n\t_undo.updateConfigs();\r\n});\r\n\r\n}","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\n\r\ninterface IViewPosition{\r\n\ttop: number;\r\n\tleft: number;\r\n}\r\n\r\ninterface IViewBox extends IViewPosition{\r\n\twidth: number;\r\n\theight: number;\r\n\tbottom: number;\r\n\tright: number;\r\n}\r\n\r\nexport class Tooltip {\r\n\tprivate _root: HTMLElement;\r\n\tprivate _tooltipNode: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tgetNode() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!this._tooltipNode){\r\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\r\n\t\t\tthis._tooltipNode.className = \"gantt_tooltip\";\r\n\t\t\tgantt._waiAria.tooltipAttr(this._tooltipNode);\r\n\t\t}\r\n\t\treturn this._tooltipNode;\r\n\t}\r\n\r\n\tsetViewport(node: HTMLElement):Tooltip{\r\n\t\tthis._root = node;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tshow(left: number, top: number): Tooltip;\r\n\tshow(event: MouseEvent): Tooltip;\r\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = document.body;\r\n\t\tconst node = this.getNode();\r\n\r\n\t\tif(!domHelpers.isChildOf(node, container)){\r\n\t\t\tthis.hide();\r\n\t\t\tcontainer.appendChild(node);\r\n\t\t}\r\n\r\n\t\tif (this._isLikeMouseEvent(left)) {\r\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\r\n\t\t\ttop = position.top;\r\n\t\t\tleft = position.left;\r\n\t\t}\r\n\r\n\t\tnode.style.top = top + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\r\n\t\tgantt._waiAria.tooltipVisibleAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\thide() : Tooltip{\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst node = this.getNode();\r\n\t\tif(node && node.parentNode){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tgantt._waiAria.tooltipHiddenAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetContent(html: string) : Tooltip{\r\n\t\tconst node = this.getNode();\r\n\t\tnode.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// it is for salesforce, because it proxies event to it own events\r\n\tprivate _isLikeMouseEvent(event: any): boolean {\r\n\t\tif (!event || typeof event !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn \"clientX\" in event && \"clientY\" in event;\r\n\t}\r\n\r\n\tprivate _getViewPort() : HTMLElement {\r\n\t\treturn this._root || document.body;\r\n\t}\r\n\r\n\r\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\r\n\t\tconst gantt = this._gantt;\r\n\t\t// top/left coordinates inside the viewport by mouse position\r\n\t\tconst viewport =  this._getViewPortSize();\r\n\t\tconst tooltipNode = this.getNode();\r\n\t\tconst tooltip: IViewBox = {\r\n\t\t\ttop:0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: tooltipNode.offsetWidth,\r\n\t\t\theight: tooltipNode.offsetHeight,\r\n\t\t\tbottom: 0,\r\n\t\t\tright: 0\r\n\t\t};\r\n\r\n\t\tconst offsetX = gantt.config.tooltip_offset_x;\r\n\t\tconst offsetY = gantt.config.tooltip_offset_y;\r\n\r\n\t\tconst container = document.body;\r\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\r\n\t\tconst containerPos = domHelpers.getNodePosition(container);\r\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\r\n\r\n\t\ttooltip.top = mouse.y;\r\n\t\ttooltip.left = mouse.x;\r\n\t\ttooltip.top += offsetY;\r\n\t\ttooltip.left += offsetX;\r\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\r\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\r\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\r\n\t\tif(tooltip.top < viewport.top - scrollTop){\r\n\t\t\ttooltip.top = viewport.top;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}else if(tooltip.bottom > viewport.bottom){\r\n\t\t\ttooltip.bottom = viewport.bottom;\r\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\r\n\t\t}\r\n\r\n\t\tif(tooltip.left < viewport.left){\r\n\t\t\ttooltip.left = viewport.left;\r\n\t\t\ttooltip.right = viewport.left + tooltip.width;\r\n\t\t}else if(tooltip.right > viewport.right){\r\n\t\t\ttooltip.right = viewport.right;\r\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\r\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\r\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\r\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n\r\n\tprivate _getViewPortSize() : IViewBox {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = this._getViewPort();\r\n\t\tlet viewport = container;\r\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\r\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\r\n\t\tlet pos;\r\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of gantt\r\n\t\tif(container === gantt.$task_data){\r\n\t\t\tviewport = gantt.$task;\r\n\t\t\tscrollTop = 0;\r\n\t\t\tscrollLeft = 0;\r\n\t\t\tpos = domHelpers.getNodePosition(gantt.$task);\r\n\t\t}else{\r\n\t\t\tpos = domHelpers.getNodePosition(viewport);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:pos.x + scrollLeft,\r\n\t\t\ttop: pos.y + scrollTop,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height,\r\n\t\t\tbottom: pos.y + pos.height + scrollTop,\r\n\t\t\tright: pos.x + pos.width + scrollLeft\r\n\t\t};\r\n\t}\r\n}\r\n","import * as domEventsScope from \"../../core/ui/utils/dom_event_scope\";\r\nimport * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\ninterface ITrackerTarget {\r\n\tselector: string;\r\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\r\n\tglobal: boolean;\r\n}\r\n\r\ninterface ITooltipConfig {\r\n\tselector: string;\r\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\r\n\tglobal: boolean;\r\n}\r\n\r\nexport class TooltipManager{\r\n\ttooltip: Tooltip;\r\n\tprotected _domEvents: any;\r\n\tprivate _listeners: object = {};\r\n\tprivate _gantt: any;\r\n\tprivate delayShow: any;\r\n\tprivate delayHide: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis.tooltip = new Tooltip(gantt);\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = domEventsScope();\r\n\t\tthis._initDelayedFunctions();\r\n\t}\r\n\r\n\tdestructor(): void{\r\n\t\tthis.tooltip.hide();\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\thideTooltip(): void{\r\n\t\tthis.delayHide();\r\n\t}\r\n\tattach(config: ITrackerTarget): void {\r\n\t\tlet root = document.body;\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(!config.global){\r\n\t\t\troot = gantt.$root;\r\n\t\t}\r\n\r\n\t\tlet watchableTarget = null;\r\n\t\tconst handler = (event) => {\r\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\r\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\r\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst doOnMouseEnter = () => {\r\n\t\t\t\twatchableTarget = targetNode;\r\n\t\t\t\tconfig.onmouseenter(event, targetNode);\r\n\t\t\t};\r\n\r\n\t\t\tif(watchableTarget){\r\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\r\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\r\n\t\t\t\t\twatchableTarget = null;\r\n\r\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\r\n\t\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.detach(config.selector);\r\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\r\n\t\tthis._listeners[config.selector] = {\r\n\t\t\tnode: root,\r\n\t\t\thandler\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(selector: string): void {\r\n\t\tconst listener = this._listeners[selector];\r\n\t\tif(listener){\r\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\r\n\t\t}\r\n\t}\r\n\r\n\ttooltipFor(config: ITooltipConfig): void {\r\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\r\n\t\t\tlet clone = event;\r\n\t\t\t// making events survive timeout in ie\r\n\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\r\n\t\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\t\tclone = document[\"createEventObject\"](event);\r\n\t\t\t}\r\n\t\t\treturn clone;\r\n\t\t};\r\n\t\tthis._initDelayedFunctions();\r\n\t\tthis.attach({\r\n\t\t\tselector: config.selector,\r\n\t\t\tglobal: config.global,\r\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\t\tthis.delayHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmouseleave:() => {\r\n\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\tthis.delayHide();\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initDelayedFunctions(){\r\n\t\tconst gantt = this._gantt;\r\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\r\n\t\tif(this.delayShow){\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t}\r\n\t\tif(this.delayHide){\r\n\t\t\tthis.delayHide.$cancelTimeout();\r\n\t\t}\r\n\t\tthis.tooltip.hide();\r\n\r\n\t\tthis.delayShow = helpers.delay((event: MouseEvent, html: string) => {\r\n\t\t\tif(gantt.callEvent(\"onBeforeTooltip\", [event]) === false) {\r\n\t\t\t\tthis.tooltip.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.setContent(html);\r\n\t\t\t\tthis.tooltip.show(event);\r\n\t\t\t}\r\n\t\t}, gantt.config.tooltip_timeout || 1);\r\n\r\n\t\tthis.delayHide = helpers.delay(() => {\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\tthis.tooltip.hide();\r\n\t\t}, gantt.config.tooltip_hide_timeout || 1);\r\n\t}\r\n\r\n}","import {TooltipManager} from \"./tooltipManager\";\r\n\r\nexport default function(gantt: any){\r\n\r\ngantt.config.tooltip_timeout = 30;\r\ngantt.config.tooltip_offset_y = 20;\r\ngantt.config.tooltip_offset_x = 10;\r\ngantt.config.tooltip_hide_timeout = 30;\r\n\r\n\r\n\r\nconst tooltipManager = new TooltipManager(gantt);\r\n\r\ngantt.ext.tooltips = tooltipManager;\r\n\r\ngantt.attachEvent(\"onGanttReady\", function(){\r\n\r\n\ttooltipManager.tooltipFor({\r\n\t\tselector: \"[\"+gantt.config.task_attribute+\"]:not(.gantt_task_row)\",\r\n\t\thtml: (event: MouseEvent) => {\r\n\t\t\tif (gantt.config.touch && !gantt.config.touch_tooltip) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst targetTaskId = gantt.locate(event);\r\n\t\t\tif(gantt.isTaskExists(targetTaskId)){\r\n\t\t\t\tconst task = gantt.getTask(targetTaskId);\r\n\t\t\t\treturn gantt.templates.tooltip_text(task.start_date, task.end_date, task);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tglobal: false\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onDestroy\", function() {\r\n\ttooltipManager.destructor();\r\n});\r\n\r\ngantt.attachEvent(\"onLightbox\", function() {\r\n\ttooltipManager.hideTooltip();\r\n});\r\nconst isLinkCreate = () => {\r\n\tconst state = gantt.getState();\r\n\treturn !!state.link_source_id;\r\n};\r\ngantt.attachEvent(\"onBeforeTooltip\", function() {\r\n\tif (isLinkCreate()){\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttScroll\", function(){\r\n\ttooltipManager.hideTooltip();\r\n});\r\n\r\n}","\r\ninterface IQuickInfoContainer{\r\n\tparent: HTMLElement;\r\n\txViewport: HTMLElement;\r\n\tyViewport: HTMLElement;\r\n}\r\n\r\nexport class QuickInfo {\r\n\tprivate _quickInfoTask: TaskID;\r\n\tprivate _quickInfoBoxId: number | string;\r\n\tprivate _quickInfoBox: HTMLElement;\r\n\tprivate _quickInfoReadonly: boolean | null;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\t// show at coordinates:\r\n\t// show(x: number, y: number)\r\n\t// show for a task:\r\n\t// show(id: TaskID)\r\n\tshow : {\r\n\t\t(x: number, y: number) : void;\r\n\t\t(id: TaskID) : void;\r\n\t} = (id: TaskID | number, y? : number) : void => {\r\n\t\tif (y === undefined) {\r\n\t\t\tthis._showForTask(id);\r\n\t\t} else {\r\n\t\t\tthis._showAtCoordinates(id as number, y);\r\n\t\t}\r\n\t}\r\n\r\n\thide = (forced?: boolean) : any => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tconst taskId = this._quickInfoTask;\r\n\t\tthis._quickInfoTask = null;\r\n\r\n\t\tif (qi && qi.parentNode){\r\n\r\n\t\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\r\n\t\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\t\tif (qi.style.right === \"auto\"){\r\n\t\t\t\tqi.style.left = \"-350px\";\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.right = \"-350px\";\r\n\t\t\t}\r\n\r\n\t\t\tif (forced) {\r\n\t\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNode = (): HTMLElement => {\r\n\t\tif(this._quickInfoBox) {\r\n\t\t\treturn this._quickInfoBox;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tsetContainer = (container: string|HTMLElement): void => {\r\n\t\tif(container){\r\n\t\t\tthis._container = typeof container === \"string\" ? document.getElementById(container) : container;\r\n\t\t}\r\n\t}\r\n\r\n\tsetContent = (content?: IQuickInfoContent) => {\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst defaultContent = {\r\n\t\t\ttaskId: null,\r\n\t\t\theader: {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tdate: \"\"\r\n\t\t\t},\r\n\t\t\tcontent: \"\",\r\n\t\t\tbuttons: gantt.config.quickinfo_buttons\r\n\t\t};\r\n\r\n\t\tif(!content){\r\n\t\t\tcontent = defaultContent;\r\n\t\t}\r\n\r\n\t\tif(!content.taskId){\r\n\t\t\tcontent.taskId = defaultContent.taskId;\r\n\t\t}\r\n\r\n\t\tif(!content.header){\r\n\t\t\tcontent.header = defaultContent.header;\r\n\t\t}\r\n\r\n\t\tif(!content.header.title){\r\n\t\t\tcontent.header.title = defaultContent.header.title;\r\n\t\t}\r\n\t\tif(!content.header.date){\r\n\t\t\tcontent.header.date = defaultContent.header.date;\r\n\t\t}\r\n\t\tif(!content.content){\r\n\t\t\tcontent.content = defaultContent.content;\r\n\t\t}\r\n\t\tif(!content.buttons){\r\n\t\t\tcontent.buttons = defaultContent.buttons;\r\n\t\t}\r\n\r\n\r\n\t\tlet qi = this.getNode();\r\n\t\tif(!qi){\r\n\t\t\tqi = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\tif(content.taskId){\r\n\t\t\tthis._quickInfoBoxId = content.taskId;\r\n\t\t}\r\n\r\n\t\tconst titleBox = qi.querySelector(\".gantt_cal_qi_title\") as HTMLElement;\r\n\t\tconst titleContent = titleBox.querySelector(\".gantt_cal_qi_tcontent\");\r\n\t\tconst titleDate = titleBox.querySelector(\".gantt_cal_qi_tdate\");\r\n\t\tconst main = qi.querySelector(\".gantt_cal_qi_content\");\r\n\t\tconst controls = qi.querySelector(\".gantt_cal_qi_controls\") as HTMLElement;\r\n\r\n\t\tgantt._waiAria.quickInfoHeader(qi, [content.header.title, content.header.date].join(\" \"));\r\n\r\n\t\ttitleContent.innerHTML = content.header.title;\r\n\t\ttitleDate.innerHTML = content.header.date;\r\n\r\n\t\tif(!content.header.title && !content.header.date){\r\n\t\t\ttitleBox.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\ttitleBox.style.display = \"\";\r\n\t\t}\r\n\t\tmain.innerHTML = content.content;\r\n\r\n\t\tconst buttons = content.buttons;\r\n\t\tif(!buttons.length){\r\n\t\t\tcontrols.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tcontrols.style.display = \"\";\r\n\t\t}\r\n\t\tlet html = \"\";\r\n\t\tfor (let i = 0; i < buttons.length; i++){\r\n\r\n\t\t\tconst ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += \"<div class=\\\"gantt_qi_big_icon \"+buttons[i]+\"\\\" title=\\\"\"\r\n\t\t\t\t+gantt.locale.labels[buttons[i]]+\"\\\" \" + ariaAttr +\"><div class='gantt_menu_icon \" + buttons[i]\r\n\t\t\t\t+ \"'></div><div>\"+gantt.locale.labels[buttons[i]]+\"</div></div>\";\r\n\t\t}\r\n\t\tcontrols.innerHTML = html;\r\n\r\n\t\tgantt.eventRemove(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.eventRemove(qi, \"keypress\", this._qiKeyPressHandler);\r\n\r\n\t\tgantt.event(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.event(qi, \"keypress\", this._qiKeyPressHandler);\r\n\t}\r\n\r\n\tprivate _qiButtonClickHandler = (ev) => {\r\n\t\tev = ev || event;\r\n\t\tthis._qi_button_click(ev.target || ev.srcElement);\r\n\t}\r\n\r\n\tprivate _qiKeyPressHandler = (e) => {\r\n\t\te = e || event;\r\n\t\t// @ts-ignore\r\n\t\tconst code = e.which||event.keyCode;\r\n\t\tif (code === 13 || code === 32){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._qi_button_click(e.target || e.srcElement);\r\n\t\t\t},1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _showAtCoordinates(x: number, y: number) : void {\r\n\t\tthis.hide(true);\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tthis._quickInfoTask = null;\r\n\t\tif(!this._quickInfoBox){\r\n\t\t\tthis._createQuickInfoElement();\r\n\t\t\tthis.setContent();\r\n\t\t}\r\n\r\n\t\tthis._appendAtCoordinates(x, y);\r\n\t\tthis._gantt.callEvent(\"onQuickInfo\", [null]);\r\n\t}\r\n\r\n\tprivate _showForTask(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif ((\r\n\t\t\tid === this._quickInfoBoxId &&\r\n\t\t\tgantt.utils.dom.isChildOf(this._quickInfoBox, document.body)\r\n\t\t) || !gantt.config.show_quick_info) {\r\n\t\t\t// not show if the quick info is already displayed for this task, or if it shouldn't be displayed\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.hide(true);\r\n\t\tconst offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\t\tconst container = this._getContainer();\r\n\t\tconst pos = this._get_event_counter_part(id, offset, container.xViewport, container.yViewport);\r\n\r\n\t\tif (pos){\r\n\t\t\tthis._quickInfoBox = this._init_quick_info(id);\r\n\t\t\tthis._quickInfoTask = id;\r\n\t\t\tthis._quickInfoBox.className = this._prepare_quick_info_classname(id);\r\n\r\n\t\t\tthis._fill_quick_data(id);\r\n\t\t\tthis._show_quick_info(pos, offset);\r\n\t\t\tgantt.callEvent(\"onQuickInfo\", [id]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _get_event_counter_part(id: TaskID, offset: number, xViewport: HTMLElement, yViewport: HTMLElement) : any {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet domEv = gantt.getTaskNode(id);\r\n\t\tif (!domEv) {\r\n\t\t\tdomEv = gantt.getTaskRowNode(id);\r\n\t\t\tif (!domEv) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet left = 0;\r\n\t\tconst top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\t\tlet node = domEv;\r\n\r\n\t\tif (gantt.utils.dom.isChildOf(node, xViewport)) {\r\n\t\t\twhile (node && node !== xViewport){\r\n\t\t\t\tleft += node.offsetLeft;\r\n\t\t\t\tnode = node.offsetParent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\tif(node){\r\n\t\t\tconst dx = (left + domEv.offsetWidth/2) - scroll.x > (xViewport.offsetWidth/2) ? 1 : 0;\r\n\t\t\tconst dy = (top + domEv.offsetHeight/2) - scroll.y > (yViewport.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\t\treturn { left, top, dx, dy, width:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _createQuickInfoElement() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = document.createElement(\"div\");\r\n\t\tqi.className += \"gantt_cal_quick_info\";\r\n\t\tgantt._waiAria.quickInfoAttr(qi);\r\n\r\n\t\t// title\r\n\t\tconst ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tlet html = \"<div class=\\\"gantt_cal_qi_title\\\" \"+ariaAttr+\">\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_tcontent\\\"></div><div  class=\\\"gantt_cal_qi_tdate\\\"></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_content\\\"></div>\";\r\n\r\n\t\t// buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tgantt.event(container.parent, \"scroll\", () => { this.hide(); });\r\n\t\t}\r\n\r\n\t\tthis._quickInfoBox = qi;\r\n\t\treturn qi;\r\n\t}\r\n\r\n\tprivate _init_quick_info(id: TaskID) : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\tif(typeof this._quickInfoReadonly === \"boolean\"){\r\n\t\t\tif(gantt.isReadonly(task) !== this._quickInfoReadonly){\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t\tthis._quickInfoBox = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._quickInfoReadonly = gantt.isReadonly(task);\r\n\r\n\t\tif (!this._quickInfoBox){\r\n\t\t\tthis._quickInfoBox = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\treturn this._quickInfoBox;\r\n\t}\r\n\r\n\tprivate _prepare_quick_info_classname(id: TaskID) : string {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\r\n\t\tlet css = \"gantt_cal_quick_info\";\r\n\t\tconst template = gantt.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\t\tif(template){\r\n\t\t\tcss += \" \" + template;\r\n\t\t}\r\n\t\treturn css;\r\n\t}\r\n\r\n\tprivate _fill_quick_data(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst ev = gantt.getTask(id);\r\n\r\n\t\tthis._quickInfoBoxId = id;\r\n\r\n\t\tlet allowedButtons = [];\r\n\t\tif (this._quickInfoReadonly){\r\n\t\t\tconst buttons = gantt.config.quickinfo_buttons;\r\n\t\t\tconst isEditor = {icon_delete: true, icon_edit: true};\r\n\t\t\tfor (let i = 0; i < buttons.length; i++){\r\n\t\t\t\tif(this._quickInfoReadonly && isEditor[buttons[i]]){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tallowedButtons.push(buttons[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallowedButtons = gantt.config.quickinfo_buttons;\r\n\t\t}\r\n\r\n\t\tthis.setContent({\r\n\t\t\theader: {\r\n\t\t\t\ttitle: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\t\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t\t\t},\r\n\t\t\tcontent: gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev),\r\n\t\t\tbuttons: allowedButtons\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _appendAtCoordinates(x: number, y: number): void {\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tconst container = this._getContainer();\r\n\t\tif (!qi.parentNode ||\r\n\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.style.left = x + \"px\";\r\n\t\tqi.style.top = y + \"px\";\r\n\t}\r\n\r\n\tprivate _show_quick_info(pos: any, offset: number) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tif (!qi.parentNode ||\r\n\t\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t\t}\r\n\t\t\tconst width = qi.offsetWidth;\r\n\t\t\tconst popupHeight = qi.offsetHeight;\r\n\r\n\t\t\tconst scrolls = gantt.getScrollState();\r\n\t\t\tconst xViewport = container.xViewport;\r\n\t\t\tconst yViewport = container.yViewport;\r\n\t\t\tconst screenWidth = xViewport.offsetWidth + scrolls.x - width;\r\n\r\n\t\t\tconst relativePopupTop = pos.top - scrolls.y;\r\n\t\t\tconst relativePopupBottom = relativePopupTop + popupHeight;\r\n\r\n\t\t\tlet top = pos.top;\r\n\t\t\tif(relativePopupBottom > yViewport.offsetHeight / 2){\r\n\t\t\t\ttop = pos.top - (popupHeight + pos.height + 2*offset);\r\n\t\t\t\tif(top < scrolls.y && relativePopupBottom <= yViewport.offsetHeight){\r\n\t\t\t\t\ttop = pos.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (top < scrolls.y) {\r\n\t\t\t\ttop = scrolls.y;\r\n\t\t\t}\r\n\r\n\t\t\tconst x = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screenWidth);\r\n\t\t\tconst y = top;\r\n\r\n\t\t\tthis._appendAtCoordinates(x, y);\r\n\t\t} else {\r\n\t\t\tqi.style.top = 20 + \"px\";\r\n\t\t\tif (pos.dx === 1){\r\n\t\t\t\tqi.style.right = \"auto\";\r\n\t\t\t\tqi.style.left = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.left = \"auto\";\r\n\t\t\t\tqi.style.right = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t\tqi.className += \" gantt_qi_\"+(pos.dx === 1 ? \"left\" : \"right\");\r\n\t\t\tgantt.$root.appendChild(qi);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _qi_button_click(node: any) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst box = this._quickInfoBox;\r\n\t\tif (!node || node === box){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mask = node.className;\r\n\t\tif (mask.indexOf(\"_icon\") !== -1){\r\n\t\t\tconst id = this._quickInfoBoxId;\r\n\t\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else {\r\n\t\t\tthis._qi_button_click(node.parentNode);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getContainer(): IQuickInfoContainer{\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet container = this._container ? this._container : gantt.$task_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$task,\r\n\t\t\t\tyViewport: gantt.$task_data\r\n\t\t\t};\r\n\t\t}\r\n\t\tcontainer = this._container ? this._container : gantt.$grid_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$grid,\r\n\t\t\t\tyViewport: gantt.$grid_data\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tparent: this._container ? this._container : gantt.$layout,\r\n\t\t\txViewport: gantt.$layout,\r\n\t\t\tyViewport: gantt.$layout\r\n\t\t};\r\n\t}\r\n}\r\n","import { QuickInfo } from \"./quickInfo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\ngantt.ext.quickInfo = new QuickInfo(gantt);\r\n\r\ngantt.config.quickinfo_buttons = [\"icon_delete\",\"icon_edit\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id){\r\n\tsetTimeout(function() {\r\n\t\tgantt.ext.quickInfo.show(id);\r\n\t}, 0);\r\n\r\n\treturn true;\r\n});\r\n\r\nconst events = [\"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\nconst hidingFunction = function(){\r\n\tgantt.ext.quickInfo.hide();\r\n\treturn true;\r\n};\r\nfor (let i=0; i<events.length; i++){\r\n\tgantt.attachEvent(events[i], hidingFunction);\r\n}\r\n// GS-957: We don't want to hide QuickInfo when we click on it.\r\ngantt.attachEvent(\"onEmptyClick\", function(e){\r\n\tlet hideQuickInfo = true;\r\n\tconst parent = document.querySelector(\".gantt_cal_quick_info\");\r\n\tif (parent){\r\n\t\tconst quickInfoClick = gantt.utils.dom.isChildOf(e.target, parent);\r\n\t\tif (quickInfoClick){\r\n\t\t\thideQuickInfo = false;\r\n\t\t}\r\n\t}\r\n\tif (hideQuickInfo){\r\n\t\thidingFunction();\r\n\t}\r\n});\r\nfunction clearQuickInfo() {\r\n\tgantt.ext.quickInfo.hide();\r\n\tgantt.ext.quickInfo._quickInfoBox = null;\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onGanttReady\", clearQuickInfo);\r\ngantt.attachEvent(\"onDestroy\", clearQuickInfo);\r\n\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode === 27){\r\n\t\tgantt.ext.quickInfo.hide();\r\n\t}\r\n});\r\n\r\n}","var {replaceValidZeroId} = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\ngantt.config.multiselect = true;\r\ngantt.config.multiselect_one_level = false;\r\n\r\ngantt._multiselect = {\r\n\t_selected: {},\r\n\t_one_level: false,\r\n\t_active: true,\r\n\t_first_selected_when_shift: null,\r\n\tgetDefaultSelected: function() {\r\n\t\tvar selected = this.getSelected();\r\n\t\treturn selected.length ? selected[selected.length - 1] : null;\r\n\t},\r\n\tsetFirstSelected: function(id) {\r\n\t\tthis._first_selected_when_shift = id;\r\n\t},\r\n\tgetFirstSelected: function() {\r\n\t\treturn this._first_selected_when_shift;\r\n\t},\r\n\tisActive: function() {\r\n\t\tthis.updateState();\r\n\t\treturn this._active;\r\n\t},\r\n\tupdateState: function() {\r\n\t\tthis._one_level = gantt.config.multiselect_one_level;\r\n\t\tvar active = this._active;\r\n\t\tthis._active = gantt.config.select_task;\r\n\t\tif (this._active != active) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\treset: function () {\r\n\t\tthis._selected = {};\r\n\t},\r\n\tsetLastSelected: function (id) {\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tvar store = gantt.$data.tasksStore;\r\n\t\t\tif (id)\r\n\t\t\t\tstore.select(id+\"\");\r\n\t\t\telse\r\n\t\t\t\tstore.unselect(null);\r\n\t\t});\r\n\t},\r\n\tgetLastSelected: function () {\r\n\t\tvar last = gantt.$data.tasksStore.getSelectedId();\r\n\t\tif (last && gantt.isTaskExists(last))\r\n\t\t\treturn last;\r\n\t\treturn null;\r\n\t},\r\n\tselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, true, e]) && gantt.callEvent(\"onBeforeTaskSelected\", [id])) {\r\n\t\t\tthis._selected[id] = true;\r\n\t\t\tthis.setLastSelected(id);\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, true, e]);\r\n\t\t\tgantt.callEvent(\"onTaskSelected\", [id]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\ttoggle: function (id, e) {\r\n\t\tif (this._selected[id]) {\r\n\t\t\tthis.unselect(id, e);\r\n\t\t} else {\r\n\t\t\tthis.select(id, e);\r\n\t\t}\r\n\t},\r\n\tunselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, false, e])) {\r\n\t\t\tthis._selected[id] = false;\r\n\t\t\tif (this.getLastSelected() == id)\r\n\t\t\t\tthis.setLastSelected(this.getDefaultSelected());\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, false, e]);\r\n\t\t\tgantt.callEvent(\"onTaskUnselected\", [id]);\r\n\t\t}\r\n\t},\r\n\tisSelected: function (id) {\r\n\t\treturn !!(gantt.isTaskExists(id) && this._selected[id]);\r\n\t},\r\n\tgetSelected: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._selected) {\r\n\t\t\tif (this._selected[i] && gantt.isTaskExists(i)) {\r\n\t\t\t\tres.push(i);\r\n\t\t\t} else {\r\n\t\t\t\tthis._selected[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tres.sort(function(a, b) {\r\n\t\t\treturn gantt.getGlobalTaskIndex(a) > gantt.getGlobalTaskIndex(b) ? 1 : -1;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tforSelected: function (callback) {\r\n\t\tvar selected = this.getSelected();\r\n\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\tcallback(selected[i]);\r\n\t\t}\r\n\t},\r\n\tisSameLevel: function(id) {\r\n\t\tif (!this._one_level)\r\n\t\t\treturn true;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tif (!last)\r\n\t\t\treturn true;\r\n\t\tif (!(gantt.isTaskExists(last) && gantt.isTaskExists(id)))\r\n\t\t\treturn true;\r\n\t\treturn !!(gantt.calculateTaskLevel(gantt.getTask(last)) == gantt.calculateTaskLevel(gantt.getTask(id)));\r\n\t},\r\n\tafterSelect: function(id) {\r\n\t\tif (gantt.isTaskExists(id)){\r\n\t\t\t// FIXME: quick workaround to prevent re-filtering inside refresh on multiselect\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshTask(id);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tdoSelection: function(e) {\r\n\t\tif (!this.isActive())\r\n\t\t\treturn false;\r\n\r\n\t\t// deny selection when click on 'expand' or 'collapse' icons\r\n\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\treturn false;\r\n\r\n\t\tvar target_ev = gantt.locate(e);\r\n\t\tif (!target_ev)\r\n\t\t\treturn false;\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeMultiSelect\", [e]))\r\n\t\t\treturn false;\r\n\r\n\t\tvar selected = this.getSelected();\r\n\t\tvar defaultLast = this.getFirstSelected();\r\n\t\tvar isLast = false;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tvar multiSelect = gantt.config.multiselect;\r\n\r\n\r\n\t\tvar singleSelection = (function (){\r\n\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (!this.isSelected(target_ev)) {\r\n\t\t\t\tthis.select(target_ev, e);\r\n\t\t\t}\r\n\t\t\tselected = this.getSelected();\r\n\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\tif (selected[i] !== target_ev) {\r\n\t\t\t\t\tthis.unselect(selected[i], e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\t\tvar blockSelection = (function(){\r\n\t\t\tif (!last)\r\n\t\t\t\tlast = target_ev;\r\n\t\t\telse if (target_ev) {\r\n\t\t\t\tvar first_indx = gantt.getGlobalTaskIndex(this.getFirstSelected());\r\n\t\t\t\tvar target_indx = gantt.getGlobalTaskIndex(target_ev);\r\n\t\t\t\tvar last_indx = gantt.getGlobalTaskIndex(last);\r\n\r\n\t\t\t\t// clear prev selection\r\n\t\t\t\tvar tmp = last;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tthis.unselect(tmp, e);\r\n\t\t\t\t\ttmp = (first_indx > last_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t\ttmp = target_ev;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tif (this.select(tmp, e) && !isLast) {\r\n\t\t\t\t\t\tisLast = true;\r\n\t\t\t\t\t\tdefaultLast = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp = (first_indx > target_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\r\n\t\tif (multiSelect && (e.ctrlKey || e.metaKey)) {\r\n\t\t\tif (!this.isSelected(target_ev))\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (target_ev) {\r\n\t\t\t\tthis.toggle(target_ev, e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (multiSelect && e.shiftKey) {\r\n\t\t\tif (!gantt.isTaskExists(this.getFirstSelected()) || this.getFirstSelected() === null) {\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t\t}\r\n\r\n\t\t\tif (selected.length) { // select a group of tasks\r\n\t\t\t\tblockSelection();\r\n\t\t\t}\r\n\t\t\telse { // select a task when no task is selected and Shift is pressed\r\n\t\t\t\tsingleSelection();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\telse { // no key press or no multiple selection on the mouse click\r\n\t\t\tsingleSelection();\r\n\t\t}\r\n\r\n\r\n\t\tif (this.isSelected(target_ev)) {\r\n\t\t\tthis.setLastSelected(target_ev);\r\n\t\t} else if (defaultLast) {\r\n\t\t\tif (target_ev == last)\r\n\t\t\t\tthis.setLastSelected(e.shiftKey ? defaultLast : this.getDefaultSelected());\r\n\t\t} else {\r\n\t\t\tthis.setLastSelected(null);\r\n\t\t}\r\n\r\n\t\tif (!this.getSelected().length)\r\n\t\t\tthis.setLastSelected(null);\r\n\r\n\t\tif (!this.getLastSelected() || !this.isSelected(this.getFirstSelected()))\r\n\t\t\tthis.setFirstSelected(this.getLastSelected());\r\n\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\n(function(){\r\n\tvar old_selectTask = gantt.selectTask;\r\n\tgantt.selectTask = function(id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (!id)\r\n\t\t\treturn false;\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar res = id;\r\n\t\tif (multiselect.isActive()) {\r\n\t\t\tif (multiselect.select(id, null)) {\r\n\t\t\t\tmultiselect.setLastSelected(id);\r\n\t\t\t}\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t} else {\r\n\t\t\tres = old_selectTask.call(this, id);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar old_unselectTask = gantt.unselectTask;\r\n\tgantt.unselectTask = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar isActive = multiselect.isActive();\r\n\t\tid = id || multiselect.getLastSelected();\r\n\t\tif(id && isActive) {\r\n\t\t\tmultiselect.unselect(id, null);\r\n\t\t\tif (id == multiselect.getLastSelected())\r\n\t\t\t\tmultiselect.setLastSelected(null);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t\tvar res = id;\r\n\t\tif (!isActive)\r\n\t\t\tres = old_unselectTask.call(this, id);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.toggleTaskSelection = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tif (id && multiselect.isActive()) {\r\n\t\t\tmultiselect.toggle(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t};\r\n\tgantt.getSelectedTasks = function() {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tmultiselect.isActive();\r\n\t\treturn multiselect.getSelected();\r\n\t};\r\n\tgantt.eachSelectedTask = function(callback){\r\n\t\treturn this._multiselect.forSelected(callback);\r\n\t};\r\n\tgantt.isSelectedTask = function(id){\r\n\t\treturn this._multiselect.isSelected(id);\r\n\t};\r\n\tgantt.getLastSelectedTask = function(){\r\n\t\treturn this._multiselect.getLastSelected();\r\n\t};\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tvar old_isSelected = gantt.$data.tasksStore.isSelected;\r\n\t\tgantt.$data.tasksStore.isSelected = function(id){\r\n\t\t\tif (gantt._multiselect.isActive()) {\r\n\t\t\t\treturn gantt._multiselect.isSelected(id);\r\n\t\t\t}\r\n\t\t\treturn old_isSelected.call(this, id);\r\n\t\t};\r\n\t});\r\n})();\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\tif (gantt.isSelectedTask(id)) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect.select(new_id, null);\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\r\n\tif (multiselect._selected[id]) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect._selected[id] = false;\r\n\t\tmultiselect.setLastSelected(multiselect.getDefaultSelected());\r\n\t}\r\n\r\n\tmultiselect.forSelected(function (task_id) {\r\n\t\tif (!gantt.isTaskExists(task_id))\r\n\t\t\tmultiselect.unselect(task_id, null);\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeTaskMultiSelect\", function(id, state, e){\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (state && multiselect.isActive()) {\r\n\t\tif (multiselect._one_level) {\r\n\t\t\treturn multiselect.isSameLevel(id);\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id, e) {\r\n\tif (gantt._multiselect.doSelection(e))\r\n\t\tgantt.callEvent(\"onMultiSelect\", [e]);\r\n\treturn true;\r\n});\r\n\r\n};","\r\nmodule.exports = function(gantt){\r\n\r\nif(!gantt._markers) {\r\n\tgantt._markers = gantt.createDatastore({\r\n\t\tname: \"marker\",\r\n\t\tinitItem: function (marker) {\r\n\t\t\tmarker.id = marker.id || gantt.uid();\r\n\t\t\treturn marker;\r\n\t\t}\r\n\t});\r\n}\r\n\r\ngantt.config.show_markers = true;\r\n\r\nfunction render_marker(marker){\r\n\tif(!gantt.config.show_markers)\r\n\t\treturn false;\r\n\r\n\tif(!marker.start_date)\r\n\t\treturn false;\r\n\r\n\tvar state = gantt.getState();\r\n\tif(+marker.start_date > +state.max_date)\r\n\t\treturn;\r\n\tif((!marker.end_date || +marker.end_date < +state.min_date) && +marker.start_date < +state.min_date)\r\n\t\treturn;\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tdiv.setAttribute(\"data-marker-id\", marker.id);\r\n\r\n\tvar css = \"gantt_marker\";\r\n\tif(gantt.templates.marker_class)\r\n\t\tcss += \" \" + gantt.templates.marker_class(marker);\r\n\r\n\tif(marker.css){\r\n\t\tcss += \" \" + marker.css;\r\n\t}\r\n\r\n\tif(marker.title){\r\n\t\tdiv.title = marker.title;\r\n\t}\r\n\tdiv.className = css;\r\n\r\n\tvar start = gantt.posFromDate(marker.start_date);\r\n\tdiv.style.left = start + \"px\";\r\n\tdiv.style.height = Math.max(gantt.getRowTop(gantt.getVisibleTaskCount()), 0) + \"px\";\r\n\tif(marker.end_date){\r\n\t\tvar end = gantt.posFromDate(marker.end_date);\r\n\t\tdiv.style.width = Math.max((end - start), 0) + \"px\";\r\n\r\n\t}\r\n\r\n\tif(marker.text){\r\n\t\tdiv.innerHTML = \"<div class='gantt_marker_content' >\" + marker.text + \"</div>\";\r\n\t}\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction initMarkerArea(){\r\n\tif(!gantt.$task_data)\r\n\t\treturn;\r\n\r\n\tvar markerArea = document.createElement(\"div\");\r\n\tmarkerArea.className = \"gantt_marker_area\";\r\n\tgantt.$task_data.appendChild(markerArea);\r\n\tgantt.$marker_area = markerArea;\r\n}\r\n\r\ngantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\tif(!gantt.$marker_area)\r\n\t\tinitMarkerArea();\r\n});\r\n\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tif(!gantt.$marker_area){\r\n\t\tinitMarkerArea();\r\n\t\tgantt.renderMarkers();\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t// GS-1304 - markers should attach when layout is initialized, both on gantt.init and gantt.resetLayout\r\n\t// wait for \"onBeforeGanttRender\", so all layout elements will be in DOM\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tinitMarkerArea();\r\n\r\n\t\tvar layers = gantt.$services.getService(\"layers\");\r\n\t\tvar markerRenderer = layers.createDataRender({\r\n\t\t\tname: \"marker\",\r\n\t\t\tdefaultContainer: function(){ return gantt.$marker_area;}\r\n\t\t});\r\n\t\tmarkerRenderer.addLayer(render_marker);\r\n\t}, {once: true});\r\n});\r\n\r\ngantt.getMarker = function(id){\r\n\tif(!this._markers) return null;\r\n\r\n\treturn this._markers.getItem(id);\r\n};\r\n\r\ngantt.addMarker = function(marker){\r\n\treturn this._markers.addItem(marker);\r\n};\r\n\r\ngantt.deleteMarker = function(id){\r\n\tif(!this._markers.exists(id))\r\n\t\treturn false;\r\n\r\n\tthis._markers.removeItem(id);\r\n\treturn true;\r\n};\r\ngantt.updateMarker = function(id){\r\n\tthis._markers.refresh(id);\r\n};\r\n\r\ngantt._getMarkers = function(){\r\n\treturn this._markers.getItems();\r\n};\r\n\r\ngantt.renderMarkers = function () {\r\n\tthis._markers.refresh();\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.dispatcher = {\r\n\t\tisActive: false,\r\n\t\tactiveNode: null,\r\n\t\tglobalNode: new gantt.$keyboardNavigation.GanttNode(),\r\n\r\n\t\tenable: function () {\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.setActiveNode(this.getActiveNode());\r\n\t\t},\r\n\r\n\t\tdisable: function () {\r\n\t\t\tthis.isActive = false;\r\n\t\t},\r\n\r\n\t\tisEnabled: function () {\r\n\t\t\treturn !!this.isActive;\r\n\t\t},\r\n\r\n\t\tgetDefaultNode: function () {\r\n\t\t\tvar node;\r\n\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskCell();\r\n\t\t\t} else {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t}\r\n\r\n\t\t\tif (!node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tsetDefaultNode: function () {\r\n\t\t\tthis.setActiveNode(this.getDefaultNode());\r\n\t\t},\r\n\r\n\t\tgetActiveNode: function () {\r\n\t\t\tvar node = this.activeNode;\r\n\t\t\tif (node && !node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tfromDomElement: function(e){\r\n\t\t\tvar inputs = [\r\n\t\t\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\tgantt.$keyboardNavigation.TaskCell,\r\n\t\t\t\tgantt.$keyboardNavigation.HeaderCell\r\n\t\t\t];\r\n\t\t\tfor(var i = 0; i < inputs.length; i++){\r\n\t\t\t\tif(inputs[i].prototype.fromDomElement){\r\n\t\t\t\t\tvar node = inputs[i].prototype.fromDomElement(e);\r\n\t\t\t\t\tif(node) return node;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tfocusGlobalNode: function () {\r\n\t\t\tthis.blurNode(this.globalNode);\r\n\t\t\tthis.focusNode(this.globalNode);\r\n\t\t},\r\n\r\n\t\tsetActiveNode: function (el) {\r\n\t\t\t//console.trace()\r\n\t\t\tvar focusChanged = true;\r\n\t\t\tif (this.activeNode) {\r\n\t\t\t\tif (this.activeNode.compareTo(el)) {\r\n\t\t\t\t\tfocusChanged = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isEnabled()) {\r\n\t\t\t\tif(focusChanged)\r\n\t\t\t\t\tthis.blurNode(this.activeNode);\r\n\r\n\t\t\t\tthis.activeNode = el;\r\n\t\t\t\tthis.focusNode(this.activeNode, !focusChanged);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocusNode: function (el, keptFocus) {\r\n\t\t\tif (el && el.focus) {\r\n\t\t\t\tel.focus(keptFocus);\r\n\t\t\t}\r\n\t\t},\r\n\t\tblurNode: function (el) {\r\n\t\t\tif (el && el.blur) {\r\n\t\t\t\tel.blur();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeyDownHandler: function (e) {\r\n\r\n\t\t\tif (gantt.$keyboardNavigation.isModal())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (!this.isEnabled())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.defaultPrevented){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar ganttNode = this.globalNode;\r\n\r\n\t\t\tvar command = gantt.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\r\n\r\n\t\t\tvar activeElement = this.getActiveNode();\r\n\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\tif(eventFacade.callEvent(\"onKeyDown\", [command, e]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!activeElement) {\r\n\t\t\t\tthis.setDefaultNode();\r\n\t\t\t} else if (activeElement.findHandler(command)) {\r\n\t\t\t\tactiveElement.doAction(command, e);\r\n\t\t\t} else if (ganttNode.findHandler(command)) {\r\n\t\t\t\tganttNode.doAction(command, e);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_timeout: null,\r\n\t\tawaitsFocus: function(){\r\n\t\t\treturn this._timeout !== null;\r\n\t\t},\r\n\t\tdelay: function(callback, delay){\r\n\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t\tthis._timeout = setTimeout(gantt.bind(function(){\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t\tcallback();\r\n\t\t\t}, this)  , delay || 1);\r\n\r\n\t\t},\r\n\t\tclearDelay: function(){\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t}\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\t(function () {\r\n\t\tvar modalsStack = [];\r\n\r\n\t\tfunction isModal() {\r\n\t\t\treturn !!modalsStack.length;\r\n\t\t}\r\n\r\n\t\tfunction afterPopup(box) {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (!isModal()){\r\n\t\t\t\t\tif(!gantt.$destroyed){\r\n\t\t\t\t\t\tgantt.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tfunction startModal(box) {\r\n\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\tgantt.event(box, \"keydown\", trapFocus);\r\n\t\t\tmodalsStack.push(box);\r\n\t\t\t//gantt.$keyboardNavigation.dispatcher.disable();\r\n\t\t}\r\n\r\n\t\tfunction endModal() {\r\n\t\t\tvar box = modalsStack.pop();\r\n\t\t\tif (box) {\r\n\t\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\t}\r\n\t\t\tafterPopup(box);\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction isTopModal(box) {\r\n\t\t\treturn box == modalsStack[modalsStack.length - 1];\r\n\t\t}\r\n\r\n\t\tfunction trapFocus(event) {\r\n\t\t\tvar target = event.currentTarget;\r\n\t\t\tif (!isTopModal(target)) return;\r\n\r\n\t\t\tgantt.$keyboardNavigation.trapFocus(target, event);\r\n\t\t}\r\n\r\n\t\tfunction traceLightbox() {\r\n\t\t\tstartModal(gantt.getLightbox());\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", traceLightbox);\r\n\t\tgantt.attachEvent(\"onAfterLightbox\", endModal);\r\n\t\tgantt.attachEvent(\"onLightboxChange\", function () {\r\n\t\t\tendModal();\r\n\t\t\ttraceLightbox();\r\n\t\t});\r\n\r\n\r\n\t\tgantt.attachEvent(\"onAfterQuickInfo\", function () {\r\n\t\t\tafterPopup();\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onMessagePopup\", function (box) {\r\n\t\t\tsaveFocus();\r\n\t\t\tstartModal(box);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterMessagePopup\", function () {\r\n\t\t\tendModal();\r\n\t\t\trestoreFocus();\r\n\t\t});\r\n\r\n\t\tvar focusElement = null;\r\n\r\n\t\tfunction saveFocus() {\r\n\t\t\tfocusElement = document.activeElement;\r\n\t\t}\r\n\r\n\t\tfunction restoreFocus() {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (focusElement) {\r\n\t\t\t\t\tfocusElement.focus();\r\n\t\t\t\t\tfocusElement = null;\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tgantt.$keyboardNavigation.isModal = isModal;\r\n\r\n\r\n\t})();\r\n\r\n};","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\r\n\tvar {replaceValidZeroId} = require(\"../../../utils/helpers\");\r\n\r\n\tgantt.$keyboardNavigation.TaskCell = function (taskId, index) {\r\n\t\ttaskId = replaceValidZeroId(taskId, gantt.config.root_id);\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tthis.columnIndex = index || 0;\r\n\t\t// provided task may not exist, in this case node will be detectes as invalid\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\r\n\t\t\t\treturn gantt.$keyboardNavigation.TaskRow.prototype.isValid.call(this) && !!gantt.getGridColumns()[this.columnIndex];\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\r\n\t\t\t\tvar node = gantt.$keyboardNavigation.TaskRow.prototype.fallback.call(this);\r\n\t\t\t\tvar result = node;\r\n\t\t\t\tif (node instanceof gantt.$keyboardNavigation.TaskRow) {\r\n\t\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\t\tvar index = this.columnIndex;\r\n\t\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\t\tresult = new gantt.$keyboardNavigation.TaskCell(node.taskId, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar cellElement = domHelpers.locateAttribute(el, \"data-column-index\");\r\n\r\n\t\t\t\t\tif(cellElement){\r\n\t\t\t\t\t\tindex = cellElement.getAttribute(\"data-column-index\")*1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskCell(taskId, index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\r\n\t\t\t\t\tif (gantt.config.show_grid) {\r\n\t\t\t\t\t\tvar row = gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\r\n\t\t\t\t\t\tif(!row)\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\treturn row.querySelector(\"[data-column-index='\"+this.columnIndex+\"']\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"up\": function () {\r\n\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell(this.columnIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskCell(prevTask, this.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(nextTask, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.columnIndex > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.columnIndex < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, 0));\r\n\t\t\t\t},\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(0).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskCell.prototype.keys);\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.TaskRow = function (taskId) {\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskRow.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn gantt.isTaskExists(this.taskId) && (gantt.getTaskIndex(this.taskId) > -1);\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\tvar header = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\tif (!header.isValid()) return null;\r\n\t\t\t\t\telse return header;\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar nextIndex = -1;\r\n\t\t\t\t\tif (gantt.getTaskByIndex(this.index - 1)) {\r\n\t\t\t\t\t\tnextIndex = this.index - 1;\r\n\t\t\t\t\t} else if (gantt.getTaskByIndex(this.index + 1)) {\r\n\t\t\t\t\t\tnextIndex = this.index + 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar index = this.index;\r\n\t\t\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\t\t\tif (gantt.getTaskByIndex(index)) {\r\n\t\t\t\t\t\t\t\tnextIndex = index;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (nextIndex > -1) {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(nextIndex).id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(taskId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\r\n\t\t\t\t\tif (gantt.config.show_grid) {\r\n\t\t\t\t\t\treturn gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function (keptFocus) {\r\n\t\t\t\tif(!keptFocus) {\r\n\t\t\t\t\tvar pos = gantt.getTaskPosition(gantt.getTask(this.taskId));\r\n\t\t\t\t\tvar height = gantt.getTaskHeight(this.taskId);\r\n\t\t\t\t\tvar scroll = gantt.getScrollState();\r\n\r\n\t\t\t\t\tvar viewWidth;\r\n\t\t\t\t\tif(gantt.$task){\r\n\t\t\t\t\t\tviewWidth = gantt.$task.offsetWidth;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewWidth = scroll.inner_width;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar viewHeight;\r\n\t\t\t\t\tif(gantt.$grid_data || gantt.$task_data){\r\n\t\t\t\t\t\tviewHeight = (gantt.$grid_data || gantt.$task_data).offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewHeight = scroll.inner_height;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (pos.top < scroll.y || pos.top + height > (scroll.y + viewHeight)) {\r\n\r\n\t\t\t\t\t\tgantt.scrollTo(null, pos.top - height * 5);\r\n\r\n\t\t\t\t\t} else if (gantt.config.scroll_on_click && gantt.config.show_chart && (pos.left < scroll.x || pos.left > (scroll.x + viewWidth))) {\r\n\t\t\t\t\t\tgantt.scrollTo(pos.left - gantt.config.task_scroll_offset);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this, [keptFocus]);\r\n\r\n\t\t\t\t// GS-152 if there are scrollbars with custom names, change their scroll position\r\n\t\t\t\tscrollGrid();\r\n\r\n\t\t\t\tfunction scrollGrid() {\r\n\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tvar scrollPositionX = parseInt(grid.$grid.scrollLeft);\r\n\t\t\t\t\tvar scrollPositionY = parseInt(grid.$grid_data.scrollTop);\r\n\r\n\t\t\t\t\tvar attachedScrollbarHorizontal = grid.$config.scrollX;\r\n\r\n\t\t\t\t\tif (attachedScrollbarHorizontal && grid.$config.scrollable) {\r\n\t\t\t\t\t\tvar scrollbarHorizontal = gantt.$ui.getView(attachedScrollbarHorizontal);\r\n\t\t\t\t\t\tif (scrollbarHorizontal) {\r\n\t\t\t\t\t\t\tscrollbarHorizontal.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar attachedScrollbarVertical = grid.$config.scrollY;\r\n\r\n\t\t\t\t\tif (attachedScrollbarVertical) {\r\n\t\t\t\t\t\tvar scrollbarVertical = gantt.$ui.getView(attachedScrollbarVertical);\r\n\t\t\t\t\t\tif (scrollbarVertical) {\r\n\t\t\t\t\t\t\tscrollbarVertical.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(0).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"up\": function () {\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskRow(prevTask);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(nextTask));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"shift+down\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && !gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+up\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+right\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar prevId = gantt.getPrevSibling(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(prevId) && !gantt.isChildOf(this.taskId, prevId)){\r\n\t\t\t\t\t\tvar parent = gantt.getTask(prevId);\r\n\t\t\t\t\t\tparent.$open = true;\r\n\t\t\t\t\t\tvar result = gantt.moveTask(this.taskId, -1, prevId);\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+left\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar parent = gantt.getParent(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(parent)){\r\n\t\t\t\t\t\tvar result =  gantt.moveTask(this.taskId, gantt.getTaskIndex(parent) + 1, gantt.getParent(parent));\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// select\r\n\t\t\t\t\"space\": function (e) {\r\n\t\t\t\t\tif (!gantt.isSelectedTask(this.taskId)) {\r\n\t\t\t\t\t\tgantt.selectTask(this.taskId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt.unselectTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// collapse\r\n\t\t\t\t\"ctrl+left\": function (e) {\r\n\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t},\r\n\t\t\t\t// expand\r\n\t\t\t\t\"ctrl+right\": function (e) {\r\n\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// delete task\r\n\t\t\t\t\"delete\": function (e) {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.$click.buttons[\"delete\"](this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// open lightbox\r\n\t\t\t\t\"enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.showLightbox(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add subtask\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tgantt.$keyboardNavigation.TaskRow.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\r\n};","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell = function (index) {\r\n\t\tthis.index = index || 0;\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\r\n\t\t\tisValid: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount())\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn !!gantt.getGridColumns()[this.index] || !gantt.getVisibleTaskCount();\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\tvar index = this.index;\r\n\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t}\r\n\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tvar cellElement = domHelpers.locateClassName(el, \"gantt_grid_head_cell\");\r\n\t\t\t\tif(cellElement){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\twhile(cellElement && cellElement.previousSibling){\r\n\t\t\t\t\t\tcellElement = cellElement.previousSibling;\r\n\t\t\t\t\t\tindex += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tvar cells = gantt.$grid_scale.childNodes;\r\n\t\t\t\treturn cells[this.index];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tkeys: {\r\n\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.index > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.index < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar taskRow;\r\n\t\t\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\t\t\tif (gantt.isTaskExists(rootLevel[0])) {\r\n\t\t\t\t\t\ttaskRow = rootLevel[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (taskRow) {\r\n\t\t\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(taskRow, this.index));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(taskRow));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(0));\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// press header button\r\n\t\t\t\t\"enter, space\": function () {\r\n\t\t\t\t\tvar node = document.activeElement;\r\n\t\t\t\t\tnode.click();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add new task\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype.bindAll(gantt.$keyboardNavigation.HeaderCell.prototype.keys);\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tmoveTo: function (element) {\r\n\t\t\t\tgantt.$keyboardNavigation.dispatcher.setActiveNode(element);\r\n\t\t\t},\r\n\r\n\t\t\tcompareTo: function (b) {\r\n\t\t\t\t// good enough comparison of two random objects\r\n\t\t\t\tif (!b) return false;\r\n\t\t\t\tfor (var i in this) {\r\n\t\t\t\t\tif (!!this[i] != !!b[i]) return false;\r\n\r\n\t\t\t\t\tvar canStringifyThis = !!(this[i] && this[i].toString);\r\n\t\t\t\t\tvar canStringifyThat = !!(b[i] && b[i].toString);\r\n\t\t\t\t\tif (canStringifyThat != canStringifyThis) return false;\r\n\t\t\t\t\tif (!(canStringifyThat && canStringifyThis)) {\r\n\t\t\t\t\t\tif (b[i] != this[i]) return false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (b[i].toString() != this[i].toString())\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif(!node)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeFocus\", [node]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\tif(!node.$eventAttached){\r\n\t\t\t\t\t\tnode.$eventAttached = true;\r\n\t\t\t\t\t\tgantt.event(node, \"focus\",function(e){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//node.className += \" gantt_focused\";\r\n\t\t\t\t\tif (node.focus) node.focus();\r\n\r\n\t\t\t\t\teventFacade.callEvent(\"onFocus\", [this.getNode()]);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tblur: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\t\t\teventFacade.callEvent(\"onBlur\", [node]);\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\t//node.className = (node.className || \"\").replace(/ ?gantt_focused/g, \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.GanttNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\r\n\t\t\tfocus: function () {\r\n\t\t\t\tgantt.focus();\r\n\t\t\t},\r\n\r\n\t\t\tblur: function () {\r\n\r\n\t\t\t},\r\n\r\n\t\t\tisEnabled: function () {\r\n\t\t\t\treturn gantt.$container.hasAttribute(\"tabindex\");\r\n\t\t\t},\r\n\r\n\t\t\tscrollHorizontal: function scrollHorizontal(dir) {\r\n\t\t\t\tvar date = gantt.dateFromPos(gantt.getScrollState().x);\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tvar step = dir < 0 ? -scale.step : scale.step;\r\n\t\t\t\tdate = gantt.date.add(date, step, scale.unit);\r\n\t\t\t\tgantt.scrollTo(gantt.posFromDate(date));\r\n\t\t\t},\r\n\r\n\t\t\tscrollVertical: function scrollVertical(dir) {\r\n\t\t\t\tvar top = gantt.getScrollState().y;\r\n\t\t\t\tvar step = gantt.config.row_height;\r\n\t\t\t\tgantt.scrollTo(null, top + (dir < 0 ? -1 : 1) * step);\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"alt+left\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+right\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+up\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+down\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(1);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// undo\r\n\t\t\t\t\"ctrl+z\": function () {\r\n\t\t\t\t\tif (gantt.undo) gantt.undo();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// redo\r\n\t\t\t\t\"ctrl+r\": function () {\r\n\t\t\t\t\tif (gantt.redo) gantt.redo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype.bindAll(gantt.$keyboardNavigation.GanttNode.prototype.keys);\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\t(function () {\r\n\t\tvar domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\r\n\t\tgantt.$keyboardNavigation.getFocusableNodes = domHelpers.getFocusableNodes;\r\n\r\n\t\tgantt.$keyboardNavigation.trapFocus = function trapFocus(root, e) {\r\n\t\t\tif (e.keyCode != 9) return false;\r\n\r\n\t\t\tvar focusable = gantt.$keyboardNavigation.getFocusableNodes(root);\r\n\t\t\tvar currentFocus = document.activeElement;\r\n\t\t\tvar currentIndex = -1;\r\n\t\t\tfor (var i = 0; i < focusable.length; i++) {\r\n\t\t\t\tif (focusable[i] == currentFocus) {\r\n\t\t\t\t\tcurrentIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (e.shiftKey) {\r\n\t\t\t\t// back tab\r\n\t\t\t\tif (currentIndex <= 0) {\r\n\t\t\t\t\t// go to the last element if we focused on the first\r\n\t\t\t\t\tvar lastItem = focusable[focusable.length - 1];\r\n\t\t\t\t\tif (lastItem) {\r\n\t\t\t\t\t\tlastItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// forward tab\r\n\t\t\t\tif (currentIndex >= focusable.length - 1) {\r\n\t\t\t\t\t// forward tab from last element should go back to the first element\r\n\t\t\t\t\tvar firstItem = focusable[0];\r\n\t\t\t\t\tif (firstItem) {\r\n\t\t\t\t\t\tfirstItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\t})();\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.EventHandler = {\r\n\t\t_handlers: null,\r\n\t\tfindHandler: function (command) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\t\t\tvar hash = shortcuts.getHash(command);\r\n\r\n\t\t\treturn this._handlers[hash];\r\n\t\t},\r\n\r\n\t\tdoAction: function (command, e) {\r\n\t\t\tvar handler = this.findHandler(command);\r\n\t\t\tif (handler) {\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeAction\", [command, e]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thandler.call(this, e);\r\n\r\n\t\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\t\telse e.returnValue = false;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tbind: function (shortcut, handler) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tthis._handlers[shortcuts.getHash(commands[i])] = handler;\r\n\t\t\t}\r\n\t\t},\r\n\t\tunbind: function (shortcut) {\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tif (this._handlers[shortcuts.getHash(commands[i])]) {\r\n\t\t\t\t\tdelete this._handlers[shortcuts.getHash(commands[i])];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbindAll: function (map) {\r\n\t\t\tfor (var i in map) {\r\n\t\t\t\tthis.bind(i, map[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitKeys: function () {\r\n\t\t\tif (!this._handlers)\r\n\t\t\t\tthis._handlers = {};\r\n\t\t\tif (this.keys) {\r\n\t\t\t\tthis.bindAll(this.keys);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.shortcuts = {\r\n\t\tcreateCommand: function () {\r\n\t\t\treturn {\r\n\t\t\t\tmodifiers: {\r\n\t\t\t\t\t\"shift\": false,\r\n\t\t\t\t\t\"alt\": false,\r\n\t\t\t\t\t\"ctrl\": false,\r\n\t\t\t\t\t\"meta\": false\r\n\t\t\t\t},\r\n\t\t\t\tkeyCode: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tparse: function (shortcut) {\r\n\t\t\tvar commands = [];\r\n\r\n\t\t\tvar expr = this.getExpressions(this.trim(shortcut));\r\n\t\t\tfor (var i = 0; i < expr.length; i++) {\r\n\t\t\t\tvar words = this.getWords(expr[i]);\r\n\r\n\t\t\t\tvar command = this.createCommand();\r\n\r\n\t\t\t\tfor (var j = 0; j < words.length; j++) {\r\n\t\t\t\t\tif (this.commandKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.modifiers[words[j]] = true;\r\n\t\t\t\t\t} else if (this.specialKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.keyCode = this.specialKeys[words[j]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcommand.keyCode = words[j].charCodeAt(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcommands.push(command);\r\n\t\t\t}\r\n\t\t\treturn commands;\r\n\t\t},\r\n\r\n\t\tgetCommandFromEvent: function (domEvent) {\r\n\t\t\tvar command = this.createCommand();\r\n\t\t\tcommand.modifiers.shift = !!domEvent.shiftKey;\r\n\t\t\tcommand.modifiers.alt = !!domEvent.altKey;\r\n\t\t\tcommand.modifiers.ctrl = !!domEvent.ctrlKey;\r\n\t\t\tcommand.modifiers.meta = !!domEvent.metaKey;\r\n\t\t\tcommand.keyCode = domEvent.which || domEvent.keyCode;\r\n\r\n\t\t\tif(command.keyCode >= 96 && command.keyCode <= 105){\r\n\t\t\t\t// numpad keys 96-105 -> 48-57\r\n\t\t\t\tcommand.keyCode -= 48;//convert numpad  number code to regular number code\r\n\t\t\t}\r\n\r\n\t\t\tvar printableKey = String.fromCharCode(command.keyCode);\r\n\t\t\tif (printableKey) {\r\n\t\t\t\tcommand.keyCode = printableKey.toLowerCase().charCodeAt(0);\r\n\t\t\t}\r\n\t\t\treturn command;\r\n\t\t},\r\n\r\n\t\tgetHashFromEvent: function (domEvent) {\r\n\t\t\treturn this.getHash(this.getCommandFromEvent(domEvent));\r\n\t\t},\r\n\r\n\t\tgetHash: function (command) {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor (var i in command.modifiers) {\r\n\t\t\t\tif (command.modifiers[i]) {\r\n\t\t\t\t\tparts.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tparts.push(command.keyCode);\r\n\r\n\t\t\treturn parts.join(this.junctionChar);\r\n\t\t},\r\n\r\n\t\tgetExpressions: function (shortcut) {\r\n\t\t\treturn shortcut.split(this.junctionChar);\r\n\t\t},\r\n\t\tgetWords: function (term) {\r\n\t\t\treturn term.split(this.combinationChar);\r\n\t\t},\r\n\t\ttrim: function (shortcut) {\r\n\t\t\treturn shortcut.replace(/\\s/g, \"\");\r\n\t\t},\r\n\t\tjunctionChar: \",\",\r\n\t\tcombinationChar: \"+\",\r\n\t\tcommandKeys: {\r\n\t\t\t\"shift\": 16,\r\n\t\t\t\"alt\": 18,\r\n\t\t\t\"ctrl\": 17,\r\n\t\t\t\"meta\": true\r\n\t\t},\r\n\t\tspecialKeys: {\r\n\t\t\t\"backspace\": 8,\r\n\t\t\t\"tab\": 9,\r\n\t\t\t\"enter\": 13,\r\n\t\t\t\"esc\": 27,\r\n\t\t\t\"space\": 32,\r\n\t\t\t\"up\": 38,\r\n\t\t\t\"down\": 40,\r\n\t\t\t\"left\": 37,\r\n\t\t\t\"right\": 39,\r\n\t\t\t\"home\": 36,\r\n\t\t\t\"end\": 35,\r\n\t\t\t\"pageup\": 33,\r\n\t\t\t\"pagedown\": 34,\r\n\t\t\t\"delete\": 46,\r\n\t\t\t\"insert\": 45,\r\n\t\t\t\"plus\": 107,\r\n\t\t\t\"f1\": 112,\r\n\t\t\t\"f2\": 113,\r\n\t\t\t\"f3\": 114,\r\n\t\t\t\"f4\": 115,\r\n\t\t\t\"f5\": 116,\r\n\t\t\t\"f6\": 117,\r\n\t\t\t\"f7\": 118,\r\n\t\t\t\"f8\": 119,\r\n\t\t\t\"f9\": 120,\r\n\t\t\t\"f10\": 121,\r\n\t\t\t\"f11\": 122,\r\n\t\t\t\"f12\": 123\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt){\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\tfunction setupKeyNav(gantt){\r\n\t\tgantt.config.keyboard_navigation = true;\r\n\t\tgantt.config.keyboard_navigation_cells = false;\r\n\r\n\t\tgantt.$keyboardNavigation = {};\r\n\r\n\t\tgantt._compose = function(){\r\n\t\t\tvar parts = Array.prototype.slice.call(arguments, 0);\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\t\tvar obj = parts[i];\r\n\t\t\t\tif(typeof obj == \"function\"){\r\n\t\t\t\t\tobj = new obj();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var p in obj){\r\n\t\t\t\t\tres[p] = obj[p];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\trequire (\"./keyboard_navigation/common/keyboard_shortcuts\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/common/eventhandler\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/common/trap_modal_focus\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/elements/gantt_node\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/elements/nav_node\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/elements/header_cell\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/elements/task_row\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/elements/task_cell\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/modals\")(gantt);\r\n\t\trequire (\"./keyboard_navigation/core\")(gantt);\r\n\r\n\t\tvar domHelpers = require(\"../core/ui/utils/dom_helpers\");\r\n\r\n\t\t(function(){\r\n\t\t\tvar dispatcher = gantt.$keyboardNavigation.dispatcher;\r\n\r\n\t\t\tdispatcher.isTaskFocused = function(id){\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskRow || node instanceof gantt.$keyboardNavigation.TaskCell) {\r\n\t\t\t\t\tif (node.taskId == id) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\tvar keyDownHandler = function(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return;\r\n\r\n\t\t\t\treturn dispatcher.keyDownHandler(e);\r\n\t\t\t};\r\n\r\n\t\t\tvar focusHandler = function(e){\r\n\t\t\t\tif(dispatcher.$preventDefault){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tgantt.$container.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t// do nothing if key-nav focus is already planned\r\n\t\t\t\t} else if (!dispatcher.awaitsFocus()) {\r\n\t\t\t\t\t// otherwise - re-focus key-nav element on gantt focus\r\n\t\t\t\t\tdispatcher.focusGlobalNode();\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar reFocusActiveNode = function(){\r\n\t\t\t\tif(!dispatcher.isEnabled())\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar activeNode = dispatcher.getActiveNode();\r\n\t\t\t\tif(!activeNode)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar domElement = activeNode.getNode();\r\n\t\t\t\tvar top, left;\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\ttop = domElement.parentNode.scrollTop;\r\n\t\t\t\t\tleft = domElement.parentNode.scrollLeft;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tactiveNode.focus(true);\r\n\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\tdomElement.parentNode.scrollTop = top;\r\n\t\t\t\t\tdomElement.parentNode.scrollLeft = left;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\r\n\t\t\tgantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\treFocusActiveNode();\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tgantt.eventRemove(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"mousedown\", mousedownHandler);\r\n\r\n\t\t\t\tif(gantt.config.keyboard_navigation){\r\n\r\n\t\t\t\t\tgantt.event(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"mousedown\", mousedownHandler);\r\n\t\t\t\t\tgantt.$container.setAttribute(\"tabindex\", \"0\");\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt.$container.removeAttribute(\"tabindex\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfunction getTaskNodeConstructor(){\r\n\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskCell;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskRow;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isInlineEditorCell(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction mousedownHandler(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return true;\r\n\r\n\t\t\t\tvar focusNode;\r\n\t\t\t\tvar locateTask = dispatcher.fromDomElement(e);\r\n\t\t\t\tif(locateTask){\r\n\t\t\t\t\t//var node = getTaskNodeConstructor();\r\n\t\t\t\t\tif(dispatcher.activeNode instanceof gantt.$keyboardNavigation.TaskCell && domHelpers.isChildOf(e.target, gantt.$task)){\r\n\t\t\t\t\t\tlocateTask = new gantt.$keyboardNavigation.TaskCell(locateTask.taskId, dispatcher.activeNode.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfocusNode = locateTask;\r\n\t\t\t\t}\r\n\t\t\t\tif (focusNode) {\r\n\t\t\t\t\tif (!dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tdispatcher.activeNode = focusNode;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatcher.delay(function () {\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(focusNode);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// empty click should drop focus from gantt, insert of reselecting default node\r\n\t\t\t\t\tdispatcher.$preventDefault = true;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tdispatcher.$preventDefault = false;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar onReady = gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\t// restore focus on repainted tasks\r\n\t\t\t\tgantt.detachEvent(onReady);\r\n\r\n\t\t\t\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(id){\r\n\t\t\t\t\tif (gantt.config.keyboard_navigation && dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tvar currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tif(currentNode && currentNode.taskId == id){\r\n\t\t\t\t\t\t\treFocusActiveNode();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(gantt._smart_render){\r\n\t\t\t\t\tvar updateRender = gantt._smart_render._redrawTasks;\r\n\t\t\t\t\tgantt._smart_render._redrawTasks = function(renderers, items){\r\n\t\t\t\t\t\tif(gantt.config.keyboard_navigation && dispatcher.isEnabled()){\r\n\t\t\t\t\t\t\tvar currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\t\tif(currentNode && currentNode.taskId !== undefined){\r\n\t\t\t\t\t\t\t\tvar focusedItemVisible = false;\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < items.length; i++){\r\n\t\t\t\t\t\t\t\t\tif(items[i].id == currentNode.taskId && items[i].start_date){\r\n\t\t\t\t\t\t\t\t\t\tfocusedItemVisible = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(!focusedItemVisible){\r\n\t\t\t\t\t\t\t\t\titems.push(gantt.getTask(currentNode.taskId));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = updateRender.apply(this, arguments);\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function(id,item){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\tif(dispatcher.isEnabled()){\r\n\r\n\t\t\t\t\tvar columnIndex = 0;\r\n\t\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\t\tcolumnIndex = node.columnIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar nodeConstructor = getTaskNodeConstructor();\r\n\r\n\t\t\t\t\tdispatcher.setActiveNode(new nodeConstructor(id, columnIndex));\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(dispatcher.isTaskFocused(oldId)){\r\n\t\t\t\t\tnode.taskId = newId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tvar interval = setInterval(function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\tif(!dispatcher.isEnabled()){\r\n\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}, 500);\r\n\r\n\t\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t});\r\n\r\n\t\t\tfunction getScopeName(obj){\r\n\t\t\t\tif(obj instanceof gantt.$keyboardNavigation.GanttNode){\r\n\t\t\t\t\treturn \"gantt\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.HeaderCell){\r\n\t\t\t\t\treturn \"headerCell\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskRow){\r\n\t\t\t\t\treturn \"taskRow\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\treturn \"taskCell\";\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getScope(mode){\r\n\t\t\t\tvar scopes = {\r\n\t\t\t\t\t\"gantt\":gantt.$keyboardNavigation.GanttNode,\r\n\t\t\t\t\t\"headerCell\": gantt.$keyboardNavigation.HeaderCell,\r\n\t\t\t\t\t\"taskRow\": gantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\t\t\"taskCell\": gantt.$keyboardNavigation.TaskCell\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn scopes[mode] || scopes.gantt;\r\n\t\t\t}\r\n\r\n\t\t\tfunction findVisibleColumnIndex(columnName) {\r\n\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar keyNavFacade = {};\r\n\t\t\teventable(keyNavFacade);\r\n\t\t\tgantt.mixin(keyNavFacade, {\r\n\t\t\t\taddShortcut: function(shortcut, handler, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.bind(shortcut, handler);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetShortcutHandler: function(shortcut, scope){\r\n\t\t\t\t\tvar commands = gantt.$keyboardNavigation.shortcuts.parse(shortcut);\r\n\t\t\t\t\tif(commands.length){\r\n\t\t\t\t\t\treturn keyNavFacade.getCommandHandler(commands[0], scope);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetCommandHandler: function(command, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tif(command){\r\n\t\t\t\t\t\t\treturn scopeObject.prototype.findHandler(command);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tremoveShortcut: function(shortcut, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.unbind(shortcut);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfocus: function(config){\r\n\t\t\t\t\tvar type = config ? config.type : null;\r\n\t\t\t\t\tvar constructor = getScope(type);\r\n\t\t\t\t\tvar node;\r\n\t\t\t\t\tswitch (type){\r\n\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id, findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdispatcher.delay(function(){\r\n\t\t\t\t\t\tif(node){\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(node);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\tif(!dispatcher.getActiveNode()){\r\n\r\n\t\t\t\t\t\t\t\tdispatcher.setDefaultNode();\r\n\t\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\t\tif(!dispatcher.awaitsFocus()){\r\n\t\t\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tgetActiveNode: function(){\r\n\t\t\t\t\tif(dispatcher.isEnabled()){\r\n\t\t\t\t\t\tvar node = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tvar scope = getScopeName(node);\r\n\t\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\t\tswitch (scope){\r\n\t\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskCell\", id:node.taskId, column:columns[node.columnIndex].name};\r\n\t\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskRow\", id:node.taskId};\r\n\t\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"headerCell\", column:columns[node.index].name};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.$keyboardNavigation.facade = keyNavFacade;\r\n\r\n\t\t\tgantt.ext.keyboardNavigation = keyNavFacade;\r\n\t\t\tgantt.focus = function(){\r\n\t\t\t\tkeyNavFacade.focus();\r\n\t\t\t};\r\n\t\t\tgantt.addShortcut = keyNavFacade.addShortcut;\r\n\t\t\tgantt.getShortcutHandler = keyNavFacade.getShortcutHandler;\r\n\t\t\tgantt.removeShortcut = keyNavFacade.removeShortcut;\r\n\t\t})();\r\n\r\n\r\n\t}\r\n\r\n\tsetupKeyNav(gantt);\r\n\r\n\r\n\r\n};","export default function(gantt: any){\r\n\r\ninterface IBody extends HTMLElement {\r\n\tmsRequestFullscreen?: () => void;\r\n\tmozRequestFullScreen?: () => void;\r\n\twebkitRequestFullscreen?: (ALLOW_KEYBOARD_INPUT: any) => void;\r\n}\r\n\r\n\r\ninterface IConsole extends Console {\r\n\twarning?: (str: string) => void;\r\n}\r\n\r\ninterface IDocument extends Document {\r\n\tfullscreenElement: Element;\r\n\tmozFullScreenElement?: Element;\r\n\twebkitFullscreenElement?: Element;\r\n\tmsFullscreenElement?: Element;\r\n\twebkitFullscreenEnabled?: boolean;\r\n\tmozFullScreenEnabled?: boolean;\r\n\tmsFullscreenEnabled?: boolean;\r\n\tmsExitFullscreen?: () => void;\r\n\tmozCancelFullScreen?: () => void;\r\n\twebkitExitFullscreen?: () => void;\r\n}\r\n\r\ninterface IElement extends Element {\r\n\tALLOW_KEYBOARD_INPUT?: boolean;\r\n}\r\n\r\ninterface IElementSizes extends ISizes {\r\n\tmodified: boolean;\r\n}\r\n\r\ninterface ISizes {\r\n\twidth: null | string;\r\n\theight: null | string;\r\n\ttop: null | string;\r\n\tleft: null | string;\r\n\tposition: null | string;\r\n\tzIndex: null | number;\r\n}\r\n\r\nfunction isExpanded() {\r\n\tconst element = ((document as IDocument).fullscreenElement ||\r\n\t\t(document as IDocument).mozFullScreenElement ||\r\n\t\t(document as IDocument).webkitFullscreenElement ||\r\n\t\t(document as IDocument).msFullscreenElement);\r\n\treturn !!(element && element === document.body);\r\n}\r\n\r\nfunction isFullscreenAvailable() {\r\n\treturn (document as IDocument).fullscreenEnabled ||\r\n\t(document as IDocument).webkitFullscreenEnabled ||\r\n\t(document as IDocument).mozFullScreenEnabled ||\r\n\t(document as IDocument).msFullscreenEnabled;\r\n}\r\n\r\nconst state = gantt.$services.getService(\"state\");\r\nstate.registerProvider(\"fullscreen\", () => {\r\n\treturn { fullscreen: isExpanded() };\r\n});\r\n\r\nlet backupBodyPadding = {\r\n\toverflow: null,\r\n\tpadding: null,\r\n\tpaddingTop: null,\r\n\tpaddingRight: null,\r\n\tpaddingBottom: null,\r\n\tpaddingLeft: null\r\n};\r\n\r\nconst backupElementSizes: IElementSizes = {\r\n\twidth: null,\r\n\theight: null,\r\n\ttop: null,\r\n\tleft: null,\r\n\tposition: null,\r\n\tzIndex: null,\r\n\tmodified: false\r\n};\r\n\r\nlet backupPositioning = null;\r\nfunction resetParentPositioning(root){\r\n\tlet parent = root.parentNode;\r\n\tconst positions = [];\r\n\twhile(parent && parent.style){\r\n\t\tpositions.push({\r\n\t\t\telement: parent,\r\n\t\t\toriginalPositioning: parent.style.position\r\n\t\t});\r\n\t\tparent.style.position = \"static\";\r\n\t\tparent = parent.parentNode;\r\n\t}\r\n\treturn positions;\r\n}\r\n\r\nfunction restoreParentPositioning(positions: any[]){\r\n\tpositions.forEach(record => {\r\n\t\trecord.element.style.position = record.originalPositioning;\r\n\t});\r\n}\r\n\r\n// expand gantt root element to fullscreen automatically\r\nfunction setFullScreenSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tupdateSizes(root.style, backupElementSizes);\r\n\tbackupBodyPadding = {\r\n\t\toverflow: body.style.overflow,\r\n\t\tpadding: body.style.padding ? body.style.padding : null,\r\n\t\tpaddingTop: body.style.paddingTop ? body.style.paddingTop : null,\r\n\t\tpaddingRight: body.style.paddingRight ? body.style.paddingRight : null,\r\n\t\tpaddingBottom: body.style.paddingBottom ? body.style.paddingBottom : null,\r\n\t\tpaddingLeft: body.style.paddingLeft ? body.style.paddingLeft : null\r\n\t};\r\n\r\n\tif (body.style.padding) {\r\n\t\tbody.style.padding = \"0\";\r\n\t}\r\n\tif (body.style.paddingTop) {\r\n\t\tbody.style.paddingTop = \"0\";\r\n\t}\r\n\tif (body.style.paddingRight) {\r\n\t\tbody.style.paddingRight = \"0\";\r\n\t}\r\n\tif (body.style.paddingBottom) {\r\n\t\tbody.style.paddingBottom = \"0\";\r\n\t}\r\n\tif (body.style.paddingLeft) {\r\n\t\tbody.style.paddingLeft = \"0\";\r\n\t}\r\n\r\n\tbody.style.overflow = \"hidden\";\r\n\r\n\troot.style.width = \"100vw\";\r\n\troot.style.height = \"100vh\";\r\n\troot.style.top = \"0px\";\r\n\troot.style.left = \"0px\";\r\n\troot.style.position = \"absolute\";\r\n\troot.style.zIndex = 1;\r\n\tbackupElementSizes.modified = true;\r\n\tbackupPositioning = resetParentPositioning(root);\r\n}\r\n\r\nfunction restoreSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tif (backupElementSizes.modified) {\r\n\t\tif (backupBodyPadding.padding) {\r\n\t\t\tbody.style.padding = backupBodyPadding.padding;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingTop) {\r\n\t\t\tbody.style.paddingTop = backupBodyPadding.paddingTop;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingRight) {\r\n\t\t\tbody.style.paddingRight = backupBodyPadding.paddingRight;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingBottom) {\r\n\t\t\tbody.style.paddingBottom = backupBodyPadding.paddingBottom;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingLeft) {\r\n\t\t\tbody.style.paddingLeft = backupBodyPadding.paddingLeft;\r\n\t\t}\r\n\r\n\t\tbody.style.overflow = backupBodyPadding.overflow;\r\n\t\tbackupBodyPadding = {\r\n\t\t\toverflow: null,\r\n\t\t\tpadding: null,\r\n\t\t\tpaddingTop: null,\r\n\t\t\tpaddingRight: null,\r\n\t\t\tpaddingBottom: null,\r\n\t\t\tpaddingLeft: null\r\n\t\t};\r\n\t\tupdateSizes(backupElementSizes, root.style);\r\n\t\tbackupElementSizes.modified = false;\r\n\t}\r\n\trestoreParentPositioning(backupPositioning);\r\n\tbackupPositioning = null;\r\n}\r\n\r\nfunction updateSizes(source: ISizes, target: ISizes) {\r\n\ttarget.width = source.width;\r\n\ttarget.height = source.height;\r\n\ttarget.top = source.top;\r\n\ttarget.left = source.left;\r\n\ttarget.position = source.position;\r\n\ttarget.zIndex = source.zIndex;\r\n}\r\n\r\nfunction addDOMEvents() {\r\n\tgantt.event(document, \"webkitfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"mozfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"MSFullscreenChange\", onFullScreenChange);\r\n\t// For IE on Win 10\r\n\tgantt.event(document, \"fullscreenChange\", onFullScreenChange);\r\n\tgantt.event(document, \"fullscreenchange\", onFullScreenChange);\r\n}\r\n\r\nlet expandGantt = false;\r\nfunction onFullScreenChange() {\r\n\tif (!gantt.$container) {\r\n\t\t// do nothing if gantt is not yet initialized\r\n\t\treturn;\r\n\t}\r\n\tlet event: \"onExpand\" | \"onCollapse\";\r\n\tconst isBodyExpanded = isExpanded();\r\n\r\n\tif (isBodyExpanded) {\r\n\t\tif (expandGantt) {\r\n\t\t\tevent = \"onExpand\";\r\n\t\t\tsetFullScreenSizes();\r\n\t\t}\r\n\t} else if (expandGantt) {\r\n\t\texpandGantt = false;\r\n\t\tevent = \"onCollapse\";\r\n\t\trestoreSizes();\r\n\t}\r\n\tsetTimeout(() => {\r\n\t\tgantt.render();\r\n\t});\r\n\tsetTimeout(() => {\r\n\t\tgantt.callEvent(event, [gantt.ext.fullscreen.getFullscreenElement()]);\r\n\t});\r\n}\r\n\r\nfunction cantFullscreen() {\r\n\tif (!gantt.$container) { // check is gantt initialized or not\r\n\t\treturn true;\r\n\t}\r\n\tif (!gantt.ext.fullscreen.getFullscreenElement()) {\r\n\t\treturn true;\r\n\t}\r\n\tif (!isFullscreenAvailable()) {\r\n\t\t// tslint:disable-next-line: no-console\r\n\t\tconst method = (console as IConsole).warning || console.log;\r\n\t\tmethod(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\");\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\ngantt.ext.fullscreen = {\r\n\texpand(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeExpand\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\texpandGantt = true;\r\n\r\n\t\t// we switch body to fullscreen and then expand fullscreen element to viewport\r\n\t\t// we do it to correct display common elements: lightboxes, tooltip etc.\r\n\t\tconst element = document.body as IBody;\r\n\t\tconst requestArguments = element.webkitRequestFullscreen ?\r\n\t\t\t[(Element as unknown as IElement).ALLOW_KEYBOARD_INPUT] : [];\r\n\r\n\t\tconst requestFullscreen = element.msRequestFullscreen ||\r\n\t\t\telement.mozRequestFullScreen ||\r\n\t\t\telement.webkitRequestFullscreen ||\r\n\t\t\telement.requestFullscreen;\r\n\r\n\t\tif (requestFullscreen) {\r\n\t\t\trequestFullscreen.apply(element, requestArguments);\r\n\t\t}\r\n\t},\r\n\tcollapse(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeCollapse\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst requestExitFullscreen = (document as IDocument).msExitFullscreen ||\r\n\t\t\t(document as IDocument).mozCancelFullScreen ||\r\n\t\t\t(document as IDocument).webkitExitFullscreen ||\r\n\t\t\t(document as IDocument).exitFullscreen;\r\n\r\n\t\tif (requestExitFullscreen) {\r\n\t\t\trequestExitFullscreen.apply(document);\r\n\t\t}\r\n\t},\r\n\ttoggle(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!isExpanded()) {\r\n\t\t\tthis.expand();\r\n\t\t} else {\r\n\t\t\tthis.collapse();\r\n\t\t}\r\n\r\n\t},\r\n\tgetFullscreenElement(): HTMLElement {\r\n\t\treturn gantt.$root;\r\n\t},\r\n};\r\n\r\ngantt.expand = function() {\r\n\tgantt.ext.fullscreen.expand();\r\n};\r\n\r\ngantt.collapse = function(){\r\n\tgantt.ext.fullscreen.collapse();\r\n};\r\n\r\ngantt.attachEvent(\"onGanttReady\", addDOMEvents);\r\n\r\n}","interface IPoint {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport class EventsManager {\r\n\tstatic create(gantt: any) {\r\n\t\treturn new EventsManager(gantt);\r\n\t}\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _scrollState: IPoint;\r\n\tprivate _originAutoscroll: boolean;\r\n\tprivate _domEvents: any;\r\n\tprivate _timeline: any;\r\n\tprivate _gantt: any;\r\n\tprivate _trace: IPoint[];\r\n\tprivate _originalReadonly: boolean;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\tthis._trace = [];\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\r\n\tattach(timeline: any): void {\r\n\t\tthis._timeline = timeline;\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.attach(timeline.$task, \"mousedown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey,ignore, enabled } = gantt.config.drag_timeline;\r\n\t\t\tif(enabled === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif(ignore !== undefined) {\r\n\t\t\t\tif(ignore instanceof Array){\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\r\n\t\t\tthis._startDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"keydown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === true) {\r\n\t\t\t\tthis._applyDndReadyStyles();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"keyup\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === false) {\r\n\t\t\t\tthis._clearDndReadyStyles();\r\n\t\t\t\tthis._stopDrag(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(gantt.$root, \"mousemove\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._trace.push({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tconst scrollPosition: IPoint = this._countNewScrollPosition({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tthis._setScrollPosition(timeline, scrollPosition);\r\n\t\t\t\tthis._scrollState = scrollPosition;\r\n\t\t\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateDirectionVector = () => {\r\n\t\tconst traceSteps = 10;\r\n\t\tif(this._trace.length >= traceSteps) {\r\n\t\t\tconst dots = this._trace.slice(this._trace.length - traceSteps);\r\n\r\n\t\t\tconst vectors = [];\r\n\t\t\tfor(let i = 1; i < dots.length; i++) {\r\n\t\t\t\tvectors.push({\r\n\t\t\t\t\tx: dots[i].x - dots[i - 1].x,\r\n\t\t\t\t\ty: dots[i].y - dots[i - 1].y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst resultVector = {x:0, y:0};\r\n\r\n\t\t\tvectors.forEach((vector) => {\r\n\t\t\t\tresultVector.x += vector.x;\r\n\t\t\t\tresultVector.y += vector.y;\r\n\t\t\t});\r\n\r\n\t\t\tconst magnitude = Math.sqrt(resultVector.x*resultVector.x + resultVector.y*resultVector.y);\r\n\t\t\tconst angleDegrees = Math.atan2(Math.abs(resultVector.y), Math.abs(resultVector.x)) * 180 / Math.PI;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmagnitude,\r\n\t\t\t\tangleDegrees\r\n\t\t\t};\r\n\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _applyDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.add(\"gantt_timeline_move_available\");\r\n\t}\r\n\r\n\tprivate _clearDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.remove(\"gantt_timeline_move_available\");\r\n\t}\r\n\r\n\tprivate _getScrollPosition = (timeline: any): IPoint => {\r\n\t\tconst gantt = this._gantt;\r\n\t\treturn {\r\n\t\t\tx: gantt.$ui.getView(timeline.$config.scrollX).getScrollState().position,\r\n\t\t\ty: gantt.$ui.getView(timeline.$config.scrollY).getScrollState().position\r\n\t\t};\r\n\t}\r\n\tprivate _countNewScrollPosition = (coords: IPoint): IPoint => {\r\n\t\tconst vector = this._calculateDirectionVector();\r\n\t\tlet shiftX = this._startPoint.x - coords.x;\r\n\t\tlet shiftY = this._startPoint.y - coords.y;\r\n\t\tif(vector){\r\n\t\t\tif(vector.angleDegrees < 15){\r\n\t\t\t\tshiftY = 0;\r\n\t\t\t} else if(vector.angleDegrees > 75){\r\n\t\t\t\tshiftX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst result = {\r\n\t\t\tx: this._scrollState.x + shiftX,\r\n\t\t\ty: this._scrollState.y + shiftY\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n\tprivate _setScrollPosition = (timeline: any, coords: IPoint): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tgantt.$ui.getView(timeline.$config.scrollX).scroll(coords.x);\r\n\t\t\tgantt.$ui.getView(timeline.$config.scrollY).scroll(coords.y);\r\n\t\t});\r\n\t}\r\n\tprivate _stopDrag = (event: Event): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._trace = [];\r\n\t\tgantt.$root.classList.remove(\"gantt_noselect\");\r\n\r\n\t\tif(this._originalReadonly !== undefined){\r\n\t\t\tgantt.config.readonly = this._originalReadonly;\r\n\t\t}\r\n\r\n\t\tif(this._originAutoscroll !== undefined){\r\n\t\t\tgantt.config.autoscroll = this._originAutoscroll;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.drag_timeline){\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mouseDown = false;\r\n\t}\r\n\r\n\tprivate _startDrag = (event: any) : void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._originAutoscroll = gantt.config.autoscroll;\r\n\t\tgantt.config.autoscroll = false;\r\n\r\n\t\tgantt.$root.classList.add(\"gantt_noselect\");\r\n\t\tthis._originalReadonly = gantt.config.readonly;\r\n\t\tgantt.config.readonly = true;\r\n\r\n\t\tthis._trace = [];\r\n\t\tthis._mouseDown = true;\r\n\t\tconst { x, y } = this._getScrollPosition(this._timeline);\r\n\t\tthis._scrollState = { x, y };\r\n\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\tthis._trace.push(this._startPoint);\r\n\t}\r\n}","import { EventsManager } from \"./eventsManager\";\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tgantt.ext.dragTimeline = {\r\n\t\tcreate: () => EventsManager.create(gantt)\r\n\t};\r\n\r\n\tgantt.config.drag_timeline = {\r\n\t\tenabled: true\r\n\t};\r\n}","import * as eventable from \"../../utils/eventable\";\r\nimport { isEventable } from \"../../utils/helpers\";\r\n\r\nexport interface ISelectedRegionConfig {\r\n\tclassName?: string;\r\n\trender?: (startPoint: IPoint, endPoint: IPoint) => HTMLElement;\r\n\tviewPort?: HTMLElement;\r\n\tuseRequestAnimationFrame: boolean;\r\n\tcallback?: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tsingleRow: boolean;\r\n}\r\n\r\ninterface ICoordinates {\r\n\tleft: number;\r\n\ttop: number;\r\n}\r\n\r\nexport interface IPoint {\r\n\tabsolute: ICoordinates;\r\n\trelative: ICoordinates;\r\n}\r\n\r\nexport class SelectedRegion {\r\n\trender: () => void;\r\n\tprivate _viewPort: HTMLElement & eventable;\r\n\tprivate _el: HTMLElement = document.createElement(\"div\");\r\n\tprivate _callback: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _endPoint: IPoint;\r\n\tprivate _positionPoint: IPoint;\r\n\tprivate _useRequestAnimationFrame: boolean;\r\n\tprivate _startDate: Date;\r\n\tprivate _endDate: Date;\r\n\tprivate _singleRow: boolean;\r\n\tprivate _gantt: any;\r\n\tprivate _view: any;\r\n\r\n\tconstructor(config: ISelectedRegionConfig, gantt: any, view: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._view = view;\r\n\t\tthis._viewPort = config.viewPort;\r\n\t\tthis._el.classList.add(config.className);\r\n\t\tif (typeof config.callback === \"function\") {\r\n\t\t\tthis._callback = config.callback;\r\n\t\t}\r\n\r\n\t\tthis.render = () => {\r\n\t\t\tlet node;\r\n\t\t\tif(config.render){\r\n\t\t\t\tnode = config.render(this._startPoint, this._endPoint);\r\n\t\t\t}else{\r\n\t\t\t\tnode = this.defaultRender(this._startPoint, this._endPoint);\r\n\t\t\t}\r\n\r\n\t\t\tif(node !== this._el){\r\n\t\t\t\tif(this._el && this._el.parentNode){\r\n\t\t\t\t\tthis._el.parentNode.removeChild(this._el);\r\n\t\t\t\t}\r\n\t\t\t\tthis._el = node;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.className !== \"\") {\r\n\t\t\t\tthis._el.classList.add(config.className);\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t};\r\n\r\n\t\tif (!isEventable(this._viewPort)) {\r\n\t\t\teventable(this._viewPort);\r\n\t\t}\r\n\t\tthis._singleRow = config.singleRow;\r\n\t\tthis._useRequestAnimationFrame = config.useRequestAnimationFrame;\r\n\t}\r\n\r\n\tdefaultRender = (start: IPoint, end: IPoint) => {\r\n\t\tif(!this._el){\r\n\t\t\tthis._el = document.createElement(\"div\");\r\n\t\t}\r\n\t\tconst node = this._el;\r\n\t\t// const gantt = this._gantt;\r\n\r\n\t\tconst top = Math.min(start.relative.top, end.relative.top);\r\n\t\tconst bottom = Math.max(start.relative.top, end.relative.top);\r\n\t\tconst left = Math.min(start.relative.left, end.relative.left);\r\n\t\tconst right = Math.max(start.relative.left, end.relative.left);\r\n\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tnode.style.height = pos.height + \"px\";\r\n\t\t\tnode.style.top = pos.top + \"px\";\r\n\t\t} else {\r\n\t\t\tnode.style.height = Math.abs(bottom - top) + \"px\";\r\n\t\t\tnode.style.top = top + \"px\";\r\n\t\t}\r\n\t\tnode.style.width = Math.abs(right - left) + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\t\treturn node;\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement() {\r\n\t\treturn this._el;\r\n\t}\r\n\r\n\tgetViewPort() {\r\n\t\treturn this._viewPort;\r\n\t}\r\n\r\n\tsetStart(startPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._startPoint = startPoint;\r\n\t\tthis._startDate = gantt.dateFromPos(this._startPoint.relative.left);\r\n\t\tthis._viewPort.callEvent(\"onBeforeDrag\", [this._startPoint]);\r\n\t}\r\n\r\n\tsetEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._endPoint = endPoint;\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tthis._endPoint.relative.top = pos.top + pos.height;\r\n\t\t}\r\n\t\tthis._endDate = gantt.dateFromPos(this._endPoint.relative.left);\r\n\t\tif (this._startPoint.relative.left > this._endPoint.relative.left) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._endPoint.relative.left, top: this._positionPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._endPoint.absolute.left, top: this._positionPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this._startPoint.relative.top > this._endPoint.relative.top) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._positionPoint.relative.left, top: this._endPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._positionPoint.absolute.left, top: this._endPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis._viewPort.callEvent(\"onDrag\", [this._startPoint, this._endPoint]);\r\n\t}\r\n\r\n\tsetPosition(positionPoint: IPoint) {\r\n\t\tthis._positionPoint = positionPoint;\r\n\t}\r\n\r\n\tdragEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(endPoint.relative.left < 0){\r\n\t\t\tendPoint.relative.left = 0;\r\n\t\t}\r\n\t\tthis._viewPort.callEvent(\"onBeforeDragEnd\", [this._startPoint, endPoint]);\r\n\t\tthis.setEnd(endPoint);\r\n\t\tif (this._startDate.valueOf() > this._endDate.valueOf()) {\r\n\t\t\t[ this._startDate, this._endDate ] = [ this._endDate, this._startDate ];\r\n\t\t}\r\n\t\tthis.clear();\r\n\t\tconst tasksByTime = gantt.getTaskByTime(this._startDate, this._endDate);\r\n\t\tconst tasksByIndex = this._getTasksByTop(this._startPoint.relative.top, this._endPoint.relative.top);\r\n\r\n\t\tthis._viewPort.callEvent(\"onDragEnd\", [this._startPoint, this._endPoint]);\r\n\t\tif (this._callback) {\r\n\t\t\tthis._callback(this._startPoint, this._endPoint, this._startDate, this._endDate, tasksByTime, tasksByIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tgetInBounds() {\r\n\t\treturn this._singleRow;\r\n\t}\r\n\r\n\tprivate _getTasksByTop(start: number, end:number) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet startValue = start;\r\n\t\tlet endValue = end;\r\n\t\tif (start > end) {\r\n\t\t\tstartValue = end;\r\n\t\t\tendValue = start;\r\n\t\t}\r\n\t\tconst startIndex = this._getTaskPositionByTop(startValue).index;\r\n\t\tconst endIndex = this._getTaskPositionByTop(endValue).index;\r\n\t\tconst result = [];\r\n\t\tfor (let i = startIndex; i <= endIndex; i++) {\r\n\t\t\tconst task = gantt.getTaskByIndex(i);\r\n\t\t\tif (task) {\r\n\t\t\t\tresult.push(gantt.getTaskByIndex(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate _getTaskPositionByTop(top: number){\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst view = this._view;\r\n\t\tconst index = view.getItemIndexByTopPosition(top);\r\n\t\tconst task = gantt.getTaskByIndex(index);\r\n\t\tif(task){\r\n\t\t\tconst height = view.getItemHeight(task.id);\r\n\t\t\tconst itemTop = view.getItemTop(task.id);\r\n\t\t\treturn {\r\n\t\t\t\ttop: itemTop || 0,\r\n\t\t\t\theight: height || 0,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst dataHeight = view.getTotalHeight();\r\n\t\t\treturn {\r\n\t\t\t\ttop: top > dataHeight ? dataHeight : 0,\r\n\t\t\t\theight: gantt.config.row_height,\r\n\t\t\t\tindex: top > dataHeight ? gantt.getTaskCount() : 0,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}","import { SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport class EventsManager {\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _domEvents: any;\r\n\tprivate _originPosition: string;\r\n\tprivate _gantt: any;\r\n\tprivate _restoreOriginPosition: () => void;\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t}\r\n\r\n\tattach(selectedRegion: SelectedRegion, useKey?: \"shiftKey\" | \"ctrlKey\" | \"altKey\"): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst _target = selectedRegion.getViewPort();\r\n\t\tthis._originPosition = window.getComputedStyle(_target).display;\r\n\t\tthis._restoreOriginPosition = () => {\r\n\t\t\t_target.style.position = this._originPosition;\r\n\t\t};\r\n\t\tif (this._originPosition === \"static\") {\r\n\t\t\t_target.style.position = \"relative\";\r\n\t\t}\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\tconst result = { autoscroll: false };\r\n\t\t\treturn result;\r\n\t\t});\r\n\r\n\r\n\t\tlet scheduledDndCoordinates = null;\r\n\t\tconst startDragAndDrop = () => {\r\n\t\t\tif (!scheduledDndCoordinates) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseDown = true;\r\n\t\t\tselectedRegion.setStart(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setPosition(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setEnd(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t};\r\n\r\n\t\tthis._domEvents.attach(_target, \"mousedown\", (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tif (gantt.utils.dom.closest(event.target, \".gantt_task_line, .gantt_task_link\")) { return; }\r\n\t\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\t\tconst result = { autoscroll: this._mouseDown };\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tscheduledDndCoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document.body, \"mouseup\", (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._mouseDown = false;\r\n\t\t\t\tconst coordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.dragEnd(coordinates);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"mousemove\", (event) => {\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tlet coordinates = null;\r\n\t\t\tif(!this._mouseDown && scheduledDndCoordinates){\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tif(Math.abs(scheduledDndCoordinates.relative.left - coordinates.relative.left) > 5){\r\n\t\t\t\t\t// add small threshold not to start dnd on simple click\r\n\t\t\t\t\tstartDragAndDrop();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.setEnd(coordinates);\r\n\t\t\t\tselectedRegion.render();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdetach(): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.detachAll();\r\n\t\tif(this._restoreOriginPosition){\r\n\t\t\tthis._restoreOriginPosition();\r\n\t\t}\r\n\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.unregisterProvider(\"clickDrag\");\r\n\t}\r\n\r\n\tdestructor(): void {\r\n\t\tthis.detach();\r\n\t}\r\n\r\n\tprivate _getCoordinates(event: MouseEvent, selectedRegion: SelectedRegion) {\r\n\t\tconst viewPort = selectedRegion.getViewPort();\r\n\t\tconst viewPortBounds = viewPort.getBoundingClientRect();\r\n\t\tconst { clientX, clientY } = event;\r\n\t\tconst result = {\r\n\t\t\tabsolute: {\r\n\t\t\t\tleft: clientX,\r\n\t\t\t\ttop: clientY,\r\n\t\t\t},\r\n\t\t\trelative: {\r\n\t\t\t\tleft: clientX - viewPortBounds.left + viewPort.scrollLeft,\r\n\t\t\t\ttop: clientY - viewPortBounds.top + viewPort.scrollTop\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n}","import { EventsManager } from \"./eventsManager\";\r\nimport { ISelectedRegionConfig, SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext) {\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tconst defaultConfig: ISelectedRegionConfig = {\r\n\t\tclassName: \"gantt_click_drag_rect\",\r\n\t\tuseRequestAnimationFrame: true,\r\n\t\tcallback: undefined,\r\n\t\tsingleRow: false\r\n\t};\r\n\r\n\tconst eventsManager = new EventsManager(gantt);\r\n\r\n\tgantt.ext.clickDrag = eventsManager;\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", () => {\r\n\t\tconst config: ISelectedRegionConfig = { viewPort: gantt.$task_data, ...defaultConfig };\r\n\t\tif (gantt.config.click_drag){\r\n\t\t\tconst clickDrag = gantt.config.click_drag;\r\n\t\t\tconfig.render = clickDrag.render || defaultConfig.render;\r\n\t\t\tconfig.className = clickDrag.className || defaultConfig.className;\r\n\t\t\tconfig.callback = clickDrag.callback || defaultConfig.callback;\r\n\t\t\tconfig.viewPort = clickDrag.viewPort || gantt.$task_data;\r\n\t\t\tconfig.useRequestAnimationFrame = clickDrag.useRequestAnimationFrame === undefined ?\r\n\t\t\t\tdefaultConfig.useRequestAnimationFrame : clickDrag.useRequestAnimationFrame;\r\n\r\n\t\t\tconfig.singleRow = clickDrag.singleRow === undefined ? defaultConfig.singleRow : clickDrag.singleRow;\r\n\t\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\tconst selectedRegion = new SelectedRegion(config, gantt, timeline);\r\n\t\t\tgantt.ext.clickDrag.attach(selectedRegion, clickDrag.useKey);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", () => {\r\n\t\teventsManager.destructor();\r\n\t});\r\n\r\n}","\r\nimport click_drag from \"./click_drag\";\r\nimport drag_timeline from \"./drag_timeline\";\r\nimport fullscreen from \"./fullscreen\";\r\nimport * as keyboard_navigation from \"./keyboard_navigation\";\r\nimport * as marker from \"./marker\";\r\nimport * as multiselect from \"./multiselect\";\r\nimport quick_info from \"./quick_info\";\r\nimport tooltip from \"./tooltip\";\r\nimport undo from \"./undo\";\r\n\r\nexport default {\r\n\tclick_drag,\r\n\tdrag_timeline,\r\n\tfullscreen,\r\n\tkeyboard_navigation,\r\n\tquick_info,\r\n\ttooltip,\r\n\tundo,\r\n\tmarker,\r\n\tmultiselect,\r\n};","import extensions from \"./ext/extensions_gpl\";\r\nimport * as base from \"./factory/make_instance_web\";\r\nimport * as scope from \"./utils/global\";\r\nconst gantt = (scope as any).gantt = base(extensions);\r\n\r\nexport default gantt;\r\nexport { gantt };"],"sourceRoot":""}