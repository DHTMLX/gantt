{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/utils/utils.js","webpack:///./sources/utils/dom_helpers.js","webpack:///./sources/utils/extends.js","webpack:///./sources/utils/eventable.js","webpack:///./sources/core/lightbox/controls/base_control.js","webpack:///./sources/utils/date_helpers.js","webpack:///./sources/utils/helpers.js","webpack:///./sources/core/ui/grid/editors/editors/base.js","webpack:///./sources/core/ui/layout/cell.js","webpack:///./sources/core/ui/mouse_event_container.js","webpack:///./sources/core/ui/grid/editors/controller.js","webpack:///./sources/utils/env.js","webpack:///./sources/locale/locale.js","webpack:///./sources/core/lightbox/controls/select_control.js","webpack:///./sources/core/worktime/calendar_arguments_helper.js","webpack:///./sources/utils/task_tree_helpers.js","webpack:///./sources/core/gantt_data_range.js","webpack:///./sources/core/datastore/power_array.js","webpack:///./sources/core/datastore/datastore.js","webpack:///./sources/core/ui/render/task_bar_render.js","webpack:///./sources/core/ui/grid/grid.js","webpack:///./sources/core/ui/timeline/scales.js","webpack:///./sources/core/ui/timeline/timeline.js","webpack:///./sources/core/ui/layout/layout.js","webpack:///./sources/utils/dom_event_scope.js","webpack:///./sources/utils/timeout.js","webpack:///./sources/core/destructor.js","webpack:///./sources/core/common/assert.js","webpack:///./sources/core/gantt_core.js","webpack:///./sources/core/touch.js","webpack:///./sources/css/skins/contrast_white.js","webpack:///./sources/css/skins/contrast_black.js","webpack:///./sources/css/skins/material.js","webpack:///./sources/css/skins/broadway.js","webpack:///./sources/css/skins/terrace.js","webpack:///./sources/css/skins/meadow.js","webpack:///./sources/css/skins/skyblue.js","webpack:///./sources/core/skin.js","webpack:///./sources/core/cached_functions.js","webpack:///./sources/core/data_task_types.gpl.js","webpack:///./sources/core/lightbox_optional_time.js","webpack:///./sources/core/lightbox/controls/parent_control.js","webpack:///./sources/core/lightbox/controls/duration_control.js","webpack:///./sources/core/lightbox/controls/radio_control.js","webpack:///./sources/core/lightbox/controls/checkbox_control.js","webpack:///./sources/core/lightbox/controls/time_control.js","webpack:///./sources/core/lightbox/controls/textarea_control.js","webpack:///./sources/core/lightbox/controls/template_control.js","webpack:///./sources/core/lightbox/index.js","webpack:///./sources/core/data.js","webpack:///./sources/core/facades/worktime_calendars.js","webpack:///./sources/core/worktime/strategy/no_work_time.js","webpack:///./sources/core/worktime/time_calculator.js","webpack:///./sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///./sources/core/worktime/strategy/calendar_strategy.js","webpack:///./sources/core/worktime/calendar_manager.js","webpack:///./sources/core/worktime/work_time.js","webpack:///./sources/core/load.js","webpack:///./sources/core/tasks.js","webpack:///./sources/core/wai_aria.js","webpack:///./sources/core/grid_column_api.gpl.js","webpack:///./sources/core/dynamic_loading.gpl.js","webpack:///./sources/core/plugins/auto_task_types.js","webpack:///./sources/core/plugins/new_task_placeholder.js","webpack:///./sources/core/plugins/resources.js","webpack:///./sources/core/plugins/dhtmlx_hooks.js","webpack:///./sources/core/plugins/jquery_hooks.js","webpack:///./sources/core/plugins/wbs.js","webpack:///./sources/core/plugins/batch_update.js","webpack:///./sources/core/plugins/autoscroll.js","webpack:///./sources/core/plugins/index.js","webpack:///./sources/core/dataprocessor/dataprocessor.js","webpack:///./sources/core/dataprocessor/live_update_hooks.js","webpack:///./sources/core/dataprocessor/hooks.js","webpack:///./sources/core/datastore/datastore_render.js","webpack:///./sources/core/datastore/select.js","webpack:///./sources/core/datastore/treedatastore.js","webpack:///./sources/core/facades/datastore_links.js","webpack:///./sources/core/facades/datastore_tasks.js","webpack:///./sources/core/facades/datastore.js","webpack:///./sources/core/datastore/datastore_hooks.js","webpack:///./sources/core/facades/layout.js","webpack:///./sources/core/data_task_layers.gpl.js","webpack:///./sources/core/ui/main_layout_initializer.js","webpack:///./sources/core/ui/timeline/links_dnd.js","webpack:///./sources/core/ui/timeline/tasks_dnd.js","webpack:///./sources/core/ui/timeline/main_timeline_initializer.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd.js","webpack:///./sources/core/ui/grid/main_grid_initializer.js","webpack:///./sources/core/ui/render/task_grid_line_render.js","webpack:///./sources/core/ui/render/link_render.js","webpack:///./sources/core/ui/render/task_bg_render.js","webpack:///./sources/core/ui/render/task_split_render.js","webpack:///./sources/core/ui/grid/editors/editors/predecessor.js","webpack:///./sources/core/ui/grid/editors/editors/date.js","webpack:///./sources/core/ui/grid/editors/editors/select.js","webpack:///./sources/core/ui/grid/editors/editors/number.js","webpack:///./sources/core/ui/grid/editors/editors/text.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings/default.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings.js","webpack:///./sources/core/ui/grid/grid_resize.gpl.js","webpack:///./sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack:///./sources/core/ui/layout/scrollbar_cell.js","webpack:///./sources/core/ui/layout/resizer_cell.gpl.js","webpack:///./sources/core/ui/layout/view_cell.js","webpack:///./sources/core/ui/layout/view_layout.js","webpack:///./sources/core/ui/render/render_factory.js","webpack:///./sources/core/ui/render/layer_engine.js","webpack:///./sources/core/ui/gantt_layers.js","webpack:///./sources/core/ui/mouse.js","webpack:///./sources/core/ui/configurable.js","webpack:///./sources/core/ui/ui_factory.js","webpack:///./sources/core/ui/index.js","webpack:///./sources/core/message.js","webpack:///./sources/core/common/state.js","webpack:///./sources/core/common/templates.js","webpack:///./sources/core/common/dnd.js","webpack:///./sources/core/common/date.js","webpack:///./sources/core/common/ajax.js","webpack:///./sources/core/common/config.js","webpack:///./sources/core/common/services.js","webpack:///./sources/core/common/import.js","webpack:///./sources/constants/index.js","webpack:///./sources/core/gantt.js","webpack:///./sources/core/deprecated_warnings.js","webpack:///./sources/dhtmlxgantt.gpl.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","seed","dateHelper","copy","result","Array","Number","String","Boolean","length","isDate","Date","apply","defined","obj","mixin","target","source","force","f","undefined","uid","valueOf","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getClassName","className","baseVal","indexOf","_trimString","_slave","createElement","getTargetNode","e","tagName","srcElement","str","trim","this","replace","getNodePosition","getFocusableNodes","root","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","cssText","appendChild","clientWidth","removeChild","addClassName","removeClassName","split","regEx","RegExp","insertNode","newone","innerHTML","child","firstChild","removeNode","getChildNodes","css","ch","childNodes","len","out","push","toNode","getElementById","querySelector","locateClassName","classname","strict","trg","ind","charAt","locateAttribute","attribute","getRelativeEventPosition","ev","pageX","pageY","pos","clientX","clientY","isChildOf","parent","b","__","constructor","EventHost","_connected","_silent_mode","_silentStart","_silentEnd","createEventStorage","dhx_catch","z","res","zr","addEvent","removeEvent","id","eventHost","catcher","callObj","attachAll","callback","callEvent","arg0","handlerName","concat","checkEvent","list","detachAllEvents","dummy","console","log","BaseControl","render","set_value","get_value","focus","gantt","getFullYear","getMonth","getDate","units","second","minute","hour","day","week","month","quarter","year","getSecondsInUnit","unit","forEach","arr","workArray","arrayMap","map","resArray","BaseEditor","show","column","config","placeholder","hide","get_input","is_changed","currentValue","is_valid","save","utils","eventable","domHelpers","Cell","factory","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","events","mouseEvents","h","getKeyboardMapping","textEditorFactory","numberEditorFactory","selectEditorFactory","dateEditorFactory","predecessorEditorFactory","initConfigs","editor_types","text","number","date","predecessor","keyboardMapping","eventBus","inlineEditController","createEditors","grid","_createPlaceholder","itemId","columnName","getItemTop","getItemHeight","cols","getGridColumns","_getEditorPosition","setAttribute","item_attribute","getColumnIndex","handlers","store","controller","_itemId","_columnName","_editor","_editorType","_placeholder","locateCell","row","getEditorConfig","getColumn","editor","mapping","getMapping","getDatastore","oldId","newId","getState","batch_update","editorType","startEdit","exists","editorState","setValue","editorConfig","$getConfig","type","$grid_data","onShow","state","item","getItem","map_to","getValue","_getItemValue","getTask","isChanged","onHide","newValue","oldValue","end_date","calculateEndDate","start_date","duration","task","updateItem","_findEditableCell","start","direction","nextIndex","nextColumn","getNextCell","dir","getFirstCell","getLastCell","editNextCell","canChangeRow","moveRow","editPrevCell","getNext","getPrev","editNextRow","editPrevRow","handlerId","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","locale","month_full","month_short","day_full","day_short","labels","new_task","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_duration","column_add","link","confirm_link_deleting","link_start","link_end","type_task","type_project","type_milestone","minutes","hours","days","weeks","months","years","message_ok","message_cancel","__extends","_super","SelectControl","sns","options","label","_dhx_onchange","onchange","_focus","IsWorkTimeArgument","calendar","ClosestWorkTimeArgument","CalculateEndDateArgument","step","GetDurationArgument","end","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","copyLinkIdsArray","linkIds","targetHash","isLinkExists","getLink","copyLinkIds","$source","$target","getSubtreeLinks","rootId","isTaskExists","eachTask","getSubtreeTasks","ScaleHelper","_init_tasks_range","cfg","scale_unit","scale_offset_minimal","helper","scales","primaryScale","subscales","sortScales","_scale_range_unit","range","start_interval","add","resolveConfigRange","getSubtaskDates","dateRangeResolver","_min_date","_max_date","fit_tasks","old_min","old_max","_adjust_scales","$powerArray","$create","array","$removeAt","$remove","$find","$insertAt","data","$each","master","$map","$filter","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","loaded","parse","refresh","_updateOrder","code","_removeItemInner","removeItem","filter","_addItemInner","silent","order","data_size","min","getVisibleItems","getIndexRange","addItem","_changeIdInner","changeId","_moveInner","sindex","tindex","getIdByIndex","move","clearAll","arraysEqual","arr1","arr2","quick","oldOrder","count","countVisible","sort","serialize","eachItem","rule","filteredOrder","from","to","Infinity","ret","getItems","getIndexById","_getNullIfUndefined","getFirst","getLast","_task_default_render","_isAllowedUnscheduledTask","getItemPosition","templates","$getTemplates","taskType","getTaskType","padd","row_height","types","milestone","link_line_width","show_progress","element","done","progress","max","pr","progressColor","backgroundColor","opacity","progress_text","rtl","position","wrapper","drag_progress","isReadonly","drag","markerPos","_render_task_progress","task_text","_render_task_content","textColor","color","basic","template","project","isSummaryTask","isSplitTask","select_task","selected_task","drag_id","drag_mode","touch_drag","link_source_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","from_start","link_from_start","to_start","link_to_start","allowDrag","isLinkAllowed","dragClass","_combine_item_class","task_class","styles","side","_get_link_crossing_css","_render_side_content","leftside_text","_render_leftside_content","rightside_text","_render_rightside_content","_waiAria","setTaskBarAttr","drag_resize","_render_pair","drag_links","show_links","outer","inner","showLinkPoints","touch","cssClass","cond","leftside","links","start_to_start","finish_to_start","finish_to_finish","_get_conditions","ln","tp","min_date","max_date","renderer","type_renderers","defaultRenderer","gridResize","Grid","$state","container","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","$grid","gridScaleRowAttrString","$grid_scale","attr","layers","_createLayerConfig","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","outerWidth","columns","innerWidth","scrollable","_setColumnsWidth","grid_width","dataHeight","scale_height","rowStore","contentHeight","contentWidth","_getGridWidth","scrollHeight","scrollWidth","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","$ui","gridLine","_taskLayers","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","host","bar_layer","addLayer","_refreshPlaceholderOnStoreUpdate","smart_rendering","scrollY","scroll","getView","getScrollState","scrollSize","$rowsPlaceholder","_staticBgHandler","close","open","_clearLayers","removeLayer","_getColumnWidth","min_width","min_grid_column_width","new_width","max_width","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","col","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","reverse","cells","lineHeigth","last","colWidth","_sort","grid_header_class","gridScaleCellAttrString","lineHeight","services","getSum","sizes","summ","setSumWidth","sum_width","scale","parts","adjustSize","full_width","splitSize","full","cellSize","initTemplate","date_scale","scale_cell_class","prepareConfigs","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","trace_x","indexes","trace_indexes","trace_index_transition","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","ignore_x","display_count","min_col_width","line_height","cont_width","column_count","col_width","ignores","eachColumn","trace_x_ascending","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prev","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","lastDate","outDate","shared","canvasRender","Timeline","$scaleHelper","_findBinary","low","high","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","rendered","linksAttr","bindLinks","link_attribute","tasks","linkLayers","_attachLayers","backgroundImage","data_els","_refreshScales","smart_scales","_scales","_getScaleChunkHtml","taskFilter","expose","taskBar","taskSplitBar","append","taskBg","static_background","_linkLayers","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","linkRenderer","linkLayer","_linkRenderer","staticRender","getScale","_render_tasks_scales","scales_html","outer_width","helpers","_getScales","availWidth","autosize","autosize_min_width","cfgs","min_column_width","fromPos","toPos","scale_row_class","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","date_to_str","startIndex","endIndex","inherit_scale_class","cssclass","getTimelineCellAttr","dateFromPos","part","_getColumnDuration","posFromDate","columnIndexByDate","assert","wholeCells","partCell","day_ind","transition","xLeft","xRight","task_height","offset","task_height_offset","getRowTop","task_id","getParent","Layout","_this","$root","_parseConfig","$cells","_resizeScrollbars","scrollbars","scrollbar","scrollChanged","visibleScrollbars","hiddenSrollbars","showScrollbar","hideScrollbar","shouldHide","shouldShow","visibleGroups","group","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","isChild","children","cellId","sub","alert","insertBefore","rows","views","initUI","getCells","_cleanElSize","toString","_getBoxStyles","computed","properties","boxSizing","clientHeight","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","margin","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","createScope","attach","extend","updPerSecond","_on_timeout","timeout","ceil","setTimeout","_eventRemoveAll","$layout","resetLightbox","_dp","check","message","show_errors","expire","calculateScaleRange","resizeDelay","scroll_size","clearTimeout","_reinit","_update_flags","initTemplates","_clearTaskLayers","_clearLinkLayers","reset","layout","createView","storeNames","refreshData","$mouseEvents","$click","buttons","edit","showLightbox","delete","question","title","confirm_deleting_title","_dhtmlx_confirm","$new","deleteTask","hideLightbox","posX","_getHorizontalScrollbar","codeScrollLeft","visible_date","task_scroll_offset","preserve_scroll","new_pos","showDate","setSizes","locate","targetAttribute","task_attribute","_locate_css","_locateHTML","getTaskRowNode","els","changeLightboxType","getLightboxType","_silent_redraw_lightbox","_get_link_type","start_to_finish","prevOffset","time_unit","offsetChanged","hasChild","_is_icon_open_click","getTaskDND","_tasks_dnd","touch_feedback","touch_feedback_duration","_prevent_touch_scroll","_touch_feedback","vibrate","touchEventsSupported","createEvent","_touch_events","touches","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","touchHandlers","names","accessor","ignore","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","current_target","start_drag","on_mouse_move","preventDefault","cancelBubble","abs","_touch_scroll_active","new_scroll_state","block_action","taskId","on_mouse_down","renders","_getTaskLayers","isTaskVisible","cloneNode","cloneTaskRendered","_start_dnd","_touch_drag","refreshTask","on_mouse_up","now","onDoubleClick","skins","link_arrow_size","lightbox_additional_height","_second_column_width","_third_column_width","material","_redefine_lightbox_buttons","buttons_left","buttons_right","getTaskNode","indx","broadway","_lightbox_template","_config_buttons_left","_config_buttons_right","gantt_delete_btn","gantt_save_btn","terrace","meadow","skyblue","_get_skin","skin","getElementsByTagName","href","match","skinset","_configure","resetSkin","activate","_cached_functions","update_if_changed","active","cache","critical_path_mode","wrap_methods","methods","_prefetch_originals","prefetch","methodname","original","optimizer","argumentsArray","args","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","getUTCDate","values","stringify_argument","deactivate","setup","override_gantt","gantt_methods","optimize_render","deactivTimeout","_extend_to_optional","lightbox_block","optional_time","section","_resolve_default_mapping","disable","val","enable","disabled","update_block","_lightbox_id","previousSibling","button_text","resizeLightbox","button_click","_get_typed_lightbox_config","form_blocks","duration_optional","time_optional","time","ParentControl","_display","item_id","getTaskByTime","allow_root","root_id","root_label","_filter","tmpDom","newOptions","onselect","replaceChild","DurationControl","_getStartDate","_time_format_order","_getDuration","getTimePicker","singleDate","single_date","readonly","lightboxDurationInputAttrString","duration_val","inps","btns","endspan","_calc_date","task_date","_change_duration","onclick","onkeydown","charCode","keyCode","which","constants","KEY_CODES","DOWN","UP","calculateDuration","_fill_lightbox_select","startDate","endDate","RadioControl","radio","default_value","checked","CheckboxControl","checkboxes","entry","TimeControl","auto_end_date","_update_lightbox_select","selects","needSetTime","_getDate","mapOffset","_get_timepicker_step","_getEndDate","TextareaControl","_get_input","TemplateControl","getHtmlButtons","floatRight","_migrate_buttons","lightboxButtonAttrString","getHtmlTimePickerOptions","settings","start_year","end_year","tdate","timeFormat","year_range","first","_time_values","time_picker","setTime","getHours","getMinutes","_lightbox_methods","registerProvider","lightbox","getLightbox","_center_lightbox","showCover","_fill_lightbox","lightboxVisibleAttr","round_dnd_dates","timeline","_is_chart_visible","time_step","getLabel","sections","j","updateCollection","list_name","collection","serverList","_lightbox_type","lightboxDiv","fullWidth","classNames","_lightbox","_is_lightbox_timepicker","wide_form","lightboxAttr","drag_lightbox","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_render_sections","labelBlock","inputBlock","nextSibling","inputId","bindLabelsToInputs","_init_lightbox_events","block","con","scroll_top","scroll_left","view_height","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","gantt_cancel_btn","_cancel_lightbox","src","sec","buttonTarget","SPACE","shiftKey","click","keys","edit_save","edit_cancel","getLightboxValues","$data","tasksStore","addTask","updateTask","lightboxHiddenAttr","hideCover","_custom_lightbox","_set_lightbox_values","lightboxHeader","lightbox_header","task_time","substr","getLightboxSection","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","ariaAttrs","date_part","time_format","getTimeFormat","limit_time_select","first_hour","last_hour","setHours","lightboxSelectAttrString","checkbox","ok","opts","confirm","field","type_value","oldType","formData","updTask","isUnscheduledTask","unscheduled","show_unscheduled","taskStart","taskEnd","getGlobalTaskIndex","_defaultTaskDate","parent_id","getTaskByIndex","_set_default_task_timing","createTask","setParent","$open","details_on_create","selectTask","showTask","oldid","newid","unselect","getSelectedId","_get_task_timing_mode","task_type","$no_start","$no_end","$rendered_type","_init_task_timing","task_mode","dirty","resetProjectDates","taskMode","_assign_project_dates","getSubtaskDuration","taskTiming","_update_parents","pid","has_changed","oldStart","oldEnd","roundDate","upper","lower","colIndex","steps","correctTaskWorkTime","work_time","correct_work_time","getClosestWorkTime","calendarManager","timeCalculator","getWorkHours","setWorkTime","unsetWorkTime","_hasDuration","hasDuration","createCalendar","addCalendar","getCalendar","getCalendars","getTaskCalendar","deleteCalendar","CalendarDisabledTimeStrategy","argumentsHelper","_calculateDuration","fixedUnits","createArgumentsHelper","NoWorkTimeCalendar","TimeCalculator","$disabledCalendar","_getCalendar","manager","WorkUnitsCache","_cache","getTime","put","Cache","CalendarWorkTimeStrategy","_workingUnitsCache","_getUnitOrder","_timestamp","timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_is_work_hour","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","next","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","day_start","lastDayStart","lastDayEnd","startPart","endPart","hourRange","worktime","_setCalendar","_tryChangeCalendarSettings","payload","backup","JSON","stringify","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getDay","reset_calendar","is_work_unit","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","tick","both_directins","inc","unitOrder","biggerTimeUnit","biggerTimeUnitSettings","CalendarWorktimeStrategy","CalendarManager","_calendars","_getDayHoursForMultiple","calendars","currPos","reduce","acc","mergeCalendars","newCalendar","_convertWorktimeSettings","parentCalendar","defaults","fulltime","apiCore","createDefaultCalendars","calendar_property","resource_calendars","resource","calendarId","worktimes","restoreConfigCalendars","global","worktimeFacadeFactory","facade","load","url","_load_url","cl","_load_type","ajax","on_load","xmlDoc","responseText","resp","_process_loading","collections","_load_collections","linksStore","initial_scroll","firstTask","collections_loaded","option","option_key","$ignore","json","dhx_security","security_key","serializeTask","_copyObject","serializeLink","_copyLink","xml_format","rawLinks","getLinks","xml","_xmlNodeToJSON","attrs_only","attributes","nodeType","nodeValue","_getCollections","loader","xpath","itms","attrs","_getXML","toptag","getXMLTopNode","xmltop","skey","evs","oldxml","startdate","est","enddate","predecessortasks","editable_property","readonly_property","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","dateString","aria-label","_taskCommonAttr","tooltip_text","$dataprocessor_class","isSelectedTask","drag_move","taskRowAttr","order_branch","$level","linkAttr","linkTypes","toStart","fromStart","drag_link","gridSeparatorAttr","buttonName","role","tabindex","headerText","time_option","aria-valuemin","multiselect","gridCellAttrString","textValue","gridAddButtonAttrString","messageButtonAttrString","buttonLabel","messageInfoAttr","messageModalAttr","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","wai_aria_attributes","getGridColumn","callIfEnabled","auto_types","updateParents","childId","batchUpdate","checkParent","setTaskType","delTaskParent","originalRowDndParent","originalMoveTaskParent","allTypes","targetType","updateAfterRemoveChild","sid","placeholder_task","silenceDataProcessor","dataProcessor","_silencedPlaceholder","setUpdated","insertPlaceholder","placeholders","getTaskBy","afterEdit","newTask","createResourceMethods","resourceTaskCache","propertyName","propertyValue","filterResourceTasks","getResourceTasks","resourceIds","cacheKey","resourceHash","getResourceLoad","resourceId","resourceProperty","timegrid","currDate","timetable","resource_render_empty_cells","calculateResourceLoad","renderLine","resource_property","resource_cell_class","resource_cell_value","filterTasks","resourceRow","resource_store","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","that","vs","av","border","gridId","gridObj","dhtmlXCellObject","jQuery","$","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","error","wbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","getByWBSCode","currentNode","getChildren","_isFirst","_prevSibling","_wbs","_parent","createWbs","getTaskByWBSCode","createMethod","isActive","disableMethod","methodName","dummyMethod","restoreMethod","restoreMethods","batchUpdatePayload","noRedraw","dp_mode","call_dp","updateMode","setUpdateMode","resetProjects","refreshLink","methodsHash","setGanttMode","sendData","scrollRange","scrollStep","scrollDelay","scrollSpeed","interval","isMove","delayTimeout","startPos","started","eventPos","getAutoscrollContainer","isScrollState","dragMarker","isResize","isLink","defineDelayTimeout","speed","autoscroll_speed","setInterval","autoscroll_delay","defineScrollInterval","clearInterval","autoscrollInterval","isScroll","autoscroll","posY","need_scroll","scrollState","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","boxSize","startCoord","serverProcessorURL","serverProcessor","action_param","updatedRows","autoUpdate","_tMode","_headers","_payload","post_delim","_waitMode","_in_progress","_invalid","mandatoryFields","messages","updated","inserted","deleted","invalid","invalid_cell","enableUTFencoding","setTransactionMode","total","headers","_tSend","_endnm","escape","_utf","encodeURIComponent","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","dnd","rowId","findRow","existing","getUserData","set_invalid","setUserData","is_invalid","_clearUpdateFlag","markRow","_methods","details","checkBeforeUpdate","mytype","_h2","editStop","sendAllData","_beforeSendData","_getRowData","_sendData","serialize_one","stack","pref","_applyPayload","urlSeparator","a1","back","ids","afterUpdate","a3","_user","a4","query","method","action","gr_id","valid","_getAllData","has_one","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","afterUpdateCallback","tid","btag","marker","correct","soid","tag","finalizeUpdate","cleanUpdate","atag","anObj","_dp_init","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","loadUpdate","getUpdates","_v","_a","version","vers","upds","status","insertCallback","upd","isExist","addLink","deleteCallback","deleteLink","dataprocessor","liveUpdateHooks","oldAfterUpdate","dataProcessorHandlers","dp","_serverProcessor","modes","_ganttMode","newState","reqUrl","filePath","_change_id","changeLinkId","changeTaskId","_row_style","row_id","_delete_task","_sendTaskOrder","$drop_target","clientSideDelete","clientOnly","treeHelper","cascadeDelete","cascade_delete","dpMode","cascade","itemLinks","getTaskLinks","updateLink","substring","detachDataProcessor","userdata","bindDataStore","itemRepainter","getLayers","render_item","renderers","render_items","skipRepaint","change_id","refreshId","selectedId","deleteItem","TreeDataStore","_branches","$parentProperty","parentProperty","$getRootId","$openInitially","openInitially","eachParent","_buildTree","_add_branch","calculateItemLevel","targetIndex","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","branch","items","getBranchIndex","source_pid","tbranch","parentId","getSiblings","siblings","level","_setParentInner","new_pid","startItem","added_already","old_parent","new_parent","old_id","new_id","newbranch","desc","criteria","original_criteria","temp","getLinkCount","getTaskCount","getVisibleTaskCount","getTaskIndex","startTask","calculateTaskLevel","moveTask","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","getDatastores","createDatastoreFacade","createDatastore","$StoreType","open_tree_initially","setService","storeList","stores","refresh_links","linkId","_clear_data","unselectTask","facadeFactory","parseDate","checkLinkedTaskVisibility","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","mapEvents","conf","mapFrom","mapTo","sourceEvent","targetEvent","$index","oldState","sourceVisible","targetVisible","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","getTimeline","getGrid","getVerticalScrollbar","getHorizontalScrollbar","DEFAULT_VALUE","tryCall","fallback","getTaskTop","getTaskPosition","getTaskHeight","roundTaskDates","getLinkNode","oldH","oldV","newV","newH","date_x","scroll_to","_scroll_state","x_pos","y_pos","x_inner","y_inner","scrollVer","scrollHor","horState","visible","verState","addTaskLayer","addLinkLayer","initializer","_legacyGridResizerClass","resizers","gridResizer","onCreated","mainTimeline","show_chart","showGrid","show_grid","colsWidth","grid_limits","original_grid_width","skinSettings","_getVerticalScrollbar","oldPos","newPos","$scroll_ver","$scroll_hor","_findGridResizer","gridFirst","_getSiblings","_behind","_front","onInitialized","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","oldSize","onDestroyed","initLinksDND","_link_landing","_link_target_task","_link_target_task_start","_link_source_task","_link_source_task_start","getDndState","DnD","sensitivity","updates_per_second","getLinePos","shift","isStart","taskPos","xEnd","yEnd","milestoneWidth","origWidth","sqrt","getVisibleMilestoneWidth","getMilestonePosition","isMilestone","updateMarkedHtml","drag_link_class","resetDndState","coordinateCircleQuarter","sX","eX","sY","eY","_dir_start","dd","getPosition","advanceMarker","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","s_x","s_y","e_x","e_y","_direction","getDirectionLine","link_direction_class","dist","pow","tan","angle","atan","PI","sin","cos","ieTransform","shiftLeft","shiftTop","showDirectingLine","createLinkDND","createTaskDND","round_task_dates","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","_domEvents","clear_drag_state","set_actions","drag_from_start","stage","_move","_resize","_resize_progress","start_x","start_y","coords_x","_drag_task_coords","min_duration","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","_update_on_move","_update_item_on_move","curr_date","drag_project","initialDrag","childDrag","_get_drag_mode","_fix_dnd_scale_time","fixStart","fixEnd","_fix_working_times","_finalize_mouse_up","_fireEvent","_dhx_changed","dragProperty","params","trigger","drag_state","taskDnD","linkDnD","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","extendDom","_clearDomEvents","_clearStateProvider","_delete_link_handler","link_description","coll","coll_date","scale_step","unregisterProvider","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","getStore","initial_open_state","outerHTML","$transparent","lastTaskOfLevel","last_item","_getGridPos","gridHeight","_getTargetY","_getTaskByY","dropIndex","targetY","allowedLevel","over","order_branch_free","nextId","prevId","rowDnd","extendGantt","ext","inlineEditors","_inlineEditors","initEvents","clearEvents","scroll_on_click","sorting_method","callHandler","totalWidth","aria","date_grid","tree","grid_indent","grid_open","grid_folder","grid_blank","grid_file","align","grid_row_class","css_template","drawer","current_pos","dirs","down","path","point","get_lines","dots","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","link_wrapper_width","get_line_sizes","line_size","marginTop","marginLeft","render_line","innerPos","get_direction","vect","path_builder","current","point_to","get_points","pt","get_endpoint","xy","shiftX","lineType","get_line_type","forward","sign","milestoneHeight","lines","cssTemplate","link_class","isCriticalLink","endpoint","line_width","_render_link_arrow","borderColor","show_task_cells","task_cell_class","odd","task_row_class","defaultRender","sub_tasks","PredecessorEditor","parseInputString","predecessors","delimiter","formatPredecessors","pred","getLinksDiff","predecessorCodes","selectedLinks","lag","getSelectedLinks","existingLinksSearch","linksToAdd","linkKey","linksToDelete","remove","linksDiff","autoSchedule","inputPredecessors","taskPredecessors","html5DateFormat","dateToStr","strToDate","DateEditor","str_to_date","parsed","SelectEditor","optionsHtml","NumberEditor","TextEditor","onBlurDelay","keyNav","keyboardNavigation","activeCell","command","hasEditor","keyboard","preventKeyNav","ENTER","ctrlKey","metaKey","ESC","LEFT","RIGHT","DELETE","TAB","destroy","keyboard_navigation","defaultPrevented","shouldPrevent","defaultMapping","keyNavMappings","setMapping","keyboard_navigation_cells","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","eachCell","_getLinkedViews","scrollX","_updateLinkedViews","scrollHorizontally","_scrolling","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","outerScroll","innerScroll","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","oldLeft","detail","oldTop","ViewCell","childConfig","$initialized","unload","outerX","outerY","childSize","ViewLayout","$cell","byMaxSize","otherCell","task_area_pulls","task_area_renderers","getRenderer","layer_attribute","dom","remove_item","clear_container","buffer","createDocumentFragment","vis","replace_item","newNode","restore","clearRenderers","renderFactoryProvider","mergeFilters","filter_methods","filter_method","renderFactory","createGroup","get_container","rel_root","defaultFilters","renderGroup","tempCollection","filters","_add","pending","topmost","rel","eachLayer","createLayerFactory","previusSiblingContainer","defaultContainerSibling","removeTaskLayer","_getLinkLayers","removeLinkLayer","createMouseHandler","eventHandlers","doubleclick","contextMenu","addEventTarget","onClick","findEventHandlers","callEventHandlers","onContextMenu","returnValue","hash","delegateHandlers","handlerResult","details_on_dblclick","onMouseMove","_last_move_event","domEvents","eventName","elementHandlers","ViewSettings","extendSettings","parentSettings","own","parentView","parentConfig","parentTemplates","configurable","createFactory","createdViews","creator","configure","registerView","viewConstructor","uiFactory","createLayers","Resizer","Scrollbar","ResourceGrid","ResourceTimeline","gridEditorsFactory","renderTaskBar","renderSplitTaskBar","renderTaskBg","renderLink","gridRenderer","mainGridInitializer","mainTimelineInitializer","mainLayoutInitializer","attachInitializer","layersEngine","layersApi","layersService","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","messageBox","modality","cover","buttonAriaAttrs","getFirstDefined","_createBox","cancel","contentId","btn","_boxStructure","alertPopup","confirmPopup","boxPopup","box_params","focusable","timers","info","hideAll","popups","modalbox","stateProviders","internal","provider","regTemplates","initial","template_name","xml_date","server_utc","api_date","task_unscheduled_time","grid_date_format","tooltip_date_format","copyDomEvent","altKey","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","original_target","dragStart","traceDragEvents","domElement","inputMethod","mousemove","dragMove","limited_mousemove","dragScroll","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","initDnDMarker","backupEventTarget","domEvent","getEvent","backup_element","elementFromPoint","month_short_hash","month_full_hash","old","hour_start","time_part","week_start","start_on_monday","month_start","setDate","quarter_start","res_month","setMonth","year_start","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","ndate","setYear","add_quarter","to_fixed","num","format","utc","Function","getISOWeek","getWeek","splt","mask","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","DOMParser","parseFromString","ActiveXObject","async","loadXML","tagname","xhr","responseXML","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","postData","del","post","postSync","getLong","postLong","longParams","isQt","onreadystatechange","readyState","setRequestHeader","toUpperCase","send","branch_loading","branch_loading_property","show_loading","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","project_sections","milestone_sections","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","prevent_default_scroll","service","$inject","templatesLoader","stateService","uiApi","createLayoutFacade","deprecated","badCode","goodCode","formatting","warn","wrapDeprecated","dhtmlxMethods","dynMethods","warnings","base"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 128);\n","var dateHelper = require(\"./date_helpers\");\r\n\r\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tif (dateHelper.isDate(object)) {\r\n\t\t\tresult = new Date(object);\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = document.documentElement;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;","function dummy() {\r\n\tconsole.log(\"Method is not implemented.\"); // jshint ignore:line\r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nmodule.exports = function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","function isDate(obj) {\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tisDate: isDate\r\n};","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback){\r\n\tif(arr.forEach){\r\n\t\tarr.forEach(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback){\r\n\tif(arr.map){\r\n\t\treturn arr.map(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\r\n\t\treturn resArray;\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","var utils = require(\"../../../utils/utils\"),\r\n\tdomEventsScope = require(\"../../../utils/dom_event_scope\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;","var getKeyboardMapping = require(\"./keyboard_mappings\");\r\nvar textEditorFactory = require(\"./editors/text\"),\r\n\tnumberEditorFactory = require(\"./editors/number\"),\r\n\tselectEditorFactory = require(\"./editors/select\"),\r\n\tdateEditorFactory = require(\"./editors/date\"),\r\n\tpredecessorEditorFactory = require(\"./editors/predecessor\");\r\nvar utils = require(\"../../../../utils/utils\");\r\nvar domHelpers = require(\"../../../../utils/dom_helpers\");\r\nvar eventable = require(\"../../../../utils/eventable\");\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping();\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tleft += cols[i].width;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left,\r\n\t\t\t\theight: height,\r\n\t\t\t\twidth: width\r\n\t\t\t};\r\n\t\t}\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", grid.getColumnIndex(columnName));\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\treturn column.editor;\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif(this.callEvent(\"onBeforeEditStart\", [editorState]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.show(editorState.id, editorState.columnName);\r\n\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, document.body));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\t\t\t\teditor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tthis._editor = editor;\r\n\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif(this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif(this._editor.is_valid(editorState.newValue, editorState.id, editorState.columnName, this._placeholder)){\r\n\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (editorConfig.map_to != \"auto\") {\r\n\t\t\t\t\t\t\titem[columnName] = value;\r\n\t\t\t\t\t\t\tif (columnName == \"duration\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t} else if (columnName == \"end_date\") {\r\n\t\t\t\t\t\t\t\titem.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\t\t\t\tstart_date: item.end_date,\r\n\t\t\t\t\t\t\t\t\tduration: -item.duration,\r\n\t\t\t\t\t\t\t\t\ttask: item}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else if (columnName == \"start_date\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir){\r\n\t\t\t\tif(dir > 0){\r\n\t\t\t\t\treturn gantt.getNext(this._itemId);\r\n\t\t\t\t}else {\r\n\t\t\t\t\treturn  gantt.getPrev(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(){\r\n\t\t\t\tvar row = this.getNextCell(1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(){\r\n\t\t\t\tvar row = this.getNextCell(-1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\nmodule.exports = create;","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;","module.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\tvar i;\r\n\t\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\thtml += \"</select></div>\";\r\n\t\treturn html;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","var utils = require(\"../../utils/utils\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (dateHelper.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\"),\r\n\teditors = require(\"./editors/controller\");\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\t\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function(name){\r\n\t\tvar columns = this.$getConfig().columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function(name){\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif(index === null){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.row_height;\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function(id){\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif(!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif(this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif(scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif(!contentHeight){\r\n\t\t\tcontentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t}\r\n\r\n\t\tif(contentHeight){\r\n\t\t\tif(this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode){\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tthis._mouseDelegates.destructor();\r\n\t\tthis._mouseDelegates = null;\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskSplitBar,\r\n\t\t\t\tfilter: [taskFilter],\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tappend: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = +days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\tif(store.getParent && store.exists(task_id) && store.exists(store.getParent(task_id))){\r\n\t\t\t\tvar parent = store.getItem(store.getParent(task_id));\r\n\t\t\t\tif(this.$gantt.isSplitTask(parent)){\r\n\t\t\t\t\treturn store.getIndexById(parent.id) * this.$getConfig().row_height;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;","var utils = require(\"./utils\");\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tif (!this.config.sort && this._sort) {\r\n\t\t\tthis._sort = undefined;\r\n\t\t}\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function(){\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\treturn (task.render == \"split\" && gantt.hasChild(task.id));\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./select_control\")(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = gantt.locale.labels[gantt.config.duration_unit + \"s\"];\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\"</div>\";\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = parseInt(value, 10);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = value;\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = parseInt(duration.value, 10);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\r\n\treturn DurationControl; \r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","var helpers = require(\"../../../utils/helpers\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node) {\r\n\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\treturn entry.value;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\r\n\tTimeControl.prototype.render = function(sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function() {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar needSetTime = gantt.defined(map[3]);\r\n\t\tvar startDate;\r\n\r\n\t\tfunction _getEndDate(selects, map, needSetTime, startDate) {\r\n\t\t\tvar endDate = _getDate(selects, map, needSetTime, map.size);\r\n\r\n\t\t\tif (endDate <= startDate) {\r\n\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tfunction _getDate(selects, map, needSetTime, mapOffset) {\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tmapOffset = mapOffset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t}\r\n\r\n\t\tstartDate = _getDate(selects, map, needSetTime);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, needSetTime, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../../utils/dom_helpers\");\r\n\tvar helpers = require(\"../../utils/helpers\");\r\n\tvar TemplateControl = require(\"./controls/template_control\")(gantt);\r\n\tvar TextareaControl = require(\"./controls/textarea_control\")(gantt);\r\n\tvar TimeControl = require(\"./controls/time_control\")(gantt);\r\n\tvar SelectControl = require(\"./controls/select_control\")(gantt);\r\n\tvar CheckboxControl = require(\"./controls/checkbox_control\")(gantt);\r\n\tvar RadioControl = require(\"./controls/radio_control\")(gantt);\r\n\tvar DurationControl = require(\"./controls/duration_control\")(gantt);\r\n\tvar ParentControl = require(\"./controls/parent_control\")(gantt);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function(id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function() {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif(!step || step >= 60 * 24){\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function(property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function(list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function() {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function(type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form || fullWidth)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function() {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(lightboxDiv, document.body.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function(sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function() {\r\n\t\tif (!this._lightbox) return;\r\n\r\n\t\tvar con = this._lightbox.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\tthis._lightbox.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\t};\r\n\r\n\tgantt._center_lightbox = function(box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function() {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + \"px\";\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function() {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function() {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function() {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function() {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function(e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function(e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\ttarget.click();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\ttarget.click();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function() {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function() {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function(section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function() {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function() {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function() {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function() {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function(data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function(id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function(name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function(ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function(value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function(result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function() {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function() {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function(e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function(e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function() {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function(node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function(sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function(s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function() {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function(message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function(result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function(type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function(type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = document.getElementById(section.id);\r\n\t\t\t\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\t\t\t\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + (floatRight ? \" style='float:right;'\" : \"\") + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\tcase \"%Y\":\r\n\t\t\tsns._time_format_order[2] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//year\r\n\r\n\t\t\tif (sns.year_range) {\r\n\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t// if\r\n\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trange = range || 10;\r\n\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\tfor (i = start_year; i < end_year; i++)\r\n\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%m\":\r\n\t\t\tsns._time_format_order[1] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//month\r\n\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%d\":\r\n\t\t\tsns._time_format_order[0] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//days\r\n\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%H:%i\":\r\n\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\tsns._time_format_order[3] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//hours\r\n\t\t\ti = settings.first;\r\n\t\t\ttdate = settings.date.getDate();\r\n\t\t\tsns._time_values = [];\r\n\r\n\t\t\twhile (i < settings.last) {\r\n\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","var dateHelper = require(\"../utils/date_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\r\n\t\tif (!(gantt._isAllowedUnscheduledTask(task) || (taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf()))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (dateHelper.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](new Date(settings.date));\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif(biggerTimeUnit && !this._isWorkTime(curr, biggerTimeUnit)){\r\n\t\t\t\t// no need to check every hour/minute if we know that the whole day is not working\r\n\t\t\t\tvar biggerTimeUnitSettings = this.$gantt.copy(settings);\r\n\t\t\t\tbiggerTimeUnitSettings.date = curr;\r\n\t\t\t\tbiggerTimeUnitSettings.unit = biggerTimeUnit;\r\n\r\n\t\t\t\tcurr = this._getClosestWorkTime(biggerTimeUnitSettings);\r\n\t\t\t}\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","var utils = require(\"../utils/utils\");\r\nvar dateHelper = require(\"../utils/date_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (dateHelper.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};","module.exports = function(gantt) {\r\n};","module.exports = function(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction updateParents(childId){\r\n\t\tgantt.batchUpdate(function () {\r\n\t\t\tcheckParent(childId);\r\n\t\t});\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction checkParent(id) {\r\n\t\tsetTaskType(id);\r\n\t\tvar parent = gantt.getParent(id);\r\n\t\tif (parent != gantt.config.root_id) {\r\n\t\t\tcheckParent(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setTaskType(id) {\r\n\t\tid = id.id ? id.id : id;\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar targetType = gantt.hasChild(task.id) ? allTypes.project : allTypes.task;\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\t\tif ((taskType == allTypes.task && targetType == allTypes.project) ||\r\n\t\t\t(taskType == allTypes.project && targetType == allTypes.task)\r\n\t\t) {\r\n\t\t\ttask.type = targetType;\r\n\t\t\tgantt.updateTask(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function () {\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tsetTaskType(task);\r\n\t\t});\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\",  callIfEnabled(updateParents));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(updateParents));\r\n\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\",  callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex){\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex){\r\n\t\tif(document.querySelector(\".gantt_drag_marker\")){\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n\r\n};","module.exports = function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(){\r\n\t\tvar dataProcessor = gantt._dp;\r\n\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder)\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tgantt.attachEvent(\"onBeforeDataRender\", callIfEnabled(silenceDataProcessor));\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder()\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n};","function createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue){\r\n\t\tif(typeof propertyName == \"function\"){\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t}else{\r\n\t\t\tif(propertyValue instanceof Array){\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t}else{\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter){\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor(var i = 0; i < resourceIds.length; i++){\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (resourceHash[task[property]] && task.type != gantt.config.types.project) {\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resourceId, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = [resourceId, resourceProperty, scale.unit, scale.step].join(\"_\");\r\n\t\tvar res;\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resourceId, resourceProperty, scale, timeline);\r\n\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resourceProperty, resourceId, scale, timeline) {\r\n\r\n\t\tvar tasks = getTaskBy(resourceProperty, resourceId);\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task, unit: step})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttasks = timegrid[start.valueOf()] || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(config.resource_property, resource.id, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\tfilterTasks: getTaskBy\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks){\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks){\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n","if (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tvar parts = code.split(\".\");\r\n\t\tvar currentNode = gantt.config.root_id;\r\n\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\tvar children = gantt.getChildren(currentNode);\r\n\t\t\tvar index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n","function createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\treturn gantt.$task || gantt.$grid || gantt.$root;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\"),\r\n\t\trequire(\"./resources\"),\r\n\t\trequire(\"./new_task_placeholder\"),\r\n\t\trequire(\"./auto_task_types\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};","var utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress={};//?\r\n\t\tthis._invalid={};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;","var utils = require (\"../../utils/utils\");\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;","var liveUpdateHooks = require(\"./live_update_hooks\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = require(\"./dataprocessor\");\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};","\r\nfunction createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tselectedId = null;\r\n\t\t}\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open && !(gantt.isSplitTask(parent));\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}else if(gantt.isTaskExists(taskId) && gantt.isTaskExists(gantt.getParent(taskId))){\r\n\t\t\tgantt.refreshTask(gantt.getParent(taskId));\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskHeight();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", []);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tif (horizontal && left*1 == left){\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t}\r\n\t\t\tif(vertical && top*1 == top){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;","module.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif(mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif(mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif(!first){\r\n\r\n\t\t\t\t\t\t\t\tif(mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif(!mainGrid.$config.original_grid_width){\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif(mainGrid.$parent.$config.group){\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif( mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!first){\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif(vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\t\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\nvar editors = require(\"./editors/controller\");\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tgantt.ext.inlineEditors.destructor();\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var dateHelper = require(\"../../../utils/date_helpers\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item));\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight();\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;","function createTaskRenderer(gantt){\r\n\tvar defaultRender = require(\"./task_bar_render\")(gantt);\r\n\r\n\treturn function show_children(task, timeline) {\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tvar sub_height = gantt.config.row_height - 5,\r\n\t\t\t\tel = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\tvar sub_tasks = gantt.getChildren(task.id);\r\n\r\n\r\n\t\t\tfor (var i = 0; i < sub_tasks.length; i++) {\r\n\t\t\t\tvar child = gantt.getTask(sub_tasks[i]);\r\n\r\n\t\t\t\tvar element = defaultRender(child, timeline);\r\n\t\t\t\tif(!element)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar padding = Math.floor((gantt.config.row_height - sizes.height) / 2);\r\n\r\n\t\t\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\t\t\telement.className += \" gantt_split_child\";\r\n\r\n\t\t\t\tel.appendChild(element);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tvar pred = gantt.getTask(link.source);\r\n\t\t\tlabels.push(gantt.getWBSCode(pred));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes) {\r\n\t\tvar links = [];\r\n\t\tpredecessorCodes.forEach(function (code) {\r\n\t\t\tvar predecessor = gantt.getTaskByWBSCode(code);\r\n\t\t\tif (predecessor) {\r\n\t\t\t\tvar link = {\r\n\t\t\t\t\tsource: predecessor.id,\r\n\t\t\t\t\ttarget: taskId,\r\n\t\t\t\t\ttype: gantt.config.links.finish_to_start,\r\n\t\t\t\t\tlag: 0\r\n\t\t\t\t};\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[link.source + \"_\" + link.target] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = link.source + \"_\" + link.target;\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node));\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init(){\r\n\t\tif(!dateToStr){\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif(!strToDate){\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\r\n\t\t\tinit();\r\n\t\t\tvar minValue = dateToStr(config.min || gantt.getState().min_date);\r\n\t\t\tvar maxValue = dateToStr(config.max || gantt.getState().max_date);\r\n\r\n\t\t\tvar html = \"<div style='width:140px'><input type='date' min='\" + minValue + \"' max='\" + maxValue + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed = null;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><select name='\" + column.name + \"'>\";\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = \"<div><input type='number' min='\" + min + \"' max='\" + max + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar value = BaseEditor.prototype.get_value(id, column, node);\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","module.exports = function(gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif(state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.show(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tself.setValue();\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tgantt.focus();\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tcontroller.hide();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function(controller, placeholder, grid){\r\n\t\tif(grid.$getConfig().keyboard_navigation){\r\n\t\t\t// keyboard navigation extension will handle arrows if enabled\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif(e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(shouldPrevent){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonHide: function(){\r\n\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\r\n\t}\r\n};\r\n\r\n","var defaultMapping = require(\"./keyboard_mappings/default\");\r\nvar keyNavMappings = require(\"./keyboard_mappings/keyboard_navigation\");\r\n\r\nmodule.exports = function(){\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function(){}\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;","module.exports = null;","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\");\r\n\r\n\r\nvar gridEditorsFactory = require(\"./grid/editors/controller\");\r\n\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderSplitTaskBar = require(\"./render/task_split_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\ttaskSplitBar: renderSplitTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tcase \"%w\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek, dateHelper.getWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","var env = require(\"../../utils/env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false\r\n\t};\r\n};\r\n","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};","module.exports = {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","require(\"css/skins/terrace.less\");\r\n\r\nfunction DHXGantt(){\r\n\tthis.constants = require(\"./../constants\");\r\n\tthis.version = VERSION;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tvar domEvents = require(\"../utils/dom_event_scope\")();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\tvar createLayoutFacade = require(\"./facades/layout\");\r\n\tgantt.mixin(gantt, createLayoutFacade());\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\trequire(\"./dataprocessor/hooks\")(gantt);\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\trequire(\"./destructor\")(gantt);\r\n\r\n\treturn gantt;\r\n};","module.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tvar dynMethods = [];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdynMethods.push(dhtmlxMethods[i]);\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tfor(var i = 0; i < dynMethods.length; i++){\r\n\t\t\tdelete window.dhtmlx[dynMethods[i]];\r\n\t\t}\r\n\t\tdynMethods = null;\r\n\r\n\t});\r\n\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\twindow.dataProcessor = null;\r\n\t\t});\r\n\t}\r\n\r\n};","import * as warnings from \"./core/deprecated_warnings\";\r\nimport * as base from \"./core/gantt\";\r\n\r\n\r\nconst gantt = (window as any).gantt = base();\r\nwarnings(gantt);"],"sourceRoot":""}