{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///c:/www-recent/gantt/sources/utils/utils.js","webpack:///c:/www-recent/gantt/sources/utils/dom_helpers.js","webpack:///c:/www-recent/gantt/sources/utils/extends.js","webpack:///c:/www-recent/gantt/sources/utils/helpers.js","webpack:///c:/www-recent/gantt/sources/utils/eventable.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/base_control.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/base.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/cell.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/select_control.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","webpack:///c:/www-recent/gantt/sources/core/ui/mouse_event_container.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/timeline.js","webpack:///(webpack)/buildin/global.js","webpack:///c:/www-recent/gantt/sources/utils/env.js","webpack:///c:/www-recent/gantt/sources/locale/locale.js","webpack:///c:/www-recent/gantt/sources/utils/html_helpers.js","webpack:///c:/www-recent/gantt/sources/core/worktime/calendar_arguments_helper.js","webpack:///c:/www-recent/gantt/sources/utils/task_tree_helpers.js","webpack:///c:/www-recent/gantt/sources/core/gantt_data_range.js","webpack:///c:/www-recent/gantt/sources/core/datastore/power_array.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_bar_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/grid.js","webpack:///c:/www-recent/gantt/sources/core/ui/row_position_mixin.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/scales.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/layout.js","webpack:///c:/www-recent/gantt/node_modules/process/browser.js","webpack:///c:/www-recent/gantt/sources/utils/timeout.js","webpack:///c:/www-recent/gantt/sources/core/destructor.js","webpack:///c:/www-recent/gantt/sources/core/common/assert.js","webpack:///c:/www-recent/gantt/sources/core/gantt_core.js","webpack:///c:/www-recent/gantt/sources/core/touch.js","webpack:///c:/www-recent/gantt/sources/css/skins/contrast_white.js","webpack:///c:/www-recent/gantt/sources/css/skins/contrast_black.js","webpack:///c:/www-recent/gantt/sources/css/skins/material.js","webpack:///c:/www-recent/gantt/sources/css/skins/broadway.js","webpack:///c:/www-recent/gantt/sources/css/skins/terrace.js","webpack:///c:/www-recent/gantt/sources/css/skins/meadow.js","webpack:///c:/www-recent/gantt/sources/css/skins/skyblue.js","webpack:///c:/www-recent/gantt/sources/core/skin.js","webpack:///c:/www-recent/gantt/sources/core/cached_functions.js","webpack:///c:/www-recent/gantt/sources/core/data_task_types.gpl.js","webpack:///c:/www-recent/gantt/sources/core/lightbox_optional_time.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/constraint_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/parent_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/duration_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/radio_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/checkbox_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/time_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/textarea_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/controls/template_control.js","webpack:///c:/www-recent/gantt/sources/core/lightbox/index.js","webpack:///c:/www-recent/gantt/sources/core/data.js","webpack:///c:/www-recent/gantt/sources/core/facades/worktime_calendars.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/no_work_time.js","webpack:///c:/www-recent/gantt/sources/core/worktime/time_calculator.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/calendar_strategy.js","webpack:///c:/www-recent/gantt/sources/core/worktime/calendar_manager.js","webpack:///c:/www-recent/gantt/sources/core/worktime/work_time.js","webpack:///c:/www-recent/gantt/sources/core/load.js","webpack:///c:/www-recent/gantt/sources/core/tasks.js","webpack:///c:/www-recent/gantt/sources/core/wai_aria.js","webpack:///c:/www-recent/gantt/sources/core/grid_column_api.gpl.js","webpack:///c:/www-recent/gantt/sources/core/dynamic_loading.gpl.js","webpack:///c:/www-recent/gantt/sources/core/plugins/auto_task_types.js","webpack:///c:/www-recent/gantt/sources/core/plugins/new_task_placeholder.js","webpack:///c:/www-recent/gantt/sources/core/plugins/resources.js","webpack:///c:/www-recent/gantt/sources/core/plugins/dhtmlx_hooks.js","webpack:///c:/www-recent/gantt/sources/core/plugins/jquery_hooks.js","webpack:///c:/www-recent/gantt/sources/core/plugins/wbs.js","webpack:///c:/www-recent/gantt/sources/core/plugins/batch_update.js","webpack:///c:/www-recent/gantt/sources/core/plugins/autoscroll.js","webpack:///c:/www-recent/gantt/sources/core/plugins/index.js","webpack:///./c:/www-recent/gantt/sources/core/dataprocessor/extend_gantt.ts","webpack:///./c:/www-recent/gantt/sources/core/dataprocessor/data_processor_events.ts","webpack:///./c:/www-recent/gantt/sources/core/dataprocessor/data_processor.ts","webpack:///c:/www-recent/gantt/sources/core/dataprocessor/index.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore_render.js","webpack:///c:/www-recent/gantt/sources/core/datastore/select.js","webpack:///c:/www-recent/gantt/sources/core/datastore/treedatastore.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore_links.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore_tasks.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore_hooks.js","webpack:///c:/www-recent/gantt/sources/core/facades/layout.js","webpack:///c:/www-recent/gantt/sources/core/data_task_layers.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/main_layout_initializer.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/links_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/tasks_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/main_timeline_initializer.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd_marker.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/main_grid_initializer.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_grid_line_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/link_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_bg_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_split_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/predecessor.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/date.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/select.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/number.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/editors/text.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/keyboard_mappings/default.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/keyboard_mappings.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/editors/controller.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/grid_resize.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/scrollbar_cell.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/resizer_cell.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/view_cell.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/view_layout.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/render_factory.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/layer_engine.js","webpack:///c:/www-recent/gantt/sources/core/ui/gantt_layers.js","webpack:///c:/www-recent/gantt/sources/core/ui/mouse.js","webpack:///c:/www-recent/gantt/sources/core/ui/configurable.js","webpack:///c:/www-recent/gantt/sources/core/ui/ui_factory.js","webpack:///c:/www-recent/gantt/sources/core/ui/index.js","webpack:///c:/www-recent/gantt/sources/core/message.js","webpack:///c:/www-recent/gantt/sources/utils/dom_event_scope.js","webpack:///c:/www-recent/gantt/node_modules/setimmediate/setImmediate.js","webpack:///c:/www-recent/gantt/node_modules/timers-browserify/main.js","webpack:///c:/www-recent/gantt/node_modules/bluebird/js/browser/bluebird.js","webpack:///c:/www-recent/gantt/sources/utils/promise.js","webpack:///c:/www-recent/gantt/sources/core/common/state.js","webpack:///c:/www-recent/gantt/sources/core/common/templates.js","webpack:///c:/www-recent/gantt/sources/core/common/dnd.js","webpack:///c:/www-recent/gantt/sources/core/common/date.js","webpack:///./c:/www-recent/gantt/sources/core/common/serialize.ts","webpack:///c:/www-recent/gantt/sources/core/common/ajax.js","webpack:///c:/www-recent/gantt/sources/core/common/config.js","webpack:///c:/www-recent/gantt/sources/core/common/services.js","webpack:///c:/www-recent/gantt/sources/core/common/import.js","webpack:///c:/www-recent/gantt/sources/constants/index.js","webpack:///c:/www-recent/gantt/sources/core/gantt.js","webpack:///c:/www-recent/gantt/sources/core/deprecated_warnings.js","webpack:///./c:/www-recent/gantt/sources/dhtmlxgantt.gpl.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","seed","helpers","copy","result","isDate","Date","isArray","Array","length","isStringObject","String","isNumberObject","Number","isBooleanObject","Boolean","apply","defined","obj","mixin","target","source","force","f","undefined","uid","valueOf","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getClassName","className","baseVal","indexOf","_trimString","_slave","createElement","getTargetNode","e","tagName","srcElement","str","trim","this","replace","getNodePosition","getFocusableNodes","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","cssText","appendChild","clientWidth","removeChild","addClassName","removeClassName","split","regEx","RegExp","insertNode","newone","innerHTML","child","firstChild","removeNode","getChildNodes","css","ch","childNodes","len","out","push","toNode","getElementById","querySelector","locateClassName","classname","strict","trg","ind","charAt","locateAttribute","attribute","getRelativeEventPosition","ev","clientX","clientY","isChildOf","parent","hasClass","element","classList","contains","test","closest","selector","matches","msMatchesSelector","webkitMatchesSelector","parentElement","nodeType","console","error","b","__","constructor","units","second","minute","hour","day","week","month","quarter","year","arrayFilter","arr","callback","filter","getSecondsInUnit","unit","forEach","workArray","arrayMap","map","resArray","arrayFind","find","arrayDifference","item","arraySome","hashToArray","hash","sortArrayOfHash","field","desc","compare","sort","throttle","timeout","wait","setTimeout","pop","getFullYear","getMonth","getDate","Function","toString","delay","timer","$cancelTimeout","$pending","args","clearTimeout","$execute","objectKeys","keys","EventHost","_connected","_silent_mode","_silentStart","_silentEnd","createEventStorage","dhx_catch","z","res","zr","addEvent","removeEvent","id","eventHost","catcher","callObj","attachAll","callEvent","arg0","handlerName","concat","checkEvent","list","detachAllEvents","dummy","log","BaseControl","render","set_value","get_value","focus","gantt","BaseEditor","show","column","config","placeholder","hide","get_input","is_changed","currentValue","is_valid","save","utils","eventable","domHelpers","Cell","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","__extends","htmlHelpers","_super","SelectControl","sns","getHtmlSelect","options","_dhx_onchange","onchange","_focus","createDropTargetObject","targetParent","targetIndex","targetId","nextSibling","prevSibling","nextSiblingTarget","dndTaskId","targetTaskId","store","getParent","getBranchIndex","prevSiblingTarget","firstChildTarget","lastChildTarget","children","getChildren","events","mouseEvents","h","ScaleHelper","topPositionMixin","canvasRender","Timeline","$scaleHelper","_findBinary","array","prev","low","high","container","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","$getConfig","attr","linksAttr","bindLinks","item_attribute","link_attribute","layers","_createLayerConfig","tasks","linkLayers","links","_attachLayers","dataHeight","max","scale_height","refresh","backgroundImage","smart_rendering","rowStore","row_height","countVisible","scale","data_els","contentHeight","contentWidth","scrollHeight","scrollWidth","_refreshScales","smart_scales","scales","_scales","_getScaleChunkHtml","taskFilter","expose","renderer","$ui","taskBar","taskSplitBar","append","taskBg","static_background","link","_taskLayers","_linkLayers","getDatastore","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","host","bar_layer","addLayer","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","linkRenderer","linkLayer","_linkRenderer","staticRender","_staticBgHandler","getScale","_clearLayers","removeLayer","_render_tasks_scales","scales_html","outer_width","state","getState","_getScales","availWidth","autosize","autosize_min_width","cfgs","prepareConfigs","min_column_width","min_date","max_date","rtl","cfg","fromPos","toPos","templates","scale_row_class","cssClass","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","cells","date","template","date_to_str","startIndex","endIndex","count","inherit_scale_class","scale_cell_class","cssclass","_waiAria","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","posFromDate","columnIndexByDate","assert","wholeCells","partCell","pos","min","days","trace_x_ascending","ignores","ignore_x","day_ind","transition","trace_index_transition","getItemPosition","task","start_date","end_date","xLeft","xRight","getItemTop","getItemHeight","task_height","offset","task_height_offset","primaryScale","subscales","sortScales","add","step","g","eval","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","locale","month_full","month_short","day_full","day_short","labels","new_task","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_duration","column_add","confirm_link_deleting","link_start","link_end","type_task","type_project","type_milestone","minutes","hours","weeks","months","years","message_ok","message_cancel","section_constraint","constraint_type","constraint_date","asap","alap","snet","snlt","fnet","fnlt","mso","mfo","resources_filter_placeholder","resources_filter_label","attributes","_this","entry","_attributes","getHtmlOption","label","_getHtmlContainer","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","_getHtmlAttributes","tag","IsWorkTimeArgument","calendar","ClosestWorkTimeArgument","dir","CalculateEndDateArgument","duration","GetDurationArgument","start","end","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","copyLinkIdsArray","linkIds","targetHash","isLinkExists","getLink","copyLinkIds","$source","$target","getSubtreeLinks","rootId","isTaskExists","getTask","eachTask","getSubtreeTasks","_init_tasks_range","scale_unit","scale_offset_minimal","helper","_scale_range_unit","range","start_interval","resolveConfigRange","getSubtaskDates","dateRangeResolver","calculateEndDate","_min_date","_max_date","fit_tasks","old_min","old_max","_adjust_scales","$powerArray","$create","$removeAt","$remove","$find","$insertAt","data","$each","master","$map","$filter","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","loaded","parse","getItem","_updateOrder","code","updateItem","_removeItemInner","removeItem","_addItemInner","exists","silent","order","data_size","getVisibleItems","getIndexRange","addItem","_changeIdInner","oldId","newId","changeId","_moveInner","sindex","tindex","getIdByIndex","move","clearAll","arraysEqual","arr1","arr2","quick","oldOrder","serialize","eachItem","rule","filteredOrder","from","to","Infinity","ret","getItems","getIndexById","_getNullIfUndefined","getFirst","getLast","getNext","getPrev","_task_default_render","_isAllowedUnscheduledTask","$getTemplates","taskType","getTaskType","type","padd","types","milestone","link_line_width","setAttribute","show_progress","done","progress","pr","progressColor","backgroundColor","opacity","progress_text","position","wrapper","drag_progress","isReadonly","drag","markerPos","_render_task_progress","task_text","_render_task_content","textColor","color","basic","itemId","project","isSummaryTask","isSplitTask","select_task","selected_task","drag_id","drag_mode","touch_drag","link_source_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","from_start","link_from_start","to_start","link_to_start","allowDrag","isLinkAllowed","dragClass","_combine_item_class","task_class","styles","side","_get_link_crossing_css","_render_side_content","leftside_text","_render_leftside_content","rightside_text","_render_rightside_content","setTaskBarAttr","drag_resize","_render_pair","drag_links","show_links","outer","inner","showLinkPoints","touch","text","cond","leftside","start_to_start","finish_to_start","finish_to_finish","_get_conditions","ln","tp","type_renderers","defaultRenderer","gridResize","Grid","$state","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","_validateColumnWidth","numericWidth","outerWidth","columns","getGridColumns","innerWidth","scrollable","_setColumnsWidth","grid_width","_getGridWidth","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getColumnIndex","getColumn","gridLine","_refreshPlaceholderOnStoreUpdate","scrollY","scroll","getView","getScrollState","scrollSize","$rowsPlaceholder","close","open","_getColumnWidth","min_width","min_grid_column_width","new_width","max_width","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","col","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","reverse","lineHeigth","last","colWidth","_sort","direction","grid_header_class","gridScaleCellAttrString","lineHeight","getRowTop","task_id","dateHelper","services","getSum","sizes","setSumWidth","sum_width","parts","adjustSize","splitSize","full","cellSize","initTemplate","date_scale","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","display_count","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","lastDate","outDate","shared","Layout","$root","_parseConfig","$cells","_resizeScrollbars","scrollbars","scrollbar","scrollChanged","visibleScrollbars","hiddenSrollbars","showScrollbar","hideScrollbar","shouldHide","shouldShow","visibleGroups","group","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","isChild","cellId","sub","alert","insertBefore","rows","cols","views","initUI","getCells","_cleanElSize","_getBoxStyles","computed","properties","boxSizing","clientHeight","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","margin","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","updPerSecond","_on_timeout","ceil","_eventRemoveAll","$layout","resetLightbox","_dp","check","message","show_errors","expire","calculateScaleRange","scroll_size","_reinit","_update_flags","initTemplates","_clearTaskLayers","_clearLinkLayers","reset","layout","createView","storeNames","refreshData","resizeDelay","getPropertyValue","resizeWatcher","tabIndex","contentWindow","addResizeListener","$mouseEvents","$click","buttons","edit","showLightbox","delete","question","confirm_deleting_title","_dhtmlx_confirm","$new","deleteTask","hideLightbox","posX","_getHorizontalScrollbar","codeScrollLeft","visible_date","task_scroll_offset","preserve_scroll","new_pos","showDate","setSizes","locate","targetAttribute","task_attribute","_locate_css","_locateHTML","getTaskRowNode","els","changeLightboxType","getLightboxType","_silent_redraw_lightbox","_get_link_type","start_to_finish","prevOffset","time_unit","offsetChanged","$data","tasksStore","_isSplitItem","_is_icon_open_click","getTaskDND","_tasks_dnd","touch_feedback","touch_feedback_duration","_prevent_touch_scroll","_touch_feedback","vibrate","touchEventsSupported","createEvent","_touch_events","touches","pageX","pageY","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","touchHandlers","names","accessor","ignore","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","current_target","start_drag","on_mouse_move","preventDefault","cancelBubble","abs","_touch_scroll_active","new_scroll_state","block_action","taskId","on_mouse_down","renders","_getTaskLayers","isTaskVisible","cloneNode","cloneTaskRendered","_start_dnd","_touch_drag","refreshTask","on_mouse_up","now","onDoubleClick","skins","link_arrow_size","lightbox_additional_height","_second_column_width","_third_column_width","material","_redefine_lightbox_buttons","buttons_left","buttons_right","getTaskNode","indx","broadway","_lightbox_template","_config_buttons_left","_config_buttons_right","gantt_delete_btn","gantt_save_btn","terrace","meadow","skyblue","_get_skin","skin","getElementsByTagName","href","match","skinset","_configure","resetSkin","activate","_cached_functions","update_if_changed","active","cache","critical_path_mode","wrap_methods","methods","_prefetch_originals","prefetch","methodname","original","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","getUTCDate","values","stringify_argument","deactivate","setup","override_gantt","gantt_methods","optimize_render","deactivTimeout","_extend_to_optional","lightbox_block","optional_time","section","mapping","_resolve_default_mapping","disable","val","enable","disabled","update_block","_lightbox_id","previousSibling","button_text","resizeLightbox","button_click","_get_typed_lightbox_config","form_blocks","duration_optional","time_optional","time","ConstraintControl","isNonTimedConstraint","constraint_types","ASAP","ALAP","toggleTimeSelect","timeSelects","typeValue","isNonTimed","getTimePicker","typeSelect","_time_format_order","_eventsInitialized","constraintDate","_fill_lightbox_select","constraintType","getConstraintType","getTimePickerValue","ParentControl","_display","item_id","getTaskByTime","allow_root","root_id","root_label","_filter","map_to","tmpDom","newOptions","onselect","replaceChild","DurationControl","_getStartDate","_getDuration","singleDate","single_date","readonly","lightboxDurationInputAttrString","duration_val","inps","btns","endspan","_calc_date","task_date","_change_duration","onclick","onkeydown","charCode","keyCode","which","constants","KEY_CODES","DOWN","UP","calculateDuration","startDate","endDate","RadioControl","radio","default_value","checked","CheckboxControl","checkboxes","TimeControl","auto_end_date","_update_lightbox_select","selects","_get_timepicker_step","_getEndDate","TextareaControl","_get_input","TemplateControl","ResourcesControl","getHtmlButtons","floatRight","_migrate_buttons","lightboxButtonAttrString","getHtmlTimePickerOptions","settings","start_year","end_year","tdate","timeFormat","year_range","first","_time_values","time_picker","setTime","getHours","getMinutes","_lightbox_methods","registerProvider","lightbox","getLightbox","_center_lightbox","showCover","_fill_lightbox","lightboxVisibleAttr","round_dnd_dates","timeline","_is_chart_visible","time_step","getLabel","sections","j","updateCollection","list_name","collection","serverList","_lightbox_type","lightboxDiv","fullWidth","classNames","_lightbox","_is_lightbox_timepicker","wide_form","lightboxAttr","drag_lightbox","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_render_sections","labelBlock","inputBlock","inputId","bindLabelsToInputs","_init_lightbox_events","block","con","scroll_top","scroll_left","view_height","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","gantt_cancel_btn","_cancel_lightbox","src","sec","buttonTarget","SPACE","shiftKey","click","edit_save","edit_cancel","getLightboxValues","addTask","updateTask","lightboxHiddenAttr","hideCover","_custom_lightbox","_set_lightbox_values","lightboxHeader","lightbox_header","task_time","substr","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","ariaAttrs","date_part","time_format","getTimeFormat","limit_time_select","first_hour","last_hour","setHours","lightboxSelectAttrString","needSetTime","mapOffset","checkbox","resources","constraint","ok","opts","confirm","type_value","oldType","formData","updTask","isUnscheduledTask","unscheduled","show_unscheduled","taskStart","taskEnd","getGlobalTaskIndex","_getProjectEnd","project_end","_getProjectStart","project_start","_defaultTaskDate","parent_id","schedule_from_end","getTaskByIndex","_set_default_task_timing","createTask","setParent","$open","details_on_create","selectTask","showTask","oldid","newid","unselect","getSelectedId","_get_task_timing_mode","task_type","$no_start","$no_end","$rendered_type","_init_task_timing","task_mode","dirty","resetProjectDates","taskMode","_assign_project_dates","getSubtaskDuration","taskTiming","_update_parents","pid","has_changed","oldStart","oldEnd","roundDate","upper","lower","colIndex","steps","correctTaskWorkTime","work_time","correct_work_time","getClosestWorkTime","calendarManager","timeCalculator","getWorkHours","setWorkTime","unsetWorkTime","_hasDuration","hasDuration","createCalendar","addCalendar","getCalendar","getCalendars","getTaskCalendar","deleteCalendar","CalendarDisabledTimeStrategy","argumentsHelper","_calculateDuration","fixedUnits","createArgumentsHelper","NoWorkTimeCalendar","TimeCalculator","$disabledCalendar","_getCalendar","manager","WorkUnitsCache","_cache","getTime","put","Cache","CalendarWorkTimeStrategy","_workingUnitsCache","_getUnitOrder","_timestamp","timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_is_work_hour","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","next","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","day_start","lastDayStart","lastDayEnd","startPart","endPart","hourRange","worktime","_setCalendar","_tryChangeCalendarSettings","payload","backup","JSON","stringify","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getDay","reset_calendar","is_work_unit","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","tick","both_directins","inc","unitOrder","biggerTimeUnit","biggerTimeUnitSettings","CalendarWorktimeStrategy","CalendarManager","_calendars","_getDayHoursForMultiple","calendars","currPos","reduce","acc","mergeCalendars","newCalendar","_convertWorktimeSettings","parentCalendar","defaults","fulltime","apiCore","createDefaultCalendars","_getOwnCalendar","calendar_property","resource_calendars","resource","calendarId","inherit_calendar","stop","eachParent","worktimes","restoreConfigCalendars","global","worktimeFacadeFactory","facade","load","url","_load_url","cl","_load_type","ajax","on_load","xmlDoc","responseText","resp","_process_loading","collections","_load_collections","linksStore","initial_scroll","firstTask","collections_loaded","option","option_key","$ignore","json","dhx_security","security_key","serializeTask","_copyObject","serializeLink","_copyLink","xml_format","rawLinks","getLinks","xml","_xmlNodeToJSON","attrs_only","nodeValue","_getCollections","loader","xpath","itms","attrs","_getXML","toptag","getXMLTopNode","xmltop","skey","evs","oldxml","startdate","est","enddate","predecessortasks","editable_property","readonly_property","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","dateString","aria-label","_taskCommonAttr","tooltip_text","$dataprocessor_class","isSelectedTask","drag_move","taskRowAttr","order_branch","$level","hasChild","linkAttr","linkTypes","toStart","fromStart","drag_link","gridSeparatorAttr","buttonName","role","tabindex","headerText","time_option","aria-valuemin","multiselect","gridCellAttrString","textValue","gridAddButtonAttrString","messageButtonAttrString","buttonLabel","messageInfoAttr","messageModalAttr","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","wai_aria_attributes","getGridColumn","callIfEnabled","auto_types","updateParents","childId","batchUpdate","checkParent","targetType","getTaskTypeToUpdate","updateTaskType","setTaskType","delTaskParent","allTypes","hasChildren","originalRowDndParent","originalMoveTaskParent","isParsingDone","updateAfterRemoveChild","sid","placeholder_task","insertPlaceholder","placeholders","getTaskBy","afterEdit","newTask","dataProcessor","_silencedPlaceholder","setUpdated","ready","action","commands","command","entity","createResourceMethods","resourceTaskCache","propertyName","propertyValue","filterResourceTasks","getResourceTasks","resourceIds","cacheKey","resourceHash","resourceValue","resource_id","getResourceLoad","resourceProperty","$role","timegrid","currDate","timetable","resource_render_empty_cells","calculateResourceLoad","renderBar","level","renderConnection","prevLevel","nextLevel","selectAssignments","resourceId","resource_property","owners","renderLine","resource_cell_class","resource_cell_value","row","renderHistogram","capacityMatrix","maxCapacity","capacity","histogram_cell_class","histogram_cell_label","fill","histogram_cell_allocated","histogram_cell_capacity","capacityElement","colStart","colEnd","bar","connection","renderHistogramLine","filterTasks","getResourceAssignments","assignments","resourceRow","resourceHistogram","resource_store","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","that","vs","av","grid","border","gridId","gridObj","dhtmlXCellObject","jQuery","$","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","wbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","getByWBSCode","currentNode","_isFirst","_prevSibling","_wbs","_parent","createWbs","resetCache","getTaskByWBSCode","createMethod","isActive","disableMethod","methodName","dummyMethod","restoreMethod","restoreMethods","batchUpdatePayload","batch_update","noRedraw","dp_mode","call_dp","updateMode","setUpdateMode","resetProjects","refreshLink","methodsHash","setGanttMode","sendData","scrollRange","scrollStep","scrollDelay","scrollSpeed","interval","isMove","delayTimeout","startPos","started","eventPos","isScrollState","dragMarker","isResize","isLink","defineDelayTimeout","speed","autoscroll_speed","setInterval","autoscroll_delay","defineScrollInterval","clearInterval","autoscrollInterval","isScroll","autoscroll","posY","need_scroll","scrollState","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","boxSize","startCoord","default","dp","getUserData","userdata","setUserData","_change_id","_ganttMode","changeLinkId","changeTaskId","_row_style","rowId","_delete_task","_sendTaskOrder","$drop_target","setDp","DataProcessorEvents","$dp","_dataProcessorHandlers","attach","treeHelper","cascadeDelete","clientSideDelete","updated","updatedRows","clientOnly","_in_progress","cascade_delete","dpMode","cascade","sendAllData","_tSend","_waitMode","itemLinks","_links","getTaskLinks","updateLink","_tMode","_serverProcessor","substring","serverProcessor","urlSeparator","upd","isExist","addLink","objData","xml_date","deleteLink","data_processor_events_1","extend_gantt_1","createDataProcessor","router","tMode","DataProcessor","setTransactionMode","serverProcessorURL","action_param","autoUpdate","_headers","_payload","_postDelim","_invalid","mandatoryFields","messages","inserted","deleted","invalid","invalid_cell","enableUTFencoding","total","headers","_endnm","_serializeAsJson","_router","escape","_utf","encodeURIComponent","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","dnd","findRow","existing","set_invalid","is_invalid","markRow","_methods","details","getActionByState","checkBeforeUpdate","mytype","_h2","editStop","_beforeSendData","_getRowData","_sendData","_serializeAsJSON","serialize_one","stack","pref","serialized","_applyPayload","dataToSend","queryParams","ids","afterUpdate","urlParams","_user","method","query","taskState_1","taskAction","ganttMode","getGanttMode","_onResolvedCreateUpdate","tid","afterUpdateCallback","actionPromise","update","then","_forEachUpdatedRow","valid","_getAllData","stop_1","hasOne","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","btag","correct","originalSid","_xml","reqUrl","filePath","finalizeUpdate","cleanUpdate","atag","anObj","_initialized","_dp_init","_setDefaultTransactionMode","dataProcessorEvents","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","setAutoUpdate","user","_needUpdate","_updateBusy","afterAutoUpdate","fullSync","loadUpdate","xml_node","getUpdates","_v","_a","vers","upds","status_1","parent_1","modes","newState","_isFetchResult","ReadableStream","setSerializeAsJSON","flag","DEPRECATED_api","server","getDataProcessorModes","getAvailableModes","bindDataStore","itemRepainter","getLayers","render_item","renderers","render_items","skipRepaint","change_id","refreshId","selectedId","deleteItem","subItem","TreeDataStore","_branches","$parentProperty","parentProperty","$getRootId","$openInitially","openInitially","_buildTree","_add_branch","calculateItemLevel","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","branch","items","source_pid","tbranch","parentId","getSiblings","siblings","_setParentInner","new_pid","startItem","parentsHash","added_already","old_parent","new_parent","old_id","new_id","newbranch","criteria","original_criteria","temp","getLinkCount","getTaskCount","getVisibleTaskCount","getTaskIndex","startTask","calculateTaskLevel","moveTask","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","getDatastores","createDatastoreFacade","createDatastore","$StoreType","open_tree_initially","setService","storeList","stores","refresh_links","linkId","_clear_data","unselectTask","facadeFactory","parseDate","checkLinkedTaskVisibility","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","mapEvents","conf","mapFrom","mapTo","sourceEvent","targetEvent","$index","oldState","sourceVisible","targetVisible","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","getTimeline","getGrid","getVerticalScrollbar","getHorizontalScrollbar","DEFAULT_VALUE","tryCall","fallback","getTaskTop","getTaskPosition","getTaskHeight","roundTaskDates","getLinkNode","oldH","oldV","newV","newH","date_x","scroll_to","_scroll_state","x_pos","y_pos","x_inner","y_inner","scrollVer","scrollHor","horState","visible","verState","addTaskLayer","addLinkLayer","initializer","_legacyGridResizerClass","resizers","gridResizer","onCreated","mainTimeline","show_chart","showGrid","show_grid","colsWidth","grid_limits","original_grid_width","skinSettings","_initScrollStateEvents","_getVerticalScrollbar","oldPos","newPos","$scroll_ver","$scroll_hor","_findGridResizer","gridFirst","_getSiblings","_behind","_front","onInitialized","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","oldSize","onDestroyed","initLinksDND","_link_landing","_link_target_task","_link_target_task_start","_link_source_task","_link_source_task_start","getDndState","DnD","sensitivity","updates_per_second","getLinePos","shift","isStart","taskPos","xEnd","yEnd","milestoneWidth","origWidth","sqrt","getVisibleMilestoneWidth","getMilestonePosition","isMilestone","updateMarkedHtml","drag_link_class","resetDndState","coordinateCircleQuarter","sX","eX","sY","eY","_dir_start","dd","getPosition","advanceMarker","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","s_x","s_y","e_x","e_y","_direction","getDirectionLine","link_direction_class","dist","pow","tan","angle","atan","PI","sin","cos","ieTransform","shiftLeft","shiftTop","showDirectingLine","createLinkDND","createTaskDND","extend","round_task_dates","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","_domEvents","clear_drag_state","set_actions","drag_from_start","stage","_move","_resize","_resize_progress","start_x","start_y","coords_x","_drag_task_coords","min_duration","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","_update_on_move","_update_item_on_move","curr_date","drag_project","initialDrag","childDrag","_get_drag_mode","_fix_dnd_scale_time","fixStart","fixEnd","_fix_working_times","_finalize_mouse_up","_fireEvent","_dhx_changed","dragProperty","params","trigger","drag_state","taskDnD","linkDnD","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","extendDom","_clearDomEvents","_clearStateProvider","_delete_link_handler","link_description","coll","coll_date","scale_step","unregisterProvider","gridToPageCoordinates","gridPos","removeLineHighlight","markerLine","highlightPosition","ePos","gridHeight","getTaskMarkerPosition","pointerEvents","markerFolder","highlightFolder","linePos","indentNode","indent","itemTop","itemHeight","childCount","getLineMarkerPosition","highlightRow","dropTarget","relTargetPos","eventTop","findClosesTarget","allowedLevel","targetLevel","findTargetAbove","findTargetBelow","rootLevel","current","getLockedLevelTarget","getMultiLevelTarget","higlighter","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","initial_open_state","outerHTML","drop_target","$transparent","getDropPosition","getTargetTaskId","lockLevel","order_branch_free","getStore","lastTaskOfLevel","last_item","_getGridPos","_getTargetY","_getTaskByY","dropIndex","targetY","over","nextId","prevId","rowDnd","rowDndMarker","extendGantt","ext","inlineEditors","_inlineEditors","createEditors","initEvents","clearEvents","scroll_on_click","sorting_method","callHandler","totalWidth","aria","date_grid","tree","grid_indent","grid_open","grid_folder","grid_blank","grid_file","align","grid_row_class","css_template","drawer","current_pos","dirs","down","path","point","get_lines","dots","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","link_wrapper_width","get_line_sizes","line_size","marginTop","marginLeft","render_line","innerPos","get_direction","vect","path_builder","point_to","get_points","pt","get_endpoint","xy","shiftX","lineType","get_line_type","forward","sign","milestoneHeight","lines","cssTemplate","link_class","isCriticalLink","endpoint","line_width","_render_link_arrow","borderColor","show_task_cells","task_cell_class","odd","task_row_class","defaultRender","sub_tasks","PredecessorEditor","parseInputString","predecessors","delimiter","formatPredecessors","pred","getLinksDiff","predecessorCodes","selectedLinks","predecessor","lag","getSelectedLinks","existingLinksSearch","linksToAdd","linkKey","linksToDelete","remove","editor","linksDiff","autoSchedule","inputPredecessors","taskPredecessors","html5DateFormat","dateToStr","strToDate","DateEditor","str_to_date","parsed","SelectEditor","optionsHtml","NumberEditor","TextEditor","controller","onBlurDelay","keyNav","keyboardNavigation","activeCell","locateCell","columnName","editorState","getEditorConfig","startEdit","hasEditor","keyboard","preventKeyNav","ENTER","ctrlKey","metaKey","ESC","LEFT","RIGHT","editorType","DELETE","TAB","editPrevCell","editNextCell","modifiers","anyModifier","alt","ctrl","meta","getCommandHandler","onShow","onHide","destroy","isChanged","keyboard_navigation","defaultPrevented","shouldPrevent","defaultMapping","keyNavMappings","setMapping","getMapping","keyboard_navigation_cells","getKeyboardMapping","textEditorFactory","numberEditorFactory","selectEditorFactory","dateEditorFactory","predecessorEditorFactory","initConfigs","editor_types","number","keyboardMapping","eventBus","inlineEditController","_createPlaceholder","_getEditorPosition","handlers","_itemId","_columnName","_editor","_editorType","_placeholder","editorConfig","_getItemValue","newValue","oldValue","_findEditableCell","nextIndex","nextColumn","getNextCell","getFirstCell","getLastCell","canChangeRow","moveRow","editNextRow","editPrevRow","handlerId","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","eachCell","_getLinkedViews","scrollX","_updateLinkedViews","scrollHorizontally","_scrolling","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","outerScroll","innerScroll","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","oldLeft","detail","oldTop","ViewCell","childConfig","$initialized","unload","outerX","outerY","childSize","ViewLayout","$cell","byMaxSize","otherCell","task_area_pulls","task_area_renderers","getRenderer","layer_attribute","dom","remove_item","clear_container","buffer","createDocumentFragment","vis","replace_item","newNode","restore","clearRenderers","renderFactoryProvider","mergeFilters","filter_methods","filter_method","renderFactory","createGroup","get_container","rel_root","defaultFilters","renderGroup","tempCollection","filters","_add","pending","topmost","rel","eachLayer","createLayerFactory","previusSiblingContainer","defaultContainerSibling","removeTaskLayer","_getLinkLayers","removeLinkLayer","createMouseHandler","eventHandlers","doubleclick","contextMenu","addEventTarget","onClick","findEventHandlers","callEventHandlers","onContextMenu","returnValue","delegateHandlers","handlerResult","details_on_dblclick","onMouseMove","_last_move_event","domEvents","eventName","elementHandlers","ViewSettings","extendSettings","parentSettings","own","parentView","parentConfig","parentTemplates","configurable","createFactory","createdViews","creator","configure","registerView","viewConstructor","uiFactory","createLayers","Resizer","Scrollbar","ResourceGrid","ResourceTimeline","ResourceHistogram","gridEditorsFactory","renderTaskBar","renderSplitTaskBar","renderTaskBg","renderLink","gridRenderer","mainGridInitializer","mainTimelineInitializer","mainLayoutInitializer","attachInitializer","layersEngine","layersApi","layersService","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","messageBox","modality","cover","buttonAriaAttrs","getFirstDefined","_createBox","cancel","contentId","btn","_boxStructure","alertPopup","confirmPopup","boxPopup","box_params","focusable","timers","info","hideAll","popups","modalbox","createScope","setImmediate","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","random","onGlobalMessage","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","script","onreadystatechange","installReadyStateChangeImplementation","clearImmediate","scope","Timeout","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","u","_dereq_","1","Promise","SomePromiseArray","_SomePromiseArray","any","promises","promise","setHowMany","setUnwrap","2","firstLineError","schedule","Queue","util","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","AsyncInvokeLater","receiver","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","_drainQueue","_drainQueueStep","_settlePromises","setScheduler","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","stderr","write","exit","throwLater","invokeLater","invoke","settlePromises","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","resolve","4","old","bluebird","noConflict","./promise","5","cr","callerCache","getterCache","canEvaluate","caller","classString","TypeError","ensureMethod","namedGetter","indexedGetter","isIdentifier","isIndex","maybeGetter","getGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancellation","_warn","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","getKeys","instances","cb","boundTo","predicateLoop","matchesPredicate","isObject","./es5","8","longStackTraces","contextStack","Context","_trace","CapturedTrace","peekContext","lastIndex","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","unhandledRejectionHandled","possiblyUnhandledRejection","printWarning","getDomain","_getDomain","Warning","es5","canAttachTrace","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","debugging","warnings","wForgottenReturn","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","shouldUseOwnTrace","warn","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","hasLongStackTraces","fireDomEvent","CustomEvent","dispatchEvent","eventData","cancelable","domEvent","Event","initCustomEvent","fireGlobalEvent","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","domEventFired","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","warningsOption","_clearCancellationData","_execute","monitoring","isFulfilled","ignoreSelf","attachExtraTrace","__stackCleaned__","parseStackAndMessage","notEnumerableProp","formatAndLogError","cleanStack","isTraceLine","isInternalFrame","shouldIgnore","stackFramesAsArray","isSoft","localHandler","localEventFired","formatNonError","newStr","maxChars","snip","captureStackTrace","parseLineInfoRegex","parseLineInfo","fileName","_promisesCreated","uncycle","inherits","stackToIndex","currentStack","cycleEdgeNode","currentChildLength","stacks","currentLastIndex","currentLastLine","commonRootMeetPoint","removeCommonRoots","removeDuplicateOrEmptyJumps","reconstructStack","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","err","isTTY","checkForgottenReturns","handlerLine","creatorLine","traceLines","lineMatches","firstUserLine","msg","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","deprecated","replacement","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","PromiseReduce","PromiseAll","all","promiseAllThis","mapSeries","12","_TypeError","_RangeError","Objectfreeze","freeze","subError","nameProperty","defaultMessage","SubError","CancellationError","TimeoutError","AggregateError","RangeError","writable","OperationalError","cause","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","getOwnPropertyNames","propertyIsWritable","prop","descriptor","set","has","proto","ObjectKeys","14","PromiseMap","15","catchFilter","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","errors","yieldHandlers","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","_promiseRejected","_run","_rejectCallback","traceParent","promiseFromYieldHandler","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","spread","18","MappingPromiseArray","limit","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","_init$","_init","_values","preservedValues","totalResolved","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","maybeWrapAsError","rErrorKey","wrapAsOperationalError","isUntypedError","markAsOriginatingFromRejection","multiArgs","wrapped","21","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","createContext","nodebackForPromise","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","Map","toResolutionValue","getActualLength","shouldCopyValues","isResolved","24","THIS","withAppended","defaultPromisified","__isPromisified__","noCopyPropsPattern","defaultFilter","propsFilter","isPromisified","hasPromisified","suffix","getDataPropertyOrDefault","promisifiableMethods","suffixRegexp","inheritedDataKeys","passesDefaultFilter","keyWithoutAsyncSuffix","checkValid","escapeIdentRegex","makeNodePromisified","makeNodePromisifiedEval","defaultThis","promisified","promisifyAll","promisifier","promisifiedKey","promisify","copyDescriptors","isClass","25","Es6Map","mapToEntries","extractEntry","PropertiesPromiseArray","entries","isMap","_isMap","props","castValue","entriesToMap","keyOffset","26","_capacity","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","srcIndex","dst","dstIndex","arrayMove","27","raceLater","race","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","ProcessNextTick","isRecentNode","nativePromise","standalone","cordova","toggleScheduled","div2","o2","observe","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","CANCELLATION","_howMany","_unwrap","some","howMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","hasProp","doGetThen","getThen","isAnyBluebirdPromise","doThenable","34","HandleWrapper","afterValue","ms","successClear","failureClear","handleWrapper","afterTimeout","35","NULL","dispose","thenable","_isDisposable","_getDisposer","_setDisposable","castPreservingDisposable","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","doDispose","_unsetDisposable","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatchTarget","globalObject","tryCatcher","Child","Parent","T","isPrimitive","maybeError","safeToString","appendee","defaultValue","excludedPrototypes","isExcludedProto","visitedKeys","enumeration","thisAssignmentPattern","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","FakeConstructor","ic","foo","rident","filledRange","prefix","isError","ArrayFrom","itResult","it","hasEnvVariables","chrome","loadTimes","P","stateProviders","provider","regTemplates","initial","template_name","server_utc","api_date","task_unscheduled_time","grid_date_format","tooltip_date_format","copyDomEvent","altKey","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","original_target","dragStart","traceDragEvents","domElement","inputMethod","mousemove","dragMove","dragScroll","limited_mousemove","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","initDnDMarker","backupEventTarget","getEvent","backup_element","elementFromPoint","month_short_hash","month_full_hash","hour_start","time_part","week_start","start_on_monday","month_start","setDate","quarter_start","res_month","setMonth","year_start","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","ndate","setYear","add_quarter","to_fixed","num","format","utc","getISOWeek","getWeek","splt","mask","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","createConfig","DOMParser","parseFromString","ActiveXObject","loadXML","tagname","xhr","status","responseXML","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","postData","del","post","postSync","isQt","readyState","setRequestHeader","toUpperCase","send","branch_loading","branch_loading_property","show_loading","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","project_sections","milestone_sections","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","prevent_default_scroll","service","$inject","templatesLoader","stateService","uiApi","createLayoutFacade"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 143);\n","var helpers = require(\"./helpers\");\r\n\r\nfunction copy(object) {\r\n\tvar i, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\r\n\t\tswitch (true){\r\n\t\t\tcase (helpers.isDate(object)):\r\n\t\t\t\tresult = new Date(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isArray(object)):\r\n\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isStringObject(object)):\r\n\t\t\t\tresult = new String(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isNumberObject(object)):\r\n\t\t\t\tresult = new Number(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isBooleanObject(object)):\r\n\t\t\t\tresult = new Boolean(object);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult = {};\r\n\t\t\t\tfor (i in object) {\r\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_.])\", \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction hasClass(element, className){\r\n\tif ('classList' in element) {\r\n\t\treturn element.classList.contains(className);\r\n\t} else { \r\n\t\treturn new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = \"\";\r\n\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tvar d = document.documentElement;\r\n\tvar box = elementPosition(node);\r\n\r\n\treturn {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nfunction closest(element, selector){\r\n\tif(element.closest){\r\n\t\treturn element.closest(selector);\r\n\t}else if(element.matches || element.msMatchesSelector || element.webkitMatchesSelector){\r\n\t\tvar el = element;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tvar method = el.matches || el.msMatchesSelector || el.webkitMatchesSelector;\r\n\r\n\t\t\tif (method.call(el, selector)) return el;\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1); \r\n\t\treturn null;\r\n\t}else{\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Your browser is not supported\");\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n\thasClass: hasClass,\r\n\tclosest: closest\r\n};","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback) {\r\n\tif (arr.forEach) {\r\n\t\tarr.forEach(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback) {\r\n\tif (arr.map) {\r\n\t\treturn arr.map(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\t\treturn resArray;\r\n\t}\r\n}\r\n\r\n\r\nfunction arrayFind(arr, callback) {\r\n\tif (arr.find) {\r\n\t\treturn arr.find(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\treturn arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction arrayFilter(arr, callback) {\r\n\tvar result = [];\r\n\r\n\tif (arr.filter) {\r\n\t\treturn arr.filter(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\tresult[result.length] = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction hashToArray(hash) {\r\n\tvar result = [];\r\n\r\n\tfor (var key in hash) {\r\n\t\tif (hash.hasOwnProperty(key)) {\r\n\t\t\tresult.push(hash[key]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction arraySome(arr, callback) {\r\n\tif (arr.length === 0) return false;\r\n\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tif (callback(arr[i], i, arr)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction arrayDifference(arr, callback) {\r\n\treturn arrayFilter(arr, function(item, i) {\r\n\t\treturn !callback(item, i);\r\n\t});\r\n}\r\n\r\nfunction throttle (callback, timeout) {\r\n\tvar wait = false;\r\n\r\n\treturn function () {\r\n\t\tif (!wait) {\r\n\t\t\tcallback.apply(null, arguments);\r\n\t\t\twait = true;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\twait = false;\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\r\n\tvar result = function() {\r\n\t\tresult.$cancelTimeout();\r\n\t\tcallback.$pending = true;\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\tresult.$pending = false;\r\n\t\t}, timeout);\r\n\t};\r\n\t\r\n\tresult.$pending = false;\r\n\tresult.$cancelTimeout = function(){\r\n\t\tclearTimeout(timer);\r\n\t\tcallback.$pending = false;\r\n\t};\r\n\tresult.$execute = function(){\r\n\t\tcallback();\r\n\t\tcallback.$cancelTimeout();\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction sortArrayOfHash(arr, field, desc) {\r\n\tvar compare = function(a, b) {\r\n\t\treturn a < b;\r\n\t};\r\n\r\n\tarr.sort(function(a, b) {\r\n\t\tif (a[field] === b[field]) return 0;\r\n\r\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\r\n\t});\r\n}\r\n\r\nfunction objectKeys(obj) {\r\n\tif (Object.keys) {\r\n\t\treturn Object.keys(obj);\r\n\t}\r\n\tvar result = [];\r\n\tvar key;\r\n\tfor (key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tresult.push(key);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap,\r\n\tarrayFind: arrayFind,\r\n\tarrayFilter: arrayFilter,\r\n\tarrayDifference: arrayDifference,\r\n\tarraySome: arraySome,\r\n\thashToArray: hashToArray,\r\n\tsortArrayOfHash: sortArrayOfHash,\r\n\tthrottle: throttle,\r\n\tisArray: isArray,\r\n\tisDate: isDate,\r\n\tisStringObject: isStringObject,\r\n\tisNumberObject: isNumberObject,\r\n\tisBooleanObject: isBooleanObject,\r\n\tdelay: delay,\r\n\tobjectKeys: objectKeys\r\n};","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;","function dummy() {\r\n\t// eslint-disable-next-line\r\n\tconsole.log(\"Method is not implemented.\"); \r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nmodule.exports = function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","var utils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n","var __extends = require(\"../../../utils/extends\");\r\nvar htmlHelpers = require(\"../../../utils/html_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\thtml += htmlHelpers.getHtmlSelect(sns.options, [{ key: \"style\", value: \"width:100%;\" }]);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","/**\r\n * The state object for order branch drag and drop\r\n */\r\n\r\nvar utils = require(\"../../../../utils/utils\");\r\n\r\nmodule.exports = {\r\n\tcreateDropTargetObject: function createDropTargetObject(parent) {\r\n\t\tvar res = {\r\n\t\t\ttargetParent: null,\r\n\t\t\ttargetIndex: 0,\r\n\t\t\ttargetId: null,\r\n\t\t\tchild: false,\r\n\t\t\tnextSibling: false,\r\n\t\t\tprevSibling: false\r\n\t\t};\r\n\r\n\t\tif (parent) {\r\n\t\t\tutils.mixin(res, parent, true);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tnextSiblingTarget: function nextSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.nextSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) == result.targetParent && result.targetIndex < store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex += 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprevSiblingTarget: function prevSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.prevSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) == result.targetParent && result.targetIndex > store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex -= 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tfirstChildTarget: function firstChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.targetParent = result.targetId;\r\n\t\tresult.targetIndex = 0;\r\n\t\tresult.child = true;\r\n\t\treturn result;\r\n\t},\r\n\tlastChildTarget: function lastChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar children = store.getChildren(targetTaskId);\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = children[children.length - 1];\r\n\t\tresult.targetParent = targetTaskId;\r\n\t\tresult.targetIndex = children.length;\r\n\t\tresult.nextSibling = true;\r\n\t\treturn result;\r\n\t}\r\n};","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\nvar topPositionMixin = require(\"../row_position_mixin\");\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskSplitBar,\r\n\t\t\t\tfilter: [taskFilter],\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tappend: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._linkLayers) {\r\n\t\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = +days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nutils.mixin(Timeline.prototype, topPositionMixin());\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;","module.exports = function (gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\",\r\n\r\n\t\t\t/* constraints */\r\n\t\t\tsection_constraint: \"Constraint\",\r\n\t\t\tconstraint_type: \"Constraint type\",\r\n\t\t\tconstraint_date: \"Constraint date\",\r\n\t\t\tasap: \"As Soon As Possible\",\r\n\t\t\talap: \"As Late As Possible\",\r\n\t\t\tsnet: \"Start No Earlier Than\",\r\n\t\t\tsnlt: \"Start No Later Than\",\r\n\t\t\tfnet: \"Finish No Earlier Than\",\r\n\t\t\tfnlt: \"Finish No Later Than\",\r\n\t\t\tmso: \"Must Start On\",\r\n\t\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t\t/* resource control */\r\n\t\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\t\tresources_filter_label: \"hide empty\"\r\n\t\t}\r\n\t};\r\n};\r\n\r\n","var helpers = require(\"./helpers\");\r\n\r\nvar htmlHelpers = {\r\n\tgetHtmlSelect: function(options, attributes, value) {\r\n\t\tvar innerHTML = \"\";\r\n\t\tvar _this = this;\r\n\r\n\t\toptions = options || [];\r\n\t\t\r\n\t\thelpers.forEach(options, function(entry) {\r\n\t\t\tvar _attributes = [{ key: \"value\", value: entry.key }];\r\n\r\n\t\t\tif (value == entry.key) {\r\n\t\t\t\t_attributes[_attributes.length] = { key: \"selected\", value: \"selected\" };\r\n\t\t\t}\r\n\t\t\tif (entry.attributes) {\r\n\t\t\t\t_attributes = _attributes.concat(entry.attributes);\r\n\t\t\t}\r\n\t\t\tinnerHTML += _this.getHtmlOption({ innerHTML: entry.label }, _attributes);\r\n\t\t});\r\n\r\n\t\treturn _getHtmlContainer(\"select\", { innerHTML: innerHTML }, attributes);\r\n\t},\r\n\tgetHtmlOption: function(options, attributes) { return _getHtmlContainer(\"option\", options, attributes); },\r\n\tgetHtmlButton: function(options, attributes) { return _getHtmlContainer(\"button\", options, attributes); },\r\n\tgetHtmlDiv: function(options, attributes) { return _getHtmlContainer(\"div\", options, attributes); },\r\n\tgetHtmlLabel: function(options, attributes) { return _getHtmlContainer(\"label\", options, attributes); },\r\n\tgetHtmlInput: function(attributes) {\r\n\t\treturn \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\r\n\t}\r\n};\r\n\r\nfunction _getHtmlContainer(tag, options, attributes) {\r\n\tvar html;\r\n\r\n\toptions = options || [];\r\n\t\r\n\thtml = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag +\">\";\r\n\treturn html;\r\n\r\n}\r\n\r\nfunction _getHtmlAttributes(attributes) {\r\n\tvar html = \"\";\r\n\r\n\thelpers.forEach(attributes, function(entry) {\r\n\t\thtml += \" \" + entry.key + \"='\" + entry.value + \"'\";\r\n\t});\r\n\treturn html;\r\n}\r\n\r\nmodule.exports = htmlHelpers;","var utils = require(\"../../utils/utils\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (helpers.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\tthis.$config = config;\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tvar args;\r\n\t\tif (id){\r\n\t\t\targs = [id, this.pull[id], \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tif(this.callEvent(\"onBeforeStoreUpdate\", args) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id){\r\n\t\t\targs = [id, this.pull[id], \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",args);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\"),\r\n\ttopPositionMixin = require(\"../row_position_mixin\");\r\n\r\nvar Grid = function (parent, config, factory, gantt) {\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function (container) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \" + gridAriaAttr + \"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \" +\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif (!attr && this.$config.bind) {\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\tif (!this.$config.layers) {\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\t_validateColumnWidth: function (column, property) {\r\n\t\t// user can set {name:\"text\", width:\"200\",...} for some reason,\r\n\t\t// check and convert it to number when possible\r\n\t\tvar value = column[property];\r\n\t\tif (value && value != \"*\") {\r\n\t\t\tvar gantt = this.$gantt;\r\n\t\t\tvar numericWidth = value * 1;\r\n\t\t\tif (isNaN(numericWidth)) {\r\n\t\t\t\tgantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\r\n\t\t\t} else {\r\n\t\t\t\tcolumn[property] = numericWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function (width, height) {\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tthis._validateColumnWidth(columns[i], \"min_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"max_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"width\");\r\n\r\n\t\t\tinnerWidth += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif (isNaN(innerWidth) || !this.$config.scrollable) {\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif (this.$config.scrollable) {\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t} else {\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (outerWidth !== width) {\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function () {\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function () {\r\n\r\n\t\tif (this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function (left, top) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left * 1 == left) {\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif (top * 1 == top) {\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function (name) {\r\n\t\tvar columns = this.$getConfig().columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function (name) {\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif (index === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function () {\r\n\t\tif (this.$parent && this.$parent.$config) {\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t} else {\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemHeight: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.row_height;\r\n\t},\r\n\r\n\t_createLayerConfig: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function (gantt) {\r\n\t\tif (!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (!taskRenderer) {\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function () { return self.$grid_data; }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor (var i = 0; taskLayers && i < taskLayers.length; i++) {\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif (this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function (id) {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif (!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif (this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif (scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif (!contentHeight) {\r\n\t\t\tcontentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t}\r\n\r\n\t\tif (contentHeight) {\r\n\t\t\tif (this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode) {\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function () {\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif (!store) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis._initSmartRenderingPlaceholder = function () { };\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function (gantt) {\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor (var i = 0; i < this._taskLayers.length; i++) {\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function (column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function () {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]\r\n\t_setColumnsWidth: function (newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i = 0; i < start_index + 1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i = start_index + 1; i < columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar share = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width + share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width + share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width + share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index + 1; i < columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function () {\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length - i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length - i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif (changed) {\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n\t\t\t\t//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif (config.rtl) {\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name] || labels[col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif (this._renderHeaderResizers) {\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function () {\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function () {\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tif (this._mouseDelegates) {\r\n\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\tthis._mouseDelegates = null;\r\n\t\t}\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif (this.$config.rowStore) {\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nutils.mixin(Grid.prototype, topPositionMixin());\r\n\r\nmodule.exports = Grid;\r\n","function createMixin(){\r\n\treturn {\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index \r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\treturn index * this.$getConfig().row_height;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by item id\r\n\t\t * @param {*} task_id \r\n\t\t */\r\n\t\tgetItemTop: function (task_id) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return 0;\r\n\r\n\t\t\t\tif(store.getParent && store.exists(task_id) && store.exists(store.getParent(task_id))){\r\n\t\t\t\t\tvar parent = store.getItem(store.getParent(task_id));\r\n\t\t\t\t\tif(this.$gantt.isSplitTask(parent)){\r\n\t\t\t\t\t\treturn this.getRowTop(store.getIndexById(parent.id));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.getRowTop(store.getIndexById(task_id));\r\n\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\t\tthis.$services.destructor();\r\n\r\n\t\t// detachAllEvents should be called last, because in components may be attached events\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\r\n\t\t\t\t// eslint-disable-next-line no-debugger\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\r\n\t\taddResizeListener(gantt);\r\n\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tfunction addResizeListener(gantt){\r\n\t\tvar resizeDelay;\r\n\r\n\t\tvar containerStyles = window.getComputedStyle(gantt.$root);\r\n\t\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\t\tgantt.$root.style.position = \"relative\";\r\n\t\t}\r\n\r\n\t\tvar resizeWatcher = document.createElement('iframe');\r\n\t\tresizeWatcher.className = \"gantt_container_resize_watcher\";\r\n\t\tresizeWatcher.tabIndex = -1;\r\n\r\n\t\tgantt.$root.appendChild(resizeWatcher);\r\n\t\tresizeWatcher.contentWindow.addEventListener('resize', function(){ \r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tif (!this.config.sort && this._sort) {\r\n\t\t\tthis._sort = undefined;\r\n\t\t}\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSplitTask. Task object was expected\");\r\n\t\treturn this.$data.tasksStore._isSplitItem(task);\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","var __extends = require(\"../../../utils/extends\");\r\nvar htmlHelpers = require(\"../../../utils/html_helpers\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction ConstraintControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ConstraintControl, _super);\r\n\r\n\tfunction isNonTimedConstraint(value) {\r\n\t\tif (!value || value === gantt.config.constraint_types.ASAP || value === gantt.config.constraint_types.ALAP) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleTimeSelect(timeSelects, typeValue) {\r\n\t\tvar isNonTimed = isNonTimedConstraint(typeValue);\r\n\t\tfor (var i = 0; i < timeSelects.length; i++) {\r\n\t\t\ttimeSelects[i].disabled = isNonTimed;\r\n\t\t}\r\n\t}\r\n\r\n\tConstraintControl.prototype.render = function (sns) {\r\n\t\tvar height = (sns.height || 30) + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext gantt_section_\" + sns.name + \"' style='height:\" + height + \";'>\";\r\n\r\n\t\tvar options = [];\r\n\t\tfor (var i in gantt.config.constraint_types) {\r\n\t\t\toptions.push({ key: gantt.config.constraint_types[i], label: gantt.locale.labels[gantt.config.constraint_types[i]] });\r\n\t\t}\r\n\r\n\t\tsns.options = sns.options || options;\r\n\r\n\t\thtml += \"<span data-constraint-type-select>\" + htmlHelpers.getHtmlSelect(sns.options, [{ key: \"data-type\", value: \"constraint-type\" }]) + \"</span>\";\r\n\r\n\t\tvar timeLabel = gantt.locale.labels[\"constraint_date\"] || \"Constraint date\";\r\n\t\thtml += \"<label data-constraint-time-select>\" + timeLabel + \": \" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</label>\";\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tConstraintControl.prototype.set_value = function (node, value, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (!typeSelect._eventsInitialized) {\r\n\t\t\ttypeSelect.addEventListener(\"input\", function (e) {\r\n\t\t\t\ttoggleTimeSelect(timeSelects, e.target.value);\r\n\t\t\t});\r\n\t\t\ttypeSelect._eventsInitialized = true;\r\n\t\t}\r\n\r\n\t\tvar constraintDate = task[mapping.constraint_date] || new Date();\r\n\t\tgantt.form_blocks._fill_lightbox_select(timeSelects, 0, constraintDate, map, config);\r\n\r\n\t\tvar constraintType = task[mapping.constraint_type] || gantt.getConstraintType(task);\r\n\t\ttypeSelect.value = constraintType;\r\n\t\ttoggleTimeSelect(timeSelects, constraintType);\r\n\t};\r\n\r\n\tConstraintControl.prototype.get_value = function (node, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\r\n\t\tvar constraintType = typeSelect.value;\r\n\t\tvar constraintDate = null;\r\n\t\tif (!isNonTimedConstraint(constraintType)) {\r\n\t\t\tconstraintDate = gantt.form_blocks.getTimePickerValue(timeSelects, config);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tconstraint_type: constraintType,\r\n\t\t\tconstraint_date: constraintDate\r\n\t\t};\r\n\t};\r\n\r\n\tConstraintControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.querySelector(\"select\"));\r\n\t};\r\n\r\n\treturn ConstraintControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./select_control\")(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = gantt.locale.labels[gantt.config.duration_unit + \"s\"];\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\"</div>\";\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = parseInt(value, 10);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = value;\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = parseInt(duration.value, 10);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\r\n\treturn DurationControl; \r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","var helpers = require(\"../../../utils/helpers\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node) {\r\n\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\treturn entry.value;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\tTimeControl.prototype.render = function (sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function (node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({ start_date: start_date, duration: 1, task: ev });\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof (mapping) === \"string\") mapping = { start_date: mapping };\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function (node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar startDate;\r\n\t\tvar map = config._time_format_order;\r\n\t\tfunction _getEndDate(selects, map, startDate) {\r\n\t\t\tvar endDate = gantt.form_blocks.getTimePickerValue(selects, config, map.size);\r\n\r\n\t\t\tif (endDate <= startDate) {\r\n\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tstartDate = gantt.form_blocks.getTimePickerValue(selects, config);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","module.exports = function (gantt) {\r\n\tvar domHelpers = require(\"../../utils/dom_helpers\");\r\n\tvar helpers = require(\"../../utils/helpers\");\r\n\r\n\tvar TemplateControl = require(\"./controls/template_control\")(gantt);\r\n\tvar TextareaControl = require(\"./controls/textarea_control\")(gantt);\r\n\tvar TimeControl = require(\"./controls/time_control\")(gantt);\r\n\tvar SelectControl = require(\"./controls/select_control\")(gantt);\r\n\tvar CheckboxControl = require(\"./controls/checkbox_control\")(gantt);\r\n\tvar RadioControl = require(\"./controls/radio_control\")(gantt);\r\n\tvar DurationControl = require(\"./controls/duration_control\")(gantt);\r\n\tvar ParentControl = require(\"./controls/parent_control\")(gantt);\r\n\tvar ResourcesControl = require(\"./controls/resources_control\")(gantt);\r\n\tvar ConstraintControl = require(\"./controls/constraint_control\")(gantt);\r\n\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function () {\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif (timeline && timeline.isVisible()) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif (!step || step >= 60 * 24) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form || fullWidth)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(lightboxDiv, document.body.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tif (!this._lightbox) return;\r\n\r\n\t\tvar con = this._lightbox.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\tthis._lightbox.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + \"px\";\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function () {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function () {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function () {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function () {\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t} else if (this.isTaskExists(task.id)) {\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = { \"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true };\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = { start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\" };\r\n\t\t\t} else if (typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { start_date: section.map_to };\r\n\t\t\t}\r\n\t\t} else if (section.type === \"constraint\") {\r\n\t\t\tif (!section.map_to || typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { constraint_type: \"constraint_type\", constraint_date: \"constraint_date\" };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t\tgantt.hideCover();\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push(String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = { size: 0 };\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tgetTimePickerValue: function (selects, config, offset) {\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar needSetTime = gantt.defined(map[3]);\r\n\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tvar mapOffset = offset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t},\r\n\r\n\t\t_fill_lightbox_select: function (s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl(),\r\n\t\tresources: new ResourcesControl(),\r\n\t\tconstraint: new ConstraintControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = { text: message };\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = document.getElementById(section.id);\r\n\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + (floatRight ? \" style='float:right;'\" : \"\") + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsns._time_format_order[2] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//year\r\n\r\n\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t// if\r\n\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trange = range || 10;\r\n\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\t\tfor (i = start_year; i < end_year; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsns._time_format_order[1] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//month\r\n\t\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsns._time_format_order[0] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//days\r\n\t\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%H:%i\":\r\n\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\tsns._time_format_order[3] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//hours\r\n\t\t\t\ti = settings.first;\r\n\t\t\t\ttdate = settings.date.getDate();\r\n\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\twhile (i < settings.last) {\r\n\t\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isUnscheduledTask. Task object was expected\");\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\r\n\t\tif (!(gantt._isAllowedUnscheduledTask(task) || (taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf()))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._getProjectEnd = function() {\r\n\t\tif(gantt.config.project_end){\r\n\t\t\treturn gantt.config.project_end;\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskByTime();\r\n\t\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\t\treturn +a.end_date > +b.end_date ? 1 : -1;\r\n\t\t\t});\r\n\t\t\treturn tasks.length ? tasks[tasks.length - 1].end_date : null;\r\n\t\t}\r\n\t};\r\n\tgantt._getProjectStart = function() {\r\n\t\tif (gantt.config.project_start) {\r\n\t\t\treturn gantt.config.project_start;\r\n\t\t}\r\n\r\n\t\t// use timeline start if project start is not specified\r\n\t\tif (gantt.config.start_date) {\r\n\t\t\treturn gantt.config.start_date;\r\n\t\t}\r\n\t\tif (gantt.getState().min_date) {\r\n\t\t\treturn gantt.getState().min_date;\r\n\t\t}\r\n\r\n\t\t// earliest task start if neither project start nor timeline are specified\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\treturn +a.start_date > +b.start_date ? 1 : -1;\r\n\t\t});\r\n\t\treturn tasks.length ? tasks[0].start_date : null;\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != gantt.config.root_id) ? gantt.getTask(parent_id) : false,\r\n\t\t\tstartDate = null;\r\n\t\tif (parent) {\r\n\t\t\tif(gantt.config.schedule_from_end){\r\n\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: parent.end_date,\r\n\t\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\t\ttask:item\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tstartDate = parent.start_date;\r\n\t\t\t}\r\n\r\n\t\t} else if(gantt.config.schedule_from_end) {\r\n\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\tstart_date: gantt._getProjectEnd(),\r\n\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tvar first = gantt.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? gantt.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t}) : null)) : gantt.config.start_date || gantt.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, gantt.getParent(task));\r\n\t\ttask.duration = task.duration || gantt.config.duration_step;\r\n\t\ttask.end_date = task.end_date || gantt.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSummaryTask. Task object was expected\");\r\n\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (helpers.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](new Date(settings.date));\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif(biggerTimeUnit && !this._isWorkTime(curr, biggerTimeUnit)){\r\n\t\t\t\t// no need to check every hour/minute if we know that the whole day is not working\r\n\t\t\t\tvar biggerTimeUnitSettings = this.$gantt.copy(settings);\r\n\t\t\t\tbiggerTimeUnitSettings.date = curr;\r\n\t\t\t\tbiggerTimeUnitSettings.unit = biggerTimeUnit;\r\n\r\n\t\t\t\treturn this._getClosestWorkTime(biggerTimeUnitSettings);\r\n\t\t\t}\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_getOwnCalendar: function(task){\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t}\r\n\r\n\t\tif (config.resource_calendars) {\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar calendar = this._getOwnCalendar(task);\r\n\t\tvar gantt = this.$gantt;\r\n\t\tif (!calendar && gantt.config.inherit_calendar && gantt.isTaskExists(task.parent)){\r\n\t\t\tvar stop = false;\r\n\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\tif(stop) return;\r\n\t\t\t\tif(gantt.isSummaryTask(parent)){\r\n\t\t\t\t\tcalendar = this._getOwnCalendar(parent);\r\n\t\t\t\t\tif(calendar){\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, task.id, this);\r\n\t\t}\r\n\r\n\t\treturn calendar || this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.config;\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\treturn this.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (helpers.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt){\r\n\t// TODO: why eslint fails on regexp?\r\n\t// eslint-disable-next-line no-control-regex\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function(name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function() {\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n};","module.exports = function(gantt) {\r\n};","module.exports = function(gantt) {\r\n\tfunction isEnabled() {\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback) {\r\n\t\treturn function() {\r\n\t\t\tif (!isEnabled()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction updateParents(childId) {\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tcheckParent(childId);\r\n\t\t});\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction checkParent(id) {\r\n\t\tsetTaskType(id);\r\n\t\tvar parent = gantt.getParent(id);\r\n\r\n\t\tif (parent != gantt.config.root_id) {\r\n\t\t\tcheckParent(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setTaskType(id) {\r\n\t\tid = id.id || id;\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\r\n\t\tif (targetType !== false) {\r\n\t\t\tupdateTaskType(task, targetType);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTaskType(task, targetType) {\r\n\t\ttask.type = targetType;\r\n\t\tgantt.updateTask(task.id);\r\n\t}\r\n\r\n\tfunction getTaskTypeToUpdate(task) {\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar hasChildren = gantt.hasChild(task.id);\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tif (hasChildren && taskType === allTypes.task) {\r\n\t\t\treturn allTypes.project;\r\n\t\t}\r\n\r\n\t\tif (!hasChildren && taskType === allTypes.project) {\r\n\t\t\treturn allTypes.task;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar isParsingDone = true;\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function() {\r\n\t\tisParsingDone = false;\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tgantt.eachTask(function(task) {\r\n\t\t\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\t\t\tif (targetType !== false) {\r\n\t\t\t\t\tupdateTaskType(task, targetType);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tisParsingDone = true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\",  function() {\r\n\t\tif (isParsingDone)\r\n\t\t\tcallIfEnabled(updateParents);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function() {\r\n\t\tif (isParsingDone)\r\n\t\t\tcallIfEnabled(updateParents);\r\n\t});\r\n\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\",  callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex) {\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex) {\r\n\t\tif (document.querySelector(\".gantt_drag_marker\")) {\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n};","module.exports = function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(dataProcessor){\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\tgantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\r\n\r\n\tvar ready = false;\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(ready){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tready = true;\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeUndoStack\", function(action){\r\n\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\tvar command = action.commands[i];\r\n\t\t\tif(command.entity === \"task\" && command.value.type === gantt.config.types.placeholder){\r\n\t\t\t\taction.commands.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n};","var helpers = require(\"../../utils/helpers\");\r\n\r\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue) {\r\n\t\tif (typeof propertyName == \"function\") {\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t} else {\r\n\t\t\tif (helpers.isArray(propertyValue)) {\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t} else {\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter) {\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor (var i = 0; i < resourceIds.length; i++) {\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (task.type == gantt.config.types.project)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar resourceValue;\r\n\t\t\t\tif (!helpers.isArray(task[property])) {\r\n\t\t\t\t\tresourceValue = [task[property]];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresourceValue = task[property];\r\n\t\t\t\t}\r\n\r\n\t\t\t\thelpers.forEach(resourceValue, function(value) {\r\n\t\t\t\t\tif(value && (resourceHash[value]  || resourceHash[value.resource_id])) {\r\n\t\t\t\t\t\tres.push(task);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resource, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = resource.id + \"_\" + resourceProperty  + \"_\" + scale.unit + \"_\" + scale.step;\r\n\t\tvar res;\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\r\n\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resource, resourceProperty, scale, timeline) {\r\n\r\n\t\tvar tasks;\r\n\t\tif(resource.$role == \"task\"){\r\n\t\t\ttasks = [];\r\n\t\t}else{\r\n\t\t\ttasks = getTaskBy(resourceProperty, resource.id);\r\n\t\t}\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task, unit: step})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttasks = timegrid[start.valueOf()] || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif (css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\r\n\tfunction renderBar(level, start, end, timeline){\r\n\t\tvar top = (1 - (level*1||0))*100;\r\n\t\tvar left = timeline.posFromDate(start);\r\n\t\tvar right = timeline.posFromDate(end);\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"gantt_histogram_hor_bar\";\r\n\t\telement.style.top = top + '%';\r\n\t\telement.style.left = left + \"px\";\r\n\t\telement.style.width = (right - left + 1) + \"px\";\r\n\t\treturn element;\r\n\t}\r\n\tfunction renderConnection(prevLevel, nextLevel, left){\r\n\t\tif(prevLevel === nextLevel){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar top = 1 - Math.max(prevLevel, nextLevel);\r\n\t\tvar height = Math.abs(prevLevel - nextLevel);\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"gantt_histogram_vert_bar\";\r\n\t\telement.style.top = top*100 + \"%\";\r\n\t\telement.style.height = height*100 + \"%\";\r\n\t\telement.style.left = left + \"px\";\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction renderHistogramLine(capacity, timeline, maxCapacity){\r\n\t\tvar scale = timeline.getScale();\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tvar colStart = scale.trace_x[i];\r\n\t\t\tvar colEnd = scale.trace_x[i + 1] || gantt.date.add(colStart, scale.step, scale.unit);\r\n\t\t\tvar col = scale.trace_x[i].valueOf();\r\n\t\t\tvar level = Math.min(capacity[col]/maxCapacity, 1) || 0;\r\n\t\t\tif(level < 0){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar nextLevel = Math.min(capacity[colEnd.valueOf()]/maxCapacity, 1) || 0;\r\n\r\n\r\n\t\t\tvar bar = renderBar(level, colStart, colEnd, timeline);\r\n\t\t\tif(bar){\r\n\t\t\t\tel.appendChild(bar);\r\n\t\t\t}\r\n\t\t\tvar connection = renderConnection(level, nextLevel, timeline.posFromDate(colEnd));\r\n\t\t\tif(connection){\r\n\t\t\t\tel.appendChild(connection);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction renderResourceHistogram(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tvar capacityMatrix = {};\r\n\t\tvar maxCapacity = resource.capacity || timeline.$config.capacity || 24;\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.histogram_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.histogram_cell_label(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar fill = templates.histogram_cell_allocated(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tcapacityMatrix[day.start_date.valueOf()] = capacity || 0;\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_histogram_cell\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + (sizes.top + 1) + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\r\n\t\t\t\tif (content) {\r\n\t\t\t\t\tcontent = \"<div class='gantt_histogram_label'>\" + content +\"</div>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fill) {\r\n\r\n\t\t\t\t\tcontent = \"<div class='gantt_histogram_fill' style='height:\"+(Math.min(fill/maxCapacity||0, 1)*100)+\"%;'></div>\" + content;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar row = null;\r\n\t\tif (cells.length) {\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar capacityElement = renderHistogramLine(capacityMatrix, timeline, maxCapacity);\r\n\r\n\t\t\tif (capacityElement) {\r\n\t\t\t\tcapacityElement.setAttribute(\"data-resource-id\", resource.id);\r\n\t\t\t\tcapacityElement.style.position = \"absolute\";\r\n\t\t\t\tcapacityElement.style.top = (sizes.top + 1) + \"px\";\r\n\t\t\t\tcapacityElement.style.height = (config.row_height - 1) + \"px\";\r\n\t\t\t\tcapacityElement.style.left = 0;\r\n\t\t\t\trow.appendChild(capacityElement);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction selectAssignments(resourceId, taskId, result){\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar owners = [];\r\n\t\tif (gantt.getDatastore(\"task\").exists(taskId)) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\towners = task[property] || [];\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(owners)) {\r\n\t\t\towners = [owners];\r\n\t\t}\r\n\t\tfor (var i = 0; i < owners.length; i++) {\r\n\t\t\tif (owners[i].resource_id == resourceId) {\r\n\t\t\t\tresult.push({task_id: task.id, resource_id:owners[i].resource_id, value:owners[i].value});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceAssignments(resourceId, taskId){\r\n\t\t// resource assignment as an independent module:\r\n\t\t// {taskId:, resourceId, value}\r\n\t\t// TODO: probably should add a separate datastore for these\r\n\t\tvar assignments = [];\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tif(taskId !== undefined){\r\n\t\t\tselectAssignments(resourceId, taskId, assignments);\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskBy(property, resourceId);\r\n\t\t\ttasks.forEach(function(task){\r\n\t\t\t\tselectAssignments(resourceId, task.id, assignments);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\trenderHistogram: renderResourceHistogram,\r\n\t\tfilterTasks: getTaskBy,\r\n\t\tgetResourceAssignments: getResourceAssignments\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.getResourceAssignments = methods.getResourceAssignments;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.$ui.layers.resourceHistogram = methods.renderHistogram;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\t/**\r\n\t * these are placeholder functions that should be redefined by the user\r\n\t*/\r\n\tgantt.templates.histogram_cell_class = function(start_date, end_date, resource, tasks) {};\r\n\tgantt.templates.histogram_cell_label = function(start_date, end_date, resource, tasks) {\r\n\t\treturn tasks.length + \"/3\";\r\n\t};\r\n\tgantt.templates.histogram_cell_allocated = function(start_date, end_date, resource, tasks) {\r\n\t\treturn tasks.length / 3;\r\n\t};\r\n\tgantt.templates.histogram_cell_capacity = function(start_date, end_date, resource, tasks) {\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks) {\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks) {\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n","if (window.dhtmlx){\r\n\r\n\tif (!window.dhtmlx.attaches)\r\n\twindow.dhtmlx.attaches = {};\r\n\r\n\twindow.dhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\twindow.dhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(window.jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tvar parts = code.split(\".\");\r\n\t\tvar currentNode = gantt.config.root_id;\r\n\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\tvar children = gantt.getChildren(currentNode);\r\n\t\t\tvar index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tfunction resetCache(){\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", resetCache);\r\n\tgantt.attachEvent(\"onBeforeParse\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", resetCache);\r\n\tgantt.attachEvent(\"onAfterSort\", resetCache);\r\n\r\n};\r\n","function createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"link\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\treturn gantt.$task || gantt.$grid || gantt.$root;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\"),\r\n\t\trequire(\"./resources\"),\r\n\t\trequire(\"./new_task_placeholder\"),\r\n\t\trequire(\"./auto_task_types\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};","\r\nexport default function extendGantt(gantt: any, dp: any) {\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) {\r\n\t\t\treturn this.userdata[id][name];\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tif (!this.userdata[id]) {\r\n\t\t\tthis.userdata[id] = {};\r\n\t\t}\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n\r\n\tgantt._change_id = function(oldId, newId) {\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\tthis.changeLinkId(oldId, newId);\r\n\t\t} else {\r\n\t\t\tthis.changeTaskId(oldId, newId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._row_style = function(rowId, classname){\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!gantt.isTaskExists(rowId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst task = gantt.getTask(rowId);\r\n\t\ttask.$dataprocessor_class = classname;\r\n\t\tgantt.refreshTask(rowId);\r\n\t};\r\n\r\n\t// fake method for dataprocessor\r\n\tgantt._delete_task = function(rowId, node) {}; // tslint:disable-line\r\n\r\n\tgantt._sendTaskOrder = function(id, item){\r\n\t\tif (item.$drop_target) {\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\tthis._dp.setUpdated(id, true,\"order\");\r\n\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\tgantt.setDp();\r\n}","import * as helpers from \"../../utils/helpers\";\r\n\r\nexport default class DataProcessorEvents {\r\n\tprotected _dataProcessorHandlers: any[];\r\n\tprotected $gantt: any;\r\n\tprotected $dp: any;\r\n\r\n\tconstructor(gantt: any, dp: any) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$dp = dp;\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n\r\n\tattach() {\r\n\t\tconst dp = this.$dp;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tconst cascadeDelete = {};\r\n\r\n\t\tfunction clientSideDelete(id) {\r\n\t\t\tconst updated = dp.updatedRows.slice();\r\n\t\t\tlet clientOnly = false;\r\n\r\n\t\t\tfor (let i = 0; i < updated.length && !dp._in_progress[id]; i++) {\r\n\t\t\t\tif (updated[i] === id) {\r\n\t\t\t\t\tif (gantt.getUserData(id, \"!nativeeditor_status\") === \"inserted\") {\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task) {\r\n\t\t\tlet _links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\t_links = _links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\t_links = _links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn _links;\r\n\t\t}\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onBeforeTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (!gantt.config.cascade_delete) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.config.cascade_delete && cascadeDelete[id]) {\r\n\t\t\t\tconst dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tconst cascade = cascadeDelete[id];\r\n\t\t\t\tfor (const i in cascade.tasks) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor (const i in cascade.links) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif (dpMode !== \"off\") {\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\t\t\t}\r\n\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\r\n\t\t\tif (dp.updateMode !== \"off\" && !dp._tSend) {\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onRowDragEnd\", function(id, target) { // tslint:disable-line\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tlet tasks = null;\r\n\t\tlet links = null;\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onTaskIdChange\", function(oldId, newId) { // tslint:disable-line\r\n\t\t\tif (!dp._waitMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst children = gantt.getChildren(newId);\r\n\t\t\tif (children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tconst ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = this.getTask(newId);\r\n\t\t\tconst itemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif (itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tconst link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function() {\r\n\t\t\tif (tasks || links) {\r\n\t\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\t\tfor (const id in tasks) {\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const id in links) {\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet url = this._serverProcessor;\r\n\t\t\tif (this._tMode === \"REST-JSON\" || this._tMode === \"REST\") {\r\n\t\t\t\tconst mode = this._ganttMode;\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t// editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t} else {\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", function insertCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tconst methods = {\r\n\t\t\t\tadd: gantt.addTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.add = gantt.addLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdata.id = id;\r\n\t\t\tmethods.add.call(gantt, data);\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"updateCallback\", function updateCallback(upd, id) {\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tif (!gantt.isTaskExists(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst objData = gantt.getTask(id);\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tlet property = data[key];\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"id\":\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tcase \"start_date\":\r\n\t\t\t\t\tcase \"end_date\":\r\n\t\t\t\t\t\tproperty = gantt.templates.xml_date(property);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"duration\":\r\n\t\t\t\t\t\tobjData.end_date = gantt.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tobjData[key] = property;\r\n\t\t\t}\r\n\t\t\tgantt.updateTask(id);\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\t\tdp.attachEvent(\"deleteCallback\", function deleteCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst methods = {\r\n\t\t\t\tdelete: gantt.deleteTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.delete = gantt.deleteLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\tmethods.delete.call(gantt, id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdetach() {\r\n\t\thelpers.forEach(this._dataProcessorHandlers, (e) => {\r\n\t\t\tthis.$gantt.detachEvent(e);\r\n\t\t});\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n}\r\n","import * as eventable from \"../../utils/eventable\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport DataProcessorEvents from \"./data_processor_events\";\r\nimport extendGantt from \"./extend_gantt\";\r\n\r\nexport interface DataProcessor { // tslint:disable-line\r\n\t$gantt: any;\r\n\tdetachAllEvents: any;\r\n\tattachEvent: any;\r\n\tcallEvent: any;\r\n\r\n\tserverProcessor: string;\r\n\taction_param: string;\r\n\tobject: any;\r\n\tupdatedRows: any[];\r\n\tautoUpdate: boolean;\r\n\tupdateMode: string;\r\n\tmandatoryFields: any[];\r\n\tmessages: any[];\r\n\tstyles: object;\r\n\tdnd: any;\r\n}\r\n\r\nexport function createDataProcessor(config: any) {\r\n\tlet router;\r\n\tlet tMode;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if (config.hasOwnProperty(\"link\") && config.hasOwnProperty(\"task\")) {\r\n\t\trouter = config;\r\n\t}\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\tconst gantt = this; // tslint:disable-line\r\n\tconst dp = new DataProcessor(config.url);\r\n\tdp.init(gantt);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter\r\n\t}, config.batchUpdate);\r\n\treturn dp;\r\n}\r\n\r\nexport class DataProcessor {\r\n\tpublic modes: object;\r\n\tpublic serverProcessor: string;\r\n\tpublic action_param: string; // tslint:disable-line\r\n\tpublic object: any;\r\n\tpublic updatedRows: any[];\r\n\tpublic autoUpdate: boolean;\r\n\tpublic updateMode: string;\r\n\tpublic mandatoryFields: any[];\r\n\tpublic messages: any[];\r\n\tpublic styles: object;\r\n\tpublic dnd: any;\r\n\r\n\tprotected _tMode: string;\r\n\tprotected _headers: any;\r\n\tprotected _payload: any;\r\n\tprotected _postDelim: string;\r\n\tprotected _waitMode: number;\r\n\tprotected _in_progress: object; // tslint:disable-line\r\n\tprotected _invalid: object;\r\n\tprotected _tSend: boolean;\r\n\tprotected _endnm: boolean;\r\n\tprotected _serializeAsJson: boolean;\r\n\tprotected _router: any;\r\n\tprotected _utf: boolean;\r\n\tprotected obj: any;\r\n\tprotected _columns: any;\r\n\tprotected _changed: boolean;\r\n\tprotected _methods: any[];\r\n\tprotected _user: any;\r\n\tprotected _uActions: object;\r\n\tprotected _needUpdate: boolean;\r\n\tprotected _ganttMode: string;\r\n\r\n\tprotected _silent_mode: any; // tslint:disable-line\r\n\tprotected _updateBusy: any;\r\n\tprotected _serverProcessor: any;\r\n\tprotected _initialized: boolean;\r\n\r\n\tconstructor(serverProcessorURL?) {\r\n\t\tthis.serverProcessor = serverProcessorURL;\r\n\t\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\t\tthis.object = null;\r\n\t\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.updateMode = \"cell\";\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis._postDelim = \"_\";\r\n\r\n\t\tthis._waitMode = 0;\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis.mandatoryFields = [];\r\n\t\tthis.messages = [];\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated: \"font-weight:bold;\",\r\n\t\t\tinserted: \"font-weight:bold;\",\r\n\t\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\t\terror: \"color:red;\",\r\n\t\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t\t};\r\n\t\tthis.enableUTFencoding(true);\r\n\t\teventable(this);\r\n\t}\r\n\r\n\tsetTransactionMode(mode:any, total?:any) {\r\n\t\tif (typeof mode === \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t}\r\n\r\n\tescape(data:any) {\r\n\t\tif (this._utf) {\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\t} else {\r\n\t\t\treturn escape(data);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: allows to set escaping mode\r\n\t * @param: true - utf based escaping, simple - use current page encoding\r\n\t * @type: public\r\n\t */\r\n\tenableUTFencoding(mode:boolean) {\r\n\t\tthis._utf = !!mode;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @desc: allows to define, which column may trigger update\r\n\t * @param: val - array or list of true/false values\r\n\t * @type: public\r\n\t */\r\n\tsetDataColumns(val:string|any) {\r\n\t\tthis._columns = (typeof val === \"string\") ? val.split(\",\") : val;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: get state of updating\r\n\t * @returns:   true - all in sync with server, false - some items not updated yet.\r\n\t * @type: public\r\n\t */\r\n\tgetSyncState() {\r\n\t\treturn !this.updatedRows.length;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t * @param:   mode - true/false\r\n\t * @type: public\r\n\t */\r\n\tenableDataNames(mode: boolean) {\r\n\t\tthis._endnm = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t * @param:   mode - true/false\r\n\t * @type: public\r\n\t */\r\n\tenablePartialDataSend(mode: boolean) {\r\n\t\tthis._changed = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: set if rows should be send to server automaticaly\r\n\t * @param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t * @type: public\r\n\t */\r\n\tsetUpdateMode(mode: string, dnd: any) {\r\n\t\tthis.autoUpdate = (mode === \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t}\r\n\r\n\tignore(code: any, master: any) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @param: state - true for \"updated\", false for \"not updated\"\r\n\t * @param: mode - update mode name\r\n\t * @type: public\r\n\t */\r\n\tsetUpdated(rowId:number|string, state: boolean, mode?: string) {\r\n\t\tif (this._silent_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tconst existing = this.$gantt.getUserData(rowId, this.action_param);\r\n\t\tif (existing && mode === \"updated\") {\r\n\t\t\tmode = existing;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); // clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$gantt.setUserData(rowId, this.action_param, mode);\r\n\t\t\tif (this._in_progress[rowId]) {\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$gantt.setUserData(rowId, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) {\r\n\t\t\tthis.sendData(rowId);\r\n\t\t}\r\n\t}\r\n\r\n\tmarkRow(id: number | string, state: boolean, mode: string) {\r\n\t\tlet str = \"\";\r\n\t\tconst invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t// default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + str;\r\n\r\n\t\t\tthis.$gantt[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (let i = 0; i < invalid.details.length; i++) {\r\n\t\t\t\t\tif (invalid.details[i]) {\r\n\t\t\t\t\t\tthis.$gantt[this._methods[1]](id, i, str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetActionByState(state: string):string {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\t}\r\n\r\n\tgetState(id: number | string) {\r\n\t\treturn this.$gantt.getUserData(id, this.action_param);\r\n\t}\r\n\r\n\tis_invalid(id: number | string) {\r\n\t\treturn this._invalid[id];\r\n\t}\r\n\r\n\tset_invalid(id: number | string, mode: any, details?) {\r\n\t\tif (details) {\r\n\t\t\tmode = {\r\n\t\t\t\tvalue: mode,\r\n\t\t\t\tdetails,\r\n\t\t\t\ttoString: function() { // tslint:disable-line\r\n\t\t\t\t\treturn this.value.toString();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._invalid[id] = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @type: public\r\n\t */\r\n\t// tslint:disable-next-line\r\n\tcheckBeforeUpdate(rowId: number | string) { // ???\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: send row(s) values to server\r\n\t * @param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t * @type: public\r\n\t */\r\n\tsendData(rowId?: any) {\r\n\t\tif (this._waitMode && (this.$gantt.mytype === \"tree\" || this.$gantt._h2)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.$gantt.editStop) {\r\n\t\t\tthis.$gantt.editStop();\r\n\t\t}\r\n\r\n\r\n\t\tif (typeof rowId === \"undefined\" || this._tSend) {\r\n\t\t\treturn this.sendAllData();\r\n\t\t}\r\n\t\tif (this._in_progress[rowId]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) {\r\n\t\t\treturn false; // ??? unreachable code, drop it?\r\n\t\t}\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t}\r\n\r\n\t_beforeSendData(data: any, rowId: any) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._sendData(data, rowId);\r\n\t}\r\n\r\n\tserialize(data: any, id: any) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tif (typeof id !== \"undefined\") {\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\t} else {\r\n\t\t\tconst stack = [];\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this._postDelim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key) {\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\t}\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t}\r\n\r\n\t_serializeAsJSON(data: any) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tconst copy = utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t}\r\n\r\n\tserialize_one(data: any, pref: string) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tconst stack = [];\r\n\t\tlet serialized = \"\";\r\n\t\tfor (const key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key === \"id\" ||\r\n\t\t\t\t\tkey == this.action_param) && // tslint:disable-line\r\n\t\t\t\t\tthis._tMode === \"REST\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t}\r\n\r\n\t_applyPayload(url: string) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._payload) {\r\n\t\t\tfor (const key in this._payload) {\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\t_sendData(dataToSend: any, rowId?: any) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tconst taskState = this.getState(rowId);\r\n\t\t\tconst taskAction = this.getActionByState(taskState);\r\n\t\t\tconst ganttMode = this.getGanttMode();\r\n\t\t\tconst _onResolvedCreateUpdate = (tag) => {\r\n\t\t\t\tlet action = taskState || \"updated\";\r\n\t\t\t\tlet sid = rowId;\r\n\t\t\t\tlet tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\taction = tag.action || taskState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tthis.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t};\r\n\r\n\t\t\tlet actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tactionPromise = this._router(ganttMode, taskAction, dataToSend, rowId);\r\n\t\t\t} else if (this._router[ganttMode] instanceof Function) {\r\n\t\t\t\tactionPromise = this._router[ganttMode](taskAction, dataToSend, rowId);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (taskState) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet queryParams: any;\r\n\t\tqueryParams = {\r\n\t\t\tcallback: (xml) => {\r\n\t\t\t\tconst ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.afterUpdate(this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tconst urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.$gantt.getUserData(0, \"version\")].join(\"&\")) : \"\");\r\n\t\tlet url: any = this._applyPayload(urlParams);\r\n\t\tlet data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(dataToSend, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = dataToSend[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t}\r\n\r\n\t_forEachUpdatedRow(code: any) {\r\n\t\tconst updatedRows = this.updatedRows.slice();\r\n\t\tfor (let i = 0; i < updatedRows.length; i++) {\r\n\t\t\tconst rowId = updatedRows[i];\r\n\t\t\tif (this.$gantt.getUserData(rowId, this.action_param)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsendAllData() {\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tlet valid: any = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId); // ??? checkBeforeUpdate() always is true\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\tlet stop = false;\r\n\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (stop) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t\tif (this._waitMode && (this.$gantt.mytype === \"tree\" || this.$gantt._h2)) {\r\n\t\t\t\t\t\tstop = true; // block send all for tree\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_getAllData() {\r\n\t\tconst out = {};\r\n\t\tlet hasOne = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thasOne = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn hasOne ? out : null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @desc: specify column which value should be verified before sending to server\r\n\t * @param: ind - column index (0 based)\r\n\t * @param: verifFunction - function(object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t * @type: public\r\n\t */\r\n\tsetVerificator(ind: number, verifFunction: any) {\r\n\t\tthis.mandatoryFields[ind] = verifFunction || (function(value) { return (value !== \"\"); });\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: remove column from list of those which should be verified\r\n\t * @param: ind - column Index (0 based)\r\n\t * @type: public\r\n\t */\r\n\tclearVerificator(ind: number) {\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t}\r\n\r\n\tfindRow(pattern: any) {\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tif (pattern == this.updatedRows[i]) { // tslint:disable-line\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: define custom actions\r\n\t * @param: name - name of action, same as value of action attribute\r\n\t * @param: handler - custom function, which receives a XMl response content for action\r\n\t * @type: private\r\n\t */\r\n\tdefineAction(name: string, handler: any) {\r\n\t\tif (!this._uActions) {\r\n\t\t\tthis._uActions = {};\r\n\t\t}\r\n\t\tthis._uActions[name] = handler;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t * @param: sid - id of item before update\r\n\t * @param: tid - id of item after up0ate\r\n\t * @param: action - action name\r\n\t * @type: public\r\n\t * @topic: 0\r\n\t */\r\n\tafterUpdateCallback(sid: number | string, tid: number | string, action: string, btag: any) {\r\n\t\tconst marker = sid;\r\n\t\tconst correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tconst originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) { // tslint:disable-line\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$gantt[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.$gantt[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$gantt.getUserData(sid, this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: response from server\r\n\t * @param: xml - XMLLoader object with response XML\r\n\t * @type: private\r\n\t */\r\n\tafterUpdate(that: any, xml: any, id?:any) {\r\n\t\tlet _xml;\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t_xml = arguments[1];\r\n\t\t} else {\r\n\t\t\t// old dataprocessor\r\n\t\t\t_xml = arguments[4];\r\n\t\t}\r\n\t\tlet mode = this.getGanttMode();\r\n\t\tconst reqUrl = _xml.filePath || _xml.url;\r\n\r\n\t\tif (this._tMode !== \"REST\" && this._tMode !== \"REST-JSON\") {\r\n\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") !== -1) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setGanttMode(mode);\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\t// try to use json first\r\n\t\tif ((window as any).JSON) {\r\n\t\t\tlet tag;\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch (e) {\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tag) {\r\n\t\t\t\tconst action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tconst sid = tag.sid || id[0];\r\n\t\t\t\tconst tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\tthis.setGanttMode(mode);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// xml response\r\n\t\tconst top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\t\tconst atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < atag.length; i++) {\r\n\t\t\tconst btag = atag[i];\r\n\t\t\tconst action = btag.getAttribute(\"type\");\r\n\t\t\tconst sid = btag.getAttribute(\"sid\");\r\n\t\t\tconst tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t}\r\n\r\n\tcleanUpdate(id: any[]) {\r\n\t\tif (id) {\r\n\t\t\tfor (let i = 0; i < id.length; i++) {\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfinalizeUpdate() {\r\n\t\tif (this._waitMode) {\r\n\t\t\tthis._waitMode--;\r\n\t\t}\r\n\r\n\t\tif ((this.$gantt.mytype === \"tree\" || this.$gantt._h2) && this.updatedRows.length) {\r\n\t\t\tthis.sendData();\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: initializes data-processor\r\n\t * @param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t * @type: public\r\n\t */\r\n\tinit(anObj: any) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$gantt = anObj;\r\n\t\tif (this.$gantt._dp_init) {\r\n\t\t\tthis.$gantt._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tthis._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\t\textendGantt(this.$gantt, this);\r\n\t\tconst dataProcessorEvents = new DataProcessorEvents(this.$gantt, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this.setGanttMode;\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$gantt._dp;\r\n\t\t\tdelete this.$gantt._change_id;\r\n\t\t\tdelete this.$gantt._row_style;\r\n\t\t\tdelete this.$gantt._delete_task;\r\n\t\t\tdelete this.$gantt._sendTaskOrder;\r\n\t\t\tdelete this.$gantt;\r\n\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$gantt.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\t}\r\n\r\n\t_setDefaultTransactionMode() {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t}\r\n\r\n\tsetOnAfterUpdate(handler) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", handler);\r\n\t}\r\n\r\n\tenableDebug(mode) {} // tslint:disable-line\r\n\r\n\tsetOnBeforeUpdateHandler(handler) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", handler);\r\n\t}\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._needUpdate = false;\r\n\t\t// this._loader = null;\r\n\t\tthis._updateBusy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", this.afterAutoUpdate); // arguments sid, action, tid, xml_node;\r\n\r\n\t\tthis.attachEvent(\"onFullSync\", this.fullSync);\r\n\r\n\t\twindow.setInterval(() => {\r\n\t\t\tthis.loadUpdate();\r\n\t\t}, interval);\r\n\t}\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate(sid, action, tid, xml_node) { // tslint:disable-line\r\n\t\tif (action === \"collision\") {\r\n\t\t\tthis._needUpdate = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync() {\r\n\t\tif (this._needUpdate) {\r\n\t\t\tthis._needUpdate = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates(url, callback) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._updateBusy) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthis._updateBusy = true;\r\n\t\t}\r\n\r\n\t\t// this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\r\n\t\t// this._loader.async=true;\r\n\t\t// this._loader.waitCall=callback;\r\n\t\t// this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t}\r\n\r\n\t// I didn't found some use of _v and _a functions\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a(arr) {\r\n\t\tconst res = [];\r\n\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\tres[i] = this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate() {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tconst version = this.$gantt.getUserData(0, \"version\");\r\n\t\tlet url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, (xml) => {\r\n\t\t\tconst vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tthis.obj.setUserData(0, \"version\", this._v(vers[0]));\r\n\r\n\t\t\tconst upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length) {\r\n\t\t\t\tthis._silent_mode = true;\r\n\r\n\t\t\t\tfor (let i = 0; i < upds.length; i++) {\r\n\t\t\t\t\tconst status = upds[i].getAttribute(\"status\");\r\n\t\t\t\t\tconst id = upds[i].getAttribute(\"id\");\r\n\t\t\t\t\tconst parent = upds[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateBusy = false;\r\n\t\t});\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t}\r\n\r\n\tsetGanttMode(mode) {\r\n\t\tif (mode === \"tasks\") {\r\n\t\t\tmode = \"task\";\r\n\t\t} else if (mode === \"links\") {\r\n\t\t\tmode = \"link\";\r\n\t\t}\r\n\r\n\t\tconst modes = this.modes || {};\r\n\t\tconst ganttMode = this.getGanttMode();\r\n\t\tif (ganttMode) {\r\n\t\t\tmodes[ganttMode] = {\r\n\t\t\t\t_in_progress : this._in_progress,\r\n\t\t\t\t_invalid: this._invalid,\r\n\t\t\t\tupdatedRows : this.updatedRows\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet newState = modes[mode];\r\n\t\tif (!newState) {\r\n\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t_in_progress : {},\r\n\t\t\t\t_invalid : {},\r\n\t\t\t\tupdatedRows : []\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._in_progress = newState._in_progress;\r\n\t\tthis._invalid = newState._invalid;\r\n\t\tthis.updatedRows = newState.updatedRows;\r\n\t\tthis.modes = modes;\r\n\t\tthis._ganttMode = mode;\r\n\t}\r\n\tgetGanttMode():string {\r\n\t\treturn this._ganttMode;\r\n\t}\r\n\r\n\t_getRowData(id) {\r\n\t\tlet task;\r\n\t\tif (this.getGanttMode() === \"task\") {\r\n\t\t\ttask = this.$gantt.isTaskExists(id) ? this.$gantt.getTask(id) : { id };\r\n\t\t} else {\r\n\t\t\ttask = this.$gantt.isLinkExists(id) ? this.$gantt.getLink(id) : { id };\r\n\t\t}\r\n\r\n\t\ttask = this.$gantt.copy(task);\r\n\r\n\t\tconst data = {};\r\n\t\tfor (const key in task) {\r\n\t\t\tif (key.substr(0, 1) === \"$\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst value = task[key];\r\n\t\t\tif (helpers.isDate(value)) {\r\n\t\t\t\tdata[key] = this.$gantt.templates.xml_format(value);\r\n\t\t\t} else if(value === null) {\r\n\t\t\t\tdata[key] = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst taskTiming = this.$gantt._get_task_timing_mode(task);\r\n\t\tif(taskTiming.$no_start){\r\n\t\t\ttask.start_date = \"\";\r\n\t\t\ttask.duration = \"\";\r\n\t\t}\r\n\t\tif(taskTiming.$no_end){\r\n\t\t\ttask.end_date = \"\";\r\n\t\t\ttask.duration = \"\";\r\n\t\t}\r\n\t\tdata[this.action_param] = this.$gantt.getUserData(id, this.action_param);\r\n\t\treturn data;\r\n\t}\r\n\r\n\t_isFetchResult(result) {\r\n\t\treturn result.body instanceof ReadableStream;\r\n\t}\r\n\r\n\tsetSerializeAsJSON(flag: true) {\r\n\t\tthis._serializeAsJson = flag;\r\n\t}\r\n}","var DataProcessor = require(\"./data_processor\");\r\nmodule.exports = {\r\n\tDEPRECATED_api: function(server) {\r\n\t\treturn new (DataProcessor.DataProcessor)(server);\r\n\t},\r\n\tcreateDataProcessor: DataProcessor.createDataProcessor,\r\n\tgetDataProcessorModes: DataProcessor.getAvailableModes\r\n};","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};","function createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\t\r\n\tfunction unselect(id){\r\n\t\tselectedId = null;\r\n\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t}\r\n\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tunselect.call(this, id);\r\n\t\t}\r\n\r\n\t\tif(selectedId && this.eachItem){\r\n\t\t\tthis.eachItem(function(subItem){\r\n\t\t\t\tif(subItem.id == selectedId){\r\n\t\t\t\t\tunselect.call(this, subItem.id);\r\n\t\t\t\t}\r\n\t\t\t}, id);\r\n\t\t}\r\n\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tunselect.call(this, id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tDataStore.apply(this, [config]);\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open && !(this._isSplitItem(parent));\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\t\t_isSplitItem: function(item){\r\n\t\t\treturn (item.render == \"split\" && this.hasChild(item.id));\r\n\t\t},\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem) {\r\n\t\t\tvar parentsHash = {};\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\tif (parentsHash[parent]) {\r\n\t\t\t\t\tthrow new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \" + parent);\r\n\t\t\t\t}\r\n\t\t\t\tparentsHash[parent] = true;\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterSort\", [field, desc, parent]);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}else if(this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId))){\r\n\t\t\tthis.refreshTask(this.getParent(taskId));\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tif(gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskHeight();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", []);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tif (horizontal && left*1 == left){\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t}\r\n\t\t\tif(vertical && top*1 == top){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;","module.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function(layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function() {\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif (mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif (first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif (colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif (!mainGrid.$config.hidden) {\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif (mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tif (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif (!mainGrid.$config.original_grid_width) {\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, gantt.config.grid_width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif (mainGrid.$parent.$config.group) {\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis._initScrollStateEvents(layout);\r\n\t\t\t},\r\n\r\n\t\t\t_initScrollStateEvents: function(layout) {\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif (vertical) {\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (horizontal) {\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif (vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\t\r\n\t\t// can drag and drop link to another gantt on the page, such links are not supported\r\n\t\tvar sameGantt = domHelpers.isChildOf(e.target || e.srcElement, gantt.$root);\r\n\t\tif(!sameGantt){\r\n\t\t\tlanding = false;\r\n\t\t\ttarg = null;\r\n\t\t}\r\n\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../../utils/dom_helpers\");\r\n\r\n/**\r\n * methods for highlighting current drag and drop position\r\n */\r\n\r\nfunction highlightPosition(target, root, grid){\r\n\tvar markerPos = getTaskMarkerPosition(target, grid);\r\n\t// setting position of row\r\n\troot.marker.style.left = 10 + \"px\";\r\n\troot.marker.style.top = markerPos.y + \"px\";\r\n\tvar markerLine = root.markerLine;\r\n\tif(!markerLine){\r\n\t\tmarkerLine = document.createElement(\"div\");\r\n\t\tmarkerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\r\n\t\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\t\tmarkerLine.style.pointerEvents = \"none\";\r\n\t\tdocument.body.appendChild(markerLine);\r\n\t\troot.markerLine = markerLine;\r\n\t}\r\n\tif(target.child){\r\n\t\thighlightFolder(target, markerLine, grid);\r\n\t}else{\r\n\t\thighlightRow(target, markerLine, grid);\r\n\t}\r\n}\r\n\r\nfunction removeLineHighlight(root){\r\n\tif(root.markerLine && root.markerLine.parentNode){\r\n\t\troot.markerLine.parentNode.removeChild(root.markerLine);\r\n\t}\r\n\troot.markerLine = null;\r\n}\r\n\r\nfunction highlightRow(target, markerLine, grid){\r\n\tvar linePos = getLineMarkerPosition(target, grid);\r\n\r\n\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\tmarkerLine.style.left = linePos.x + \"px\";\r\n\tmarkerLine.style.height = \"4px\";\r\n\r\n\tmarkerLine.style.top = (linePos.y - 2) + \"px\";\r\n\tmarkerLine.style.width = linePos.width + \"px\";\r\n\r\n\treturn markerLine;\r\n}\r\nfunction highlightFolder(target, markerFolder, grid){\r\n\tvar id = target.targetParent;\r\n\tvar pos = gridToPageCoordinates({x: 0, y: grid.getItemTop(id)}, grid);\r\n\r\n\tmarkerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\r\n\tmarkerFolder.style.width = grid.$grid_data.offsetWidth + \"px\";\r\n\tmarkerFolder.style.top = pos.y + \"px\";\r\n\tmarkerFolder.style.left = pos.x  + \"px\";\r\n\tmarkerFolder.style.height = grid.getItemHeight(id) + \"px\";\r\n\treturn markerFolder;\r\n}\r\n\r\nfunction getLineMarkerPosition(target, grid){\r\n\tvar store = grid.$config.rowStore;\r\n\tvar pos = {x:0, y:0};\r\n\tvar indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\r\n\tvar indent = 15;\r\n\tvar level = 0;\r\n\tif(indentNode){\r\n\t\tindent = indentNode.offsetWidth;\r\n\t}\r\n\tvar iconWidth = 40;\r\n\tif(target.targetId !== store.$getRootId()){\r\n\t\tvar itemTop = grid.getItemTop(target.targetId);\r\n\t\tvar itemHeight = grid.getItemHeight(target.targetId);\r\n\t\tlevel = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\r\n\r\n\t\tif(target.prevSibling){\r\n\t\t\tpos.y = itemTop;\r\n\t\t}else if(target.nextSibling){\r\n\t\t\tvar childCount = 0;\r\n\t\t\tstore.eachItem(function(child){\r\n\t\t\t\tif(store.getIndexById(child.id) !== -1)\r\n\t\t\t\t\tchildCount++;\r\n\t\t\t}, target.targetId);\r\n\r\n\t\t\tpos.y = itemTop + itemHeight + childCount*itemHeight;\r\n\t\t}else {\r\n\t\t\tpos.y = itemTop + itemHeight;\r\n\t\t\tlevel += 1;\r\n\t\t}\r\n\t}\r\n\tpos.x = iconWidth + level * indent;\r\n\tpos.width = Math.max(grid.$grid_data.offsetWidth - pos.x, 0);\r\n\treturn gridToPageCoordinates(pos, grid);\r\n}\r\n\r\nfunction gridToPageCoordinates(pos, grid){\r\n\tvar gridPos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tpos.x += gridPos.x - grid.$grid.scrollLeft;\r\n\tpos.y += gridPos.y - grid.$grid_data.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\nfunction getTaskMarkerPosition(e, grid) {\r\n\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tvar ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data);\r\n\tvar store = grid.$config.rowStore;\r\n\t// row offset\r\n\tvar x = pos.x;\r\n\tvar y = ePos.y - 10;\r\n\r\n\tvar config = grid.$getConfig();\r\n\t// prevent moving row out of grid_data container\r\n\tif (y < pos.y) y = pos.y;\r\n\tvar gridHeight = store.countVisible() * config.row_height;\r\n\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\tpos.x = x;\r\n\tpos.y = y;\r\n\treturn pos;\r\n}\r\n\r\nmodule.exports = {\r\n\tremoveLineHighlight: removeLineHighlight,\r\n\thighlightPosition: highlightPosition\r\n};\r\n","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nmodule.exports = function getMultiLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store){\r\n\tvar result;\r\n\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tif(relTargetPos < 0.25){\r\n\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else if(relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)){\r\n\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else {\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, targetTaskId, store);\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tif(store.hasChild(rootId) && eventTop >= 0){\r\n\t\t\tresult = dropTarget.lastChildTarget(dndTaskId, rootId, store);\r\n\t\t}else{\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, rootId, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nfunction getLast(store){\r\n\tvar current = store.getNext();\r\n\twhile(store.exists(current)){\r\n\r\n\t\tvar next = store.getNext(current);\r\n\t\tif(!store.exists(next)){\r\n\t\t\treturn current;\r\n\t\t}else{\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findClosesTarget(dndTaskId, taskId, allowedLevel, store, up){\r\n\tvar prev = taskId;\r\n\twhile(store.exists(prev)){\r\n\t\tvar targetLevel = store.calculateItemLevel(store.getItem(prev));\r\n\t\tif((targetLevel === allowedLevel || targetLevel === (allowedLevel - 1)) && store.getBranchIndex(prev) > -1){\r\n\t\t\tbreak;\r\n\t\t}else {\r\n\t\t\tprev = up ? store.getPrev(prev) : store.getNext(prev);\r\n\t\t}\r\n\t}\r\n\r\n\tif(store.exists(prev)){\r\n\t\tif(store.calculateItemLevel(store.getItem(prev)) === allowedLevel){\r\n\t\t\treturn up ? dropTarget.nextSiblingTarget(dndTaskId, prev, store) : dropTarget.prevSiblingTarget(dndTaskId, prev, store);\r\n\t\t}else{\r\n\t\t\treturn dropTarget.firstChildTarget(dndTaskId, prev, store);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findTargetAbove(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, true);\r\n}\r\nfunction findTargetBelow(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, false);\r\n}\r\n\r\nmodule.exports = function getSameLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store, level){\r\n\tvar result;\r\n\tif(targetTaskId !== store.$getRootId()) {\r\n\t\tif (relTargetPos < 0.5) {\r\n\t\t\tif (store.calculateItemLevel(store.getItem(targetTaskId)) === level) {\r\n\t\t\t\tif(store.getPrevSibling(targetTaskId)){\r\n\t\t\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, store.getPrevSibling(targetTaskId), store);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tresult = findTargetBelow(dndTaskId, targetTaskId, level, store);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (store.calculateItemLevel(store.getItem(targetTaskId)) === level) {\r\n\t\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t} else {\r\n\t\t\t\tresult = findTargetBelow(dndTaskId, targetTaskId, level, store);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tresult = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tvar rootLevel = store.getChildren(rootId);\r\n\t\tresult = dropTarget.createDropTargetObject();\r\n\t\tif(rootLevel.length && eventTop >= 0){\r\n\t\t\tresult = findTargetAbove(dndTaskId, getLast(store), level, store);\r\n\t\t}else{\r\n\t\t\tresult = findTargetBelow(dndTaskId, rootId, level, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n","var domHelpers = require(\"../../../utils/dom_helpers\");\r\nvar dropTarget = require(\"./tasks_grid_dnd_marker_helpers/drop_target\");\r\nvar getLockedLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/locked_level\");\r\nvar getMultiLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/multi_level\");\r\nvar higlighter = require(\"./tasks_grid_dnd_marker_helpers/highlight\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tvar datastore = grid.$config.rowStore;\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\tdnd.config.marker.style.opacity = 0.4;\r\n\t\t\telement.style.position = \"static\";\r\n\t\t\telement.style.pointerEvents = \"none\";\r\n\t\t}\r\n\t\t\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.level = store.calculateItemLevel(task);\r\n\t\tdnd.config.drop_target = dropTarget.createDropTargetObject({\r\n\t\t\ttargetParent: store.getParent(task.id),\r\n\t\t\ttargetIndex: store.getBranchIndex(task.id),\r\n\t\t\ttargetId: task.id,\r\n\t\t\tnextSibling: true\r\n\t\t});\r\n\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tfunction getTargetTaskId(e){\r\n\t\tvar y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tif(y < 0){\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar index = Math.floor(y / grid.getItemHeight());\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn store.$getRootId();\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}\r\n\r\n\tfunction getDropPosition(e){\r\n\t\tvar targetTaskId = getTargetTaskId(e);\r\n\t\tvar relTargetPos = null;\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar config = grid.$getConfig();\r\n\t\tvar lockLevel = !config.order_branch_free;\r\n\r\n\t\tvar eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\r\n\t\tif(targetTaskId !== store.$getRootId()) {\r\n\t\t\tvar rowTop = grid.getItemTop(targetTaskId);\r\n\t\t\tvar rowHeight = grid.getItemHeight();\r\n\t\t\trelTargetPos = (eventTop - rowTop) / rowHeight;\r\n\t\t}\r\n\r\n\t\tvar result;\r\n\t\tif(!lockLevel){\r\n\t\t\tresult = getMultiLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store);\r\n\t\t}else{\r\n\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar target = getDropPosition(e);\r\n\r\n\t\tif(!target || \r\n\t\t\tgantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false){\r\n\t\t\t\ttarget = dropTarget.createDropTargetObject(dnd.config.drop_target);\r\n\t\t\t}\r\n\t\t\r\n\t\thiglighter.highlightPosition(target, dnd.config, grid);\r\n\t\tdnd.config.drop_target = target;\r\n\r\n\t\tthis.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\r\n\t\thiglighter.removeLineHighlight(dnd.config);\r\n\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\t\tvar target = dnd.config.drop_target;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tstore.move(dnd.config.id, target.targetIndex, target.targetParent);\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\t}\r\n\t\tstore.refresh(task.id);\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\t\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\nvar rowDndMarker = require(\"./tasks_grid_dnd_marker\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\tif(config.order_branch == \"marker\"){\r\n\t\t\t\t\t\trowDndMarker.init(grid.$gantt, grid);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tgantt.ext.inlineEditors.destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var helpers = require(\"../../../utils/helpers\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (helpers.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item));\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight();\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;","function createTaskRenderer(gantt){\r\n\tvar defaultRender = require(\"./task_bar_render\")(gantt);\r\n\r\n\treturn function show_children(task, timeline) {\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tvar el = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\tvar sub_tasks = gantt.getChildren(task.id);\r\n\r\n\r\n\t\t\tfor (var i = 0; i < sub_tasks.length; i++) {\r\n\t\t\t\tvar child = gantt.getTask(sub_tasks[i]);\r\n\r\n\t\t\t\tvar element = defaultRender(child, timeline);\r\n\t\t\t\tif(!element)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar padding = Math.floor((gantt.config.row_height - sizes.height) / 2);\r\n\r\n\t\t\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\t\t\telement.className += \" gantt_split_child\";\r\n\r\n\t\t\t\tel.appendChild(element);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tvar pred = gantt.getTask(link.source);\r\n\t\t\tlabels.push(gantt.getWBSCode(pred));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes) {\r\n\t\tvar links = [];\r\n\t\tpredecessorCodes.forEach(function (code) {\r\n\t\t\tvar predecessor = gantt.getTaskByWBSCode(code);\r\n\t\t\tif (predecessor) {\r\n\t\t\t\tvar link = {\r\n\t\t\t\t\tsource: predecessor.id,\r\n\t\t\t\t\ttarget: taskId,\r\n\t\t\t\t\ttype: gantt.config.links.finish_to_start,\r\n\t\t\t\t\tlag: 0\r\n\t\t\t\t};\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[link.source + \"_\" + link.target] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = link.source + \"_\" + link.target;\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node));\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","module.exports = function (gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init() {\r\n\t\tif (!dateToStr) {\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif (!strToDate) {\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\r\n\t\t\tinit();\r\n\t\t\tvar minValue = dateToStr(config.min || gantt.getState().min_date);\r\n\t\t\tvar maxValue = dateToStr(config.max || gantt.getState().max_date);\r\n\r\n\t\t\tvar html = \"<div style='width:140px'><input type='date' min='\" + minValue + \"' max='\" + maxValue + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tif (value && value.getFullYear) {\r\n\t\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.get_input(node).value = value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tparsed = null;// return null will cancel changes\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><select name='\" + column.name + \"'>\";\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = \"<div><input type='number' min='\" + min + \"' max='\" + max + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","module.exports = function(gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif(state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tvar modifiers = command.modifiers;\r\n\r\n\t\t\t\t\t\t\tvar anyModifier = modifiers.alt || modifiers.ctrl || modifiers.meta || modifiers.shift;\r\n\t\t\t\t\t\t\tif(modifiers.alt){\r\n\t\t\t\t\t\t\t\t// don't start editing on alt+key\r\n\t\t\t\t\t\t\t}else if (anyModifier && keyNav.getCommandHandler(command, \"taskCell\")){\r\n\t\t\t\t\t\t\t\t// don't start editing if command already have a keyboard shortcut\r\n\t\t\t\t\t\t\t}else if(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tgantt.focus();\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","module.exports = {\r\n\tinit: function (controller, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tif (controller.isVisible() && controller.isChanged()) {\r\n\t\t\t\tcontroller.save();\r\n\t\t\t} else {\r\n\t\t\t\tcontroller.hide();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function (id, e) {\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif (cell && controller.isVisible() && cell.columnName == state.columnName) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function (controller, placeholder, grid) {\r\n\t\tif (grid.$getConfig().keyboard_navigation) {\r\n\t\t\t// keyboard navigation extension will handle arrows if enabled\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif (e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldPrevent) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonHide: function () {\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\r\n\t}\r\n};\r\n\r\n","var defaultMapping = require(\"./keyboard_mappings/default\");\r\nvar keyNavMappings = require(\"./keyboard_mappings/keyboard_navigation\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","var getKeyboardMapping = require(\"./keyboard_mappings\");\r\nvar textEditorFactory = require(\"./editors/text\"),\r\n\tnumberEditorFactory = require(\"./editors/number\"),\r\n\tselectEditorFactory = require(\"./editors/select\"),\r\n\tdateEditorFactory = require(\"./editors/date\"),\r\n\tpredecessorEditorFactory = require(\"./editors/predecessor\");\r\nvar utils = require(\"../../../../utils/utils\");\r\nvar domHelpers = require(\"../../../../utils/dom_helpers\");\r\nvar eventable = require(\"../../../../utils/eventable\");\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping(gantt);\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tif(!domHelpers.isChildOf(node, grid.$grid)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tleft += cols[i].width;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left,\r\n\t\t\t\theight: height,\r\n\t\t\t\twidth: width\r\n\t\t\t};\r\n\t\t}\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", grid.getColumnIndex(columnName));\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\treturn column.editor;\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif(this.callEvent(\"onBeforeEditStart\", [editorState]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.show(editorState.id, editorState.columnName);\r\n\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, document.body));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\t\t\t\teditor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tthis._editor = editor;\r\n\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif(this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif(this._editor.is_valid(editorState.newValue, editorState.id, editorState.columnName, this._placeholder)){\r\n\r\n\r\n\t\t\t\t\t\tvar mapTo = editorConfig.map_to;\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (mapTo != \"auto\") {\r\n\t\t\t\t\t\t\titem[mapTo] = value;\r\n\t\t\t\t\t\t\tif (mapTo == \"duration\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t} else if (mapTo == \"end_date\") {\r\n\t\t\t\t\t\t\t\titem.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\t\t\t\tstart_date: item.end_date,\r\n\t\t\t\t\t\t\t\t\tduration: -item.duration,\r\n\t\t\t\t\t\t\t\t\ttask: item}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else if (mapTo == \"start_date\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir){\r\n\t\t\t\tif(dir > 0){\r\n\t\t\t\t\treturn gantt.getNext(this._itemId);\r\n\t\t\t\t}else {\r\n\t\t\t\t\treturn  gantt.getPrev(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(){\r\n\t\t\t\tvar row = this.getNextCell(1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(){\r\n\t\t\t\tvar row = this.getNextCell(-1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\nmodule.exports = create;","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function(){}\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;","module.exports = null;","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\t// when doubleclick fired not on task, id === null\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || id === null || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\"),\r\n\tResourceHistogram = require(\"./timeline/resource_histogram\");\r\n\r\n\r\nvar gridEditorsFactory = require(\"./grid/editors/controller\");\r\n\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderSplitTaskBar = require(\"./render/task_split_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\tfactory.registerView(\"resourceHistogram\", ResourceHistogram);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\ttaskSplitBar: renderSplitTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","var utils = require(\"./utils\");\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2018 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.3\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nfunction _drainQueue(queue) {\n    while (queue.length() > 0) {\n        _drainQueueStep(queue);\n    }\n}\n\nfunction _drainQueueStep(queue) {\n    var fn = queue.shift();\n    if (typeof fn !== \"function\") {\n        fn._settlePromises();\n    } else {\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n}\n\nAsync.prototype._drainQueues = function () {\n    _drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    _drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar es5 = _dereq_(\"./es5\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                es5.defineProperty(\n                    eventData, \"promise\", {value: event.promise});\n                es5.defineProperty(eventData, \"reason\", {value: event.reason});\n                var domEvent = new CustomEvent(name.toLowerCase(), eventData);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n        this._dereferenceTrace();\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.3\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var receiver = new FakeConstructor();\n    function ic() {\n        return typeof receiver.foo;\n    }\n    ic();\n    ic();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","module.exports = require(\"bluebird\");","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tutils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tif (this.config && this.config.started) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tthis.config.started = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tcase \"%w\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek, dateHelper.getWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","export default function serialize(data: object | string) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tlet result = \"\";\r\n\r\n\tfor (const key in data) {\r\n\t\tlet serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = data[key];\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n","var env = require(\"../../utils/env\");\r\nvar serialize = require(\"./serialize\").default;\r\n\r\nfunction createConfig(method, args) {\r\n\tvar result = {\r\n\t\tmethod: method\r\n\t};\r\n\r\n\tif (args.length === 0) {\r\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\r\n\t}\r\n\tif (args.length === 1) {\r\n\t\tif (typeof args[0] === \"string\") {\r\n\t\t\tresult.url = args[0];\r\n\t\t\tresult.async = true;\r\n\t\t} else {\r\n\t\t\tresult.url = args[0].url;\r\n\t\t\tresult.async = (args[0].async || true);\r\n\t\t\tresult.callback = args[0].callback;\r\n\t\t\tresult.headers = args[0].headers;\r\n\t\t}\r\n\t\tif (method === \"POST\" || \"PUT\") {\r\n\t\t\tif (args[0].data) {\r\n\t\t\t\tif (typeof args[0].data !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[0].data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[0].data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult.url = args[0];\r\n\tswitch(method) {\r\n\t\tcase \"GET\":\r\n\t\tcase \"DELETE\":\r\n\t\t\tresult.callback = args[1];\r\n\t\t\tresult.headers = args[2];\r\n\t\tbreak;\r\n\t\tcase \"POST\":\r\n\t\tcase \"PUT\":\r\n\t\t\tif (args[1]) {\r\n\t\t\t\tif (typeof args[1] !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[1];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t\tresult.callback = args[2];\r\n\t\t\tresult.headers = args[3];\r\n\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\treturn this._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tgetSync: function(url, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"PUT\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tdel: function(url, onLoad, headers) {\r\n\t\t\t/**\r\n\t\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n\t\t\t * A payload within a DELETE request message has no defined semantics;\r\n\t\t\t * sending a payload body on a DELETE request might cause some existing\r\n\t\t\t * implementations to reject the request.\r\n\t\t\t */\r\n\t\t\tvar config = createConfig(\"DELETE\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad, headers) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpostSync: function(url, postData, headers) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, headers) {\r\n\t\t\treturn new gantt.Promise(function(resolve, reject) {\r\n\t\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new window.ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\t\tif (!!async) {\r\n\t\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresolve(t);\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.open(method, url, async);\r\n\r\n\t\t\t\tif (headers){\r\n\t\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\t\tpostData = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\t\tt.send(postData);\r\n\r\n\t\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t});\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\t\tinherit_calendar: false,\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false\r\n\t};\r\n};\r\n","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};","module.exports = {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","require(\"css/skins/terrace.less\");\r\n\r\nfunction DHXGantt(){\r\n\tthis.constants = require(\"./../constants\");\r\n\tthis.version = VERSION;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\r\n\tgantt.Promise = require(\"../utils/promise\");\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\tgantt.utils = {\r\n\t\tdom: {\r\n\t\t\tgetNodePosition: domHelpers.getNodePosition,\r\n\t\t\tgetRelativeEventPosition: domHelpers.getRelativeEventPosition,\r\n\t\t\tisChildOf: domHelpers.isChildOf,\r\n\t\t\thasClass: domHelpers.hasClass,\r\n\t\t\tclosest: domHelpers.closest\r\n\t\t}\r\n\t};\r\n\r\n\tvar domEvents = require(\"../utils/dom_event_scope\")();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\tvar createLayoutFacade = require(\"./facades/layout\");\r\n\tgantt.mixin(gantt, createLayoutFacade());\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\tvar DataProcessor = require(\"./dataprocessor\");\r\n\tgantt.dataProcessor = DataProcessor.DEPRECATED_api;\r\n\tgantt.createDataProcessor = DataProcessor.createDataProcessor;\r\n\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\trequire(\"./destructor\")(gantt);\r\n\r\n\treturn gantt;\r\n};","module.exports = function(gantt){\r\n\r\n\t// no deprecated methods for now\r\n\r\n\t// eslint-disable-next-line no-unused-vars\r\n\tfunction deprecated(badCode, goodCode, versionDeprecated, versionDeleted) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\t\tversionDeprecated = versionDeprecated || \"v6.0\";\r\n\t\tversionDeleted = versionDeleted || \"v7.0\";\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt \", versionDeprecated, \" and will stop working in \", versionDeleted,\". Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\t// gantt.getSlack is defined inside an extension, leave it without message for now\r\n\r\n};","import * as warnings from \"./core/deprecated_warnings\";\r\nimport * as base from \"./core/gantt\";\r\n\r\n\r\nconst gantt = (window as any).gantt = base();\r\nwarnings(gantt);\r\n\r\nexport default gantt;\r\nexport { gantt };"],"sourceRoot":""}