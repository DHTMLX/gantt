{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./sources/ext/click_drag/selectedRegion.ts","webpack:///./sources/ext/click_drag/eventsManager.ts","webpack:///./sources/ext/click_drag/index.ts","webpack:///./sources/utils/helpers.js","webpack:///./sources/utils/eventable.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","eventable","helpers_1","_countSize","start","end","result","SelectedRegion","config","_this","this","_el","document","createElement","_viewPort","viewPort","classList","add","className","callback","_callback","render","_startPoint","_endPoint","draw","isEventable","_singleRow","singleRow","_useRequestAnimationFrame","useRequestAnimationFrame","setStyles","height","gantt","row_height","style","top","Math","ceil","_positionPoint","relative","width","left","requestAnimationFrame","append","getElement","clear","parentNode","removeChild","getViewPort","setStart","startPoint","_startDate","dateFromPos","callEvent","setEnd","endPoint","_endDate","absolute","setPosition","positionPoint","dragEnd","valueOf","_a","tasksByTime","getTaskByTime","tasksByIndex","_getTasksByTop","getInBounds","startValue","endValue","startIndex","endIndex","getTaskByIndex","push","EventsManager","_mouseDown","_eventsIds","attach","selectedRegion","useKey","_target","_originPosition","getComputedStyle","display","_restoreOriginPosition","position","state","$services","getService","registerProvider","autoscroll","scheduledDndCoordinates","length","event","utils","dom","closest","target","_getCoordinates","body","coordinates","abs","detach","forEach","eventId","eventRemove","unregisterProvider","destructor","viewPortBounds","getBoundingClientRect","clientX","clientY","scrollLeft","scrollTop","eventsManager_1","selectedRegion_1","ext","defaultConfig","undefined","eventsManager","clickDrag","attachEvent","__assign","$task_data","click_drag","units","second","minute","hour","day","week","month","quarter","year","arrayFilter","arr","filter","getSecondsInUnit","unit","workArray","slice","arrayMap","map","resArray","arrayFind","find","arrayDifference","item","arraySome","hashToArray","hash","sortArrayOfHash","field","desc","compare","b","sort","throttle","timeout","wait","apply","arguments","setTimeout","isArray","obj","Array","pop","isDate","getFullYear","getMonth","getDate","isStringObject","Function","toString","constructor","isNumberObject","isBooleanObject","delay","timer","$cancelTimeout","$pending","args","clearTimeout","$execute","objectKeys","keys","w","webkitRequestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","cb","detachEvent","EventHost","_connected","_silent_mode","_silentStart","_silentEnd","createEventStorage","dhx_catch","z","res","zr","addEvent","ev","removeEvent","id","eventHost","catcher","callObj","toLowerCase","attachAll","arg0","handlerName","concat","checkEvent","list","split","eventName","detachAllEvents","indexOf"],"mappings":"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","file":"ext/dhtmlxgantt_click_drag.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 208);\n","import * as eventable from \"../../utils/eventable\";\nimport { isEventable, requestAnimationFrame } from \"../../utils/helpers\";\ndeclare const gantt;\n\nexport interface ISelectedRegionConfig {\n\tclassName?: string;\n\trender?: (startPoint: IPoint, endPoint: IPoint) => HTMLElement;\n\tviewPort?: HTMLElement;\n\tuseRequestAnimationFrame: boolean;\n\tcallback?: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\n\tsingleRow: boolean;\n}\n\ninterface ICoordinates {\n\tleft: number;\n\ttop: number;\n}\n\nexport interface IPoint {\n\tabsolute: ICoordinates;\n\trelative: ICoordinates;\n}\n\n\nfunction _countSize(start: number, end: number) {\n\tconst result = start - end;\n\tif (result >= 0) {\n\t\treturn result;\n\t}\n\treturn -result;\n}\n\nexport class SelectedRegion {\n\tprivate _viewPort: HTMLElement & eventable;\n\tprivate _el: HTMLElement = document.createElement(\"div\");\n\tprivate _callback: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\n\tprivate _startPoint: IPoint;\n\tprivate _endPoint: IPoint;\n\tprivate _positionPoint: IPoint;\n\tprivate _useRequestAnimationFrame: boolean;\n\tprivate _startDate: Date;\n\tprivate _endDate: Date;\n\tprivate _singleRow: boolean;\n\tconstructor(config: ISelectedRegionConfig) {\n\t\tthis._viewPort = config.viewPort;\n\t\tthis._el.classList.add(config.className);\n\t\tif (typeof config.callback === \"function\") {\n\t\t\tthis._callback = config.callback;\n\t\t}\n\t\tif (typeof config.render === \"function\") {\n\t\t\tthis.render = () => {\n\t\t\t\tthis._el = config.render(this._startPoint, this._endPoint);\n\t\t\t\tif (config.className !== \"\") {\n\t\t\t\t\tthis._el.classList.add(config.className);\n\t\t\t\t}\n\t\t\t\tthis.draw();\n\t\t\t};\n\t\t}\n\t\tif (!isEventable(this._viewPort)) {\n\t\t\teventable(this._viewPort);\n\t\t}\n\t\tthis._singleRow = config.singleRow;\n\t\tthis._useRequestAnimationFrame = config.useRequestAnimationFrame;\n\t}\n\n\tsetStyles() {\n\t\tif (this._singleRow) {\n\t\t\tconst height = gantt.config.row_height;\n\t\t\tthis._el.style.height = height + \"px\";\n\t\t\tthis._el.style.top = (Math.ceil(this._positionPoint.relative.top / height) - 1) * height + \"px\";\n\t\t} else {\n\t\t\tthis._el.style.height = _countSize(this._endPoint.relative.top, this._startPoint.relative.top) + \"px\";\n\t\t\tthis._el.style.top = this._positionPoint.relative.top + \"px\";\n\t\t}\n\t\tthis._el.style.width = _countSize(this._endPoint.relative.left, this._startPoint.relative.left) + \"px\";\n\t\tthis._el.style.left = this._positionPoint.relative.left + \"px\";\n\t}\n\n\trender() {\n\t\tthis.setStyles();\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tif (this._useRequestAnimationFrame) {\n\t\t\treturn requestAnimationFrame(() => {\n\t\t\t\tthis._viewPort.append(this.getElement());\n\t\t\t});\n\t\t} else {\n\t\t\tthis._viewPort.append(this.getElement());\n\t\t}\n\t}\n\n\tclear() {\n\t\tif (this._useRequestAnimationFrame) {\n\t\t\treturn requestAnimationFrame(() => {\n\t\t\t\tif (!this._el.parentNode) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._viewPort.removeChild(this._el);\n\t\t\t});\n\t\t} else {\n\t\t\tif (!this._el.parentNode) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._viewPort.removeChild(this._el);\n\t\t}\n\t}\n\n\tgetElement() {\n\t\treturn this._el;\n\t}\n\n\tgetViewPort() {\n\t\treturn this._viewPort;\n\t}\n\n\tsetStart(startPoint: IPoint) {\n\t\tthis._startPoint = startPoint;\n\t\tthis._startDate = gantt.dateFromPos(this._startPoint.relative.left);\n\t\tthis._viewPort.callEvent(\"onBeforeDrag\", [this._startPoint]);\n\t}\n\n\tsetEnd(endPoint: IPoint) {\n\t\tthis._endPoint = endPoint;\n\t\tif (this._singleRow) {\n\t\t\tconst height = gantt.config.row_height;\n\t\t\tthis._endPoint.relative.top = (Math.ceil(this._startPoint.relative.top / height)) * height;\n\t\t}\n\t\tthis._endDate = gantt.dateFromPos(this._endPoint.relative.left);\n\t\tif (this._startPoint.relative.left > this._endPoint.relative.left) {\n\t\t\tthis._positionPoint = {\n\t\t\t\trelative: { left: this._endPoint.relative.left, top: this._positionPoint.relative.top },\n\t\t\t\tabsolute: { left: this._endPoint.absolute.left, top: this._positionPoint.absolute.top }\n\t\t\t};\n\t\t}\n\t\tif (this._startPoint.relative.top > this._endPoint.relative.top) {\n\t\t\tthis._positionPoint = {\n\t\t\t\trelative: { left: this._positionPoint.relative.left, top: this._endPoint.relative.top },\n\t\t\t\tabsolute: { left: this._positionPoint.absolute.left, top: this._endPoint.absolute.top }\n\t\t\t};\n\t\t}\n\n\n\t\tthis._viewPort.callEvent(\"onDrag\", [this._startPoint, this._endPoint]);\n\t}\n\n\tsetPosition(positionPoint: IPoint) {\n\t\tthis._positionPoint = positionPoint;\n\t}\n\n\tdragEnd(endPoint: IPoint) {\n\t\tthis._viewPort.callEvent(\"onBeforeDragEnd\", [this._startPoint, endPoint]);\n\t\tthis.setEnd(endPoint);\n\t\tif (this._startDate.valueOf() > this._endDate.valueOf()) {\n\t\t\t[ this._startDate, this._endDate ] = [ this._endDate, this._startDate ];\n\t\t}\n\t\tthis.clear();\n\t\tconst tasksByTime = gantt.getTaskByTime(this._startDate, this._endDate);\n\t\tconst tasksByIndex = this._getTasksByTop(this._startPoint.relative.top, this._endPoint.relative.top);\n\n\t\tthis._viewPort.callEvent(\"onDragEnd\", [this._startPoint, this._endPoint]);\n\t\tif (this._callback) {\n\t\t\tthis._callback(this._startPoint, this._endPoint, this._startDate, this._endDate, tasksByTime, tasksByIndex);\n\t\t}\n\t}\n\n\tgetInBounds() {\n\t\treturn this._singleRow;\n\t}\n\n\tprivate _getTasksByTop(start: number, end:number) {\n\t\tlet startValue = start;\n\t\tlet endValue = end;\n\t\tif (start > end) {\n\t\t\tstartValue = end;\n\t\t\tendValue = start;\n\t\t}\n\t\tconst height = gantt.config.row_height;\n\t\tconst startIndex = Math.ceil(startValue / height) - 1;\n\t\tconst endIndex = Math.ceil(endValue / height) - 1;\n\t\tconst result = [];\n\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\tconst task = gantt.getTaskByIndex(i);\n\t\t\tif (task) {\n\t\t\t\tresult.push(gantt.getTaskByIndex(i));\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}","import { SelectedRegion } from \"./selectedRegion\";\n\ndeclare const gantt;\nexport class EventsManager {\n\tprivate _mouseDown: boolean = false;\n\tprivate _eventsIds: number[] = [];\n\tprivate _originPosition: string;\n\tprivate _restoreOriginPosition: () => void;\n\tconstructor() {\n\t}\n\n\tattach(selectedRegion: SelectedRegion, useKey?: \"shiftKey\" | \"ctrlKey\" | \"altKey\"): void {\n\t\tconst _target = selectedRegion.getViewPort();\n\t\tthis._originPosition = window.getComputedStyle(_target).display;\n\t\tthis._restoreOriginPosition = () => {\n\t\t\t_target.style.position = this._originPosition;\n\t\t};\n\t\tif (this._originPosition === \"static\") {\n\t\t\t_target.style.position = \"relative\";\n\t\t}\n\t\tconst state = gantt.$services.getService(\"state\");\n\t\tstate.registerProvider(\"clickDrag\", () => {\n\t\t\tconst result = { autoscroll: false };\n\t\t\treturn result;\n\t\t});\n\n\n\t\tlet scheduledDndCoordinates = null;\n\t\tconst startDragAndDrop = () => {\n\t\t\tif (!scheduledDndCoordinates) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._mouseDown = true;\n\t\t\tselectedRegion.setStart(scheduledDndCoordinates);\n\t\t\tselectedRegion.setPosition(scheduledDndCoordinates);\n\t\t\tselectedRegion.setEnd(scheduledDndCoordinates);\n\t\t\tscheduledDndCoordinates = null;\n\t\t};\n\n\t\tthis._eventsIds[this._eventsIds.length] = gantt.event(_target, \"mousedown\", (event) => {\n\t\t\tscheduledDndCoordinates = null;\n\t\t\tif (gantt.utils.dom.closest(event.target, \".gantt_task_line, .gantt_task_link\")) { return; }\n\t\t\tstate.registerProvider(\"clickDrag\", () => {\n\t\t\t\tconst result = { autoscroll: this._mouseDown };\n\t\t\t\treturn result;\n\t\t\t});\n\n\t\t\tif (useKey && event[useKey] !== true) { return; }\n\t\t\tscheduledDndCoordinates = this._getCoordinates(event, selectedRegion);\n\t\t});\n\n\t\tthis._eventsIds[this._eventsIds.length] = gantt.event(document.body, \"mouseup\", (event) => {\n\t\t\tscheduledDndCoordinates = null;\n\t\t\tif (useKey && event[useKey] !== true) { return; }\n\t\t\tif (this._mouseDown === true) {\n\t\t\t\tthis._mouseDown = false;\n\t\t\t\tconst coordinates = this._getCoordinates(event, selectedRegion);\n\t\t\t\tselectedRegion.dragEnd(coordinates);\n\t\t\t}\n\t\t});\n\t\tthis._eventsIds[this._eventsIds.length] = gantt.event(_target, \"mousemove\", (event) => {\n\t\t\tif (useKey && event[useKey] !== true) { return; }\n\t\t\tlet coordinates = null;\n\t\t\tif(!this._mouseDown && scheduledDndCoordinates){\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\n\t\t\t\tif(Math.abs(scheduledDndCoordinates.relative.left - coordinates.relative.left) > 5){\n\t\t\t\t\t// add small threshold not to start dnd on simple click\n\t\t\t\t\tstartDragAndDrop();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._mouseDown === true) {\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\n\t\t\t\tselectedRegion.setEnd(coordinates);\n\t\t\t\tselectedRegion.render();\n\t\t\t}\n\t\t});\n\t}\n\n\tdetach(): void {\n\t\tthis._restoreOriginPosition();\n\t\tthis._eventsIds.forEach((eventId) => {\n\t\t\tgantt.eventRemove(eventId);\n\t\t});\n\t\tconst state = gantt.$services.getService(\"state\");\n\t\tstate.unregisterProvider(\"clickDrag\");\n\t}\n\n\tdestructor(): void {\n\t\tthis.detach();\n\t}\n\n\tprivate _getCoordinates(event: MouseEvent, selectedRegion: SelectedRegion) {\n\t\tconst viewPort = selectedRegion.getViewPort();\n\t\tconst viewPortBounds = viewPort.getBoundingClientRect();\n\t\tconst { clientX, clientY } = event;\n\t\tconst result = {\n\t\t\tabsolute: {\n\t\t\t\tleft: clientX,\n\t\t\t\ttop: clientY,\n\t\t\t},\n\t\t\trelative: {\n\t\t\t\tleft: clientX - viewPortBounds.left + viewPort.scrollLeft,\n\t\t\t\ttop: clientY - viewPortBounds.top + viewPort.scrollTop\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n}","import { EventsManager } from \"./eventsManager\";\nimport { ISelectedRegionConfig, SelectedRegion } from \"./selectedRegion\";\ndeclare const gantt;\nif (!gantt.ext) {\n\tgantt.ext = {};\n}\n\nconst defaultConfig: ISelectedRegionConfig = {\n\tclassName: \"gantt_click_drag_rect\",\n\tuseRequestAnimationFrame: true,\n\tcallback: undefined,\n\tsingleRow: false\n};\n\nconst eventsManager = new EventsManager();\n\ngantt.ext.clickDrag = eventsManager;\n\ngantt.attachEvent(\"onGanttReady\", () => {\n\tconst config: ISelectedRegionConfig = { viewPort: gantt.$task_data, ...defaultConfig };\n\tif (gantt.config.click_drag) {\n\t\tconst clickDrag = gantt.config.click_drag;\n\t\tconfig.render = clickDrag.render || defaultConfig.render;\n\t\tconfig.className = clickDrag.className || defaultConfig.className;\n\t\tconfig.callback = clickDrag.callback || defaultConfig.callback;\n\t\tconfig.viewPort = clickDrag.viewPort || gantt.$task_data;\n\t\tconfig.useRequestAnimationFrame = clickDrag.useRequestAnimationFrame === undefined ?\n\t\t\tdefaultConfig.useRequestAnimationFrame : clickDrag.useRequestAnimationFrame;\n\n\t\tconfig.singleRow = clickDrag.singleRow === undefined ? defaultConfig.singleRow : clickDrag.singleRow;\n\t\tconst selectedRegion = new SelectedRegion(config);\n\t\tgantt.ext.clickDrag.attach(selectedRegion, clickDrag.useKey);\n\t}\n});\n\ngantt.attachEvent(\"onDestroy\", () => {\n\teventsManager.destructor();\n});\n","var units = {\n\t\"second\": 1,\n\t\"minute\": 60,\n\t\"hour\": 60 * 60,\n\t\"day\": 60 * 60 * 24,\n\t\"week\": 60 * 60 * 24 * 7,\n\t\"month\": 60 * 60 * 24 * 30,\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\n\t\"year\": 60 * 60 * 24 * 365\n};\nfunction getSecondsInUnit(unit){\n\treturn units[unit] || units.hour;\n}\n\nfunction forEach(arr, callback) {\n\tif (arr.forEach) {\n\t\tarr.forEach(callback);\n\t} else {\n\t\tvar workArray = arr.slice();\n\t\tfor (var i = 0; i < workArray.length; i++) {\n\t\t\tcallback(workArray[i], i);\n\t\t}\n\t}\n}\n\nfunction arrayMap(arr, callback) {\n\tif (arr.map) {\n\t\treturn arr.map(callback);\n\t} else {\n\t\tvar workArray = arr.slice();\n\t\tvar resArray = [];\n\n\t\tfor (var i = 0; i < workArray.length; i++) {\n\t\t\tresArray.push(callback(workArray[i], i));\n\t\t}\n\t\treturn resArray;\n\t}\n}\n\n\nfunction arrayFind(arr, callback) {\n\tif (arr.find) {\n\t\treturn arr.find(callback);\n\t} else {\n\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\tif (callback(arr[i], i)) {\n\t\t\t\treturn arr[i];\n\t\t\t}\n\t\t}\n\t}\n}\n\n// iframe-safe array type check instead of using instanceof\nfunction isArray(obj){\n\tif(Array.isArray){\n\t\treturn Array.isArray(obj);\n\t}else{\n\t\t// close enough\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\n\t}\n}\n\n// non-primitive string object, e.g. new String(\"abc\")\nfunction isStringObject(obj){\n\treturn obj && typeof obj === \"object\"\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\n}\n\n// non-primitive number object, e.g. new Number(5)\nfunction isNumberObject(obj){\n\treturn obj && typeof obj === \"object\"\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\n}\n\n// non-primitive number object, e.g. new Boolean(true)\nfunction isBooleanObject(obj){\n\treturn obj && typeof obj === \"object\"\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\n}\n\nfunction isDate(obj) {\n\tif (obj && typeof obj === \"object\") {\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction arrayFilter(arr, callback) {\n\tvar result = [];\n\n\tif (arr.filter) {\n\t\treturn arr.filter(callback);\n\t} else {\n\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\tif (callback(arr[i], i)) {\n\t\t\t\tresult[result.length] = arr[i];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nfunction hashToArray(hash) {\n\tvar result = [];\n\n\tfor (var key in hash) {\n\t\tif (hash.hasOwnProperty(key)) {\n\t\t\tresult.push(hash[key]);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction arraySome(arr, callback) {\n\tif (arr.length === 0) return false;\n\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (callback(arr[i], i, arr)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction arrayDifference(arr, callback) {\n\treturn arrayFilter(arr, function(item, i) {\n\t\treturn !callback(item, i);\n\t});\n}\n\nfunction throttle (callback, timeout) {\n\tvar wait = false;\n\n\treturn function () {\n\t\tif (!wait) {\n\t\t\tcallback.apply(null, arguments);\n\t\t\twait = true;\n\t\t\tsetTimeout(function () {\n\t\t\t\twait = false;\n\t\t\t}, timeout);\n\t\t}\n\t};\n}\n\nfunction delay (callback, timeout){\n\tvar timer;\n\n\tvar result = function() {\n\t\tresult.$cancelTimeout();\n\t\tcallback.$pending = true;\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\ttimer = setTimeout(function(){\n\t\t\tcallback.apply(this, args);\n\t\t\tresult.$pending = false;\n\t\t}, timeout);\n\t};\n\t\n\tresult.$pending = false;\n\tresult.$cancelTimeout = function(){\n\t\tclearTimeout(timer);\n\t\tcallback.$pending = false;\n\t};\n\tresult.$execute = function(){\n\t\tcallback();\n\t\tcallback.$cancelTimeout();\n\t};\n\n\treturn result;\n}\n\nfunction sortArrayOfHash(arr, field, desc) {\n\tvar compare = function(a, b) {\n\t\treturn a < b;\n\t};\n\n\tarr.sort(function(a, b) {\n\t\tif (a[field] === b[field]) return 0;\n\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\n\t});\n}\n\nfunction objectKeys(obj) {\n\tif (Object.keys) {\n\t\treturn Object.keys(obj);\n\t}\n\tvar result = [];\n\tvar key;\n\tfor (key in obj) {\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction requestAnimationFrame(callback) {\n\tvar w = window;\n\tvar foundRequestAnimationFrame = w.requestAnimationFrame\n\t\t|| w.webkitRequestAnimationFrame\n\t\t|| w.msRequestAnimationFrame\n\t\t|| w.mozRequestAnimationFrame\n\t\t|| w.oRequestAnimationFrame\n\t\t|| function(cb) { setTimeout(cb, 1000/60); };\n\treturn foundRequestAnimationFrame(callback);\n}\n\nfunction isEventable(obj) {\n\treturn obj.attachEvent && obj.detachEvent;\n}\n\nmodule.exports = {\n\tgetSecondsInUnit: getSecondsInUnit,\n\tforEach: forEach,\n\tarrayMap: arrayMap,\n\tarrayFind: arrayFind,\n\tarrayFilter: arrayFilter,\n\tarrayDifference: arrayDifference,\n\tarraySome: arraySome,\n\thashToArray: hashToArray,\n\tsortArrayOfHash: sortArrayOfHash,\n\tthrottle: throttle,\n\tisArray: isArray,\n\tisDate: isDate,\n\tisStringObject: isStringObject,\n\tisNumberObject: isNumberObject,\n\tisBooleanObject: isBooleanObject,\n\tdelay: delay,\n\tobjectKeys: objectKeys,\n\trequestAnimationFrame: requestAnimationFrame,\n\tisEventable: isEventable\n};","var EventHost = function(){\n\tthis._connected = [];\n\tthis._silent_mode = false;\n};\n\nEventHost.prototype = {\n\t_silentStart: function() {\n\t\tthis._silent_mode = true;\n\t},\n\t_silentEnd: function() {\n\t\tthis._silent_mode = false;\n\t}\n};\n\nvar\tcreateEventStorage = function(obj) {\n\tvar dhx_catch = [];\n\tvar z = function(){\n\t\tvar res = true;\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\n\t\t\tif (dhx_catch[i]){\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\n\t\t\t\tres=res&&zr;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t};\n\tz.addEvent=function(ev){\n\t\tif (typeof (ev) == \"function\")\n\t\t\treturn dhx_catch.push(ev)-1;\n\t\treturn false;\n\t};\n\tz.removeEvent=function(id){\n\t\tdhx_catch[id]=null;\n\t};\n\treturn z;\n};\n\nfunction makeEventable(obj){\n\n\tvar eventHost = new EventHost();\n\tobj.attachEvent=function(name, catcher, callObj){\n\t\tname='ev_'+name.toLowerCase();\n\t\tif (!eventHost[name])\n\t\t\teventHost[name] = createEventStorage(callObj||this);\n\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\n\t};\n\tobj.attachAll = function(callback, callObj){\n\t\tthis.attachEvent('listen_all', callback, callObj);\n\t};\n\n\tobj.callEvent=function(name, arg0, callObj){\n\t\tif (eventHost._silent_mode) return true;\n\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\n\n\t\tif (eventHost['ev_listen_all']){\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\n\t\t}\n\n\t\tif (eventHost[handlerName])\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\n\t\treturn true;\n\t};\n\tobj.checkEvent=function(name){\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\n\t};\n\tobj.detachEvent=function(id){\n\t\tif (id){\n\t\t\tvar list = id.split(':');//get EventName and ID\n\t\t\tvar eventName = list[0];\n\t\t\tvar eventId = list[1];\n\n\t\t\tif(eventHost[eventName]){\n\t\t\t\teventHost[eventName].removeEvent(eventId); //remove event\n\t\t\t}\n\t\t}\n\t};\n\tobj.detachAllEvents = function(){\n\t\tfor (var name in eventHost){\n\t\t\tif (name.indexOf(\"ev_\") === 0)\n\t\t\t\tdelete eventHost[name];\n\t\t}\n\t};\n\n}\n\nmodule.exports = makeEventable;"],"sourceRoot":""}